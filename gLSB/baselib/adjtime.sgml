<REFENTRY ID="baselib-adjtime-2"> <REFMETA>
<REFENTRYTITLE>adjtime</REFENTRYTITLE>
<REFMISCINFO>Base Libraries</REFMISCINFO>
</REFMETA>
<REFNAMEDIV>
<REFNAME>adjtime
</REFNAME>
<REFPURPOSE>
correct the time to allow synchronization of the system clock
</REFPURPOSE>
</REFNAMEDIV>

<REFSYNOPSISDIV>
<REFSYNOPSISDIVINFO>
<DATE>23 April  2001</DATE>
</REFSYNOPSISDIVINFO>
<SYNOPSIS>
 #include &lt;time.h>

     int adjtime(const struct timeval *delta, struct timeval *olddelta);
</SYNOPSIS>
</REFSYNOPSISDIV>

<REFSECT1>
<REFSECT1INFO>
<DATE>23 April 2001</DATE>
</REFSECT1INFO>
<TITLE>Description
</TITLE>
<PARA>
     Adjtime() makes small adjustments to the system time, as returned by
     gettimeofday(2),  advancing or retarding it by the time specified by the
     timeval delta. If delta is negative, the clock is slowed down by incrementing 
	it more slowly than normal until the correction is complete.  If
     delta is positive, a larger increment than normal is used.  The skew used
     to perform the correction is generally a fraction of one percent.  Thus,
     the time is always a monotonically increasing function.  A time correction 
	from an earlier call to adjtime() may not be finished when adjtime()
     is called again.  If olddelta is non-nil, the structure pointed to will
     contain, upon return, the number of microseconds still to be corrected
     from the earlier call.
</PARA><PARA>

     This call may be used by time servers that synchronize the clocks of computers 
	in a local area network.  Such time servers would slow down the
     clocks of some machines and speed up the clocks of others to bring them
     to the average network time.
</PARA><PARA>

     The call adjtime() is restricted to the super-user.
</PARA>
</REFSECT1>

<REFSECT1>
<TITLE>
RETURN VALUES
</TITLE>
<PARA>
     A return value of 0 indicates that the call succeeded.  A return value of
     -1 indicates that an error occurred, and in this case an error code is
     stored in the global variable errno.
</PARA>
</REFSECT1>

<REFSECT1>
<TITLE>
ERRORS
</TITLE>
<PARA>
     Adjtime() will fail if:
</PARA>
<VARIABLELIST>
<VARLISTENTRY>
<TERM>
     [EFAULT]   
</TERM>
<LISTITEM>
<PARA>
An argument points outside the process's allocated address space.
</PARA>
</LISTITEM>
</VARLISTENTRY>

<VARLISTENTRY>
<TERM>
     [EPERM]       
</TERM>
<LISTITEM>
<PARA>
The process's effective user ID is not that of the super-user.
</PARA>
</LISTITEM>
</VARLISTENTRY>

</VARIABLELIST>
</REFSECT1>
<!-- This data is part of a licensed program from BERKELEY SOFTWARE DESIGN, INC. -->
<!-- Portions are copyrighted by BSDI, The Regents of the University of California, -->
<!-- Massachusetts Institute of Technology, Free Software Foundation, and others.  -->
</REFENTRY>
