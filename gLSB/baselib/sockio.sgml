<REFENTRY ID="baselib-sockio-2"> <REFMETA>
<REFENTRYTITLE>sockio</REFENTRYTITLE>
<REFMISCINFO>Base Libraries</REFMISCINFO>
</REFMETA>
<REFNAMEDIV>
<REFNAME>sockio
</REFNAME>
<REFPURPOSE>
socket ioctl commands
</REFPURPOSE>
</REFNAMEDIV>

<REFSYNOPSISDIV>
<REFSYNOPSISDIVINFO>
<DATE>29 August 2002</DATE>
</REFSYNOPSISDIVINFO>
<FUNCSYNOPSIS>
<FUNCSYNOPSISINFO>
#include &lt;sys/socket.h&gt;
#include &lt;net/if.h&gt;
</FUNCSYNOPSISINFO>
<FUNCPROTOTYPE>
 <FUNCDEF>int 
  <FUNCTION>ioctl</FUNCTION></FUNCDEF>
 <PARAMDEF>int 
  <PARAMETER><REPLACEABLE>sockfd</REPLACEABLE></PARAMETER></PARAMDEF>
 <PARAMDEF>int 
  <PARAMETER><REPLACEABLE>request</REPLACEABLE></PARAMETER></PARAMDEF>
 <PARAMDEF>char 
  <PARAMETER><REPLACEABLE>*argp</REPLACEABLE></PARAMETER></PARAMDEF>
</FUNCPROTOTYPE>
</FUNCSYNOPSIS>
</REFSYNOPSISDIV>

<REFSECT1>
<REFSECT1INFO>
<DATE>29 August 2002</DATE>
</REFSECT1INFO>
<TITLE>Description
</TITLE>
<PARA>
Socket <EMPHASIS>ioctl</EMPHASIS> commands are a subset of the 
<FUNCTION>ioctl</FUNCTION> calls, which can perform a variety of 
functions on sockets. <PARAMETER>sockfd</PARAMETER> must contain 
the value of a file descriptor that was created with the 
<FUNCTION>socket</FUNCTION> or <FUNCTION>accept</FUNCTION> calls.
</PARA>
<PARA>
Socket <EMPHASIS>ioctl</EMPHASIS> commands apply to the underlying 
network interfaces, and affect the entire system, not just the file 
descriptor used to issue the <FUNCTION>ioctl</FUNCTION>.
</PARA>
<PARA>
The following <FUNCTION>ioctl</FUNCTION>s are provided:
</PARA>
<VARIABLELIST>

<VARLISTENTRY>
<TERM>
SIOCGIFCONF
</TERM>
<LISTITEM>
<PARA>
Gets the interface configuration list for the system.
<FOOTNOTE>
<PARA>
<SYMBOL>SIOCGIFCONF</SYMBOL> is similar to the 
<FUNCTION>if_nameindex</FUNCTION> family found in the
<CITETITLE PUBWORK="BOOK">Single UNIX Specification, 
Version 3</CITETITLE> or the <FUNCTION>getifaddrs</FUNCTION> 
family found in <ACRONYM>BSD</ACRONYM>.
</PARA>
</FOOTNOTE>
<PARAMETER>argp</PARAMETER> is a pointer to a
<STRUCTNAME>ifconf</STRUCTNAME> structure. Before calling, the caller 
must allocate the <STRUCTFIELD>ifc_ifcu.ifcu_req</STRUCTFIELD> field 
to point to an array of <STRUCTNAME>ifreq</STRUCTNAME> structures, and 
set <STRUCTFIELD>if_len</STRUCTFIELD> to the size of this allocated 
array (in bytes). Upon return, <STRUCTFIELD>if_len</STRUCTFIELD> 
will contain the amount of the array which was actually used (again, 
in bytes).  If it is the same as the length upon calling, the caller 
should assume that the array was too small and try again with a 
larger array.
</PARA>
<PARA>
On success, <SYMBOL>SIOCGIFCONF</SYMBOL> can return any nonnegative value.
<FOOTNOTE>
<PARA>
Historical UNIX systems disagree on the meaning of the return value.
</PARA>
</FOOTNOTE>
</PARA>
</LISTITEM>
</VARLISTENTRY>

<VARLISTENTRY>
<TERM>
SIOCGIFFLAGS  
</TERM>
<LISTITEM>
<PARA>
Gets the interface flags for the indicated interface.
<PARAMETER>argp</PARAMETER> is a pointer to a 
<STRUCTNAME>ifreq</STRUCTNAME> structure. Before calling, the 
caller should fill in the <STRUCTFIELD>ifr_name</STRUCTFIELD> 
field with the interface name, and upon return, the 
<STRUCTFIELD>ifr_ifru.ifru_flags</STRUCTFIELD> field is set 
with the interface flags.
</PARA>
</LISTITEM>
</VARLISTENTRY>

<VARLISTENTRY>
<TERM>
SIOCGIFADDR  
</TERM>
<LISTITEM>
<PARA>
Gets the interface address list for the system. 
<PARAMETER>argp</PARAMETER> is a pointer to a
<STRUCTNAME>ifreq</STRUCTNAME> structure. Before calling, the 
caller should fill in the <STRUCTFIELD>ifr_name</STRUCTFIELD> 
field with the interface name, and upon return, the 
<STRUCTFIELD>ifr_ifru.ifru_addr</STRUCTFIELD> field is set 
with the interface address.
</PARA>
</LISTITEM>
</VARLISTENTRY>

<VARLISTENTRY>
<TERM>
SIOCGIFNETMASK  
</TERM>
<LISTITEM>
<PARA>
Gets the network mask for the indicated interface. 
<PARAMETER>argp</PARAMETER> is a pointer to a
<STRUCTNAME>ifreq</STRUCTNAME> structure. Before calling, the 
caller should fill in the <STRUCTFIELD>ifr_name</STRUCTFIELD> 
field with the interface name, and upon return, the 
<STRUCTFIELD>ifr_ifru.ifru_netmask</STRUCTFIELD> field is set 
with the network mask.
</PARA>
</LISTITEM>
</VARLISTENTRY>

</VARIABLELIST>

<PARA>
The <STRUCTNAME>sockaddr</STRUCTNAME> structure is as specified in 
the <CITETITLE PUBWORK="BOOK">Single UNIX Specification</CITETITLE>.
</PARA>

</REFSECT1>

<REFSECT1>
<TITLE>Return Value
</TITLE>
<PARA>
On success, the global variable <VARNAME>errno</VARNAME> is set to 
<RETURNVALUE>0</RETURNVALUE>. On error, <RETURNVALUE>-1</RETURNVALUE>
is returned.
</PARA>
</REFSECT1>

<REFSECT1>
<TITLE>Errors
</TITLE>
<VARIABLELIST>
<VARLISTENTRY>
<TERM>
EBADF  
</TERM>
<LISTITEM>
<PARA>
<PARAMETER>sockfd</PARAMETER> is not a valid descriptor.
</PARA>
</LISTITEM>
</VARLISTENTRY>

<VARLISTENTRY>
<TERM>
EFAULT 
</TERM>
<LISTITEM>
<PARA>
<PARAMETER>argp</PARAMETER> references an inaccessible memory area.
</PARA>
</LISTITEM>
</VARLISTENTRY>

<VARLISTENTRY>
<TERM>
ENOTTY 
</TERM>
<LISTITEM>
<PARA>
<PARAMETER>sockfd</PARAMETER> is not associated with a character 
special device.
</PARA>
</LISTITEM>
</VARLISTENTRY>

<VARLISTENTRY>
<TERM>
ENOTTY 
</TERM>
<LISTITEM>
<PARA>
The specified <PARAMETER>request</PARAMETER> does not apply to the kind of 
object that the descriptor <PARAMETER>sockfd</PARAMETER> references.
</PARA>
</LISTITEM>
</VARLISTENTRY>

<VARLISTENTRY>
<TERM>
EINVAL 
</TERM>
<LISTITEM>
<PARA>
<PARAMETER>request</PARAMETER> and <PARAMETER>argp</PARAMETER> are not valid.
</PARA>
</LISTITEM>
</VARLISTENTRY>

</VARIABLELIST>
</REFSECT1>

</REFENTRY>
