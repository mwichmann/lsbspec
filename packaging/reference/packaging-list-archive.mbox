From veillard@tux.w3.org  Mon Jun 21 11:16:00 1999
Return-Path: <veillard@tux.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA00913;
	Mon, 21 Jun 1999 11:15:57 -0400
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA12785;
	Mon, 21 Jun 1999 11:15:56 -0400
Received: from tux.w3.org (veillard@tux.w3.org [18.29.0.27])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA15020;
	Mon, 21 Jun 1999 11:15:55 -0400
Received: (from veillard@localhost)
	by tux.w3.org (8.9.3/8.9.3) id LAA14781;
	Mon, 21 Jun 1999 11:15:46 -0400
Date: Mon, 21 Jun 1999 11:15:46 -0400
From: Daniel Veillard <Daniel.Veillard@w3.org>
To: leader@debian.org, msw@redhat.com, Daniel.Veillard@w3.org
Cc: dpkg2@lists.wiggy.net, ewt@redhat.com, jbj@redhat.com
Subject: Minutes of the RPM/DPKG unification meeting
Message-ID: <19990621111546.E6720@w3.org>
Reply-To: Daniel.Veillard@w3.org
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.5us
Organization: World Wide Web Consortium (W3C http://www.w3.org/)
Status: RO
Content-Length: 6074
Lines: 170

[ those are my minutes of the meeting held last friday in Paris on the subject.
  They were not reviewed, seems that the momentum to go forward is serious
  and will lead to interoperability soon if some time is allocated.
  I would be happy to host a mailing-list on the subject if this is
  considered useful,   Daniel ]


		 Minutes of the RPM/DPKG unification meeting
		        June 18, Linux Expo, Paris


Attendance:
----------
    Wichert Akkerman, Debian, leader@debian.org
    Matt Wilson, RedHat, msw@redhat.com
    Daniel Veillard, W3C, Daniel.Veillard@w3.org

Agenda:
------
    Set-up the basis needed to define a compatible format unifying
(while retaining their specific capabilities) RPM and DPKG. The goal is
to change the future version to both packaging format to this unified
one, to provide a unified format compatible usable on nearly all
installed linux distributions.

Global Package format:
---------------------
    Both distributions already use a packaging scheme where
the package metadata, and an archive providing the file content
are used, it makes sense to keep this architecture:

	 -----------------------
	|  -------------------  |
	| | I] Metadata       | |
	|  -------------------  |---- Englobing wrapper
	|  -------------------  |
	| |  II]              | |
	| |  Compressed       | |
	| |  Files            | |
	| |  Archive          | |
	| |                   | |
	|  -------------------  |
	 -----------------------

    The use of AR archive format was suggested, it is already in
use by DPKG, and is simple to read/write. It doesn't need to be
compressed, the files included are already compressed.

    The content is:
      - I] a file containing the set of metadata needed to store
           the package specific informations
      - II] a compressed file archive containing all the package
           files content.

    After a quick roundup of the possible archive format for II]
the remaining possibilities are TAR or CPIO. Tar is more common,
but seems to have some trouble with very long file names. For 
compression, gzip seems the best choice overall, bz2 was also
mentionned as a possible alternate since it provides bertter
compression ratios but it is too CPU intensive for some of the
targetted platforms. Bz2 support may be provided as an alternate
choise but should not be the default one (yet ?).

The Metadata format
-------------------

    Using an XML [1] based format for the metadata was agreed upon.
This makes sense as an extensible and non-proprietary description
format, well suited for inter application exchanges. Here is
a simple example of what it might look like:

<package>
  <name>rpm2html</name>
  <version>1.2</version>
  <packager>
    <name>Daniel Veillard<name>
    <email>Daniel.Veillard@w3.org</email>
    <nick>DV</nick>
  </packager>
  ....
</package>

    One of the requirements is to be able to "customize" the set
of informations, for example RPM and DPKG dependancy models are
slightly different and it was clear that support for support for some
distribution specific metadata is needed. The suggested principle
is to have a set of mandatory core informations needed to be able to
handle the package on any distribution, but customization have to
be allowed in order to fullfill specific needs and backward
compatibility with previous model. The technical mechanism to use
is XML namespace [2] which allow to associate any tag to a given
URL used as an unique identifier, like the following:

<package xmlns:rpm="http://www.rpm.org/v4.0"
         xmlns:deb="http://www.debian.org/dpkg/v2.0">
  <name>rpm2html</name>
  ....
  <rpm:requires>libxml-1.0</rpm:requires>
  <deb:requires>libxml:1.0-1.1</deb:requires>
  ....
</package>

  Note that this allow to "repackage" a format from a different
distribution without loosing the original extensions. This also
provide a framework for format evolution support.
  Since XML tend to be verbose, the metadata header should be
itself compressed, and again gzip seems thye vest compression
method.
  The use of a Dtd for the XML schema was suggested, but this
doesn't work well with namespaces, don't work well with the
possible extensio scheme we look forward and is not supported
by the most common parsers.

The Metadata content
--------------------

  This is clearly the part where the most work seems to be needed,
all existing metadata informations in both distributions have to be
examined and compared to define the core subset. In this core subset
most elements will be mandatory.
  Browsing at the lists things like:

    - name
    - version
    - revision
    - summary (one line)
    - description (longer)
    - author
       - name
       - email
       - nick
    - basic dependancies on sonames
    - support for multiple signatures (and signing algorithm)

 were agreed upon quickly.
 More controversial were:

    - full dependancies (we will probably use distinct mechanism)
    - per-file informations like the checksums (MD5)

Clearly the bunch of the analysis remaining seems to build the two lists
of metadata needed curently by RPM and DPCK, put them side by side and
decide what is required, what is core, and what's is installer specific
stuff.
Then make sure that having just the required core metadata still allows to
manage the core metadata in a decent way.

  After that it's just a matter of defining the XML names used for each 
fields in the core and a bit of coding ...

Future:
-------

  If defined on time support should be added in the next revision of RPM.
Concerning Debian, a schedule to include it in the stable branch before
December seems hard to achive.

Daniel

Daniel.Veillard@w3.org

[1] http://www.w3.org/TR/REC-xml
[2] http://www.w3.org/TR/REC-xml-names

-- 
	    [Yes, I have moved back to France !]
Daniel.Veillard@w3.org | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux, WWW, rpmfind,
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | rpm2html, XML,
http://www.w3.org/People/W3Cpeople.html#Veillard | badminton, and Kaffe.

From ewt@redhat.com  Mon Jun 21 12:15:31 1999
Return-Path: <ewt@redhat.com>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id MAA02400;
	Mon, 21 Jun 1999 12:15:29 -0400
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA18972;
	Mon, 21 Jun 1999 12:15:29 -0400
Received: from mercury.devel.redhat.com (ewt@mercury.devel.redhat.com [207.175.42.44])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA11201;
	Mon, 21 Jun 1999 12:15:29 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA01056;
	Mon, 21 Jun 1999 12:16:42 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Mon, 21 Jun 1999 12:16:42 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: Daniel Veillard <Daniel.Veillard@w3.org>
cc: leader@debian.org, msw@redhat.com, dpkg2@lists.wiggy.net, jbj@redhat.com
Subject: Re: Minutes of the RPM/DPKG unification meeting
In-Reply-To: <19990621111546.E6720@w3.org>
Message-ID: <Pine.LNX.4.10.9906211214150.966-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Status: RO
Content-Length: 1496
Lines: 28

On Mon, 21 Jun 1999, Daniel Veillard wrote:

> [ those are my minutes of the meeting held last friday in Paris on the subject.
>   They were not reviewed, seems that the momentum to go forward is serious
>   and will lead to interoperability soon if some time is allocated.
>   I would be happy to host a mailing-list on the subject if this is
>   considered useful,   Daniel ]

Thanks for sending this information on; I think a mailing list would be
quite helpful if you could go ahead and set one up.

The only thing I saw missing was the ability to sign packages with some
type of public key. Having strong signatures is going to get more and more
important over time. I'd suggest having a file which includes multiple
signatures for the metadata and cpio/tar archive portion of the archive,
and having that be the first file included in the archive. Comments?

The next step seems to be listing metadata rpm and dpkg uses. Jeff, could
you get a list of the RPM metadata this week? Hopefully, the dpkg group
will be able to get us a similiar list soon and we can start comparing notes.

Erik

-------------------------------------------------------------------------------
|       "For the next two hours, VH1 will be filled with foul-mouthed,        |
|          crossdressing Australians. Viewer discretion is advised."          |
|                                                                             |
|   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |

From bmc@djj.state.va.us  Mon Jun 21 12:27:59 1999
Return-Path: <bmc@djj.state.va.us>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id MAA02656;
	Mon, 21 Jun 1999 12:27:56 -0400
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA20070;
	Mon, 21 Jun 1999 12:27:52 -0400
Received: from lappy.djj.state.va.us (djj.state.va.us [165.176.13.106])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA16997;
	Mon, 21 Jun 1999 12:27:51 -0400
Received: from bmc by lappy.djj.state.va.us with local (Exim 2.11 #1 (Debian))
	id 10w39Z-0004D9-00; Mon, 21 Jun 1999 08:26:21 -0400
Date: Mon, 21 Jun 1999 08:26:21 -0400
From: Ben Collins <bcollins@debian.org>
To: Erik Troan <ewt@redhat.com>
Cc: Daniel Veillard <Daniel.Veillard@w3.org>, leader@debian.org,
        msw@redhat.com, dpkg2@lists.wiggy.net, jbj@redhat.com
Subject: Re: Minutes of the RPM/DPKG unification meeting
Message-ID: <19990621082621.C15627@lappy.djj.state.va.us>
References: <19990621111546.E6720@w3.org> <Pine.LNX.4.10.9906211214150.966-100000@localhost>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.6i
In-Reply-To: <Pine.LNX.4.10.9906211214150.966-100000@localhost>; from Erik Troan on Mon, Jun 21, 1999 at 12:16:42PM -0400
Sender: Ben Collins <bmc@djj.state.va.us>
Status: RO
Content-Length: 1046
Lines: 39

On Mon, Jun 21, 1999 at 12:16:42PM -0400, Erik Troan wrote:
> The next step seems to be listing metadata rpm and dpkg uses. Jeff, could
> you get a list of the RPM metadata this week? Hopefully, the dpkg group
> will be able to get us a similiar list soon and we can start comparing notes.

This is a full list of our metadata (relevant and non-relevant included
for completeness).
-------------
Architecture
Conflicts
Depends
Description
Essential
Filename
MD5sum
Maintainer
Package
Pre-Depends
Priority
Provides
Recommends
Replaces
Section
Size
Suggests
Version
installed-size
source
-------------
Currently we don't specify OS (our hurd dist simply sets arch=hurd-i386)
which is something I think dpkg desperately needs anyway.

That brings up another topic, concurrency in fields that have fairly
static data. Obviously we don't want to have conflicts with things like
Architecture (especially with subarchs like sparc/sparc64 and mips).
Should we define these now, and agree to establish these concurrently in
the future for new archs?

Ben

From ewt@redhat.com  Mon Jun 21 12:32:17 1999
Return-Path: <ewt@redhat.com>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id MAA02753;
	Mon, 21 Jun 1999 12:32:15 -0400
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA20478;
	Mon, 21 Jun 1999 12:32:13 -0400
Received: from mercury.devel.redhat.com (ewt@mercury.devel.redhat.com [207.175.42.44])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA18526;
	Mon, 21 Jun 1999 12:32:13 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA01233;
	Mon, 21 Jun 1999 12:33:54 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Mon, 21 Jun 1999 12:33:54 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: Ben Collins <bcollins@debian.org>
cc: Daniel Veillard <Daniel.Veillard@w3.org>, leader@debian.org,
        msw@redhat.com, dpkg2@lists.wiggy.net, jbj@redhat.com
Subject: Re: Minutes of the RPM/DPKG unification meeting
In-Reply-To: <19990621082621.C15627@lappy.djj.state.va.us>
Message-ID: <Pine.LNX.4.10.9906211231130.1230-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Status: RO
Content-Length: 1471
Lines: 44

On Mon, 21 Jun 1999, Ben Collins wrote:

> This is a full list of our metadata (relevant and non-relevant included
> for completeness).

That was fast, thanks.

> Conflicts
> Essential
> Pre-Depends
> Provides
> Recommends
> Depends
> Suggests

This is all dependency stuff, right? Could you give a bit more detail
on what each piece looks like? For example, where are version comparisons
allowed? What are the semantic differences between "depends" and "essential"?
What's the difference between Recommends and Suggests?

> Architecture
> Description
> Filename
> MD5sum

I assume the md5sum is for just your tar ball? How do you check correctness
of the metadata itself?

> Should we define these now, and agree to establish these concurrently in
> the future for new archs?

Let's say "we know we need to do something about arch/os, and we both agree
that the rpm and dpkg work need improvement; however, this is solvable
so we'll deal with it a bit later"... Is that okay for now?

Where do you put pre/post scripts? I didn't see them listed in your metadata?

Erik

-------------------------------------------------------------------------------
|       "For the next two hours, VH1 will be filled with foul-mouthed,        |
|          crossdressing Australians. Viewer discretion is advised."          |
|                                                                             |
|   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |

From bmc@djj.state.va.us  Mon Jun 21 13:11:12 1999
Return-Path: <bmc@djj.state.va.us>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id NAA03633;
	Mon, 21 Jun 1999 13:11:10 -0400
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id NAA24597;
	Mon, 21 Jun 1999 13:11:10 -0400
Received: from lappy.djj.state.va.us (djj.state.va.us [165.176.13.106])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id NAA04253;
	Mon, 21 Jun 1999 13:11:09 -0400
Received: from bmc by lappy.djj.state.va.us with local (Exim 2.11 #1 (Debian))
	id 10w3kX-0004Dn-00; Mon, 21 Jun 1999 09:04:33 -0400
Date: Mon, 21 Jun 1999 09:04:33 -0400
From: Ben Collins <bcollins@debian.org>
To: Erik Troan <ewt@redhat.com>
Cc: Daniel Veillard <Daniel.Veillard@w3.org>, leader@debian.org,
        msw@redhat.com, dpkg2@lists.wiggy.net, jbj@redhat.com
Subject: Re: Minutes of the RPM/DPKG unification meeting
Message-ID: <19990621090433.D15627@lappy.djj.state.va.us>
References: <19990621082621.C15627@lappy.djj.state.va.us> <Pine.LNX.4.10.9906211231130.1230-100000@localhost>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.6i
In-Reply-To: <Pine.LNX.4.10.9906211231130.1230-100000@localhost>; from Erik Troan on Mon, Jun 21, 1999 at 12:33:54PM -0400
Sender: Ben Collins <bmc@djj.state.va.us>
Status: RO
Content-Length: 2758
Lines: 71

On Mon, Jun 21, 1999 at 12:33:54PM -0400, Erik Troan wrote:
> On Mon, 21 Jun 1999, Ben Collins wrote:
>
> > This is a full list of our metadata (relevant and non-relevant included
> > for completeness).
>
> That was fast, thanks.
>
> > Conflicts
> > Pre-Depends
> > Provides
> > Recommends
> > Depends
> > Suggests

These are dependencies. They are ", " seperated lists in the form of
"pkgfoo (op ver)" or just "pkgfoo", where 'op' is one of ">>", "<<", "<=",
">=" and "=". 'ver' is the "source version-revision number".

Right now our policy has 4 levels of depending on another pkg. "Depends"
and "Pre-Depends" are fairly similar in that the package is presumed to
not be able to work at all until those dependencies are met. "Pre-Depends"
has the extra kicker in that those dependencies must be installed _and_
configured before this package is installed. "Recommends" is slightly less
strict in that the package will presumably work without this, but not to
it's fullest extent. "Suggests" are more or less related, but not
required.

"Provides" is a list of one or more packages that this one provides. We
use it for virtual packages like "www-browser" (provided by lynx,
netscape...) or "wish" (provided by tk and tkstep) or for packages that
can actually replace another functionally.

"Conflicts" are simply that, and do allow for version range like the
dependency fields.

> > Essential

Very much Debian specific. This is only present on packages that are
considered required for the system, and should not be removed. The only
value is "yes" and simply flags dpkg not to allow easy removing of it. A
good example of this is the "dpkg" package :)

> > Architecture
> > Description
> > Filename
> > MD5sum
> 
> I assume the md5sum is for just your tar ball? How do you check correctness
> of the metadata itself?

Yes, I parsed this from the ftp site's Packages file which this is
included only for that listing, not in the actual archive (same for
Filename and Size). The entire archive is checked on upload to the main
archive server and the MD5 is kept for the entire .deb file. 

> > Should we define these now, and agree to establish these concurrently in
> > the future for new archs?
> 
> Let's say "we know we need to do something about arch/os, and we both agree
> that the rpm and dpkg work need improvement; however, this is solvable
> so we'll deal with it a bit later"... Is that okay for now?

Sounds good to me :)

> Where do you put pre/post scripts? I didn't see them listed in your metadata?

These are contained in the control.tar(name?), which is kept with the
archive.tar in the .deb. Basically if the script exists, it is executed,
so there isn't a need to have it listed in any metadata (atleast not with
the current format).

From ewt@redhat.com  Mon Jun 21 13:50:53 1999
Return-Path: <ewt@redhat.com>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id NAA04520;
	Mon, 21 Jun 1999 13:50:51 -0400
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id NAA28623;
	Mon, 21 Jun 1999 13:50:50 -0400
Received: from mercury.devel.redhat.com (ewt@mercury.devel.redhat.com [207.175.42.44])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id NAA24628;
	Mon, 21 Jun 1999 13:50:49 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id NAA01454;
	Mon, 21 Jun 1999 13:52:26 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Mon, 21 Jun 1999 13:52:26 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: Ben Collins <bcollins@debian.org>
cc: Daniel Veillard <Daniel.Veillard@w3.org>, leader@debian.org,
        msw@redhat.com, dpkg2@lists.wiggy.net, jbj@redhat.com
Subject: Re: Minutes of the RPM/DPKG unification meeting
In-Reply-To: <19990621090433.D15627@lappy.djj.state.va.us>
Message-ID: <Pine.LNX.4.10.9906211350530.1449-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Status: RO
Content-Length: 1623
Lines: 36

On Mon, 21 Jun 1999, Ben Collins wrote:

> These are dependencies. They are ", " seperated lists in the form of
> "pkgfoo (op ver)" or just "pkgfoo", where 'op' is one of ">>", "<<", "<=",
> ">=" and "=". 'ver' is the "source version-revision number".

Okay, this is the same (assuming << is the same as <)? How do you specify
epoch's (that is dpkg's term, right?) in requirements?

> "Provides" is a list of one or more packages that this one provides. We
> use it for virtual packages like "www-browser" (provided by lynx,
> netscape...) or "wish" (provided by tk and tkstep) or for packages that
> can actually replace another functionally.

Can you provide a version number? Do they apply to conflicts and replaces
as well?

> Filename and Size). The entire archive is checked on upload to the main
> archive server and the MD5 is kept for the entire .deb file. 

Does rolling that into a signature block along with optional PGP/GPP sigs
make sense to you?

> These are contained in the control.tar(name?), which is kept with the
> archive.tar in the .deb. Basically if the script exists, it is executed,

Do you have any kind of specification on this? Would you mind moving
those scripts into the RDF metadata?

Erik

-------------------------------------------------------------------------------
|       "For the next two hours, VH1 will be filled with foul-mouthed,        |
|          crossdressing Australians. Viewer discretion is advised."          |
|                                                                             |
|   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |

From bmc@djj.state.va.us  Mon Jun 21 14:13:00 1999
Return-Path: <bmc@djj.state.va.us>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id OAA05299;
	Mon, 21 Jun 1999 14:12:56 -0400
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id OAA31086;
	Mon, 21 Jun 1999 14:12:56 -0400
Received: from lappy.djj.state.va.us (djj.state.va.us [165.176.13.106])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id OAA01858;
	Mon, 21 Jun 1999 14:12:55 -0400
Received: from bmc by lappy.djj.state.va.us with local (Exim 2.11 #1 (Debian))
	id 10w4nN-0004FF-00; Mon, 21 Jun 1999 10:11:33 -0400
Date: Mon, 21 Jun 1999 10:11:33 -0400
From: Ben Collins <bcollins@debian.org>
To: Erik Troan <ewt@redhat.com>
Cc: Daniel Veillard <Daniel.Veillard@w3.org>, leader@debian.org,
        msw@redhat.com, dpkg2@lists.wiggy.net, jbj@redhat.com
Subject: Re: Minutes of the RPM/DPKG unification meeting
Message-ID: <19990621101133.E15627@lappy.djj.state.va.us>
References: <19990621090433.D15627@lappy.djj.state.va.us> <Pine.LNX.4.10.9906211350530.1449-100000@localhost>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.6i
In-Reply-To: <Pine.LNX.4.10.9906211350530.1449-100000@localhost>; from Erik Troan on Mon, Jun 21, 1999 at 01:52:26PM -0400
Sender: Ben Collins <bmc@djj.state.va.us>
Status: RO
Content-Length: 2935
Lines: 61

On Mon, Jun 21, 1999 at 01:52:26PM -0400, Erik Troan wrote:
> On Mon, 21 Jun 1999, Ben Collins wrote:
> 
> > These are dependencies. They are ", " seperated lists in the form of
> > "pkgfoo (op ver)" or just "pkgfoo", where 'op' is one of ">>", "<<", "<=",
> > ">=" and "=". 'ver' is the "source version-revision number".
> 
> Okay, this is the same (assuming << is the same as <)? How do you specify
> epoch's (that is dpkg's term, right?) in requirements?

Epochs are in the form of 1:1.0.0-1. If no epoch is specified (as in
normal versions) then 0 is understood (i.e., 0:1.0-1 is equal to 1.0-1).

> > "Provides" is a list of one or more packages that this one provides. We
> > use it for virtual packages like "www-browser" (provided by lynx,
> > netscape...) or "wish" (provided by tk and tkstep) or for packages that
> > can actually replace another functionally.
> 
> Can you provide a version number? Do they apply to conflicts and replaces
> as well?

Unfortunately provides cannot be versioned, but we would like them to be.
the dependencies use them...I'm a little unsure of whether or not
conflicts and replaces use them. I'm fairly certain they are ignored and
that packages are required (atleast in our policy) to conflict or replace
actual packages and not virtual packages.

> > Filename and Size). The entire archive is checked on upload to the main
> > archive server and the MD5 is kept for the entire .deb file. 
> 
> Does rolling that into a signature block along with optional PGP/GPP sigs
> make sense to you?

It does to me. I especially would like to see "installed-size" as a common
attribute for the actual package data (the uncompressed size of the
data.tar as it is). Right now this is generated during the dinstall phase
of our upload/archive server and not in the actual package metadata where
it would do the most good.

This is slightly aside, but I very much like how Solaris's package manager
has seperate size listings for major partitions (/usr /var /etc) so that
each can be checked seperately for required space. I know that pkgadd
checks this easily since the package is already uncompressed before
installing, but maybe this could be added to allow for more robust space
checking in the package managers?

> > These are contained in the control.tar(name?), which is kept with the
> > archive.tar in the .deb. Basically if the script exists, it is executed,
> 
> Do you have any kind of specification on this? Would you mind moving
> those scripts into the RDF metadata?

The specification is in our packaging manual (as to when each script is
called and with what parameters), I don't have the URL right off hand, but
it should be in the /debian/projects directory on any mirror.

For our next generation package format I was actually thinking of an
extended format for {pre,post}{inst,rm} scripts in the metadata section
(not relevant to this topic), so yes, I think it is a great idea.

Ben

From packaging@rufus.w3.org  Mon Jun 21 12:46:04 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id MAA03009;
	Mon, 21 Jun 1999 12:46:02 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA21879;
	Mon, 21 Jun 1999 12:46:01 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA25529;
	Mon, 21 Jun 1999 12:46:01 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA10505;
	Mon, 21 Jun 1999 12:45:59 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA10495
	for packaging-list; Mon, 21 Jun 1999 12:45:57 -0400
Resent-Date: Mon, 21 Jun 1999 12:45:57 -0400
Resent-Message-Id: <199906211645.MAA10495@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from tux.w3.org (IDENT:veillard@tux.w3.org [18.29.0.27])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA10491
	for <packaging@rufus.w3.org>; Mon, 21 Jun 1999 12:45:55 -0400
Received: (from veillard@localhost)
	by tux.w3.org (8.9.3/8.9.3) id MAA17750;
	Mon, 21 Jun 1999 12:45:55 -0400
Date: Mon, 21 Jun 1999 12:45:55 -0400
From: Daniel Veillard <Daniel.Veillard@w3.org>
To: Erik Troan <ewt@redhat.com>
Cc: packaging@rufus.w3.org
Subject: [packaging] Re: Minutes of the RPM/DPKG unification meeting
Message-ID: <19990621124555.A17399@w3.org>
References: <19990621111546.E6720@w3.org> <Pine.LNX.4.10.9906211214150.966-100000@localhost>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.5us
In-Reply-To: <Pine.LNX.4.10.9906211214150.966-100000@localhost>; from Erik Troan on Mon, Jun 21, 1999 at 12:16:42PM -0400
Organization: World Wide Web Consortium (W3C http://www.w3.org/)
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1699
Lines: 37


> Thanks for sending this information on; I think a mailing list would be
> quite helpful if you could go ahead and set one up.

  Should work: packaging@rufus.w3.org

> The only thing I saw missing was the ability to sign packages with some
> type of public key. Having strong signatures is going to get more and more
> important over time. I'd suggest having a file which includes multiple
> signatures for the metadata and cpio/tar archive portion of the archive,
> and having that be the first file included in the archive. Comments?

  To keep it "within" the archive doesn't necessarily make it more secure,
but certainly more complex. Having the signatures embedded in the XML whould
IMHO make sense, as long as the signing procedure used make forging a signature
nearly impossible. Ther is some ongoing W3C/IETF work toward building
digitally signed XML files this may or may not apply:

http://lists.w3.org/Archives/Public/w3c-ietf-xmldsig/1999AprJun/thread.html#start

> The next step seems to be listing metadata rpm and dpkg uses. Jeff, could
> you get a list of the RPM metadata this week? Hopefully, the dpkg group
> will be able to get us a similiar list soon and we can start comparing notes.

  Sounds the Right Way to proceed,

Daniel

-- 
	    [Yes, I have moved back to France !]
Daniel.Veillard@w3.org | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux, WWW, rpmfind,
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | rpm2html, XML,
http://www.w3.org/People/W3Cpeople.html#Veillard | badminton, and Kaffe.
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Jun 21 12:49:10 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id MAA03059;
	Mon, 21 Jun 1999 12:49:08 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA22103;
	Mon, 21 Jun 1999 12:49:08 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA27067;
	Mon, 21 Jun 1999 12:49:06 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA10732;
	Mon, 21 Jun 1999 12:49:05 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA10722
	for packaging-list; Mon, 21 Jun 1999 12:49:02 -0400
Resent-Date: Mon, 21 Jun 1999 12:49:02 -0400
Resent-Message-Id: <199906211649.MAA10722@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:ewt@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA10715
	for <packaging@rufus.w3.org>; Mon, 21 Jun 1999 12:49:00 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA01317;
	Mon, 21 Jun 1999 12:50:37 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Mon, 21 Jun 1999 12:50:37 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: Daniel Veillard <Daniel.Veillard@w3.org>
cc: packaging@rufus.w3.org
Subject: [packaging] Re: Minutes of the RPM/DPKG unification meeting
In-Reply-To: <19990621124555.A17399@w3.org>
Message-ID: <Pine.LNX.4.10.9906211248450.1312-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1477
Lines: 34


On Mon, 21 Jun 1999, Daniel Veillard wrote:

> > important over time. I'd suggest having a file which includes multiple
> > signatures for the metadata and cpio/tar archive portion of the archive,
> > and having that be the first file included in the archive. Comments?
> 
>   To keep it "within" the archive doesn't necessarily make it more secure,
> but certainly more complex. Having the signatures embedded in the XML whould
> IMHO make sense, as long as the signing procedure used make forging a signature

If you have the signature in the XML, how does it let you sign the xml itself?
What I'm proposing is adding a third file to the ar archive, so we have:

		1) signature block
		2) metadata
		3) cpio/tar ball

The signature block would allow multiple signatures of arbitrary type, with
us specifying how PGP, md5, size, and GPG signatures as a starting point.
Those signatures would cover sections 2 and 3, and shouldn't be terribly
complex?

Erik

-------------------------------------------------------------------------------
|       "For the next two hours, VH1 will be filled with foul-mouthed,        |
|          crossdressing Australians. Viewer discretion is advised."          |
|                                                                             |
|   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Jun 21 15:50:35 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id PAA07970;
	Mon, 21 Jun 1999 15:50:34 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id PAA10436;
	Mon, 21 Jun 1999 15:50:34 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id PAA17350;
	Mon, 21 Jun 1999 15:50:33 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id PAA25660;
	Mon, 21 Jun 1999 15:50:30 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id PAA25652
	for packaging-list; Mon, 21 Jun 1999 15:50:27 -0400
Resent-Date: Mon, 21 Jun 1999 15:50:27 -0400
Resent-Message-Id: <199906211950.PAA25652@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from zeus.wi.leidenuniv.nl (zeus.wi.leidenuniv.nl [132.229.128.1])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id PAA25649
	for <packaging@rufus.w3.org>; Mon, 21 Jun 1999 15:50:24 -0400
Received: from lightning.mors.net (root@home008.wi.leidenuniv.nl [132.229.210.136])
	by zeus.wi.leidenuniv.nl (8.8.8/8.8.8/WI) with ESMTP id VAA09971;
	Mon, 21 Jun 1999 21:50:16 +0200 (MET DST)
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian/GNU) id VAA26299;
	Mon, 21 Jun 1999 21:49:57 +0200
Date: Mon, 21 Jun 1999 21:49:57 +0200
From: Wichert Akkerman <wichert@cs.leidenuniv.nl>
To: packaging@rufus.w3.org
Cc: Daniel Veillard <Daniel.Veillard@w3.org>
Subject: Re: [packaging] Re: Minutes of the RPM/DPKG unification meeting
Message-ID: <19990621214957.D21218@mors.net>
References: <19990621124555.A17399@w3.org> <Pine.LNX.4.10.9906211248450.1312-100000@localhost>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=+B+y8wtTXqdUj1xM; micalg=pgp-sha1;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <Pine.LNX.4.10.9906211248450.1312-100000@localhost>; from Erik Troan on Mon, Jun 21, 1999 at 12:50:37PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1837
Lines: 60



--+B+y8wtTXqdUj1xM
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Erik Troan wrote:
> If you have the signature in the XML, how does it let you sign the xml it=
self?

Remove all the signature-blocks from XML, generate all signatures for
the package and insert them into the XML again.=20

> What I'm proposing is adding a third file to the ar archive, so we have:

> 		1) signature block
> 		2) metadata
> 		3) cpio/tar ball

and:
        4) maintainer scripts (preinst, postinst, prerm, postrm)

> The signature block would allow multiple signatures of arbitrary type, wi=
th
> us specifying how PGP, md5, size, and GPG signatures as a starting point.
> Those signatures would cover sections 2 and 3, and shouldn't be terribly
> complex?

I think XML would be very useable for the signatures types as well, just
use a different tag for each option. Minor point: I suggest using pgp2
and OpenPGP as names instead of pgp and gpg.

Wichert.

--=20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
This combination of bytes forms a message written to you by Wichert Akkerma=
n.
E-Mail: wichert@cs.leidenuniv.nl
WWW: http://www.wi.leidenuniv.nl/~wichert/

--+B+y8wtTXqdUj1xM
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v0.9.7 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjdul2UACgkQPLiSUC+jvC1MUQCggioaGMltTit660oFh9LM/j/o
WL8Anjqx52bqMK8Qec4SOhVe5mQfN/jE
=b7Rt
-----END PGP SIGNATURE-----

--+B+y8wtTXqdUj1xM--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Jun 21 16:36:28 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id QAA09240;
	Mon, 21 Jun 1999 16:36:26 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA15665;
	Mon, 21 Jun 1999 16:36:26 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA05022;
	Mon, 21 Jun 1999 16:36:25 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA29652;
	Mon, 21 Jun 1999 16:36:24 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA29642
	for packaging-list; Mon, 21 Jun 1999 16:36:21 -0400
Resent-Date: Mon, 21 Jun 1999 16:36:21 -0400
Resent-Message-Id: <199906212036.QAA29642@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:ewt@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA29634
	for <packaging@rufus.w3.org>; Mon, 21 Jun 1999 16:36:19 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA03999;
	Mon, 21 Jun 1999 16:38:00 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Mon, 21 Jun 1999 16:38:00 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: packaging@rufus.w3.org
cc: Daniel Veillard <Daniel.Veillard@w3.org>
Subject: Re: [packaging] Re: Minutes of the RPM/DPKG unification meeting
In-Reply-To: <19990621214957.D21218@mors.net>
Message-ID: <Pine.LNX.4.10.9906211636140.3978-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1357
Lines: 32


On Mon, 21 Jun 1999, Wichert Akkerman wrote:

> Remove all the signature-blocks from XML, generate all signatures for
> the package and insert them into the XML again. 

You can do that, but it invovles rewriting bits. Would everyone rather
do this then a separate signature block? We can certainly use xml to
represent the data in that.

I prefer that method as it makes it easy to add new signatures to a package
w/o having to start ripping apart XML and pasting it back together. If others
feel that embedding the signature in the main metadata block is worthwhile,
I won't argue it any more then this though. Comments?

> I think XML would be very useable for the signatures types as well, just
> use a different tag for each option. Minor point: I suggest using pgp2
> and OpenPGP as names instead of pgp and gpg.

Definitely.

Erik

-------------------------------------------------------------------------------
|       "For the next two hours, VH1 will be filled with foul-mouthed,        |
|          crossdressing Australians. Viewer discretion is advised."          |
|                                                                             |
|   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Jun 24 10:41:47 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id KAA15656;
	Thu, 24 Jun 1999 10:41:44 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA09179;
	Thu, 24 Jun 1999 10:41:42 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA21783;
	Thu, 24 Jun 1999 10:41:42 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA16654;
	Thu, 24 Jun 1999 10:41:40 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA16644
	for packaging-list; Thu, 24 Jun 1999 10:41:37 -0400
Resent-Date: Thu, 24 Jun 1999 10:41:37 -0400
Resent-Message-Id: <199906241441.KAA16644@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (wichert@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA16639
	for <packaging@rufus.w3.org>; Thu, 24 Jun 1999 10:41:33 -0400
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian/GNU) id QAA27119;
	Thu, 24 Jun 1999 16:41:31 +0200
Date: Thu, 24 Jun 1999 16:41:31 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: bcollins@debian.org
Cc: packaging@rufus.w3.org
Subject: [packaging] tags
Message-ID: <19990624164131.A27111@soil.nl>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=Nq2Wo0NMKNjxTN9z; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1581
Lines: 65



--Nq2Wo0NMKNjxTN9z
Content-Type: text/plain; charset=us-ascii


A very quick list of tags we should have in my opinion:

common tags:
* name
* version
* summary
* description
* keywords (optional)
* builder (name/email/nick) (person who compiled the package)
* author (name/email/nick)
* origin (Debian,Red Hat,GNOME,KDE, etc.)
* homepage (optional)
* OS (Linux, HURD, BSD, etc.)
* architecture (alpha, i386, m68k, powerpc, sparc, etc.) (GNU arch name?)
* license (optional)

Debian tags:
* essential (optional)
* pre-depends (optional)
* depends (optional)
* conflicts (optional)
* replaces (optional)
* provides (optiona)
* recommends (optional)
* suggests (optional)
* maintainer (name/email/nick)
* installed-size
* section
* priority

Can we enhance this list to include RH-specific tags as well, and see
if the seperation common/distro-specific needs to be changed?

We probably need to discuss how we can do something like making dependencies
interdistributioncompatible (scrabble anyone?), especially with respect to
libraries.

I think this will be a good topic for the discussion next week when Ben
will visit RH.

Wichert.


--Nq2Wo0NMKNjxTN9z
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBN3JDm6jZR/ntlUftAQHicgL/cGAzycX2CDtLr60Nf+bIZr4UvJczD0Ug
bNoDmg5qMWFFRm9GPlK5TR+9JUhoVsKKp4BUVwKBecDt22cXVTbLQbQfN6V3+ccR
9fHwVtAfYe6kYztPQ1I9WQ4z5ZtY/QGf
=Us2d
-----END PGP SIGNATURE-----

--Nq2Wo0NMKNjxTN9z--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Jun 24 10:54:26 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id KAA16052;
	Thu, 24 Jun 1999 10:54:23 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA11027;
	Thu, 24 Jun 1999 10:54:22 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA27560;
	Thu, 24 Jun 1999 10:54:21 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA17503;
	Thu, 24 Jun 1999 10:54:20 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA17495
	for packaging-list; Thu, 24 Jun 1999 10:54:17 -0400
Resent-Date: Thu, 24 Jun 1999 10:54:17 -0400
Resent-Message-Id: <199906241454.KAA17495@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from lappy.djj.state.va.us (djj.state.va.us [165.176.13.106])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA17490
	for <packaging@rufus.w3.org>; Thu, 24 Jun 1999 10:54:15 -0400
Received: from bmc by lappy.djj.state.va.us with local (Exim 2.11 #1 (Debian))
	id 10x79E-0001OQ-00; Thu, 24 Jun 1999 06:54:24 -0400
Date: Thu, 24 Jun 1999 06:54:24 -0400
From: Ben Collins <bcollins@debian.org>
To: Wichert Akkerman <wichert@soil.nl>
Cc: packaging@rufus.w3.org
Subject: [packaging] Re: tags
Message-ID: <19990624065424.G4764@lappy.djj.state.va.us>
References: <19990624164131.A27111@soil.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990624164131.A27111@soil.nl>; from Wichert Akkerman on Thu, Jun 24, 1999 at 04:41:31PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1859
Lines: 56


On Thu, Jun 24, 1999 at 04:41:31PM +0200, Wichert Akkerman wrote:
> 
> A very quick list of tags we should have in my opinion:
> 
> common tags:
> * name
> * version
> * summary
> * description
> * keywords (optional)
> * builder (name/email/nick) (person who compiled the package)
> * author (name/email/nick)
> * origin (Debian,Red Hat,GNOME,KDE, etc.)
> * homepage (optional)
> * OS (Linux, HURD, BSD, etc.)
> * architecture (alpha, i386, m68k, powerpc, sparc, etc.) (GNU arch name?)
> * license (optional)
source? -- I think this is key, since a package name may not reflect well
the name of the source. Optional of course for cases where the source and
package name are the same.

origin? -- Perhaps the url where the original source was downloaded (or
can be downloaded) atleast for the sake of satisfying the GPL without
having to install the package.

> Debian tags:
> * essential (optional)
> * pre-depends (optional)
> * depends (optional)
> * conflicts (optional)
> * replaces (optional)
> * provides (optiona)
> * recommends (optional)
> * suggests (optional)
> * maintainer (name/email/nick)
> * installed-size
> * section
> * priority

IMO, section (maybe by another name) should be put into the main header as
an optional tag. It will help automated systems categorize the packages.
Maybe some one down the road can layout a standard for categories
(freshmeat has a nice section/subsection listing to go by).

Also some of the higher end dependency tags should go into the main
section (like depends, conflicts, provides, replaces) if we can ever
decided on how to have a common format for RPM's .so dependencies and
Debian's package dependencies.

I'm also leaning toward installed-size being in the main section aswell.

Ben
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Jun 24 11:06:41 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA16349;
	Thu, 24 Jun 1999 11:06:40 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA12632;
	Thu, 24 Jun 1999 11:06:39 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA01164;
	Thu, 24 Jun 1999 11:06:38 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA18378;
	Thu, 24 Jun 1999 11:06:36 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA18370
	for packaging-list; Thu, 24 Jun 1999 11:06:33 -0400
Resent-Date: Thu, 24 Jun 1999 11:06:33 -0400
Resent-Message-Id: <199906241506.LAA18370@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:ewt@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA18367
	for <packaging@rufus.w3.org>; Thu, 24 Jun 1999 11:06:31 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id LAA11638;
	Thu, 24 Jun 1999 11:08:07 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Thu, 24 Jun 1999 11:08:07 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: packaging@rufus.w3.org
cc: bcollins@debian.org
Subject: Re: [packaging] tags
In-Reply-To: <19990624164131.A27111@soil.nl>
Message-ID: <Pine.LNX.4.10.9906241106470.11609-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1204
Lines: 28


On Thu, 24 Jun 1999, Wichert Akkerman wrote:

> Can we enhance this list to include RH-specific tags as well, and see
> if the seperation common/distro-specific needs to be changed?

Yeah, I'll try and get something to you Monday (I'm traveling in a few hours
so my time is disappearing in front of me).

> We probably need to discuss how we can do something like making dependencies
> interdistributioncompatible (scrabble anyone?), especially with respect to
> libraries.

I suspect we should just let the LSB deal with this issue. Let's build the
packaging system, and let the larger group fight out the namespace issue as
it affects more groups then just Debian and Red Hat.

Erik

-------------------------------------------------------------------------------
|       "For the next two hours, VH1 will be filled with foul-mouthed,        |
|          crossdressing Australians. Viewer discretion is advised."          |
|                                                                             |
|   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Jun 24 11:14:22 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA16617;
	Thu, 24 Jun 1999 11:14:20 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA13617;
	Thu, 24 Jun 1999 11:14:19 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA04408;
	Thu, 24 Jun 1999 11:14:19 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA18953;
	Thu, 24 Jun 1999 11:14:17 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA18944
	for packaging-list; Thu, 24 Jun 1999 11:14:14 -0400
Resent-Date: Thu, 24 Jun 1999 11:14:14 -0400
Resent-Message-Id: <199906241514.LAA18944@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA18940
	for <packaging@rufus.w3.org>; Thu, 24 Jun 1999 11:14:11 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id LAA16611;
	Thu, 24 Jun 1999 11:14:11 -0400
Message-ID: <19990624111410.I27455@devserv.devel.redhat.com>
Date: Thu, 24 Jun 1999 11:14:10 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] tags
References: <19990624164131.A27111@soil.nl>
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary=ZJcv+A0YCCLh2VIg
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990624164131.A27111@soil.nl>; from Wichert Akkerman on Thu, Jun 24, 1999 at 04:41:31PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 3614
Lines: 195



--ZJcv+A0YCCLh2VIg
Content-Type: text/plain; charset=us-ascii

On Thu, Jun 24, 1999 at 04:41:31PM +0200, Wichert Akkerman wrote:
> 
> A very quick list of tags we should have in my opinion:
> 
> common tags:
> * name
> * version

Presumably this is what rpm knows as epoch:version-release?

> * summary
> * description
> * keywords (optional)

Rpm has not keywords but probably should).

> * builder (name/email/nick) (person who compiled the package)
> * author (name/email/nick)

Rpm has only packager, not separate builder/author.

> * origin (Debian,Red Hat,GNOME,KDE, etc.)

This smells like rpm vendor and/or distribution.

> * homepage (optional)

Rpm has URL ...

> * OS (Linux, HURD, BSD, etc.)
> * architecture (alpha, i386, m68k, powerpc, sparc, etc.) (GNU arch name?)

I would like to see adoption of config.guess output as definitive, and
collapse that into a platform identifier (that can be broken up into
OS and arch in the usual ways).

> * license (optional)
> 
> Debian tags:
> * essential (optional)
> * pre-depends (optional)
> * depends (optional)
> * conflicts (optional)
> * replaces (optional)
> * provides (optiona)
> * recommends (optional)
> * suggests (optional)
> * maintainer (name/email/nick)
> * installed-size
> * section
> * priority
> 

We need to be able to come to agreement on how to represent as much
of the dependency in a common fashion as possible. RPM has the following

	requires: name [ op version ] ...
	prereq: name
	conflicts: name [op version ]
	provides: name
	obsoletes: name

	buildrequires: name [op version]
	buildprereq: name
	buildconflicts: name [op version ]

where name is usually a package name, op is a logical opertor and version
is something like epoch:version-release. There is also some nascent interest
in having dependency info like

	Requires: perl5(MD5)-1.2.3

as a way of representing a dependency on a perl module version.

(Note: rpm is probably going to have versioned provides and possibly
prereq/obsoltes Real Soon Now).

> Can we enhance this list to include RH-specific tags as well, and see
> if the seperation common/distro-specific needs to be changed?
> 

I will attach the list of RPMTAG's

> We probably need to discuss how we can do something like making dependencies
> interdistributioncompatible (scrabble anyone?), especially with respect to
> libraries.
> 
> I think this will be a good topic for the discussion next week when Ben
> will visit RH.
> 

Yes.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC

--ZJcv+A0YCCLh2VIg
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename=t

NAME
VERSION
RELEASE
EPOCH
SUMMARY
DESCRIPTION
BUILDTIME
BUILDHOST
INSTALLTIME
SIZE
DISTRIBUTION
VENDOR
GIF
XPM
LICENSE
PACKAGER
GROUP
SOURCE
PATCH
URL
OS
ARCH
PREIN
POSTIN
PREUN
POSTUN
FILENAMES
FILESIZES
FILESTATES
FILEMODES
FILERDEVS
FILEMTIMES
FILEMD5S
FILELINKTOS
FILEFLAGS
ROOT
FILEUSERNAME
FILEGROUPNAME
ICON
SOURCERPM
FILEVERIFYFLAGS
ARCHIVESIZE
PROVIDES
REQUIREFLAGS
REQUIRENAME
REQUIREVERSION
CONFLICTFLAGS
CONFLICTNAME
CONFLICTVERSION
BUILDROOT
EXCLUDEARCH
EXCLUDEOS
EXCLUSIVEARCH
EXCLUSIVEOS
RPMVERSION
TRIGGERSCRIPTS
TRIGGERNAME
TRIGGERVERSION
TRIGGERFLAGS
TRIGGERINDEX
VERIFYSCRIPT
CHANGELOGTIME
CHANGELOGNAME
CHANGELOGTEXT
PREINPROG
POSTINPROG
PREUNPROG
POSTUNPROG
BUILDARCHS
OBSOLETES
VERIFYSCRIPTPROG
TRIGGERSCRIPTPROG
COOKIE
FILEDEVICES
FILEINODES
FILELANGS
PREFIXES
INSTPREFIXES
CAPABILITY
ORIGFILENAMES
BUILDMACROS

--ZJcv+A0YCCLh2VIg--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Jun 24 11:35:15 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA17098;
	Thu, 24 Jun 1999 11:35:13 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA16159;
	Thu, 24 Jun 1999 11:35:13 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA12467;
	Thu, 24 Jun 1999 11:35:12 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA20589;
	Thu, 24 Jun 1999 11:35:10 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA20555
	for packaging-list; Thu, 24 Jun 1999 11:34:59 -0400
Resent-Date: Thu, 24 Jun 1999 11:34:59 -0400
Resent-Message-Id: <199906241534.LAA20555@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from lappy.djj.state.va.us (djj.state.va.us [165.176.13.106])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA20550
	for <packaging@rufus.w3.org>; Thu, 24 Jun 1999 11:34:55 -0400
Received: from bmc by lappy.djj.state.va.us with local (Exim 2.11 #1 (Debian))
	id 10x7mg-0001PQ-00; Thu, 24 Jun 1999 07:35:11 -0400
Date: Thu, 24 Jun 1999 07:35:10 -0400
From: Ben Collins <bcollins@debian.org>
To: packaging@rufus.w3.org
Subject: [packaging] discussions outside of this group
Message-ID: <19990624073510.I4764@lappy.djj.state.va.us>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.6i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
X-Status: A
Content-Length: 1202
Lines: 27


It seems that one of our developers with the LSB was caught off guard by
finding out that Debian and RedHat are working on a common binary format.
Needless to say, the news breaking this way to the Debian developer
community was not met with much appreciation.

I'm not saying this should have been kept a secret, since we want this to
be open to the rest of the developers, but I think we were waiting for a
little more maturity in the talks before presenting the information to the
rest of the developers. Could we please be kept informed as to who will be
given what information in the future so that we can atleast let our
developers know things first.

I should also note that Wichert and I cannot make the decision that this
_will be_ the future of the Debian format. After we have a relatively
solid proposal, it will need to be voted on before we can actually say
"Debian is supporting this format".

I also wanted a little clarity on the subject of the LSB. Am I to
understand that we are working on something that the LSB will consider
part of it's standards?

Thanks,
  Ben
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Jun 24 12:22:55 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id MAA17964;
	Thu, 24 Jun 1999 12:22:53 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA21087;
	Thu, 24 Jun 1999 12:22:52 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA30457;
	Thu, 24 Jun 1999 12:22:52 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA24084;
	Thu, 24 Jun 1999 12:22:51 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA24073
	for packaging-list; Thu, 24 Jun 1999 12:22:48 -0400
Resent-Date: Thu, 24 Jun 1999 12:22:48 -0400
Resent-Message-Id: <199906241622.MAA24073@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:msw@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA24069
	for <packaging@rufus.w3.org>; Thu, 24 Jun 1999 12:22:45 -0400
Received: (from msw@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id MAA17958;
	Thu, 24 Jun 1999 12:22:44 -0400
Message-ID: <19990624122243.C16979@devserv.devel.redhat.com>
Date: Thu, 24 Jun 1999 12:22:43 -0400
From: Matt Wilson <msw@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] discussions outside of this group
References: <19990624073510.I4764@lappy.djj.state.va.us>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990624073510.I4764@lappy.djj.state.va.us>; from Ben Collins on Thu, Jun 24, 1999 at 07:35:10AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2329
Lines: 47


I think that it is safe to say that our current efforts lack the
detail to say that Debian and Red Hat are officially working on a
compatible packaging format.  I realize that we will need to gather
support in the Debian community if this package format is to succeed
and become adopted by the Debian community.  But since traditionally
as the number of voices increases general productivity decreases I
think it best that this group at least make a rough outline before
we accept input from other developers, Debian or otherwise.

So - if we feel confident that we will be able to pull off this format
specification, I think it may be best to post another pre announcement
announcement (like the one earlier for dpkg2) that states our
intentions.  Hopefully the Community would see that as a sign that
we're not trying to do something sneaky - just trying to get something
roughed out first.

I'm thinking that our final intention is that we can present this new
format to the LSB as the standard binary package format for Linux.

Matt

On Thu, Jun 24, 1999 at 07:35:10AM -0400, Ben Collins wrote:
> 
> It seems that one of our developers with the LSB was caught off guard by
> finding out that Debian and RedHat are working on a common binary format.
> Needless to say, the news breaking this way to the Debian developer
> community was not met with much appreciation.
> 
> I'm not saying this should have been kept a secret, since we want this to
> be open to the rest of the developers, but I think we were waiting for a
> little more maturity in the talks before presenting the information to the
> rest of the developers. Could we please be kept informed as to who will be
> given what information in the future so that we can atleast let our
> developers know things first.
> 
> I should also note that Wichert and I cannot make the decision that this
> _will be_ the future of the Debian format. After we have a relatively
> solid proposal, it will need to be voted on before we can actually say
> "Debian is supporting this format".
> 
> I also wanted a little clarity on the subject of the LSB. Am I to
> understand that we are working on something that the LSB will consider
> part of it's standards?
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Jun 24 13:04:28 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id NAA18979;
	Thu, 24 Jun 1999 13:04:26 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id NAA26286;
	Thu, 24 Jun 1999 13:04:21 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id NAA15769;
	Thu, 24 Jun 1999 13:04:20 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA27226;
	Thu, 24 Jun 1999 13:04:19 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA27218
	for packaging-list; Thu, 24 Jun 1999 13:04:16 -0400
Resent-Date: Thu, 24 Jun 1999 13:04:16 -0400
Resent-Message-Id: <199906241704.NAA27218@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from lappy.djj.state.va.us (djj.state.va.us [165.176.13.106])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA27213
	for <packaging@rufus.w3.org>; Thu, 24 Jun 1999 13:04:12 -0400
Received: from bmc by lappy.djj.state.va.us with local (Exim 2.11 #1 (Debian))
	id 10x9B9-0001RZ-00; Thu, 24 Jun 1999 09:04:31 -0400
Date: Thu, 24 Jun 1999 09:04:30 -0400
From: Ben Collins <bcollins@debian.org>
To: packaging@rufus.w3.org
Subject: Re: [packaging] discussions outside of this group
Message-ID: <19990624090430.K4764@lappy.djj.state.va.us>
References: <19990624073510.I4764@lappy.djj.state.va.us> <19990624122243.C16979@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990624122243.C16979@devserv.devel.redhat.com>; from Matt Wilson on Thu, Jun 24, 1999 at 12:22:43PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 972
Lines: 20


On Thu, Jun 24, 1999 at 12:22:43PM -0400, Matt Wilson wrote:
> So - if we feel confident that we will be able to pull off this format
> specification, I think it may be best to post another pre announcement
> announcement (like the one earlier for dpkg2) that states our
> intentions.  Hopefully the Community would see that as a sign that
> we're not trying to do something sneaky - just trying to get something
> roughed out first.

That sounds reasonable, with extreme emphasis on "Intentions" :) I wanted
to say, that I know this was not an intentional event (the surprise
announce within the LSB), but it's hard to describe the affect of the
Debian community mass emailing you "consipracy" hypothesis on the
"secrecy" with "them" (being RedHat :). It was completely misunderstood
but is fine now, pending some sort of announcement on our part. 

Ben
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Jun 24 16:42:48 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id QAA24137;
	Thu, 24 Jun 1999 16:42:45 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA24989;
	Thu, 24 Jun 1999 16:42:45 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA10615;
	Thu, 24 Jun 1999 16:42:44 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA11266;
	Thu, 24 Jun 1999 16:42:40 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA11257
	for packaging-list; Thu, 24 Jun 1999 16:42:37 -0400
Resent-Date: Thu, 24 Jun 1999 16:42:37 -0400
Resent-Message-Id: <199906242042.QAA11257@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from zeus.wi.leidenuniv.nl (zeus.wi.leidenuniv.nl [132.229.128.1])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA11254
	for <packaging@rufus.w3.org>; Thu, 24 Jun 1999 16:42:33 -0400
Received: from lightning.mors.net (root@home028.wi.leidenuniv.nl [132.229.210.156])
	by zeus.wi.leidenuniv.nl (8.8.8/8.8.8/WI) with ESMTP id WAA18211
	for <packaging@rufus.w3.org>; Thu, 24 Jun 1999 22:42:30 +0200 (MET DST)
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian/GNU) id WAA17096
	for packaging@rufus.w3.org; Thu, 24 Jun 1999 22:38:55 +0200
Date: Thu, 24 Jun 1999 22:38:55 +0200
From: Wichert Akkerman <wichert@cs.leidenuniv.nl>
To: packaging@rufus.w3.org
Subject: [packaging] Re: tags
Message-ID: <19990624223855.E16960@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <19990624164131.A27111@soil.nl> <19990624065424.G4764@lappy.djj.state.va.us>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=NtwzykIc2mflq5ck; micalg=pgp-sha1;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990624065424.G4764@lappy.djj.state.va.us>; from sparc porters on Thu, Jun 24, 1999 at 06:54:24AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2119
Lines: 64



--NtwzykIc2mflq5ck
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously sparc porters wrote:
> source? -- I think this is key, since a package name may not reflect well
> the name of the source. Optional of course for cases where the source and
> package name are the same.

Sounds good.

> origin? -- Perhaps the url where the original source was downloaded (or
> can be downloaded) atleast for the sake of satisfying the GPL without
> having to install the package.

Look closer, there was homepage on there. Maybe that should be URL since
it can also be a FTP-site.

> IMO, section (maybe by another name) should be put into the main header as
> an optional tag.

No, since everyone will just invents sections then which mess up our
nicely developed (but seriously overcrowded) sections. Keywords is
already a common tag.

> Also some of the higher end dependency tags should go into the main
> section (like depends, conflicts, provides, replaces) if we can ever
> decided on how to have a common format for RPM's .so dependencies and
> Debian's package dependencies.

Only if we can be *absolutely* sure they are portable across
distributions. Otherwise you end up with a common tag that has no common
semantics.

Wichert.

--=20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
This combination of bytes forms a message written to you by Wichert Akkerma=
n.
E-Mail: wichert@cs.leidenuniv.nl
WWW: http://www.wi.leidenuniv.nl/~wichert/

--NtwzykIc2mflq5ck
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v0.9.7 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjdylzAACgkQPLiSUC+jvC2SvACdF6rs+Tce4nUVzKLITnYBU9iJ
1JkAn0wvhtjgp/G/01Ie/Sgqxhab+R6D
=ZCWU
-----END PGP SIGNATURE-----

--NtwzykIc2mflq5ck--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Jun 24 19:56:43 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id TAA28502;
	Thu, 24 Jun 1999 19:56:41 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id TAA12637;
	Thu, 24 Jun 1999 19:56:41 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id TAA23394;
	Thu, 24 Jun 1999 19:56:40 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id TAA26821;
	Thu, 24 Jun 1999 19:56:39 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id TAA26812
	for packaging-list; Thu, 24 Jun 1999 19:56:36 -0400
Resent-Date: Thu, 24 Jun 1999 19:56:36 -0400
Resent-Message-Id: <199906242356.TAA26812@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from zeus.wi.leidenuniv.nl (zeus.wi.leidenuniv.nl [132.229.128.1])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id TAA26807
	for <packaging@rufus.w3.org>; Thu, 24 Jun 1999 19:56:33 -0400
Received: from lightning.mors.net (root@home040.wi.leidenuniv.nl [132.229.210.168])
	by zeus.wi.leidenuniv.nl (8.8.8/8.8.8/WI) with ESMTP id BAA21675
	for <packaging@rufus.w3.org>; Fri, 25 Jun 1999 01:56:30 +0200 (MET DST)
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian/GNU) id XAA18770
	for packaging@rufus.w3.org; Thu, 24 Jun 1999 23:51:37 +0200
Date: Thu, 24 Jun 1999 23:51:37 +0200
From: Wichert Akkerman <wichert@cs.leidenuniv.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] tags
Message-ID: <19990624235136.C18050@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <19990624164131.A27111@soil.nl> <19990624111410.I27455@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=Sr1nOIr3CvdE5hEN; micalg=pgp-sha1;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990624111410.I27455@devserv.devel.redhat.com>; from Jeff Johnson on Thu, Jun 24, 1999 at 11:14:10AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1551
Lines: 52



--Sr1nOIr3CvdE5hEN
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> Presumably this is what rpm knows as epoch:version-release?

Yes.

> Rpm has only packager, not separate builder/author.

The distinction is very useful, for rpm as well probably. You can use it
for example to see who (or what) recompiled a package for another
architecture.

> I would like to see adoption of config.guess output as definitive, and
> collapse that into a platform identifier (that can be broken up into
> OS and arch in the usual ways).

Hmm. I seem to remember that config.guess has some issues that don't
make it very suitable for this.

Wichert.

--=20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
This combination of bytes forms a message written to you by Wichert Akkerma=
n.
E-Mail: wichert@cs.leidenuniv.nl
WWW: http://www.wi.leidenuniv.nl/~wichert/

--Sr1nOIr3CvdE5hEN
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v0.9.7 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjdyqGgACgkQPLiSUC+jvC2UHgCfRHKU0zIBm47kmrhuaVW+rqd1
JhoAn3J94GsE9IRoSGLr9JK2lwyj0CP5
=S/0B
-----END PGP SIGNATURE-----

--Sr1nOIr3CvdE5hEN--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri Jun 25 04:07:42 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id EAA03098;
	Fri, 25 Jun 1999 04:07:39 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id EAA11264;
	Fri, 25 Jun 1999 04:07:37 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id EAA19326;
	Fri, 25 Jun 1999 04:07:37 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id EAA28592;
	Fri, 25 Jun 1999 04:07:36 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id EAA28582
	for packaging-list; Fri, 25 Jun 1999 04:07:32 -0400
Resent-Date: Fri, 25 Jun 1999 04:07:32 -0400
Resent-Message-Id: <199906250807.EAA28582@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id EAA28579
	for <packaging@rufus.w3.org>; Fri, 25 Jun 1999 04:07:29 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id EAA03088;
	Fri, 25 Jun 1999 04:07:27 -0400
Message-ID: <19990625040727.O27455@devserv.devel.redhat.com>
Date: Fri, 25 Jun 1999 04:07:27 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] tags
References: <19990624164131.A27111@soil.nl> <19990624111410.I27455@devserv.devel.redhat.com> <19990624235136.C18050@mors.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990624235136.C18050@mors.net>; from Wichert Akkerman on Thu, Jun 24, 1999 at 11:51:37PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 674
Lines: 23


On Thu, Jun 24, 1999 at 11:51:37PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> 
> > I would like to see adoption of config.guess output as definitive, and
> > collapse that into a platform identifier (that can be broken up into
> > OS and arch in the usual ways).
> 
> Hmm. I seem to remember that config.guess has some issues that don't
> make it very suitable for this.
> 

Config.guess certainly has issues. The *output* of config.guess does not.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Jun 27 10:49:29 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id KAA09595;
	Sun, 27 Jun 1999 10:49:27 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA21574;
	Sun, 27 Jun 1999 10:49:26 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA08363;
	Sun, 27 Jun 1999 10:49:25 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA18865;
	Sun, 27 Jun 1999 10:49:24 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA18848
	for packaging-list; Sun, 27 Jun 1999 10:49:21 -0400
Resent-Date: Sun, 27 Jun 1999 10:49:21 -0400
Resent-Message-Id: <199906271449.KAA18848@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from www10.w3.org (www10.w3.org [18.23.0.20])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA18836
	for <packaging@rufus.w3.org>; Sun, 27 Jun 1999 10:49:19 -0400
Received: from soil08.soil.nl (soil08.soil.nl [132.229.135.68])
	by www10.w3.org (8.9.1/8.9.1) with ESMTP id IAA27575
	for <packaging@rufus.w3.org>; Sat, 26 Jun 1999 08:06:26 -0400 (EDT)
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian/GNU) id OAA32112
	for packaging@rufus.w3.org; Sat, 26 Jun 1999 14:04:35 +0200
Date: Sat, 26 Jun 1999 14:04:35 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] tags
Message-ID: <19990626140435.A32093@soil.nl>
References: <19990624164131.A27111@soil.nl> <19990624111410.I27455@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=XsQoSWH+UP9D9v3l; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990624111410.I27455@devserv.devel.redhat.com>; from Jeff Johnson on Thu, Jun 24, 1999 at 11:14:10AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1650
Lines: 47



--XsQoSWH+UP9D9v3l
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> I would like to see adoption of config.guess output as definitive, and
> collapse that into a platform identifier (that can be broken up into
> OS and arch in the usual ways).

I've been talking with a couple of people who are doing lots of work
with different architectures and OS'es about this. They all have
the same complaint: the OS & architecture tags are simply not sufficient.
The problem is that a single machine can implement multiple architectures
(ultrasparcs running sparc binaries), or that one OS might have emulation
for another (the HURD will be able to run Linux binaries, some BSD versions
already do).

Their suggestion is to use dependencies to solve this. The idea is to
make a package depend on pseudopackages for the OS (OS ABI actually) and=20
architecture they need. The packagemanger can then compare those with
what the machine is actually using and determine if a package will be
able to run.

Using this mechanism it is also easy to create seperate packages for
architecture-subsets (pentium-packages, amd-packages, etc.).

Wichert.


--XsQoSWH+UP9D9v3l
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBN3TB06jZR/ntlUftAQFKQQL8CW2kdMvsyx1lXL7HbL87bUgM4Af7JP5q
jSrLpWxLkUE5z0yGMjpvGdl+ll5tI6yFlmvbKovsnMdszuixkycKSPaZsAgsIr1g
qtyAzPgyh8A6hzYcJsEV4j5Y3OnL9TtG
=Hxb6
-----END PGP SIGNATURE-----

--XsQoSWH+UP9D9v3l--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Jun 27 10:56:14 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id KAA09677;
	Sun, 27 Jun 1999 10:56:12 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA22042;
	Sun, 27 Jun 1999 10:56:12 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA12140;
	Sun, 27 Jun 1999 10:56:11 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA20289;
	Sun, 27 Jun 1999 10:56:11 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA20281
	for packaging-list; Sun, 27 Jun 1999 10:56:09 -0400
Resent-Date: Sun, 27 Jun 1999 10:56:09 -0400
Resent-Message-Id: <199906271456.KAA20281@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:ewt@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA20273
	for <packaging@rufus.w3.org>; Sun, 27 Jun 1999 10:56:06 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA13195
	for <packaging@rufus.w3.org>; Sun, 27 Jun 1999 10:57:39 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Sun, 27 Jun 1999 10:57:39 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: packaging@rufus.w3.org
Subject: Re: [packaging] Re: tags
In-Reply-To: <19990624223855.E16960@mors.net>
Message-ID: <Pine.LNX.4.10.9906271056140.13163-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1101
Lines: 26


On Thu, 24 Jun 1999, Wichert Akkerman wrote:

> Only if we can be *absolutely* sure they are portable across
> distributions. Otherwise you end up with a common tag that has no common
> semantics.

I'd really rather let the lsb deal with this issue. We should provice package
dependencies that are compatible with each other, and perhaps make sure
current practice doesn't produce any erroneous dependency matches. Trying
to standardize on how to handle .so dependencies and which virtual packages
should be provided out of the box is better left to the LSB, imho.

Comments?

Erik

-------------------------------------------------------------------------------
|       "For the next two hours, VH1 will be filled with foul-mouthed,        |
|          crossdressing Australians. Viewer discretion is advised."          |
|                                                                             |
|   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Jun 27 11:14:41 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA09910;
	Sun, 27 Jun 1999 11:14:39 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA23498;
	Sun, 27 Jun 1999 11:14:39 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA21286;
	Sun, 27 Jun 1999 11:14:38 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA23838;
	Sun, 27 Jun 1999 11:14:38 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA23829
	for packaging-list; Sun, 27 Jun 1999 11:14:35 -0400
Resent-Date: Sun, 27 Jun 1999 11:14:35 -0400
Resent-Message-Id: <199906271514.LAA23829@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:ewt@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA23825
	for <packaging@rufus.w3.org>; Sun, 27 Jun 1999 11:14:32 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id LAA13339
	for <packaging@rufus.w3.org>; Sun, 27 Jun 1999 11:16:02 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Sun, 27 Jun 1999 11:16:02 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: packaging@rufus.w3.org
Subject: Re: [packaging] tags
In-Reply-To: <19990626140435.A32093@soil.nl>
Message-ID: <Pine.LNX.4.10.9906271115180.13336-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1067
Lines: 24


On Sat, 26 Jun 1999, Wichert Akkerman wrote:

> Their suggestion is to use dependencies to solve this. The idea is to
> make a package depend on pseudopackages for the OS (OS ABI actually) and 
> architecture they need. The packagemanger can then compare those with
> what the machine is actually using and determine if a package will be
> able to run.

This makes it difficult for a tool to know that an i686 package is a "better"
match for a Pentium III machine then an i486 package is though (this is
an ability we currently have in RPM).

Erik

-------------------------------------------------------------------------------
|       "For the next two hours, VH1 will be filled with foul-mouthed,        |
|          crossdressing Australians. Viewer discretion is advised."          |
|                                                                             |
|   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Jun 27 11:32:44 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA10169;
	Sun, 27 Jun 1999 11:32:42 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA24692;
	Sun, 27 Jun 1999 11:32:42 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA30497;
	Sun, 27 Jun 1999 11:32:42 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA20278;
	Sun, 27 Jun 1999 10:56:08 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA20267
	for packaging-list; Sun, 27 Jun 1999 10:56:06 -0400
Resent-Date: Sun, 27 Jun 1999 10:56:06 -0400
Resent-Message-Id: <199906271456.KAA20267@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:root@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA20261
	for <packaging@rufus.w3.org>; Sun, 27 Jun 1999 10:56:03 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA11983
	for <packaging@rufus.w3.org>; Thu, 24 Jun 1999 17:50:53 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Thu, 24 Jun 1999 17:50:52 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: packaging@rufus.w3.org
Subject: Re: [packaging] discussions outside of this group
In-Reply-To: <19990624122243.C16979@devserv.devel.redhat.com>
Message-ID: <Pine.LNX.4.10.9906241749120.11978-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1285
Lines: 32


On Thu, 24 Jun 1999, Matt Wilson wrote:

> So - if we feel confident that we will be able to pull off this format
> specification, I think it may be best to post another pre announcement
> announcement (like the one earlier for dpkg2) that states our
> intentions.  Hopefully the Community would see that as a sign that
> we're not trying to do something sneaky - just trying to get something
> roughed out first.

I'd rather not do anything until after we sort out the harder bits of
this. We actually have most of the decisions made; the big ones that
are left are:

	1) tar vs cpio 
	2) installation scripts

Once we can "see the light" on those two things, I'll be confident that
this effort is going to be successful. I'm hoping to work out #2 next
week.

Erik

-------------------------------------------------------------------------------
|       "For the next two hours, VH1 will be filled with foul-mouthed,        |
|          crossdressing Australians. Viewer discretion is advised."          |
|                                                                             |
|   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Jun 27 15:20:29 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id PAA14422;
	Sun, 27 Jun 1999 15:20:27 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id PAA10563;
	Sun, 27 Jun 1999 15:20:27 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id PAA29746;
	Sun, 27 Jun 1999 15:20:26 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id PAA21822;
	Sun, 27 Jun 1999 15:20:25 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id PAA21814
	for packaging-list; Sun, 27 Jun 1999 15:20:22 -0400
Resent-Date: Sun, 27 Jun 1999 15:20:22 -0400
Resent-Message-Id: <199906271920.PAA21814@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id PAA21811
	for <packaging@rufus.w3.org>; Sun, 27 Jun 1999 15:20:20 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id PAA14416;
	Sun, 27 Jun 1999 15:20:20 -0400
Message-ID: <19990627152019.K14356@devserv.devel.redhat.com>
Date: Sun, 27 Jun 1999 15:20:19 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] tags
References: <19990626140435.A32093@soil.nl> <Pine.LNX.4.10.9906271115180.13336-100000@localhost>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <Pine.LNX.4.10.9906271115180.13336-100000@localhost>; from Erik Troan on Sun, Jun 27, 1999 at 11:16:02AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
X-Status: A
Content-Length: 1583
Lines: 40


On Sun, Jun 27, 1999 at 11:16:02AM -0400, Erik Troan wrote:
> 
> On Sat, 26 Jun 1999, Wichert Akkerman wrote:
> 
> > Their suggestion is to use dependencies to solve this. The idea is to
> > make a package depend on pseudopackages for the OS (OS ABI actually) and 
> > architecture they need. The packagemanger can then compare those with
> > what the machine is actually using and determine if a package will be
> > able to run.
> 
> This makes it difficult for a tool to know that an i686 package is a "better"
> match for a Pentium III machine then an i486 package is though (this is
> an ability we currently have in RPM).
> 

I'm strongly against "scoring" without some idea of how it is to be used.
I do not know of any packaging that makes meaningful use of scoring.

I would also argue theoretically that there is no ordering property that
can be exploited to say that an i486 is "closer" to an i386 than an i586
which is at the base of scoring.

Personally, I'd like to see a "hint" that the package was intended for
a set of platforms. If the platforms are named by config.guess, then
it's pretty simple to capture the hint about intended install platforms
in a set of regular expressions in the packaging that are applied to
platform strings on the host without getting into the deeper semantics of

    On what platforms can a package compiled with -m486 be installed?

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Jun 27 15:32:46 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id PAA14604;
	Sun, 27 Jun 1999 15:32:45 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id PAA11280;
	Sun, 27 Jun 1999 15:32:44 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id PAA03404;
	Sun, 27 Jun 1999 15:32:43 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id PAA21050;
	Sun, 27 Jun 1999 15:07:48 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id PAA21042
	for packaging-list; Sun, 27 Jun 1999 15:07:46 -0400
Resent-Date: Sun, 27 Jun 1999 15:07:46 -0400
Resent-Message-Id: <199906271907.PAA21042@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id PAA21037
	for <packaging@rufus.w3.org>; Sun, 27 Jun 1999 15:07:44 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id PAA14215;
	Sun, 27 Jun 1999 15:07:44 -0400
Message-ID: <19990627150744.J14356@devserv.devel.redhat.com>
Date: Sun, 27 Jun 1999 15:07:44 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] tags
References: <19990624164131.A27111@soil.nl> <19990624111410.I27455@devserv.devel.redhat.com> <19990626140435.A32093@soil.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990626140435.A32093@soil.nl>; from Wichert Akkerman on Sat, Jun 26, 1999 at 02:04:35PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2628
Lines: 62


On Sat, Jun 26, 1999 at 02:04:35PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > I would like to see adoption of config.guess output as definitive, and
> > collapse that into a platform identifier (that can be broken up into
> > OS and arch in the usual ways).
> 
> I've been talking with a couple of people who are doing lots of work
> with different architectures and OS'es about this. They all have
> the same complaint: the OS & architecture tags are simply not sufficient.
> The problem is that a single machine can implement multiple architectures
> (ultrasparcs running sparc binaries), or that one OS might have emulation
> for another (the HURD will be able to run Linux binaries, some BSD versions
> already do).
> 

I agree 300% that arch and os tags are not sufficient to package anything
correctly these days. But heaven forbid that something as "obvious" or
"intutive" as arch and os should be removed from packaging software.

> Their suggestion is to use dependencies to solve this. The idea is to
> make a package depend on pseudopackages for the OS (OS ABI actually) and 
> architecture they need. The packagemanger can then compare those with
> what the machine is actually using and determine if a package will be
> able to run.
> 

There needs to be a bridging solution between the old paradigm and the new,
(kinda like Windows-95 :-). Standardizing on the output of config.guess
permits
   1) intuitive mapping from arch/os to platform.
   2) using common accepted practice that is not controversial. Most packagers
   are familiar sith the output of config.guess.
   3) a resolution mechanism to issues regarding whether "powerpc" or "ppc"
   is the correct representation. The answer becomes
	What does config.guess say?

Eventually, depending on explicit attributes like arch-ness and os-hood
is the Right Thing To Do. However, we need semantics for arch-ness and
os-hood that are useful for identifying package dependencies and that
is a tricky issue to get right.

> Using this mechanism it is also easy to create seperate packages for
> architecture-subsets (pentium-packages, amd-packages, etc.).
> 

Following your own recommendations, I would say that there is no such
thing as "pentium-packages", merely a dependency/requirement that
packages were compiled with certain flags.

Dunno what you mean by amd-packages -- do you mean the hardware or
the package dependency :-)

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Jun 28 08:06:45 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id IAA28773;
	Mon, 28 Jun 1999 08:06:44 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id IAA09395;
	Mon, 28 Jun 1999 08:06:40 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id IAA25802;
	Mon, 28 Jun 1999 08:06:40 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id IAA22645;
	Mon, 28 Jun 1999 08:06:38 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id IAA22607
	for packaging-list; Mon, 28 Jun 1999 08:06:33 -0400
Resent-Date: Mon, 28 Jun 1999 08:06:33 -0400
Resent-Message-Id: <199906281206.IAA22607@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (wichert@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id IAA22570
	for <packaging@rufus.w3.org>; Mon, 28 Jun 1999 08:06:28 -0400
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian/GNU) id OAA17623
	for packaging@rufus.w3.org; Mon, 28 Jun 1999 14:06:23 +0200
Date: Mon, 28 Jun 1999 14:06:23 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Re: tags
Message-ID: <19990628140623.C17587@soil.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <19990624223855.E16960@mors.net> <Pine.LNX.4.10.9906271056140.13163-100000@localhost>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=9amGYk9869ThD9tj; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <Pine.LNX.4.10.9906271056140.13163-100000@localhost>; from Erik Troan on Sun, Jun 27, 1999 at 10:57:39AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 962
Lines: 32



--9amGYk9869ThD9tj
Content-Type: text/plain; charset=us-ascii

Previously Erik Troan wrote:
> I'd really rather let the lsb deal with this issue. We should provice package
> dependencies that are compatible with each other, and perhaps make sure
> current practice doesn't produce any erroneous dependency matches.

Sounds reasonable. But until there is such a LSB-standard I think
dependencies should not be in a common section to avoid problems.
Maybe we should create a LSB-depend tag at a later stage?

Wichert.

--9amGYk9869ThD9tj
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBN3dlP6jZR/ntlUftAQF2zQL9F7TtFvN6vaD712t6Ts3RC7ptVl4uQsMh
M/WpqLjf8PefAr+FD/FrlYwMf2OeEo5zKh8chnXj8KP/cbA7KANx5PbdUi1JxV5x
3g/greoXcFUOe1ZjzC5b3+97Qfu85gD6
=e1KS
-----END PGP SIGNATURE-----

--9amGYk9869ThD9tj--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Jun 28 08:07:20 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id IAA28801;
	Mon, 28 Jun 1999 08:07:19 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id IAA09443;
	Mon, 28 Jun 1999 08:07:18 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id IAA26076;
	Mon, 28 Jun 1999 08:07:18 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id IAA22795;
	Mon, 28 Jun 1999 08:07:16 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id IAA22782
	for packaging-list; Mon, 28 Jun 1999 08:07:14 -0400
Resent-Date: Mon, 28 Jun 1999 08:07:14 -0400
Resent-Message-Id: <199906281207.IAA22782@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (wichert@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id IAA22768
	for <packaging@rufus.w3.org>; Mon, 28 Jun 1999 08:07:11 -0400
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian/GNU) id OAA17639
	for packaging@rufus.w3.org; Mon, 28 Jun 1999 14:07:11 +0200
Date: Mon, 28 Jun 1999 14:07:11 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] tags
Message-ID: <19990628140711.D17587@soil.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <19990626140435.A32093@soil.nl> <Pine.LNX.4.10.9906271115180.13336-100000@localhost>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=z6Eq5LdranGa6ru8; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <Pine.LNX.4.10.9906271115180.13336-100000@localhost>; from Erik Troan on Sun, Jun 27, 1999 at 11:16:02AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 888
Lines: 31



--z6Eq5LdranGa6ru8
Content-Type: text/plain; charset=us-ascii

Previously Erik Troan wrote:
> This makes it difficult for a tool to know that an i686 package is a "better"
> match for a Pentium III machine then an i486 package is though (this is
> an ability we currently have in RPM).

It doesn't make it more difficult than it already is.. such a preference-list
should be configured somewhere outside of the packagemanager IMHO.

Wichert.

--z6Eq5LdranGa6ru8
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBN3dlb6jZR/ntlUftAQG7oQL8DfGZ9X2EkfgYTNmn5T+FCTdZsVfFkJZP
C+0l4cb4KN8BcddB+dxercxoJaizkTrOSRd2Scb3lyjkWM4W9YHpkUwc8p5Whgoy
xGoQHntOiWoKaf9odKsbIBU+oczfvshc
=9T2m
-----END PGP SIGNATURE-----

--z6Eq5LdranGa6ru8--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Jun 28 09:37:51 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id JAA30470;
	Mon, 28 Jun 1999 09:37:49 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id JAA17887;
	Mon, 28 Jun 1999 09:37:48 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id JAA05267;
	Mon, 28 Jun 1999 09:37:48 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id JAA05743;
	Mon, 28 Jun 1999 09:37:46 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id JAA05707
	for packaging-list; Mon, 28 Jun 1999 09:37:38 -0400
Resent-Date: Mon, 28 Jun 1999 09:37:38 -0400
Resent-Message-Id: <199906281337.JAA05707@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:msw@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id JAA05685
	for <packaging@rufus.w3.org>; Mon, 28 Jun 1999 09:37:34 -0400
Received: (from msw@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id JAA30460;
	Mon, 28 Jun 1999 09:37:34 -0400
Message-ID: <19990628093734.B30087@devserv.devel.redhat.com>
Date: Mon, 28 Jun 1999 09:37:34 -0400
From: Matt Wilson <msw@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] tags
References: <19990626140435.A32093@soil.nl> <Pine.LNX.4.10.9906271115180.13336-100000@localhost> <19990627152019.K14356@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990627152019.K14356@devserv.devel.redhat.com>; from Jeff Johnson on Sun, Jun 27, 1999 at 03:20:19PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1570
Lines: 39


On Sun, Jun 27, 1999 at 03:20:19PM -0400, Jeff Johnson wrote:
> I'm strongly against "scoring" without some idea of how it is to be used.
> I do not know of any packaging that makes meaningful use of scoring.

Our kernel package is the best example of this.  On intel it'll pick
the best kernel out of i386, i586, or i686.  On sparc it'll pick the
sparc64 kernel for UltraSparc machines and the sparc kernel for
sun4[cdm].  The current rpmrc format allows us to say, "you can use
i586 RPMS on i686, but not i486".

> I would also argue theoretically that there is no ordering property that
> can be exploited to say that an i486 is "closer" to an i386 than an i586
> which is at the base of scoring.

I don't think we need the fuzzy scoring of "closer" to make this work.
Hard "compatible" seems to be working.

> Personally, I'd like to see a "hint" that the package was intended for
> a set of platforms. If the platforms are named by config.guess, then
> it's pretty simple to capture the hint about intended install platforms
> in a set of regular expressions in the packaging that are applied to
> platform strings on the host without getting into the deeper semantics of
> 
>     On what platforms can a package compiled with -m486 be installed?

Follow the compat chain up:

arch_compat: i686: i586
arch_compat: i586: i486

So, you can install i486 rpms on i586 and i686.

I'd like see examples of where our current scoring is insufficient

Matt
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Jun 28 11:50:59 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA01030;
	Mon, 28 Jun 1999 11:50:57 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA00547;
	Mon, 28 Jun 1999 11:50:56 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA01249;
	Mon, 28 Jun 1999 11:50:54 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA21836;
	Mon, 28 Jun 1999 11:50:52 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA21824
	for packaging-list; Mon, 28 Jun 1999 11:50:48 -0400
Resent-Date: Mon, 28 Jun 1999 11:50:48 -0400
Resent-Message-Id: <199906281550.LAA21824@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:ewt@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA21819
	for <packaging@rufus.w3.org>; Mon, 28 Jun 1999 11:50:46 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id LAA13916
	for <packaging@rufus.w3.org>; Mon, 28 Jun 1999 11:52:19 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Mon, 28 Jun 1999 11:52:19 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: packaging@rufus.w3.org
Subject: Re: [packaging] tags
In-Reply-To: <19990627152019.K14356@devserv.devel.redhat.com>
Message-ID: <Pine.LNX.4.10.9906281144160.13899-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1544
Lines: 36


On Sun, 27 Jun 1999, Jeff Johnson wrote:

> I'm strongly against "scoring" without some idea of how it is to be used.
> I do not know of any packaging that makes meaningful use of scoring.

Umm, our install process makes use of scoring for the kernel right now, and
will use it for more packages in the future. This can also apply to Alpha
and SPARC/uSPARC processers.

> Personally, I'd like to see a "hint" that the package was intended for
> a set of platforms. If the platforms are named by config.guess, then
> it's pretty simple to capture the hint about intended install platforms
> in a set of regular expressions in the packaging that are applied to
> platform strings on the host without getting into the deeper semantics of

That might make more sense actually -- could you work up a more concrete
proposal for this group?

>     On what platforms can a package compiled with -m486 be installed?

Any x86, but that's a bad test. i686 kernels can't be installed on i386
platforms, which is a better example.

Erik

-------------------------------------------------------------------------------
|       "For the next two hours, VH1 will be filled with foul-mouthed,        |
|          crossdressing Australians. Viewer discretion is advised."          |
|                                                                             |
|   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |


----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Jun 28 11:51:11 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA01053;
	Mon, 28 Jun 1999 11:51:09 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA00605;
	Mon, 28 Jun 1999 11:51:09 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA01399;
	Mon, 28 Jun 1999 11:51:09 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA21900;
	Mon, 28 Jun 1999 11:51:07 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA21892
	for packaging-list; Mon, 28 Jun 1999 11:51:05 -0400
Resent-Date: Mon, 28 Jun 1999 11:51:05 -0400
Resent-Message-Id: <199906281551.LAA21892@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:ewt@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA21889
	for <packaging@rufus.w3.org>; Mon, 28 Jun 1999 11:51:04 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id LAA13922
	for <packaging@rufus.w3.org>; Mon, 28 Jun 1999 11:52:37 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Mon, 28 Jun 1999 11:52:37 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: packaging@rufus.w3.org
Subject: Re: [packaging] tags
In-Reply-To: <19990628140711.D17587@soil.nl>
Message-ID: <Pine.LNX.4.10.9906281152260.13899-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 793
Lines: 19


On Mon, 28 Jun 1999, Wichert Akkerman wrote:

> It doesn't make it more difficult than it already is.. such a preference-list
> should be configured somewhere outside of the packagemanager IMHO.

That could be, and if you and Jeff agree you're both probably right ;-)

Erik

-------------------------------------------------------------------------------
|       "For the next two hours, VH1 will be filled with foul-mouthed,        |
|          crossdressing Australians. Viewer discretion is advised."          |
|                                                                             |
|   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Jun 28 13:16:21 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id NAA03320;
	Mon, 28 Jun 1999 13:16:20 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id NAA12336;
	Mon, 28 Jun 1999 13:16:18 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id NAA04053;
	Mon, 28 Jun 1999 13:16:18 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA29495;
	Mon, 28 Jun 1999 13:16:16 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA29484
	for packaging-list; Mon, 28 Jun 1999 13:16:13 -0400
Resent-Date: Mon, 28 Jun 1999 13:16:13 -0400
Resent-Message-Id: <199906281716.NAA29484@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA29477
	for <packaging@rufus.w3.org>; Mon, 28 Jun 1999 13:16:09 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id NAA03306;
	Mon, 28 Jun 1999 13:16:08 -0400
Message-ID: <19990628131608.T14356@devserv.devel.redhat.com>
Date: Mon, 28 Jun 1999 13:16:08 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] tags
References: <19990626140435.A32093@soil.nl> <Pine.LNX.4.10.9906271115180.13336-100000@localhost> <19990627152019.K14356@devserv.devel.redhat.com> <19990628093734.B30087@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990628093734.B30087@devserv.devel.redhat.com>; from Matt Wilson on Mon, Jun 28, 1999 at 09:37:34AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 504
Lines: 22


On Mon, Jun 28, 1999 at 09:37:34AM -0400, Matt Wilson wrote:
> 
> I'd like see examples of where our current scoring is insufficient
> 

Try

	rpm -U kernel-*-2.2.5-23.sparc.rpm

on s sparc64 machine for starters. I suspect (though haven't tried)
that some of the ix86 platforms have similar problems.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Jun 28 18:48:29 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id SAA07160;
	Mon, 28 Jun 1999 18:48:26 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA10855;
	Mon, 28 Jun 1999 18:45:30 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA11396;
	Mon, 28 Jun 1999 18:45:29 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA27309;
	Mon, 28 Jun 1999 18:45:27 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id SAA27271
	for packaging-list; Mon, 28 Jun 1999 18:45:17 -0400
Resent-Date: Mon, 28 Jun 1999 18:45:17 -0400
Resent-Message-Id: <199906282245.SAA27271@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from zeus.wi.leidenuniv.nl (zeus.wi.leidenuniv.nl [132.229.128.1])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id SAA27264
	for <packaging@rufus.w3.org>; Mon, 28 Jun 1999 18:45:01 -0400
Received: from lightning.mors.net (root@home039.wi.leidenuniv.nl [132.229.210.167])
	by zeus.wi.leidenuniv.nl (8.8.8/8.8.8/WI) with ESMTP id AAA20224
	for <packaging@rufus.w3.org>; Tue, 29 Jun 1999 00:44:43 +0200 (MET DST)
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian/GNU) id AAA04759
	for packaging@rufus.w3.org; Tue, 29 Jun 1999 00:44:26 +0200
Date: Tue, 29 Jun 1999 00:44:26 +0200
From: Wichert Akkerman <wichert@cs.leidenuniv.nl>
To: packaging@rufus.w3.org
Subject: [packaging] comments about architecture/OS stuff
Message-ID: <19990629004426.A4669@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=RnlQjJ0d97Da+TV1; micalg=pgp-sha1;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 14050
Lines: 337



--RnlQjJ0d97Da+TV1
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable


I forwarded parts of the discussion on the OS/architecture tags to
one of our developers who also works on the HURD. Here are his
comments:

> From: Erik Troan <ewt@redhat.com>
> Message-ID: <Pine.LNX.4.10.9906271115180.13336-100000@localhost>
>=20
> > Their suggestion is to use dependencies to solve this. The idea is to
> > make a package depend on pseudopackages for the OS (OS ABI actually) an=
d=20
> > architecture they need. The packagemanger can then compare those with
> > what the machine is actually using and determine if a package will be
> > able to run.
>=20
> This makes it difficult for a tool to know that an i686 package is a "bet=
ter"
> match for a Pentium III machine then an i486 package is though (this is
> an ability we currently have in RPM).

You must use a scoring/hint mechanism for this. This can be quite simple.
This scoring mechanism is only relevant for creating a distribution, not for
installation of a single package.

> Message-ID: <19990627152019.K14356@devserv.devel.redhat.com>
> From: Jeff Johnson <jbj@redhat.com>
> I'm strongly against "scoring" without some idea of how it is to be used.
> I do not know of any packaging that makes meaningful use of scoring.
>=20
> I would also argue theoretically that there is no ordering property that
> can be exploited to say that an i486 is "closer" to an i386 than an i586
> which is at the base of scoring.
>=20
> Personally, I'd like to see a "hint" that the package was intended for
> a set of platforms.

That's true. You need the hints, and base your scoring on the hints.

> If the platforms are named by config.guess, then
> it's pretty simple to capture the hint about intended install platforms
> in a set of regular expressions in the packaging that are applied to
> platform strings on the host without getting into the deeper semantics of
>=20
>     On what platforms can a package compiled with -m486 be installed?

Discussion of what the hints are and how they are scored is really an
implementation detail. There are multiple possibilities, and config.guess is
certainly not the worst of them. However, you don't need to use config.guess
in the packages architecture dependency information to make use of that.
(You can always base the scoring on a remapping table or so).


> From: Wichert Akkerman <wichert@soil.nl>
> Message-ID: <19990628140711.D17587@soil.nl>
>=20
> Previously Erik Troan wrote:
> > This makes it difficult for a tool to know that an i686 package is a "b=
etter"
> > match for a Pentium III machine then an i486 package is though (this is
> > an ability we currently have in RPM).
>=20
> It doesn't make it more difficult than it already is.. such a preference-=
list
> should be configured somewhere outside of the packagemanager IMHO.

Agreed. In my concept, it is part of the distribution creation.


> Message-ID: <19990627150744.J14356@devserv.devel.redhat.com>
> From: Jeff Johnson <jbj@redhat.com>
>=20
> I agree 300% that arch and os tags are not sufficient to package anything
> correctly these days. But heaven forbid that something as "obvious" or
> "intutive" as arch and os should be removed from packaging software.

The trick is to use the intuitive cpu-os tag to deliver a distribution to
the user, but to use flexible virtual package dependencies everywhere else.
This is not a conflict. The intuitive concept should not be removed, but
integrated into a bigger, more complete setup.

> > Their suggestion is to use dependencies to solve this. The idea is to
> > make a package depend on pseudopackages for the OS (OS ABI actually) an=
d=20
> > architecture they need. The packagemanger can then compare those with
> > what the machine is actually using and determine if a package will be
> > able to run.
> >=20
>=20
> There needs to be a bridging solution between the old paradigm and the ne=
w,
> (kinda like Windows-95 :-). Standardizing on the output of config.guess
> permits
>    1) intuitive mapping from arch/os to platform.

I'm not sure what this means. It seems to be what we currently do (when I
read "platform" as distribution for a specific platform).

>    2) using common accepted practice that is not controversial. Most pack=
agers
>    are familiar sith the output of config.guess.

config.guess will play a big role in the packaging process when determining
the build gnu system type. There is no alternative. However, to specify the
architecture dependencies for the final package, it can merely give a hint.

>    3) a resolution mechanism to issues regarding whether "powerpc" or "pp=
c"
>    is the correct representation. The answer becomes
> 	What does config.guess say?

Of course. This is orthogonal to everything else though.
=20
> Eventually, depending on explicit attributes like arch-ness and os-hood
> is the Right Thing To Do. However, we need semantics for arch-ness and
> os-hood that are useful for identifying package dependencies and that
> is a tricky issue to get right.

I am not sure what he means here. The attributes (which I read as virtual
architecture packages here) will be created dynamically whenever they are
needed.

> > Using this mechanism it is also easy to create seperate packages for
> > architecture-subsets (pentium-packages, amd-packages, etc.).
> >=20
>=20
> Following your own recommendations, I would say that there is no such
> thing as "pentium-packages", merely a dependency/requirement that
> packages were compiled with certain flags.

A pentium package that has pentium specific instructions would be a package
dependending on "i586". A pentium package that has only reorganized i386
code would be apackage depending on "i386" and carrying a hint for i586.


Thanks,
Marcus


--=20
`Rhubarb is no Egyptian god.' Debian http://www.debian.org   finger brinkmd=
@=20
Marcus Brinkmann              GNU    http://www.gnu.org     master.debian.o=
rg
Marcus.Brinkmann@ruhr-uni-bochum.de                        for public  PGP =
Key
http://homepage.ruhr-uni-bochum.de/Marcus.Brinkmann/       PGP Key ID 36E7C=
D09


Hello,

they way I think about architecture treatment stems from my experiences with
the Debian package tools and bootstrapping the Debian GNU/Hurd system.

The concept presented below has the following core ideas, that I think are
important enough to summarize them in a short list:

* Package installation is orthogonal to distribution creation.
* Package installation requires only dependency verification.
* Distribution creation requires dependency verification and scoring.


Package Installation
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

A package manager (the part of the packaging system that installs packages
on a host machine) should only be concerned with fulfilling dependencies. It
should determine if a package is installable, and if it is, it should
perform the required action.

For this, virtual packages representing ABI capabilities really perform
best. You can provide virtual architecture packages for any ABI feature,
like which processor is required, if a /proc filesystem is provided, if lin=
ux
syscalls are available and so on. IMO, dependencies should be as weak as
possible. If a pentium optimized package runs also on a 486, the dependency
should be "486" (or even 386), not "pentium".

Examples:
=2E "grub" only depends on "i386", regardless of the operating system
  running.
=2E Most linux binaries will depend on a certain cpu only (apart from any
  libraries), and will not make use of syscalls or the proc filessystem
  directly. Those will run on the Hurd without recompilation.

That was the "depends on" side. There is also the "provides" side. A usual
pentium linux box will provide "i386, i486, i586", "linux-syscalls (=3D 2.2=
)"
and "proc-fs" for example. Note that you can have version numbers here, too.
Which packages are provided is a feature of the "distribution".

Distributions
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

The distribution is really a concept that should not be built directly into
the package installer, because it requires some overview on the system. The
reason is that a distribution needs to be a consistent set of packages.

Here config.guess actually comes in. There is a "default" mapping from
canonicalized host type strings to virtual packages, for example:

i586-gnu-linux   -->   "i386", "i486", "i586", "linux"
i486-gnu         -->   "i386", "i486", "gnu"

Note that concepts like "linux-syscalls" and "procfs" would be provided by
the linux kernel package itself.

It would be easy to write a utility that can create distributions on the
fly if all available packages are collected in a pool. You just have to map
your host system type to a set of virtual packages provided, and start
adding packages which dependencies can be fulfilled. Of course, you will
get further possibilities through additional "provides:" in the packages you
added, so you can add more and more packages from your pool to your
distribution. Using some standard algorithms from graph theory, you should
be able to take into account conflicting packages etc, to get a maximum
distribution, e.g., a distribution which only consists of packages which are
installable using packages from this distribution, and is not missing any
package from the pool with this property.


Hints or Scoring
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

Hints are complex and I haven't thought them completely through. But here is
a rather complete analysis of the different cases that you have to treat
differently when considering scoring:

Usually, we would recompile a package for another architetcture only if it
is not yet available for this architecture, eg, if it is not in this
architectures distribution. Furthermore, recompiling for another
architecture would often result in a binary package that is not useful on
any of the existing architectures.

Example:
 Package foo is available for all i386 arches, because it only
 depends on the virtual package "i386".

Because we want to support powerpc, we recompile it for this architectures.
The resulting binary depends on powerpc only. Currently, no platform can run
i386 and powerpcs at the same time. Therefore, all distributions we create
with the procedure above will only contain either of these packages.

If two binary versions of the same package happen to match the same
distribution, two cases are possible:

1) "Scoring": Both packages have different dependencies ("i386" vs.
   "powerpc") or do not carry hints.
2) "Hints": Both packages have the same dependencies ("i386" native and
   "i386" with pentium optimization [but without pentium specific
   instructions]). Then we need hints to decide.

I won't go into detail how b1 and b2 could be treated, only so much:

For b1), it would be sufficient to order the available virtual dependency
packages that should be considered in a priority list. Or more abstract:
You have a function "int score(list of dependencies)" which calculates a
value for each package, and the highest value wins. equal value would mean
both packages are equal and it doesn't matter which one is picked. The
function can be very simple and only catch the cases that are known to
occure.

If both packages have same dependencies, but are not equal, they have to
tell us more about them in a "hints" metadata. This could be the
config.guess of the compiled architecture for example, or some preferred
target architecture, or something alike. The scoring would then be a
function of the dependencies and the hints metadata. This can actually
be a very simple function (like hint "i586" is better than "i486" is
better than "i386" for the i586 distribution).

The _important_ thing is that scoring is part of the distribution creation,
not part of package installation. I should always be allowed to install a
package with a bad score, even if it is a worse score than the default pack=
age
it would replace. For example, I could fetch such a package from the package
pool to override a bug in the optimization or something alike.=20


Complexity
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

I think my concept is rather complete, at least it is not obvious to me whi=
ch
weird combination of architecture dependency is not covered by it. But is it
actually too complex? Is it overkill?

I think not, and this has two reasons:

1. The main complexity is in the distribution creation, which is completely
hidden from the user. It will happen at the main repository of the software
distrtibution. Users will continue to get a i386 linux distribution, or a
powerpc distribution of the Hurd. What we gain back is a VERY simple
package installation tool which is not any longer concerned about scoring or
similar, but merely a dependency checker.

2. The most difficult part seems to be the scoring. But this is only
complicated if you want to implement a general catch-all solution.
I think the number of cases were scoring actually happens is very small,
and can be covered by some simple rules.

The rest is really only organization of the packages that are uploaded and
installed in the distribution.


----- End forwarded message -----

--=20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
This combination of bytes forms a message written to you by Wichert Akkerma=
n.
E-Mail: wichert@cs.leidenuniv.nl
WWW: http://www.wi.leidenuniv.nl/~wichert/

--RnlQjJ0d97Da+TV1
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v0.9.8 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjd3+skACgkQPLiSUC+jvC3NDQCdHRdM6tHOaAkSFBNBPCneo65D
dF4AnjIx64EJ7so3zQNMJb+y2dK2uaXE
=u4zg
-----END PGP SIGNATURE-----

--RnlQjJ0d97Da+TV1--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jun 29 08:36:00 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id IAA21039;
	Tue, 29 Jun 1999 08:35:47 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id IAA10303;
	Tue, 29 Jun 1999 08:32:47 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id IAA20512;
	Tue, 29 Jun 1999 08:32:46 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id IAA20435;
	Tue, 29 Jun 1999 08:13:07 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id IAA20416
	for packaging-list; Tue, 29 Jun 1999 08:13:03 -0400
Resent-Date: Tue, 29 Jun 1999 08:13:03 -0400
Resent-Message-Id: <199906291213.IAA20416@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (wichert@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id IAA20413
	for <packaging@rufus.w3.org>; Tue, 29 Jun 1999 08:13:00 -0400
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian/GNU) id OAA29050
	for packaging@rufus.w3.org; Tue, 29 Jun 1999 14:12:55 +0200
Date: Tue, 29 Jun 1999 14:12:54 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] tags
Message-ID: <19990629141254.K28746@soil.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <19990626140435.A32093@soil.nl> <Pine.LNX.4.10.9906271115180.13336-100000@localhost> <19990627152019.K14356@devserv.devel.redhat.com> <19990628093734.B30087@devserv.devel.redhat.com> <19990628131608.T14356@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=OX7PPUk8qMPP4++R; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990628131608.T14356@devserv.devel.redhat.com>; from Jeff Johnson on Mon, Jun 28, 1999 at 01:16:08PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 668
Lines: 31



--OX7PPUk8qMPP4++R
Content-Type: text/plain; charset=us-ascii

Previously Jeff Johnson wrote:
> Try
> 	rpm -U kernel-*-2.2.5-23.sparc.rpm
> on s sparc64 machine for starters.

Or a sun4m system for that matter.

Wichert.


--OX7PPUk8qMPP4++R
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBN3i4RqjZR/ntlUftAQFD9QMAtL8Vf54Ij2o9VcfGPdmKnk/KN2uh2bkP
2VZm01HpgdfhAq+6uwRrw99xQRzy6m2ZH7FlWlBkD8SE0JjHU2paFjQ+j4tss57q
wR6rTR3+cNGh5nNDj0H17PXiKLyUT4b3
=0qRT
-----END PGP SIGNATURE-----

--OX7PPUk8qMPP4++R--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Jun 30 12:47:17 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id MAA22270;
	Wed, 30 Jun 1999 12:47:15 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA10832;
	Wed, 30 Jun 1999 12:47:15 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA14629;
	Wed, 30 Jun 1999 12:47:15 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA19423;
	Wed, 30 Jun 1999 12:47:13 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA19414
	for packaging-list; Wed, 30 Jun 1999 12:47:10 -0400
Resent-Date: Wed, 30 Jun 1999 12:47:10 -0400
Resent-Message-Id: <199906301647.MAA19414@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA19411
	for <packaging@rufus.w3.org>; Wed, 30 Jun 1999 12:47:08 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id MAA22252;
	Wed, 30 Jun 1999 12:47:04 -0400
Message-ID: <19990630124703.A21965@devserv.devel.redhat.com>
Date: Wed, 30 Jun 1999 12:47:03 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] tags
References: <19990626140435.A32093@soil.nl> <Pine.LNX.4.10.9906271115180.13336-100000@localhost> <19990627152019.K14356@devserv.devel.redhat.com> <19990628093734.B30087@devserv.devel.redhat.com> <19990628131608.T14356@devserv.devel.redhat.com> <19990629141254.K28746@soil.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990629141254.K28746@soil.nl>; from Wichert Akkerman on Tue, Jun 29, 1999 at 02:12:54PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 917
Lines: 34


On Tue, Jun 29, 1999 at 02:12:54PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > Try
> > 	rpm -U kernel-*-2.2.5-23.sparc.rpm
> > on s sparc64 machine for starters.
> 
> Or a sun4m system for that matter.
> 

No, the above rpm command works fine on a sun4m. On a sparc64 the command
installs a kernel that will not work.

I had hoped to illustrate that rpm's current implementation of arch's
with scoring was broken in this case.

The case in which scoring *is* useful is when presented with the choice of
possible packages to install
	kernel-2.2.5-23.sparc.rpm
	kernel-2.2.5-23.sparc64.rpm
scoring would choose on a sun4m
	kernel-2.2.5-23.sparc.rpm
and on a sun4u
	kernel-2.2.5-23.sparc64.rpm

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Jun 30 12:52:01 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id MAA22431;
	Wed, 30 Jun 1999 12:51:59 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA11203;
	Wed, 30 Jun 1999 12:51:58 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA14916;
	Wed, 30 Jun 1999 12:51:58 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA19730;
	Wed, 30 Jun 1999 12:51:56 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA19722
	for packaging-list; Wed, 30 Jun 1999 12:51:54 -0400
Resent-Date: Wed, 30 Jun 1999 12:51:54 -0400
Resent-Message-Id: <199906301651.MAA19722@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (wichert@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA19718
	for <packaging@rufus.w3.org>; Wed, 30 Jun 1999 12:51:51 -0400
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian/GNU) id SAA03033
	for packaging@rufus.w3.org; Wed, 30 Jun 1999 18:51:51 +0200
Date: Wed, 30 Jun 1999 18:51:51 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] tags
Message-ID: <19990630185151.B3004@soil.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <19990626140435.A32093@soil.nl> <Pine.LNX.4.10.9906271115180.13336-100000@localhost> <19990627152019.K14356@devserv.devel.redhat.com> <19990628093734.B30087@devserv.devel.redhat.com> <19990628131608.T14356@devserv.devel.redhat.com> <19990629141254.K28746@soil.nl> <19990630124703.A21965@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=KFztAG8eRSV9hGtP; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990630124703.A21965@devserv.devel.redhat.com>; from Jeff Johnson on Wed, Jun 30, 1999 at 12:47:03PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
X-Status: A
Content-Length: 742
Lines: 29



--KFztAG8eRSV9hGtP
Content-Type: text/plain; charset=us-ascii

Previously Jeff Johnson wrote:
> No, the above rpm command works fine on a sun4m. On a sparc64 the command
> installs a kernel that will not work.

Really? sun4m machines need a different kernel then all the other sparcs..

Wichert.

--KFztAG8eRSV9hGtP
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBN3pLJ6jZR/ntlUftAQFpFgMAgnetC+Hxz7n575WJ1Ca1wAEvHjm89he9
JKPqH6OG2ZrYvQQ8T76GiCvgILM50Sr41y2aRTsqok8XvKbftFTJH5kkeD845/DG
Bwzuf3cVCnePwR+MuRv03VEZr3yqLlIs
=Hi6t
-----END PGP SIGNATURE-----

--KFztAG8eRSV9hGtP--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Jun 30 13:43:15 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id NAA23943;
	Wed, 30 Jun 1999 13:43:12 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id NAA16040;
	Wed, 30 Jun 1999 13:43:12 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id NAA17407;
	Wed, 30 Jun 1999 13:43:12 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA23014;
	Wed, 30 Jun 1999 13:43:10 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA23005
	for packaging-list; Wed, 30 Jun 1999 13:43:07 -0400
Resent-Date: Wed, 30 Jun 1999 13:43:07 -0400
Resent-Message-Id: <199906301743.NAA23005@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:msw@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA23002
	for <packaging@rufus.w3.org>; Wed, 30 Jun 1999 13:43:05 -0400
Received: (from msw@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id NAA23937;
	Wed, 30 Jun 1999 13:43:05 -0400
Message-ID: <19990630134305.B22688@devserv.devel.redhat.com>
Date: Wed, 30 Jun 1999 13:43:05 -0400
From: Matt Wilson <msw@redhat.com>
To: packaging@rufus.w3.org
Subject: [packaging] Re: Sparc kernels (off topic. :)
References: <19990626140435.A32093@soil.nl> <Pine.LNX.4.10.9906271115180.13336-100000@localhost> <19990627152019.K14356@devserv.devel.redhat.com> <19990628093734.B30087@devserv.devel.redhat.com> <19990628131608.T14356@devserv.devel.redhat.com> <19990629141254.K28746@soil.nl> <19990630124703.A21965@devserv.devel.redhat.com> <19990630185151.B3004@soil.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990630185151.B3004@soil.nl>; from Wichert Akkerman on Wed, Jun 30, 1999 at 06:51:51PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 427
Lines: 13


On Wed, Jun 30, 1999 at 06:51:51PM +0200, Wichert Akkerman wrote:
> Really? sun4m machines need a different kernel then all the other sparcs..

Hmm?  Odd - our sun4c and sun4m machines are running the same kernel
here... We don't have any sun4d machines, though, and Red Hat Linux
doesn't support them.

Matt

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Jun 30 14:07:05 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id OAA24397;
	Wed, 30 Jun 1999 14:07:02 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id OAA18174;
	Wed, 30 Jun 1999 14:07:00 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id OAA18344;
	Wed, 30 Jun 1999 14:07:00 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id OAA24359;
	Wed, 30 Jun 1999 14:06:58 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id OAA24350
	for packaging-list; Wed, 30 Jun 1999 14:06:55 -0400
Resent-Date: Wed, 30 Jun 1999 14:06:55 -0400
Resent-Message-Id: <199906301806.OAA24350@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from lappy.djj.state.va.us (djj.state.va.us [165.176.13.106])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id OAA24347
	for <packaging@rufus.w3.org>; Wed, 30 Jun 1999 14:06:52 -0400
Received: from bmc by lappy.djj.state.va.us with local (Exim 3.02 #1 (Debian))
	id 10zLLV-0001Qy-00; Wed, 30 Jun 1999 10:28:17 -0400
Date: Wed, 30 Jun 1999 10:28:17 -0400
From: Ben Collins <bcollins@debian.org>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Re: Sparc kernels (off topic. :)
Message-ID: <19990630102817.B4957@lappy.djj.state.va.us>
References: <19990626140435.A32093@soil.nl> <Pine.LNX.4.10.9906271115180.13336-100000@localhost> <19990627152019.K14356@devserv.devel.redhat.com> <19990628093734.B30087@devserv.devel.redhat.com> <19990628131608.T14356@devserv.devel.redhat.com> <19990629141254.K28746@soil.nl> <19990630124703.A21965@devserv.devel.redhat.com> <19990630185151.B3004@soil.nl> <19990630134305.B22688@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990630134305.B22688@devserv.devel.redhat.com>; from Matt Wilson on Wed, Jun 30, 1999 at 01:43:05PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2245
Lines: 52


On Wed, Jun 30, 1999 at 01:43:05PM -0400, Matt Wilson wrote:
> 
> On Wed, Jun 30, 1999 at 06:51:51PM +0200, Wichert Akkerman wrote:
> > Really? sun4m machines need a different kernel then all the other sparcs..
> 
> Hmm?  Odd - our sun4c and sun4m machines are running the same kernel
> here... We don't have any sun4d machines, though, and Red Hat Linux
> doesn't support them.

In Debian, sun4[cdm] is supported in a single kernel (although sun4d
doesn't work very well) and only sun4u requires it's own kernel. I think
Wichert is refering to a problem where up until 2.2.9, our glibc 2.1.x did
not work properly under sun4m (btw, did RH encounter a similar problem?)

This brings up a small point on dependencies. I had some thought on the
install systems supplying some of it's own virtual dependencies based on
state rather than installed files or packages. This probably falls in line
with sub arch specifications. For example depend on "system::kernel >=
2.2.0" which checks the current kernel version (which often times is not
installed by the package manager). I'm thinking a special "::" with a
preceding type ('system' etc.) to check against internally supplied
virtual packages would suffice. The package manager would then supply
these dynamically based on the system state (I'm assuming most would be
supplied by uname or a /proc check). A few good examples:

system::kernel [version]	checks the current kernel version,
				meaningless without a version specification

system::modules			current kernel must be compiled with
				module support, for kernel module
				packages. Probably best if used with above

system::memory [size]		Large packages (eg. mozilla) could specify
system::memory-physical [size]	minimum memory requirements
system::memory-swap [size]

system::machine			same as the `uname -m' output

system::dist [name]		this may or may not be a good one, but if
				there are packages that tie in tightly with a
				specific distribution, then a package
				could thwart attempts to install it on
				another distribution using this


There's probably more, but these are off the top of my head.

Ben
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Jun 30 14:22:25 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id OAA24750;
	Wed, 30 Jun 1999 14:22:24 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id OAA19505;
	Wed, 30 Jun 1999 14:22:23 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id OAA19191;
	Wed, 30 Jun 1999 14:22:23 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id OAA25437;
	Wed, 30 Jun 1999 14:22:21 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id OAA25427
	for packaging-list; Wed, 30 Jun 1999 14:22:18 -0400
Resent-Date: Wed, 30 Jun 1999 14:22:18 -0400
Resent-Message-Id: <199906301822.OAA25427@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id OAA25423
	for <packaging@rufus.w3.org>; Wed, 30 Jun 1999 14:22:14 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id OAA24729;
	Wed, 30 Jun 1999 14:22:14 -0400
Message-ID: <19990630142214.B21965@devserv.devel.redhat.com>
Date: Wed, 30 Jun 1999 14:22:14 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] comments about architecture/OS stuff
References: <19990629004426.A4669@mors.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990629004426.A4669@mors.net>; from Wichert Akkerman on Tue, Jun 29, 1999 at 12:44:26AM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 17005
Lines: 405


On Tue, Jun 29, 1999 at 12:44:26AM +0200, Wichert Akkerman wrote:
> 
> > If the platforms are named by config.guess, then
> > it's pretty simple to capture the hint about intended install platforms
> > in a set of regular expressions in the packaging that are applied to
> > platform strings on the host without getting into the deeper semantics of
> > 
> >     On what platforms can a package compiled with -m486 be installed?
> 

The above question was prompted by a packaging problem in Red Hat 6.0.
The package bind-8.2-6.i386.rpm segfaults on an i386 because it uses
the non-i386 bswap instruction as implemented in ntoh*/hton*.

Here's how that happened

    Rpm is configured in /usr/lib/rpm/rpmrc to supply arch-specific compiler
    flags
	optflags: i386 -O2 -m486 -fno-strength-reduce
    to the i386 build environment as the variable RPM_OPT_FLAGS.

    The egcs compiler, when given "-m486", defined __i486__ (broken!).

    The pre-processor happily used i486 in-line assembly for ntoh*.

There are a number of ways to fix this problem, but that's not what I'm
concerned with. There are two issues here that I *am* concerned with:

1) The binary package bind-8.2-6.i386.rpm seems to imply (e.g. the
package includes "i386" in header and name) that it's contents
will run on an i386 platform even though there is no explicit attempt
to verify this claim.

2) The packaging process is supplying certain information, in this case
(and most cases?) compiler flags, for a target architecture that is
then interpreted by other tools.

Before you may dismiss the above problem as simply "poor packaging" (it is),
please note that I'm trying to illustrate how the packaging system can
become deeply intertwined in the packaging process, and I'm seeking
clarification on how the packaging system should decide what platform
can/should be installed on a specific platform.

> Discussion of what the hints are and how they are scored is really an
> implementation detail. There are multiple possibilities, and config.guess is
> certainly not the worst of them. However, you don't need to use config.guess
> in the packages architecture dependency information to make use of that.
> (You can always base the scoring on a remapping table or so).
> 

I'd like to see arch and os carried as part of the package meta-data
in a form that permits an implementation that is not a "detail". I would
like to see a single platform field that is parseable into arch/os rather
than separate arch and os fields. This brings me to

Proposal #1
===========

The string valued output of config.guess from the target platform in
the build enviroment should be supplied in the package meta-data as
the primary information for what platforms the package is intended for.

Notes:
1) I'm assuming that the arch and os can always be derived from config.guess
output.
2) noarch/noos (and possibly novendor) identifiers would have to be added
to the output of config.guess in order to represent those obvious extensions.

> 
> > From: Wichert Akkerman <wichert@soil.nl>
> > Message-ID: <19990628140711.D17587@soil.nl>
> > 
> > Previously Erik Troan wrote:
> > > This makes it difficult for a tool to know that an i686 package is a "better"
> > > match for a Pentium III machine then an i486 package is though (this is
> > > an ability we currently have in RPM).
> > 
> > It doesn't make it more difficult than it already is.. such a preference-list
> > should be configured somewhere outside of the packagemanager IMHO.
> 
> Agreed. In my concept, it is part of the distribution creation.
> 

Which brings me to

Proposal #2
===========

The system on which the package is to be installed should provide a sequence
of regular expressions that, when applied to the string in the package
meta-data, determine whether the package can be installed. The 1st element
should (must?) be the output of config.guess when run on install system.

Example: (please excuse the redhat/rpm bias in order to note the flaw in the
following)

    The package kernel-2.3.4-5.sparc.rpm should supply
	sparc-redhat-linux-gnu
    in it's meta-data.

    An ultrasparc should provide a sequence of regular expressions something
    like
	sparc64-redhat-linux-gnu
	sparc[^-]*-[^-]*-linux-*
	noarch-[^-]*-*
	[^-]*-[^-]*-noos*

    The regular expression mechanism would then attempt matches on each string
    and would succeed in matching the 2nd RE.

The flaw -- a sparc kernel can match (and therefor is deemed installable) on
a sparc64 platform -- brings me to

Proposal #3
===========

The package needs to be able to specify some control over the regular
expressionmatching mechanism on the install system. Disabling RE matches
and/or specifiying the maximum number of regular expressions to try are
both possibilities.

And finally, in order to make a choice between two packages as in the
previous example that provide
	sparc64-redhat-linux-gnu
	sparc-redhat-linux-gnu
the package that matches an earlier encountered RE is preferred over
a later match.

Proposal #4
===========
Scoring is provided by the order in which the regular expressions
on the install platform are encountered.

I believe the above proposal provides arch/os platform scoring in an
explicit fashion that is easily implemented without tricky guarantees
that are dependent on package contents.

> 
> > Message-ID: <19990627150744.J14356@devserv.devel.redhat.com>
> > From: Jeff Johnson <jbj@redhat.com>
> > 
> > I agree 300% that arch and os tags are not sufficient to package anything
> > correctly these days. But heaven forbid that something as "obvious" or
> > "intutive" as arch and os should be removed from packaging software.
> 
> The trick is to use the intuitive cpu-os tag to deliver a distribution to
> the user, but to use flexible virtual package dependencies everywhere else.
> This is not a conflict. The intuitive concept should not be removed, but
> integrated into a bigger, more complete setup.
> 

The trick is to supply a framework that is much richer than simply
arch/os.

> > > Their suggestion is to use dependencies to solve this. The idea is to
> > > make a package depend on pseudopackages for the OS (OS ABI actually) and 
> > > architecture they need. The packagemanger can then compare those with
> > > what the machine is actually using and determine if a package will be
> > > able to run.
> > > 
> > 
> > There needs to be a bridging solution between the old paradigm and the new,
> > (kinda like Windows-95 :-). Standardizing on the output of config.guess
> > permits
> >    1) intuitive mapping from arch/os to platform.
> 
> I'm not sure what this means. It seems to be what we currently do (when I
> read "platform" as distribution for a specific platform).
> 

It means that I believe in collapsing arch/os into a single platform field.

> >    2) using common accepted practice that is not controversial. Most packagers
> >    are familiar sith the output of config.guess.
> 
> config.guess will play a big role in the packaging process when determining
> the build gnu system type. There is no alternative. However, to specify the
> architecture dependencies for the final package, it can merely give a hint.
> 

Yes.

> >    3) a resolution mechanism to issues regarding whether "powerpc" or "ppc"
> >    is the correct representation. The answer becomes
> > 	What does config.guess say?
> 
> Of course. This is orthogonal to everything else though.
>  

We need to specifiy precisely what tokens should be used in package
meta-data.

> > Eventually, depending on explicit attributes like arch-ness and os-hood
> > is the Right Thing To Do. However, we need semantics for arch-ness and
> > os-hood that are useful for identifying package dependencies and that
> > is a tricky issue to get right.
> 
> I am not sure what he means here. The attributes (which I read as virtual
> architecture packages here) will be created dynamically whenever they are
> needed.
> 

What I mean is that we need to supply more exact information. I'd like
to see packaging moving to supply useful attributes like "BIG_ENDIAN"
or "HAS_64BIT_LONG" rather than relying on arch/os for that information.


> > > Using this mechanism it is also easy to create seperate packages for
> > > architecture-subsets (pentium-packages, amd-packages, etc.).
> > > 
> > 
> > Following your own recommendations, I would say that there is no such
> > thing as "pentium-packages", merely a dependency/requirement that
> > packages were compiled with certain flags.
> 
> A pentium package that has pentium specific instructions would be a package
> dependending on "i586". A pentium package that has only reorganized i386
> code would be apackage depending on "i386" and carrying a hint for i586.
> 

I'm interested in avoiding the guarantee that binaries don't include
i586 instructions. The above proposals do not carry guarantees about
package contents, only about how meta-data hints are to be sipplied and
interpreted.

> 
> Thanks,
> Marcus
> 
> 
> -- 
> `Rhubarb is no Egyptian god.' Debian http://www.debian.org   finger brinkmd@ 
> Marcus Brinkmann              GNU    http://www.gnu.org     master.debian.org
> Marcus.Brinkmann@ruhr-uni-bochum.de                        for public  PGP Key
> http://homepage.ruhr-uni-bochum.de/Marcus.Brinkmann/       PGP Key ID 36E7CD09
> 
> 
> Hello,
> 
> they way I think about architecture treatment stems from my experiences with
> the Debian package tools and bootstrapping the Debian GNU/Hurd system.
> 
> The concept presented below has the following core ideas, that I think are
> important enough to summarize them in a short list:
> 
> * Package installation is orthogonal to distribution creation.
> * Package installation requires only dependency verification.
> * Distribution creation requires dependency verification and scoring.
> 
> 
> Package Installation
> ====================
> 
> A package manager (the part of the packaging system that installs packages
> on a host machine) should only be concerned with fulfilling dependencies. It
> should determine if a package is installable, and if it is, it should
> perform the required action.
> 
> For this, virtual packages representing ABI capabilities really perform
> best. You can provide virtual architecture packages for any ABI feature,
> like which processor is required, if a /proc filesystem is provided, if linux
> syscalls are available and so on. IMO, dependencies should be as weak as
> possible. If a pentium optimized package runs also on a 486, the dependency
> should be "486" (or even 386), not "pentium".
> 
> Examples:
> . "grub" only depends on "i386", regardless of the operating system
>   running.
> . Most linux binaries will depend on a certain cpu only (apart from any
>   libraries), and will not make use of syscalls or the proc filessystem
>   directly. Those will run on the Hurd without recompilation.
> 
> That was the "depends on" side. There is also the "provides" side. A usual
> pentium linux box will provide "i386, i486, i586", "linux-syscalls (= 2.2)"
> and "proc-fs" for example. Note that you can have version numbers here, too.
> Which packages are provided is a feature of the "distribution".
> 
> Distributions
> =============
> 
> The distribution is really a concept that should not be built directly into
> the package installer, because it requires some overview on the system. The
> reason is that a distribution needs to be a consistent set of packages.
> 
> Here config.guess actually comes in. There is a "default" mapping from
> canonicalized host type strings to virtual packages, for example:
> 
> i586-gnu-linux   -->   "i386", "i486", "i586", "linux"
> i486-gnu         -->   "i386", "i486", "gnu"
> 
> Note that concepts like "linux-syscalls" and "procfs" would be provided by
> the linux kernel package itself.
> 
> It would be easy to write a utility that can create distributions on the
> fly if all available packages are collected in a pool. You just have to map
> your host system type to a set of virtual packages provided, and start
> adding packages which dependencies can be fulfilled. Of course, you will
> get further possibilities through additional "provides:" in the packages you
> added, so you can add more and more packages from your pool to your
> distribution. Using some standard algorithms from graph theory, you should
> be able to take into account conflicting packages etc, to get a maximum
> distribution, e.g., a distribution which only consists of packages which are
> installable using packages from this distribution, and is not missing any
> package from the pool with this property.
> 
> 
> Hints or Scoring
> ================
> 
> Hints are complex and I haven't thought them completely through. But here is
> a rather complete analysis of the different cases that you have to treat
> differently when considering scoring:
> 
> Usually, we would recompile a package for another architetcture only if it
> is not yet available for this architecture, eg, if it is not in this
> architectures distribution. Furthermore, recompiling for another
> architecture would often result in a binary package that is not useful on
> any of the existing architectures.
> 
> Example:
>  Package foo is available for all i386 arches, because it only
>  depends on the virtual package "i386".
> 
> Because we want to support powerpc, we recompile it for this architectures.
> The resulting binary depends on powerpc only. Currently, no platform can run
> i386 and powerpcs at the same time. Therefore, all distributions we create
> with the procedure above will only contain either of these packages.
> 
> If two binary versions of the same package happen to match the same
> distribution, two cases are possible:
> 
> 1) "Scoring": Both packages have different dependencies ("i386" vs.
>    "powerpc") or do not carry hints.
> 2) "Hints": Both packages have the same dependencies ("i386" native and
>    "i386" with pentium optimization [but without pentium specific
>    instructions]). Then we need hints to decide.
> 
> I won't go into detail how b1 and b2 could be treated, only so much:
> 
> For b1), it would be sufficient to order the available virtual dependency
> packages that should be considered in a priority list. Or more abstract:
> You have a function "int score(list of dependencies)" which calculates a
> value for each package, and the highest value wins. equal value would mean
> both packages are equal and it doesn't matter which one is picked. The
> function can be very simple and only catch the cases that are known to
> occure.
> 
> If both packages have same dependencies, but are not equal, they have to
> tell us more about them in a "hints" metadata. This could be the
> config.guess of the compiled architecture for example, or some preferred
> target architecture, or something alike. The scoring would then be a
> function of the dependencies and the hints metadata. This can actually
> be a very simple function (like hint "i586" is better than "i486" is
> better than "i386" for the i586 distribution).
> 
> The _important_ thing is that scoring is part of the distribution creation,
> not part of package installation. I should always be allowed to install a
> package with a bad score, even if it is a worse score than the default package
> it would replace. For example, I could fetch such a package from the package
> pool to override a bug in the optimization or something alike. 
> 
> 
> Complexity
> ==========
> 
> I think my concept is rather complete, at least it is not obvious to me which
> weird combination of architecture dependency is not covered by it. But is it
> actually too complex? Is it overkill?
> 
> I think not, and this has two reasons:
> 
> 1. The main complexity is in the distribution creation, which is completely
> hidden from the user. It will happen at the main repository of the software
> distrtibution. Users will continue to get a i386 linux distribution, or a
> powerpc distribution of the Hurd. What we gain back is a VERY simple
> package installation tool which is not any longer concerned about scoring or
> similar, but merely a dependency checker.
> 
> 2. The most difficult part seems to be the scoring. But this is only
> complicated if you want to implement a general catch-all solution.
> I think the number of cases were scoring actually happens is very small,
> and can be covered by some simple rules.
> 
> The rest is really only organization of the packages that are uploaded and
> installed in the distribution.
> 
> 
> ----- End forwarded message -----
> 
> -- 
> ==============================================================================
> This combination of bytes forms a message written to you by Wichert Akkerman.
> E-Mail: wichert@cs.leidenuniv.nl
> WWW: http://www.wi.leidenuniv.nl/~wichert/



-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Jun 30 20:06:02 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id UAA01456;
	Wed, 30 Jun 1999 20:06:00 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id UAA18188;
	Wed, 30 Jun 1999 20:06:00 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id UAA02852;
	Wed, 30 Jun 1999 20:05:59 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id UAA20517;
	Wed, 30 Jun 1999 20:05:56 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id UAA20478
	for packaging-list; Wed, 30 Jun 1999 20:05:51 -0400
Resent-Date: Wed, 30 Jun 1999 20:05:51 -0400
Resent-Message-Id: <199907010005.UAA20478@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id UAA20473
	for <packaging@rufus.w3.org>; Wed, 30 Jun 1999 20:05:49 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id UAA01444;
	Wed, 30 Jun 1999 20:05:49 -0400
Message-ID: <19990630200549.G21965@devserv.devel.redhat.com>
Date: Wed, 30 Jun 1999 20:05:49 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Re: Sparc kernels (off topic. :)
References: <19990626140435.A32093@soil.nl> <Pine.LNX.4.10.9906271115180.13336-100000@localhost> <19990627152019.K14356@devserv.devel.redhat.com> <19990628093734.B30087@devserv.devel.redhat.com> <19990628131608.T14356@devserv.devel.redhat.com> <19990629141254.K28746@soil.nl> <19990630124703.A21965@devserv.devel.redhat.com> <19990630185151.B3004@soil.nl> <19990630134305.B22688@devserv.devel.redhat.com> <19990630102817.B4957@lappy.djj.state.va.us>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990630102817.B4957@lappy.djj.state.va.us>; from Ben Collins on Wed, Jun 30, 1999 at 10:28:17AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2512
Lines: 74


On Wed, Jun 30, 1999 at 10:28:17AM -0400, Ben Collins wrote:
> 
> This brings up a small point on dependencies. I had some thought on the
> install systems supplying some of it's own virtual dependencies based on
> state rather than installed files or packages. This probably falls in line
> with sub arch specifications. For example depend on "system::kernel >=
> 2.2.0" which checks the current kernel version (which often times is not
> installed by the package manager). I'm thinking a special "::" with a
> preceding type ('system' etc.) to check against internally supplied
> virtual packages would suffice. The package manager would then supply
> these dynamically based on the system state (I'm assuming most would be
> supplied by uname or a /proc check). A few good examples:
> 

Rpm is (will be?) using a slighyly different name space syntax, currently
something like
	system(token)-version
rather than
	system::token [value]

It would be nice to agree on syntax ...

> system::kernel [version]	checks the current kernel version,
> 				meaningless without a version specification
> 

This is basically a package dependency:
	Requires: kernel = 2.2.3
for example.

> system::modules			current kernel must be compiled with
> 				module support, for kernel module
> 				packages. Probably best if used with above
> 

Is there any reason to compile a kernel without modules support these
days?

> system::memory [size]		Large packages (eg. mozilla) could specify
> system::memory-physical [size]	minimum memory requirements
> system::memory-swap [size]
> 

Specifying these run-time parameters as part of packaging prevents installs
in anything other than the exact final configuration. What do you do if the
user reconfigures swap and/or buys more memory?

I'd try to test these values as part of a wrapper or executable startup
rather than as part of the package install ...

> system::machine			same as the `uname -m' output
> 

How should this differ from the arch/os (or platforM) install hint?

> system::dist [name]		this may or may not be a good one, but if
> 				there are packages that tie in tightly with a
> 				specific distribution, then a package
> 				could thwart attempts to install it on
> 				another distribution using this
> 

This can be dealt with as a virtual provide/requires.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Jul  1 05:24:53 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id FAA11440;
	Thu, 1 Jul 1999 05:24:51 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id FAA07596;
	Thu, 1 Jul 1999 05:24:47 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id FAA17326;
	Thu, 1 Jul 1999 05:24:46 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id FAA22419;
	Thu, 1 Jul 1999 05:24:44 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id FAA22410
	for packaging-list; Thu, 1 Jul 1999 05:24:41 -0400
Resent-Date: Thu, 1 Jul 1999 05:24:41 -0400
Resent-Message-Id: <199907010924.FAA22410@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (wichert@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id FAA22407
	for <packaging@rufus.w3.org>; Thu, 1 Jul 1999 05:24:39 -0400
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian/GNU) id LAA04975
	for packaging@rufus.w3.org; Thu, 1 Jul 1999 11:24:38 +0200
Date: Thu, 1 Jul 1999 11:24:38 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Re: Sparc kernels (off topic. :)
Message-ID: <19990701112438.A4965@soil.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <Pine.LNX.4.10.9906271115180.13336-100000@localhost> <19990627152019.K14356@devserv.devel.redhat.com> <19990628093734.B30087@devserv.devel.redhat.com> <19990628131608.T14356@devserv.devel.redhat.com> <19990629141254.K28746@soil.nl> <19990630124703.A21965@devserv.devel.redhat.com> <19990630185151.B3004@soil.nl> <19990630134305.B22688@devserv.devel.redhat.com> <19990630102817.B4957@lappy.djj.state.va.us> <19990630200549.G21965@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=OXfL5xGRrasGEqWY; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990630200549.G21965@devserv.devel.redhat.com>; from Jeff Johnson on Wed, Jun 30, 1999 at 08:05:49PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1341
Lines: 47



--OXfL5xGRrasGEqWY
Content-Type: text/plain; charset=us-ascii

Previously Jeff Johnson wrote:
> It would be nice to agree on syntax ...

Indeed. Semantics as well, otherwise a common syntax is not very useful.

> This is basically a package dependency:
> 	Requires: kernel = 2.2.3

No, since a lot of people don't use packages for kernels. I'm not even
sure it makes sense for kernels, since you might be installing something
for a kernel you are not using at the moment.

> Is there any reason to compile a kernel without modules support these
> days?

Yes! As a general rule never enable modules on servers, they are very
useful for crackers.

> Specifying these run-time parameters as part of packaging prevents installs
> in anything other than the exact final configuration. What do you do if the
> user reconfigures swap and/or buys more memory?

Ah, you noticed that as well :)

Wichert.

--OXfL5xGRrasGEqWY
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBN3sz1qjZR/ntlUftAQEmvQL/UI2kx6wDbK045L0ad2WP5RI10vEm86IH
14zp5wjwbPgg+jLvCfF04MwmVlFl1EL4/h89xR4GuUeZvNomTDU2epyR/q7WQJ3i
DRyXv2sXwQ4Ekhpynu6mHy7GlzHeHYs2
=wwr7
-----END PGP SIGNATURE-----

--OXfL5xGRrasGEqWY--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Jul  1 08:03:20 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id IAA14167;
	Thu, 1 Jul 1999 08:03:18 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id IAA12562;
	Thu, 1 Jul 1999 08:03:18 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id IAA20928;
	Thu, 1 Jul 1999 08:03:17 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id IAA31665;
	Thu, 1 Jul 1999 08:03:15 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id IAA31654
	for packaging-list; Thu, 1 Jul 1999 08:03:12 -0400
Resent-Date: Thu, 1 Jul 1999 08:03:12 -0400
Resent-Message-Id: <199907011203.IAA31654@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id IAA31650
	for <packaging@rufus.w3.org>; Thu, 1 Jul 1999 08:03:08 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id IAA14158;
	Thu, 1 Jul 1999 08:03:05 -0400
Message-ID: <19990701080305.H21965@devserv.devel.redhat.com>
Date: Thu, 1 Jul 1999 08:03:05 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Re: Sparc kernels (off topic. :)
References: <19990627152019.K14356@devserv.devel.redhat.com> <19990628093734.B30087@devserv.devel.redhat.com> <19990628131608.T14356@devserv.devel.redhat.com> <19990629141254.K28746@soil.nl> <19990630124703.A21965@devserv.devel.redhat.com> <19990630185151.B3004@soil.nl> <19990630134305.B22688@devserv.devel.redhat.com> <19990630102817.B4957@lappy.djj.state.va.us> <19990630200549.G21965@devserv.devel.redhat.com> <19990701112438.A4965@soil.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990701112438.A4965@soil.nl>; from Wichert Akkerman on Thu, Jul 01, 1999 at 11:24:38AM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2233
Lines: 70


On Thu, Jul 01, 1999 at 11:24:38AM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > It would be nice to agree on syntax ...
> 
> Indeed. Semantics as well, otherwise a common syntax is not very useful.
> 
> > This is basically a package dependency:
> > 	Requires: kernel = 2.2.3
> 
> No, since a lot of people don't use packages for kernels. I'm not even
> sure it makes sense for kernels, since you might be installing something
> for a kernel you are not using at the moment.
> 

Even if you don't wish to package the kernel, the dependency can be
dealt with as a virtual versioned provides
	Provides: kernel-2.2.3
so that packages that wish to test for the kernel version can do
	Requires: kernel = 2.2.3
I don't see the need for an explcit system:: name space test on kernel version
since there is already a mechanism to express the dependency.

There is also a run time dependence on what kernel is booted if you
have several kernel versions installed.

> > Is there any reason to compile a kernel without modules support these
> > days?
> 
> Yes! As a general rule never enable modules on servers, they are very
> useful for crackers.
> 

The ability to provide a boolean and/or existence test of the attribute
modules would seem useful then. Personally, I'd like to see a different
mechanism than a system:: name space because of the difficulties of
run-time evaluation of the system:: namespace. How about having per-package
bool and key=value tokens? So assuming a (possibly virtual) package kernel,
this could be expressed as
	kernel(bool?)		kernel::(bool)
or
	kernel(key == value)	kernel::(key == value)

New topic:

When Ben was here, we talked about providing at least versioned package
dependencies with the following tags:

	Provides: expr
	Requires: expr
	Obsoletes: expr
	Conflicts: expr
	PreReq: expr

where expr was something like
	name
	name >= epoch:version-release

Are there any anticipated difficulties in assuming that those five
tags can be made common at least for versioned packages?

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Jul  1 09:13:11 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id JAA16401;
	Thu, 1 Jul 1999 09:13:09 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id JAA16848;
	Thu, 1 Jul 1999 09:13:08 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id JAA25962;
	Thu, 1 Jul 1999 09:13:07 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id JAA04168;
	Thu, 1 Jul 1999 09:13:05 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id JAA04158
	for packaging-list; Thu, 1 Jul 1999 09:13:02 -0400
Resent-Date: Thu, 1 Jul 1999 09:13:02 -0400
Resent-Message-Id: <199907011313.JAA04158@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from lappy.djj.state.va.us (djj.state.va.us [165.176.13.106])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id JAA04154
	for <packaging@rufus.w3.org>; Thu, 1 Jul 1999 09:13:00 -0400
Received: from bmc by lappy.djj.state.va.us with local (Exim 3.02 #1 (Debian))
	id 10zdEd-0005II-00; Thu, 01 Jul 1999 05:34:23 -0400
Date: Thu, 1 Jul 1999 05:34:23 -0400
From: Ben Collins <bcollins@debian.org>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Re: Sparc kernels (off topic. :)
Message-ID: <19990701053423.D20296@lappy.djj.state.va.us>
References: <Pine.LNX.4.10.9906271115180.13336-100000@localhost> <19990627152019.K14356@devserv.devel.redhat.com> <19990628093734.B30087@devserv.devel.redhat.com> <19990628131608.T14356@devserv.devel.redhat.com> <19990629141254.K28746@soil.nl> <19990630124703.A21965@devserv.devel.redhat.com> <19990630185151.B3004@soil.nl> <19990630134305.B22688@devserv.devel.redhat.com> <19990630102817.B4957@lappy.djj.state.va.us> <19990630200549.G21965@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990630200549.G21965@devserv.devel.redhat.com>; from Jeff Johnson on Wed, Jun 30, 1999 at 08:05:49PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2754
Lines: 71


On Wed, Jun 30, 1999 at 08:05:49PM -0400, Jeff Johnson wrote:
> > system::kernel [version]	checks the current kernel version,
> > 				meaningless without a version specification
> > 
> 
> This is basically a package dependency:
> 	Requires: kernel = 2.2.3
> for example.

Suppose the user does not use packages kernels?

> > system::modules			current kernel must be compiled with
> > 				module support, for kernel module
> > 				packages. Probably best if used with above
> > 
> 
> Is there any reason to compile a kernel without modules support these
> days?

Security, compactness...I have three servers that have non-moduled
kernels.

> > system::memory [size]		Large packages (eg. mozilla) could specify
> > system::memory-physical [size]	minimum memory requirements
> > system::memory-swap [size]
> > 
> 
> Specifying these run-time parameters as part of packaging prevents installs
> in anything other than the exact final configuration. What do you do if the
> user reconfigures swap and/or buys more memory?
> 
> I'd try to test these values as part of a wrapper or executable startup
> rather than as part of the package install ...

They aren't meant for exact configurations, more of a sanity check. You
shouldn't be able to install X on a system with 8 megs of ram and no swap.
These values would probably be supplied for very few packages and more
often as a "Requires" rather than a "Depends", and usually in the form of
">= 32".

> > system::machine			same as the `uname -m' output
> > 
> 
> How should this differ from the arch/os (or platforM) install hint?

I'm not sure exactly on how you plan to supply the install system's arch
to the package manager. Obviously it cannot be static. Systems often get
CPU upgrades, kernels are recompiled with an improper CPU setup (i386
kernel on a i686 system). My main goal is to seperate this type of a
dependency from the normal package namespace. We don't want to
"Depends: sparc64" and then have someone screw the whole thing up by
making a package called 'sparc64' (ignorant yes, but possible). Being able
to "Depends: system(machine) = sparc64" would get rid of any chance.

(Sorry, I haven't read the whole hint thread completely yet, but it seemed
to be more implementation specific than what we were going for).

> > system::dist [name]		this may or may not be a good one, but if
> > 				there are packages that tie in tightly with a
> > 				specific distribution, then a package
> > 				could thwart attempts to install it on
> > 				another distribution using this
> > 
> 
> This can be dealt with as a virtual provide/requires.

Same as above, name space seperation.
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul  6 11:06:41 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA22671;
	Tue, 6 Jul 1999 11:06:34 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA31364;
	Tue, 6 Jul 1999 11:06:33 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA19600;
	Tue, 6 Jul 1999 11:06:32 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA22029;
	Tue, 6 Jul 1999 11:06:30 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA22008
	for packaging-list; Tue, 6 Jul 1999 11:06:25 -0400
Resent-Date: Tue, 6 Jul 1999 11:06:25 -0400
Resent-Message-Id: <199907061506.LAA22008@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from lappy.djj.state.va.us (djj.state.va.us [165.176.13.106])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA22003
	for <packaging@rufus.w3.org>; Tue, 6 Jul 1999 11:06:23 -0400
Received: from bmc by lappy.djj.state.va.us with local (Exim 3.02 #1 (Debian))
	id 111TRz-0005fM-00; Tue, 06 Jul 1999 07:31:47 -0400
Date: Tue, 6 Jul 1999 07:31:47 -0400
From: Ben Collins <bcollins@debian.org>
To: packaging@rufus.w3.org
Subject: [packaging] where are we now?
Message-ID: <19990706073147.D1248@lappy.djj.state.va.us>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.6i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 545
Lines: 15


After a long 4th of July weekend...much beer and fireworks, and more
sun/heat than I'de care for, I'm ready to get back into this again :)

Where are we at? Can we go ahead and finalize some of the things we know
we can agree on so all we have left are the little issues that we need to
quarrel over and hash out?

(haven't time to skim my archive of this list, so a quick summary would be
nice if some one else has time).

Ben
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul  6 18:18:10 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id SAA03984;
	Tue, 6 Jul 1999 18:18:08 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA17651;
	Tue, 6 Jul 1999 18:18:07 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA12407;
	Tue, 6 Jul 1999 18:18:07 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA05884;
	Tue, 6 Jul 1999 18:18:02 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id SAA05875
	for packaging-list; Tue, 6 Jul 1999 18:17:59 -0400
Resent-Date: Tue, 6 Jul 1999 18:17:59 -0400
Resent-Message-Id: <199907062217.SAA05875@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from sophia.inria.fr (sophia.inria.fr [138.96.32.20])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id SAA05871
	for <packaging@rufus.w3.org>; Tue, 6 Jul 1999 18:17:58 -0400
Received: from zeus.wi.leidenuniv.nl by sophia.inria.fr (8.8.8/8.8.5) with ESMTP id AAA03483 for <packaging@rufus.w3.org>; Wed, 7 Jul 1999 00:17:09 +0200 (MET DST)
Received: from lightning.mors.net (root@home035.wi.leidenuniv.nl [132.229.210.163])
	by zeus.wi.leidenuniv.nl (8.8.8/8.8.8/WI) with ESMTP id AAA04356
	for <packaging@rufus.w3.org>; Wed, 7 Jul 1999 00:14:26 +0200 (MET DST)
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian/GNU) id XAA04096
	for packaging@rufus.w3.org; Tue, 6 Jul 1999 23:07:35 +0200
Date: Tue, 6 Jul 1999 23:07:35 +0200
From: Wichert Akkerman <wichert@cs.leidenuniv.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] where are we now?
Message-ID: <19990706230735.C3877@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <19990706073147.D1248@lappy.djj.state.va.us>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary="2/5bycvrmDh4d1IB"; micalg=pgp-sha1;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990706073147.D1248@lappy.djj.state.va.us>; from sparc porters on Tue, Jul 06, 1999 at 07:31:47AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1431
Lines: 47



--2/5bycvrmDh4d1IB
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously sparc porters wrote:
> Where are we at? Can we go ahead and finalize some of the things we know
> we can agree on so all we have left are the little issues that we need to
> quarrel over and hash out?

Well, Erik promised us an update list of tags that rpm needs/wants last
week. We're still waiting for it.

We need to decide the tar/cpio issue this week as well.

After that's done we should finalize the tag-list a bit and probably
pass it on to the LSB.

Wichert.

--=20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
This combination of bytes forms a message written to you by Wichert Akkerma=
n.
E-Mail: wichert@cs.leidenuniv.nl
WWW: http://www.wi.leidenuniv.nl/~wichert/

--2/5bycvrmDh4d1IB
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v0.9.8 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjeCcBYACgkQPLiSUC+jvC1lOACdGh1RNjU1DJh4n5y+gJGgKv8C
SMcAn3OZBG810Oz1UUuaPf6lf1HSQFFo
=i4Hd
-----END PGP SIGNATURE-----

--2/5bycvrmDh4d1IB--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul  6 18:31:18 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id SAA04379;
	Tue, 6 Jul 1999 18:31:16 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA19096;
	Tue, 6 Jul 1999 18:31:16 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA13313;
	Tue, 6 Jul 1999 18:31:15 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA07496;
	Tue, 6 Jul 1999 18:31:14 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id SAA07488
	for packaging-list; Tue, 6 Jul 1999 18:31:11 -0400
Resent-Date: Tue, 6 Jul 1999 18:31:11 -0400
Resent-Message-Id: <199907062231.SAA07488@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from tux.w3.org (IDENT:veillard@tux.w3.org [18.29.0.27])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id SAA07485
	for <packaging@rufus.w3.org>; Tue, 6 Jul 1999 18:31:10 -0400
Received: (from veillard@localhost)
	by tux.w3.org (8.9.3/8.9.3) id SAA02415
	for packaging@rufus.w3.org; Tue, 6 Jul 1999 18:31:11 -0400
Date: Tue, 6 Jul 1999 18:31:11 -0400
From: Daniel Veillard <Daniel.Veillard@w3.org>
To: packaging@rufus.w3.org
Subject: Re: [packaging] where are we now?
Message-ID: <19990706183110.B2091@w3.org>
References: <19990706073147.D1248@lappy.djj.state.va.us> <19990706230735.C3877@mors.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.5us
In-Reply-To: <19990706230735.C3877@mors.net>; from Wichert Akkerman on Tue, Jul 06, 1999 at 11:07:35PM +0200
Organization: World Wide Web Consortium (W3C http://www.w3.org/)
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1339
Lines: 32


On Tue, Jul 06, 1999 at 11:07:35PM +0200, Wichert Akkerman wrote:
> Previously sparc porters wrote:
> > Where are we at? Can we go ahead and finalize some of the things we know
> > we can agree on so all we have left are the little issues that we need to
> > quarrel over and hash out?
> 
> Well, Erik promised us an update list of tags that rpm needs/wants last
> week. We're still waiting for it.
> 
> We need to decide the tar/cpio issue this week as well.
> 
> After that's done we should finalize the tag-list a bit and probably
> pass it on to the LSB.

  I strongly suggest to make the currrent state public once there
is an agreement on the core stuff. That prevents nasty problem who
may remain unnoticed otherwise and the feedback usually help improve
the technical solution. I don't know what's the LSB process...
 Just my 2cents coming from my work on XML standardization,

Daniel

-- 
	    [Yes, I have moved back to France !]
Daniel.Veillard@w3.org | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux, WWW, rpmfind,
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | rpm2html, XML,
http://www.w3.org/People/W3Cpeople.html#Veillard | badminton, and Kaffe.
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Jul  7 12:05:35 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id MAA25029;
	Wed, 7 Jul 1999 12:05:33 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA05455;
	Wed, 7 Jul 1999 12:05:33 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA32604;
	Wed, 7 Jul 1999 12:05:32 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA03159;
	Wed, 7 Jul 1999 12:05:23 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA03151
	for packaging-list; Wed, 7 Jul 1999 12:05:19 -0400
Resent-Date: Wed, 7 Jul 1999 12:05:19 -0400
Resent-Message-Id: <199907071605.MAA03151@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA03148
	for <packaging@rufus.w3.org>; Wed, 7 Jul 1999 12:05:17 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id MAA24991;
	Wed, 7 Jul 1999 12:04:54 -0400
Message-ID: <19990707120454.U16480@devserv.devel.redhat.com>
Date: Wed, 7 Jul 1999 12:04:54 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] where are we now?
References: <19990706073147.D1248@lappy.djj.state.va.us> <19990706230735.C3877@mors.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990706230735.C3877@mors.net>; from Wichert Akkerman on Tue, Jul 06, 1999 at 11:07:35PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 774
Lines: 24


On Tue, Jul 06, 1999 at 11:07:35PM +0200, Wichert Akkerman wrote:
> Previously sparc porters wrote:
> > Where are we at? Can we go ahead and finalize some of the things we know
> > we can agree on so all we have left are the little issues that we need to
> > quarrel over and hash out?
> 
> Well, Erik promised us an update list of tags that rpm needs/wants last
> week. We're still waiting for it.
> 

I posted the list of rpm tags a week or two ago. I dunno if dpkg is interested
in any tags other than the ones we've already talked about. I can
post again if you wish.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Jul  7 18:29:10 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id SAA02396;
	Wed, 7 Jul 1999 18:29:08 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA18025;
	Wed, 7 Jul 1999 18:29:07 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA20070;
	Wed, 7 Jul 1999 18:29:07 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA32426;
	Wed, 7 Jul 1999 18:29:05 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id SAA32410
	for packaging-list; Wed, 7 Jul 1999 18:29:01 -0400
Resent-Date: Wed, 7 Jul 1999 18:29:01 -0400
Resent-Message-Id: <199907072229.SAA32410@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from zeus.wi.leidenuniv.nl (zeus.wi.leidenuniv.nl [132.229.128.1])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id SAA32374
	for <packaging@rufus.w3.org>; Wed, 7 Jul 1999 18:28:56 -0400
Received: from lightning.mors.net (home030.wi.leidenuniv.nl [132.229.210.158])
	by zeus.wi.leidenuniv.nl (8.8.8/8.8.8/WI) with ESMTP id AAA04787
	for <packaging@rufus.w3.org>; Thu, 8 Jul 1999 00:28:52 +0200 (MET DST)
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian/GNU) id AAA22771
	for packaging@rufus.w3.org; Thu, 8 Jul 1999 00:27:33 +0200
Date: Thu, 8 Jul 1999 00:27:33 +0200
From: Wichert Akkerman <wichert@cs.leidenuniv.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] where are we now?
Message-ID: <19990708002733.B19323@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <19990706073147.D1248@lappy.djj.state.va.us> <19990706230735.C3877@mors.net> <19990707120454.U16480@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=QTprm0S8XgL7H0Dt; micalg=pgp-sha1;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990707120454.U16480@devserv.devel.redhat.com>; from Jeff Johnson on Wed, Jul 07, 1999 at 12:04:54PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1337
Lines: 44



--QTprm0S8XgL7H0Dt
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> I posted the list of rpm tags a week or two ago. I dunno if dpkg is inter=
ested
> in any tags other than the ones we've already talked about. I can
> post again if you wish.

I saw an insane amount of tags without any comments at all.. that wasn't
very helpful. I also suspect that quite a lot of those tags aren't
necessary or used at all.

Wichert.

--=20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
This combination of bytes forms a message written to you by Wichert Akkerma=
n.
E-Mail: wichert@cs.leidenuniv.nl
WWW: http://www.wi.leidenuniv.nl/~wichert/

--QTprm0S8XgL7H0Dt
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v0.9.8 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjeD1FQACgkQPLiSUC+jvC0lJwCeOgq2Q/iYABx4JQKHplfwDjSV
Mu0AoILETDdZ4xfs3bIUbRSff7zLlfx/
=ky2u
-----END PGP SIGNATURE-----

--QTprm0S8XgL7H0Dt--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Jul 18 18:36:45 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id SAA00603;
	Sun, 18 Jul 1999 18:36:43 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA25610;
	Sun, 18 Jul 1999 18:36:42 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA28777;
	Sun, 18 Jul 1999 18:36:42 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA03561;
	Sun, 18 Jul 1999 18:36:33 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id SAA03526
	for packaging-list; Sun, 18 Jul 1999 18:36:30 -0400
Resent-Date: Sun, 18 Jul 1999 18:36:30 -0400
Resent-Message-Id: <199907182236.SAA03526@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from zeus.wi.leidenuniv.nl (zeus.wi.leidenuniv.nl [132.229.128.1])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id SAA03521
	for <packaging@rufus.w3.org>; Sun, 18 Jul 1999 18:36:25 -0400
Received: from lightning.mors.net (root@home032.wi.leidenuniv.nl [132.229.210.160])
	by zeus.wi.leidenuniv.nl (8.8.8/8.8.8/WI) with ESMTP id AAA12691
	for <packaging@rufus.w3.org>; Mon, 19 Jul 1999 00:36:14 +0200 (MET DST)
Received: from tornado.mors.net (root@tornado.mors.net [192.168.2.101])
	by lightning.mors.net (8.9.3/8.9.3/Debian/GNU) with ESMTP id AAA14692
	for <packaging@rufus.w3.org>; Mon, 19 Jul 1999 00:29:16 +0200
Received: (from wichert@localhost)
	by tornado.mors.net (8.9.3/8.9.3/Debian/GNU) id AAA05362
	for packaging@rufus.w3.org; Mon, 19 Jul 1999 00:29:16 +0200
Date: Mon, 19 Jul 1999 00:29:16 +0200
From: Wichert Akkerman <wichert@cs.leidenuniv.nl>
To: packaging@rufus.w3.org
Subject: [packaging] packageformat spec
Message-ID: <19990719002916.A5356@tornado.mors.net>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary="/04w6evG8XlLl3ft"; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 9392
Lines: 246



--/04w6evG8XlLl3ft
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable


I though it might be nice to write up a specification for the format
with everything we currently have, so we can finish it up and present
it to other. I think we should at least send it to the LSB soon.

Comments/complaints/etc. welcome of course.

Wichert.


Introduction
------------
For a while now Linux has had two popular package formats: the rpm format
as made by Red Hat, and the deb format as created by Debian. This has been
a bit problematic since it means vendors have to support both formats.

As a result there has been a desire for a while now to create a common pack=
age
format that makes it possible to use package on all distributions. We belie=
ve
that will the help of a standard such as the LSB is developing this will he=
lp
make Linux more accessible and friendly.

Design goals
------------
Both the deb and the rpm-format have some unique features that the other
format does not have. Our main goal was creating a new format that would
be a good common ground.

Since all distributions take slightly different approaches in some areas
it should also be possible to have distribution-specific extensions.
We also wanted to add some new features that both formats were lacking
in, such as good verification systems and multi-language support.

We felt another important aspect of a good format is that it should be
extractable using only standard tools. That way even when a
packagemanager is not available software can still be installed.

Global overview
---------------
A package is an ar-archive that contains seperate files. Some files
are compressed to save space. Please note we don't compress the
whole archive so it is easy to get to seperate sections. The
files are:

* version: (uncompressed!) text-file with the versionnumber of the
  package format
* metadata.gz: XML-file containing meta-information about the package
  (name, description, dependencies, etc.). This section is optional.
* scripts.tar.gz: archive containing special scripts/programs that should
  be run at specific moments during package installation or removal
* data.tar.gz: archive containing the actually files in the package
* signatures.gz: XML-file with signatures for all the other files. This
  section is optional.

This is also the preferred order in which sections should be stores in
the archive: metadata at the beginning so we can easily extract and show
it without having to read the entire package. Then scripts, since we can
run a script before we start the actual installation. Signatures is at
the end so we can write all the other sections first and then calculate
the signature.

Metadata section
----------------
We choose to use the XML-format (see http://www.w3.org/TR/REC-xml) since
it as a very extensible and non-proprietary description format, well
suited for inter application exchanges. It also allows us to easily add
features such as translation and distribution-specific extensions.

The basic structure of the XML data is as follows:
  <package>
    common information
	distribution-specific information
  </package>

For the distribution-specific information we use XML namespaces (see
http://www.w3.org/TR/REC-xml-names).

Common metadata-information
---------------------------
This is a list of common tags used by all distributions:
* name: packagename
* version: versionnumber of package, using the format
  (<epoch>:)?<upstream>-<distribution>
* summary: short description of the package (1-line, maximum 60
  characters?)
* description: comprehensive description of the package
* keywords: (optional) list of keywords that apply to this package
* author: author of this package, can also be a group or mailinglist=20
* home: (optional) upstream location of sources (URI)
* packager: person who created this package
* origin: distribution/project this package was made for (ie Debian,
  GNOME, Red Hat, etc.)
* license: (optional) copyright for the contents (ie GPL, LGPL, BSD,
  MIT, etc.)=20

(NOTE: we should probably add the pre-run tag that rpm has to make
life easier for rpm-compatibility. Can someone remind me what that
tag is called?)

Information like dependencies is not put in the common tags, although all
distribution have them, for a good reason: the names and information
used in the dependencies can currently not be shared amongs
distributions due to different naming and versioning conventions. As a
result they have been put in the distribution-specific tags.

We expect that the LSB will request extra common tags with centrally
defineds semantics.

An example:
  <package xmlns:rpm=3D"http://www.rpm.org/v4.0"
           xmlns:deb=3D"http://www.debian.org/dpkg/v2.0">
    <name>mount</mount>
    <version>2.9t-1</version>
    <summary>Tools for mounting and manipulating filesystems</summary>
    <description>
      This package provides the mount(8), umount(8), swapon(8),
      swapoff(8), and losetup(8) commands.
    </description>
    <keywords>mount,umount,filesystem</keywords>
    <author>
       <name>I have no clue</name>
       <email>someone@somewhere</email>
       <nick>Zapper</nick>
    </author>
    <packager>
       <name>Vincent Renardias</name>
       <email>vincent@debian.org</email>
    </packager>
    <home>ftp://sunsite.unc.edu:/pub/Linux/system/Misc/util-linux-2.5.tar.g=
z</home>
    <origin>Debian</origin>
    <license>GPL</license>
  </package>

Please note that for persons we have made tags for name, email and nick.
We felt that nick was necessary since these days some people are better
known by their (IRC-)nickname then their given name.

Distribution-specific metadata-information
------------------------------------------
Each distribution will have to create their own tags for features they
need that are not covered by the common tags. We propose however that
those tags are registered at a central point so we can keep track of
them and optionally consider making some tags common if multiple
distributions use them.

Currently known distribution-specific tags:
* Debian:
  + essential: (optional) marks a package as required so the
    package-manager refuses to uninstall it
  + pre-depends: (optional) (used for package relations)
  + depends: (optional) (used for package relations)
  + conflicts: (optional) (used for package relations)
  + replaces: (optional) (used for package relations)
  + provides: (optiona) (used for package relations)
  + recommends: (optional) (used for package relations)
  + suggests: (optional) (used for package relations)
  + maintainer: name and contact for person(s) who maintains this package
  + installed-size: size of package after installation
  + section: section package belongs to (base/libs/devel/etc.)
  + priority: used by package-frontends

Scripts-section
---------------
When you install, ugrade or remove a package special programs can be
run. These can be used for example to (un)register documentation,=20
fix permissions, start/stop/restart daemons, etc. There are four
programs:
  * prerm: used before a package is being removed or purged
  * postrm: used after a package is removed or purged
  * preinst: run before a package is installed/upgraded
  * postinst: run before a package is installed/upgraded

For the exact order these programs are run and the paramters used please
see the dpkg manual (since rpm does not have these it makes sense to be
compatible with dpkg, which has used them for a long time now).

Data-section
------------
Nothing special needs to be said about this section. It is a standard
tar.gz file with the files that should be installed.

Signature-section
-----------------
This section contains signatures for the data in the other sections. The
exact data used is the contents of the metata.gz, scripts.tar.gz (if
present) and data.tar.gz files concatenated. The signatures are stored
in XML-format so it is easy to have multiple signatures and add new
signature types later. Current signature types are:
  * pgp2
  * OpenPGP (used by GnuPG and pgp5)
  * MD5

Things yet-to-be-decided
------------------------
Currently this document says that tar is used in multiple-file sections
(scripts and data). However cpio is also an option, and a definitive
decision hasn't been made yet.

How to handle multiple OS'es and architectures also hasn't been decided
yet. We currently have two proposals:
* use common OS and architecture-tags
* encode the OS and architecture-needs in the dependencies using virtual
  packages
For both methods the package-manager will have to have a hint-list that
tells it which architectures are compatible. For example: you can
run packages compiled for a sparc on an ultrasparc system.

Contributors
------------
The following people have contributed in designing this format:

  Ben Collins
  Daniel Veillard
  Erik Troan
  Ian Jackson
  Jeff Johnson
  Marcus Brinkmann
  Matt Wilson
  Wichert Akkerman


--/04w6evG8XlLl3ft
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBN5JVPKjZR/ntlUftAQGtTgL+MEeDQLBsLoAG+gZql4sYOXzRx/jlSbtK
TP68uZKwL9HVimJio42cNrTUtezaUr+kF6Vua8/rNWPj278coZMBSd+uY0QFumkc
k8360TFOAGhAqbYYyPA49eyoLq6VoeEu
=9IXC
-----END PGP SIGNATURE-----

--/04w6evG8XlLl3ft--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul 20 09:45:23 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id JAA18037;
	Tue, 20 Jul 1999 09:45:20 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id JAA05681;
	Tue, 20 Jul 1999 09:45:20 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id JAA08989;
	Tue, 20 Jul 1999 09:45:19 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id JAA29957;
	Tue, 20 Jul 1999 09:45:18 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id JAA29947
	for packaging-list; Tue, 20 Jul 1999 09:45:14 -0400
Resent-Date: Tue, 20 Jul 1999 09:45:14 -0400
Resent-Message-Id: <199907201345.JAA29947@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id JAA29937
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 09:44:59 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id JAA18027;
	Tue, 20 Jul 1999 09:44:58 -0400
Message-ID: <19990720094458.B4404@devserv.devel.redhat.com>
Date: Tue, 20 Jul 1999 09:44:58 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
References: <19990719002916.A5356@tornado.mors.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990719002916.A5356@tornado.mors.net>; from Wichert Akkerman on Mon, Jul 19, 1999 at 12:29:16AM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 12417
Lines: 294


On Mon, Jul 19, 1999 at 12:29:16AM +0200, Wichert Akkerman wrote:
> 
> I though it might be nice to write up a specification for the format
> with everything we currently have, so we can finish it up and present
> it to other. I think we should at least send it to the LSB soon.
> 
> Comments/complaints/etc. welcome of course.
> 
> Wichert.
> 

Thanks for writing this up. More specfic comments below.

> 
> Introduction
> ------------
> For a while now Linux has had two popular package formats: the rpm format
> as made by Red Hat, and the deb format as created by Debian. This has been
> a bit problematic since it means vendors have to support both formats.
> 
> As a result there has been a desire for a while now to create a common package
> format that makes it possible to use package on all distributions. We believe
> that will the help of a standard such as the LSB is developing this will help
> make Linux more accessible and friendly.
> 
> Design goals
> ------------
> Both the deb and the rpm-format have some unique features that the other
> format does not have. Our main goal was creating a new format that would
> be a good common ground.
> 
> Since all distributions take slightly different approaches in some areas
> it should also be possible to have distribution-specific extensions.
> We also wanted to add some new features that both formats were lacking
> in, such as good verification systems and multi-language support.
> 
> We felt another important aspect of a good format is that it should be
> extractable using only standard tools. That way even when a
> packagemanager is not available software can still be installed.
> 
> Global overview
> ---------------
> A package is an ar-archive that contains seperate files. Some files
> are compressed to save space. Please note we don't compress the
> whole archive so it is easy to get to seperate sections. The
> files are:
> 
> * version: (uncompressed!) text-file with the versionnumber of the
>   package format
> * metadata.gz: XML-file containing meta-information about the package
>   (name, description, dependencies, etc.). This section is optional.
> * scripts.tar.gz: archive containing special scripts/programs that should
>   be run at specific moments during package installation or removal
> * data.tar.gz: archive containing the actually files in the package
> * signatures.gz: XML-file with signatures for all the other files. This
>   section is optional.
> 

1) I'd like to see (at least as a goal) only metadata and payload files.
I believe the packaging version can be embedded in the filename if necessary
(there will be XML identifiers in the metadata to identify package
version as well). Putting signatures into a separate file (which rpm
already does) permits easy calculation and verification of other
members of the ar-archive. On the other hand, I believe the advantages
in including all information in a single XML metadata component outweigh
additional computational and handling complexity. Is there some standard
for signed XML that we can use for the purpose of verifying metadata integrity?
What provisions are there for adding signatures to already signed XML?

2) The scripts section is almost certainly one area where dpkg and
rpm are going to diverge. While install and erase operations are identical,
during update rpm and dpkg perform operations in inverse order (rpm
does install new, then erase old while dpkg does erase old, install new).
Because we are going to agree to differ in this area, I'd like to use the
XML namespace facility to have two sets of scripts. That would also permit
rpm to include trigger scripts using XML namespaces. We also ought to see
if we can't agree what args should be passed and what minimal common
environment can be supplied/supported.

3) In order to support multiple packages in the same ar-archive, we may need
to specify rules for generating file names for each metadata/payload pair
in the ar-archive rather than hardwiring filenames.

> This is also the preferred order in which sections should be stores in
> the archive: metadata at the beginning so we can easily extract and show
> it without having to read the entire package. Then scripts, since we can
> run a script before we start the actual installation. Signatures is at
> the end so we can write all the other sections first and then calculate
> the signature.
> 
> Metadata section
> ----------------
> We choose to use the XML-format (see http://www.w3.org/TR/REC-xml) since
> it as a very extensible and non-proprietary description format, well
> suited for inter application exchanges. It also allows us to easily add
> features such as translation and distribution-specific extensions.
> 
> The basic structure of the XML data is as follows:
>   <package>
>     common information
> 	distribution-specific information
>   </package>
> 
> For the distribution-specific information we use XML namespaces (see
> http://www.w3.org/TR/REC-xml-names).
> 
> Common metadata-information
> ---------------------------
> This is a list of common tags used by all distributions:
> * name: packagename
> * version: versionnumber of package, using the format
>   (<epoch>:)?<upstream>-<distribution>
> * summary: short description of the package (1-line, maximum 60
>   characters?)
> * description: comprehensive description of the package
> * keywords: (optional) list of keywords that apply to this package
> * author: author of this package, can also be a group or mailinglist 
> * home: (optional) upstream location of sources (URI)
> * packager: person who created this package
> * origin: distribution/project this package was made for (ie Debian,
>   GNOME, Red Hat, etc.)
> * license: (optional) copyright for the contents (ie GPL, LGPL, BSD,
>   MIT, etc.) 
> 
> (NOTE: we should probably add the pre-run tag that rpm has to make
> life easier for rpm-compatibility. Can someone remind me what that
> tag is called?)
> 
> Information like dependencies is not put in the common tags, although all
> distribution have them, for a good reason: the names and information
> used in the dependencies can currently not be shared amongs
> distributions due to different naming and versioning conventions. As a
> result they have been put in the distribution-specific tags.
> 

I strongly believe that we need to express dependencies in a common format.
The 5-tuple
	XML namespace
	name
	epoch:version-release
unambiguosly specifies a package for either rpm or dpkg. Given that 5-tuple,
it's possible to express package dependencies with a common syntax. It's
even possible to express parallel package dependency chains if the need arises.

I's suggest (for starters), that we try to agree on semantics for
	Prereq:
	Requires:
	Obsoletes:
	Conflicts:
	Provides:
for package dependencies. Can we agree on common semantics for the above
semantics for package dependencies? Can we agree on common semantics for
file dependencies? Can we agree on common semantics for soname dependencies?
What other dependencies (e.g system::memory or perl5(perl-module) namespace
dependencies) might we agree on?

> We expect that the LSB will request extra common tags with centrally
> defineds semantics.
> 
> An example:
>   <package xmlns:rpm="http://www.rpm.org/v4.0"
>            xmlns:deb="http://www.debian.org/dpkg/v2.0">
>     <name>mount</mount>
>     <version>2.9t-1</version>
>     <summary>Tools for mounting and manipulating filesystems</summary>
>     <description>
>       This package provides the mount(8), umount(8), swapon(8),
>       swapoff(8), and losetup(8) commands.
>     </description>
>     <keywords>mount,umount,filesystem</keywords>
>     <author>
>        <name>I have no clue</name>
>        <email>someone@somewhere</email>
>        <nick>Zapper</nick>
>     </author>
>     <packager>
>        <name>Vincent Renardias</name>
>        <email>vincent@debian.org</email>
>     </packager>
>     <home>ftp://sunsite.unc.edu:/pub/Linux/system/Misc/util-linux-2.5.tar.gz</home>
>     <origin>Debian</origin>
>     <license>GPL</license>
>   </package>
> 
> Please note that for persons we have made tags for name, email and nick.
> We felt that nick was necessary since these days some people are better
> known by their (IRC-)nickname then their given name.
> 
> Distribution-specific metadata-information
> ------------------------------------------
> Each distribution will have to create their own tags for features they
> need that are not covered by the common tags. We propose however that
> those tags are registered at a central point so we can keep track of
> them and optionally consider making some tags common if multiple
> distributions use them.
> 
> Currently known distribution-specific tags:
> * Debian:
>   + essential: (optional) marks a package as required so the
>     package-manager refuses to uninstall it
   This can/should be common AFAIAC.
>   + pre-depends: (optional) (used for package relations)
>   + depends: (optional) (used for package relations)
>   + conflicts: (optional) (used for package relations)
>   + replaces: (optional) (used for package relations)
>   + provides: (optiona) (used for package relations)
   These must be common (see above).
>   + recommends: (optional) (used for package relations)
>   + suggests: (optional) (used for package relations)
   I'm not averse to adding these to the common dependencies if they are
   treated as hints (i.e. optionally interpreted) or have clearly defined
   semantics. Otherwise, distribution specific.
>   + maintainer: name and contact for person(s) who maintains this package
   This is distribution specific.
>   + installed-size: size of package after installation
   Installed-size seems to be another candidate for common.
>   + section: section package belongs to (base/libs/devel/etc.)
>   + priority: used by package-frontends
   These are distribution specific.
> 
> Scripts-section
> ---------------
> When you install, ugrade or remove a package special programs can be
> run. These can be used for example to (un)register documentation, 
> fix permissions, start/stop/restart daemons, etc. There are four
> programs:
>   * prerm: used before a package is being removed or purged
>   * postrm: used after a package is removed or purged
>   * preinst: run before a package is installed/upgraded
>   * postinst: run before a package is installed/upgraded
> 
> For the exact order these programs are run and the paramters used please
> see the dpkg manual (since rpm does not have these it makes sense to be
> compatible with dpkg, which has used them for a long time now).
> 

There is still the issue of interpreters here (I've forgotten all the
details).

> Data-section
> ------------
> Nothing special needs to be said about this section. It is a standard
> tar.gz file with the files that should be installed.
> 
> Signature-section
> -----------------
> This section contains signatures for the data in the other sections. The
> exact data used is the contents of the metata.gz, scripts.tar.gz (if
> present) and data.tar.gz files concatenated. The signatures are stored
> in XML-format so it is easy to have multiple signatures and add new
> signature types later. Current signature types are:
>   * pgp2
>   * OpenPGP (used by GnuPG and pgp5)
>   * MD5
> 
> Things yet-to-be-decided
> ------------------------
> Currently this document says that tar is used in multiple-file sections
> (scripts and data). However cpio is also an option, and a definitive
> decision hasn't been made yet.
> 
> How to handle multiple OS'es and architectures also hasn't been decided
> yet. We currently have two proposals:
> * use common OS and architecture-tags
> * encode the OS and architecture-needs in the dependencies using virtual
>   packages
> For both methods the package-manager will have to have a hint-list that
> tells it which architectures are compatible. For example: you can
> run packages compiled for a sparc on an ultrasparc system.
> 
> Contributors
> ------------
> The following people have contributed in designing this format:
> 
>   Ben Collins
>   Daniel Veillard
>   Erik Troan
>   Ian Jackson
>   Jeff Johnson
>   Marcus Brinkmann
>   Matt Wilson
>   Wichert Akkerman
> 



-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul 20 09:51:06 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id JAA18185;
	Tue, 20 Jul 1999 09:51:03 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id JAA06027;
	Tue, 20 Jul 1999 09:51:02 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id JAA09535;
	Tue, 20 Jul 1999 09:51:02 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id JAA30303;
	Tue, 20 Jul 1999 09:51:01 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id JAA30294
	for packaging-list; Tue, 20 Jul 1999 09:50:59 -0400
Resent-Date: Tue, 20 Jul 1999 09:50:59 -0400
Resent-Message-Id: <199907201350.JAA30294@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id JAA30291
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 09:50:57 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id JAA18175;
	Tue, 20 Jul 1999 09:50:56 -0400
Message-ID: <19990720095056.C4404@devserv.devel.redhat.com>
Date: Tue, 20 Jul 1999 09:50:56 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
References: <19990719002916.A5356@tornado.mors.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990719002916.A5356@tornado.mors.net>; from Wichert Akkerman on Mon, Jul 19, 1999 at 12:29:16AM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 502
Lines: 19


On Mon, Jul 19, 1999 at 12:29:16AM +0200, Wichert Akkerman wrote:
> 
> (NOTE: we should probably add the pre-run tag that rpm has to make
> life easier for rpm-compatibility. Can someone remind me what that
> tag is called?)
> 

I'm not sure what "pre-run" tag you are referring to. What does it do?

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul 20 10:27:14 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id KAA19143;
	Tue, 20 Jul 1999 10:27:12 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA09495;
	Tue, 20 Jul 1999 10:27:07 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA13150;
	Tue, 20 Jul 1999 10:27:07 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA32335;
	Tue, 20 Jul 1999 10:27:06 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA32327
	for packaging-list; Tue, 20 Jul 1999 10:27:03 -0400
Resent-Date: Tue, 20 Jul 1999 10:27:03 -0400
Resent-Message-Id: <199907201427.KAA32327@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA32324
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 10:27:00 -0400
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian/GNU) id QAA14159
	for packaging@rufus.w3.org; Tue, 20 Jul 1999 16:26:59 +0200
Date: Tue, 20 Jul 1999 16:26:59 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
Message-ID: <19990720162659.Q12352@soil.nl>
References: <19990719002916.A5356@tornado.mors.net> <19990720094458.B4404@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary="ep0oHQY+/Gbo/zt0"; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990720094458.B4404@devserv.devel.redhat.com>; from Jeff Johnson on Tue, Jul 20, 1999 at 09:44:58AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 5016
Lines: 141



--ep0oHQY+/Gbo/zt0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> 1) I'd like to see (at least as a goal) only metadata and payload files.
> I believe the packaging version can be embedded in the filename if necess=
ary
> (there will be XML identifiers in the metadata to identify package
> version as well). Putting signatures into a separate file (which rpm
> already does) permits easy calculation and verification of other
> members of the ar-archive. On the other hand, I believe the advantages
> in including all information in a single XML metadata component outweigh
> additional computational and handling complexity. Is there some standard
> for signed XML that we can use for the purpose of verifying metadata inte=
grity?

We already talked about this a bit in the list. There are some problems
with putting signatures in the XML data:
* you need to calculate the checksum for a subset of the XML-data since
  you need to `hide' the checksum-area itself first. This is troublesome
* you can't make a full package and batch-sign them later since it would
  mean rewriting the entire package since the metadata is at the beginning

I think Daniel also mentioned some other problems and said that using a
seperate section was probably better, and since he is the XML-expert
here I gladly followed his advice :)

> 2) The scripts section is almost certainly one area where dpkg and
> rpm are going to diverge. While install and erase operations are identica=
l,
> during update rpm and dpkg perform operations in inverse order (rpm
> does install new, then erase old while dpkg does erase old, install new).
> Because we are going to agree to differ in this area, I'd like to use the
> XML namespace facility to have two sets of scripts.

Euh, how? You can't put the scripts in XML since they're not always scripts.
Remember we occasionaly use binaries as well!

> 3) In order to support multiple packages in the same ar-archive, we may n=
eed
> to specify rules for generating file names for each metadata/payload pair
> in the ar-archive rather than hardwiring filenames.

Perhaps use namespaces in filenames?

> I strongly believe that we need to express dependencies in a common forma=
t.
> The 5-tuple
> 	XML namespace
> 	name
> 	epoch:version-release
> unambiguosly specifies a package for either rpm or dpkg. Given that 5-tup=
le,
> it's possible to express package dependencies with a common syntax. It's
> even possible to express parallel package dependency chains if the need a=
rises.

You need a bit more though, since you can also have dependencies on
multiple packages. For example:

	Depends: libc6, svgalib | svgalib-dummy

> I's suggest (for starters), that we try to agree on semantics for
> 	Prereq:
> 	Requires:
> 	Obsoletes:
> 	Conflicts:
> 	Provides:
> for package dependencies. Can we agree on common semantics for the above
> semantics for package dependencies?

Probably. Prereq is our Pre-Depends. Required is our Depends, we don't
have obsoletes (I'm still not sure I like it btw), we have Conflicts
and Provides. We also have Recommends and Suggests and want to add
Enhances as well (reverse Suggest).

> Can we agree on common semantics for file dependencies?

Probably, but Debian will never use them.

> Can we agree on common semantics for soname dependencies?

I think we said that the LSB should have a say in this?

> What other dependencies (e.g system::memory or perl5(perl-module) namespa=
ce
> dependencies) might we agree on?

Not sure, I'll think about it.

> > Currently known distribution-specific tags:
> > * Debian:
> >   + essential: (optional) marks a package as required so the
> >     package-manager refuses to uninstall it
>    This can/should be common AFAIAC.

I don't want to make this a common tag since the packagenames and versions
are different, which means that it doesn't make sense to put them in a
common block.

> >   + suggests: (optional) (used for package relations)
>    I'm not averse to adding these to the common dependencies if they are
>    treated as hints (i.e. optionally interpreted) or have clearly defined
>    semantics. Otherwise, distribution specific.

It is a hint.

> >   + installed-size: size of package after installation
>    Installed-size seems to be another candidate for common.

Probably.

> > Scripts-section
> > ---------------
>=20
> There is still the issue of interpreters here (I've forgotten all the
> details).

No, they are just binaries like any other binary on the system.

Wichert.

--ep0oHQY+/Gbo/zt0
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBN5SHM6jZR/ntlUftAQHJCAL+KBTN6jsyJRWjJ1pV5EzFd0vsM+r/wlwa
r52ysFfdCQzeeXzvk5P/W3fL+EAmYqGzEaEU+sQjSUN+eQTF/yHK1LeFszxhKmYL
pk6+bQeTM9ZAxwAGAqaKprBJuhHxkTzl
=jnzE
-----END PGP SIGNATURE-----

--ep0oHQY+/Gbo/zt0--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul 20 10:27:42 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id KAA19164;
	Tue, 20 Jul 1999 10:27:40 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA09545;
	Tue, 20 Jul 1999 10:27:40 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA13197;
	Tue, 20 Jul 1999 10:27:39 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA32394;
	Tue, 20 Jul 1999 10:27:39 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA32385
	for packaging-list; Tue, 20 Jul 1999 10:27:37 -0400
Resent-Date: Tue, 20 Jul 1999 10:27:37 -0400
Resent-Message-Id: <199907201427.KAA32385@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA32382
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 10:27:36 -0400
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian/GNU) id QAA14172
	for packaging@rufus.w3.org; Tue, 20 Jul 1999 16:27:35 +0200
Date: Tue, 20 Jul 1999 16:27:35 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
Message-ID: <19990720162735.R12352@soil.nl>
References: <19990719002916.A5356@tornado.mors.net> <19990720095056.C4404@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=ChQOR20MqfxkMJg9; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990720095056.C4404@devserv.devel.redhat.com>; from Jeff Johnson on Tue, Jul 20, 1999 at 09:50:56AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 753
Lines: 29



--ChQOR20MqfxkMJg9
Content-Type: text/plain; charset=us-ascii

Previously Jeff Johnson wrote:
> I'm not sure what "pre-run" tag you are referring to. What does it do?

A specific binary to be run before or after installing a package.
Really essential when you do things like upgrade libc or ldso.

Wichert.

--ChQOR20MqfxkMJg9
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBN5SHV6jZR/ntlUftAQFmJAL9HNyeFSrIB8flVan7nr/MPxMXXpk5rMW7
zEpvuOuXv6UdczQNJgvS31b0FJtRip/MYvY+iTeUrHcwcKpkw9qayTnAc76RHIWY
MeReMLNEfRxRLfKsat+bg9Vc3QyvECTo
=gpcX
-----END PGP SIGNATURE-----

--ChQOR20MqfxkMJg9--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul 20 11:21:36 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA20775;
	Tue, 20 Jul 1999 11:21:35 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA14749;
	Tue, 20 Jul 1999 11:21:34 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA18483;
	Tue, 20 Jul 1999 11:21:34 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA04102;
	Tue, 20 Jul 1999 11:21:33 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA04092
	for packaging-list; Tue, 20 Jul 1999 11:21:30 -0400
Resent-Date: Tue, 20 Jul 1999 11:21:30 -0400
Resent-Message-Id: <199907201521.LAA04092@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA04088
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 11:21:29 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id LAA20764;
	Tue, 20 Jul 1999 11:21:29 -0400
Message-ID: <19990720112129.D4404@devserv.devel.redhat.com>
Date: Tue, 20 Jul 1999 11:21:29 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
References: <19990719002916.A5356@tornado.mors.net> <19990720095056.C4404@devserv.devel.redhat.com> <19990720162735.R12352@soil.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990720162735.R12352@soil.nl>; from Wichert Akkerman on Tue, Jul 20, 1999 at 04:27:35PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 797
Lines: 29


On Tue, Jul 20, 1999 at 04:27:35PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > I'm not sure what "pre-run" tag you are referring to. What does it do?
> 
> A specific binary to be run before or after installing a package.
> Really essential when you do things like upgrade libc or ldso.
> 

Ah, this is what I was referring to when speaking of interpreters.

Rpm does the following
	%post -p /sbin/ldconfig
rather than
	%post
	/sbin/ldconfig

The first version runs /sbin/ldconfig directly without the need (i.e. automatic
file dependency generated requires) for /bin/sh.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul 20 11:28:02 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA20994;
	Tue, 20 Jul 1999 11:28:00 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA15199;
	Tue, 20 Jul 1999 11:28:00 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA19071;
	Tue, 20 Jul 1999 11:27:59 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA04539;
	Tue, 20 Jul 1999 11:27:59 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA04526
	for packaging-list; Tue, 20 Jul 1999 11:27:56 -0400
Resent-Date: Tue, 20 Jul 1999 11:27:56 -0400
Resent-Message-Id: <199907201527.LAA04526@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA04522
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 11:27:53 -0400
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian/GNU) id RAA14655
	for packaging@rufus.w3.org; Tue, 20 Jul 1999 17:27:52 +0200
Date: Tue, 20 Jul 1999 17:27:51 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
Message-ID: <19990720172751.Z12352@soil.nl>
References: <19990719002916.A5356@tornado.mors.net> <19990720095056.C4404@devserv.devel.redhat.com> <19990720162735.R12352@soil.nl> <19990720112129.D4404@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=OfrWf2Fun5Ae4m0Y; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990720112129.D4404@devserv.devel.redhat.com>; from Jeff Johnson on Tue, Jul 20, 1999 at 11:21:29AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 701
Lines: 30



--OfrWf2Fun5Ae4m0Y
Content-Type: text/plain; charset=us-ascii

Previously Jeff Johnson wrote:
> Ah, this is what I was referring to when speaking of interpreters.

Thought so. Can we agree that interpreters is probably the wrong
name for this?

Wichert.


--OfrWf2Fun5Ae4m0Y
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBN5SVdqjZR/ntlUftAQF7mgL9Fvl+Dq+ptwf3g0FMmeSN6MBmWRNEyyFS
4/ALYie/cKmIu3m5DX6NlmBXhKnusVX7wmgd2gaL2dnKIfoR/iA+JApn2xGoUhR/
RyOZfghk+z2gyQwm6HScBI9EM0rncjQ3
=IFQP
-----END PGP SIGNATURE-----

--OfrWf2Fun5Ae4m0Y--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul 20 11:55:25 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA21885;
	Tue, 20 Jul 1999 11:55:23 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA17825;
	Tue, 20 Jul 1999 11:55:23 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA21826;
	Tue, 20 Jul 1999 11:55:22 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA06788;
	Tue, 20 Jul 1999 11:55:21 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA06778
	for packaging-list; Tue, 20 Jul 1999 11:55:19 -0400
Resent-Date: Tue, 20 Jul 1999 11:55:19 -0400
Resent-Message-Id: <199907201555.LAA06778@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA06775
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 11:55:16 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id LAA21879;
	Tue, 20 Jul 1999 11:55:15 -0400
Message-ID: <19990720115515.E4404@devserv.devel.redhat.com>
Date: Tue, 20 Jul 1999 11:55:15 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
References: <19990719002916.A5356@tornado.mors.net> <19990720094458.B4404@devserv.devel.redhat.com> <19990720162659.Q12352@soil.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990720162659.Q12352@soil.nl>; from Wichert Akkerman on Tue, Jul 20, 1999 at 04:26:59PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 6842
Lines: 174


On Tue, Jul 20, 1999 at 04:26:59PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > 1) I'd like to see (at least as a goal) only metadata and payload files.
> > I believe the packaging version can be embedded in the filename if necessary
> > (there will be XML identifiers in the metadata to identify package
> > version as well). Putting signatures into a separate file (which rpm
> > already does) permits easy calculation and verification of other
> > members of the ar-archive. On the other hand, I believe the advantages
> > in including all information in a single XML metadata component outweigh
> > additional computational and handling complexity. Is there some standard
> > for signed XML that we can use for the purpose of verifying metadata integrity?
> 
> We already talked about this a bit in the list. There are some problems
> with putting signatures in the XML data:
> * you need to calculate the checksum for a subset of the XML-data since
>   you need to `hide' the checksum-area itself first. This is troublesome
> * you can't make a full package and batch-sign them later since it would
>   mean rewriting the entire package since the metadata is at the beginning
> 

Leaving white space in metadata helps address both of these issues. A
full rewrite would be needed in certain circumstances of course.

> I think Daniel also mentioned some other problems and said that using a
> seperate section was probably better, and since he is the XML-expert
> here I gladly followed his advice :)
> 

If we need a 3rd component in the ar-archive, so be it. The payoff in
having all information in the metadata is the simplicity in handling:
all information about the payload would be in a single location.

> > 2) The scripts section is almost certainly one area where dpkg and
> > rpm are going to diverge. While install and erase operations are identical,
> > during update rpm and dpkg perform operations in inverse order (rpm
> > does install new, then erase old while dpkg does erase old, install new).
> > Because we are going to agree to differ in this area, I'd like to use the
> > XML namespace facility to have two sets of scripts.
> 
> Euh, how? You can't put the scripts in XML since they're not always scripts.
> Remember we occasionaly use binaries as well!
> 

How about permitting optional binaries and/or scripts within the ar-archive
that (if conventionally named) override the "official" scripts in the
meta-data header. We might as well provide some utility to commiting
to an ar-archive format (extendible with common tools ...)

> > 3) In order to support multiple packages in the same ar-archive, we may need
> > to specify rules for generating file names for each metadata/payload pair
> > in the ar-archive rather than hardwiring filenames.
> 
> Perhaps use namespaces in filenames?
> 

Possibly even a lookaside URI cache in the ar header?

> > I strongly believe that we need to express dependencies in a common format.
> > The 5-tuple
> > 	XML namespace
> > 	name
> > 	epoch:version-release
> > unambiguosly specifies a package for either rpm or dpkg. Given that 5-tuple,
> > it's possible to express package dependencies with a common syntax. It's
> > even possible to express parallel package dependency chains if the need arises.
> 
> You need a bit more though, since you can also have dependencies on
> multiple packages. For example:
> 
> 	Depends: libc6, svgalib | svgalib-dummy
> 

Absolutely. I'm suggesting not only existence tests (as above) but
also full versioning for the 5 common dependencies:

	Requires: libc6 >= 1:2.1.1-5, (svgalib | svgalib-dummy <= 1.0)

Since neither rpm or dpkg has full blown dependency versioning support,
we would also have to specify what should be done with versioned package
dependecies that are not yet implemented.

> > I's suggest (for starters), that we try to agree on semantics for
> > 	Prereq:
> > 	Requires:
> > 	Obsoletes:
> > 	Conflicts:
> > 	Provides:
> > for package dependencies. Can we agree on common semantics for the above
> > semantics for package dependencies?
> 
> Probably. Prereq is our Pre-Depends. Required is our Depends, we don't
> have obsoletes (I'm still not sure I like it btw), we have Conflicts
> and Provides. We also have Recommends and Suggests and want to add
> Enhances as well (reverse Suggest).
> 

Personally, I prefer Requires because depends is the name of the entire
set of relations, but that may just be my taste.

Recommends and suggests might be better left in an XML namespace because
of the implicit reference(s) to the authority that provides the hint. Possibly
this could even be extended to CERT or BugTraq XML namespaces, although that
might be extreme.

I still can't quite grok enhances ...

I think we need to provide for both common as well as per-XML namespace
dependencies being aggregated.

> > Can we agree on common semantics for file dependencies?
> 
> Probably, but Debian will never use them.
> 

OK, then can we agree that file dependencies are hints that can be
ignored? Or do you wish to relegate them to the rpm XML namespace?

File dependencies are existence tests (i.e. 5 dependency relations without
versions) on tokens that begin with '/'?

Alternative namespace implementation:	 file(C:/command.com)

> > Can we agree on common semantics for soname dependencies?
> 
> I think we said that the LSB should have a say in this?
> 

The LSB should probably be authoritative for the values taken on by
dependency tokens.

However, how should we express the dependency relationship?

Currently, rpm has provides/requires on variants like
	libc.so.6
	libc.so.6(GLIBC_2.0)
	libc.so.6(GLIBC_2.1)
and I'm looking for a way to express that (in rpm XML namespace if necessary)
dependency. Ideas welcome ...

> > What other dependencies (e.g system::memory or perl5(perl-module) namespace
> > dependencies) might we agree on?
> 
> Not sure, I'll think about it.
> 
> > > Currently known distribution-specific tags:
> > > * Debian:
> > >   + essential: (optional) marks a package as required so the
> > >     package-manager refuses to uninstall it
> >    This can/should be common AFAIAC.
> 
> I don't want to make this a common tag since the packagenames and versions
> are different, which means that it doesn't make sense to put them in a
> common block.
> 
> > >   + suggests: (optional) (used for package relations)
> >    I'm not averse to adding these to the common dependencies if they are
> >    treated as hints (i.e. optionally interpreted) or have clearly defined
> >    semantics. Otherwise, distribution specific.
> 
> It is a hint.
> 

An optional common hint?

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul 20 12:00:02 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA22008;
	Tue, 20 Jul 1999 11:59:59 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA18206;
	Tue, 20 Jul 1999 11:59:58 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA22262;
	Tue, 20 Jul 1999 11:59:58 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA07076;
	Tue, 20 Jul 1999 11:59:58 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA07067
	for packaging-list; Tue, 20 Jul 1999 11:59:55 -0400
Resent-Date: Tue, 20 Jul 1999 11:59:55 -0400
Resent-Message-Id: <199907201559.LAA07067@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA07058
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 11:59:53 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id LAA22000;
	Tue, 20 Jul 1999 11:59:52 -0400
Message-ID: <19990720115952.F4404@devserv.devel.redhat.com>
Date: Tue, 20 Jul 1999 11:59:52 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
References: <19990719002916.A5356@tornado.mors.net> <19990720095056.C4404@devserv.devel.redhat.com> <19990720162735.R12352@soil.nl> <19990720112129.D4404@devserv.devel.redhat.com> <19990720172751.Z12352@soil.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990720172751.Z12352@soil.nl>; from Wichert Akkerman on Tue, Jul 20, 1999 at 05:27:51PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 575
Lines: 23


On Tue, Jul 20, 1999 at 05:27:51PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > Ah, this is what I was referring to when speaking of interpreters.
> 
> Thought so. Can we agree that interpreters is probably the wrong
> name for this?
> 

Sure, if I can remember to do that. Something other than 'pre-run'
however :-)

How about "scriptlet executor"?

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul 20 12:12:14 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id MAA22348;
	Tue, 20 Jul 1999 12:12:12 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA19528;
	Tue, 20 Jul 1999 12:12:11 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA23439;
	Tue, 20 Jul 1999 12:12:10 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA07895;
	Tue, 20 Jul 1999 12:12:10 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA07885
	for packaging-list; Tue, 20 Jul 1999 12:12:06 -0400
Resent-Date: Tue, 20 Jul 1999 12:12:06 -0400
Resent-Message-Id: <199907201612.MAA07885@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA07880
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 12:12:03 -0400
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian/GNU) id SAA14823
	for packaging@rufus.w3.org; Tue, 20 Jul 1999 18:12:02 +0200
Date: Tue, 20 Jul 1999 18:12:01 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
Message-ID: <19990720181201.A14789@soil.nl>
References: <19990719002916.A5356@tornado.mors.net> <19990720094458.B4404@devserv.devel.redhat.com> <19990720162659.Q12352@soil.nl> <19990720115515.E4404@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=6c2NcOVqGQ03X4Wi; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990720115515.E4404@devserv.devel.redhat.com>; from Jeff Johnson on Tue, Jul 20, 1999 at 11:55:15AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 3637
Lines: 103



--6c2NcOVqGQ03X4Wi
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> Leaving white space in metadata helps address both of these issues. A
> full rewrite would be needed in certain circumstances of course.

I still don't think we should go this way. I'm hoping Daniel will step
in here and shed some light on this..

> How about permitting optional binaries and/or scripts within the ar-archi=
ve
> that (if conventionally named) override the "official" scripts in the
> meta-data header. We might as well provide some utility to commiting
> to an ar-archive format (extendible with common tools ...)

Sounds very ugly. I don't see why you want to have scripts in the metadata?
I think that is an extremely bad idea.. it is also the reason why rpm
needs to mess with interpreters for scripts in the metadata.

> Possibly even a lookaside URI cache in the ar header?

Huh? You lost me there :)

> Absolutely. I'm suggesting not only existence tests (as above) but
> also full versioning for the 5 common dependencies:
>=20
> 	Requires: libc6 >=3D 1:2.1.1-5, (svgalib | svgalib-dummy <=3D 1.0)
>=20
> Since neither rpm or dpkg has full blown dependency versioning support,

Euh, dpkg can and will do that correctly. The only thing it doesn't have
currently is versioned provides.

> Personally, I prefer Requires because depends is the name of the entire
> set of relations, but that may just be my taste.

Well, both are dependencies. The only differences is that with Pre-Depends
something is required before (hence the pre!) even starting to install
a package. This is needed if you need to use something in the preinst.

> I still can't quite grok enhances ...

The idea for enhances is simple. Lets take apache as an example. There are
packages that add features to apache, such as apache modules, analog, etc.
It would be nice to offer those packages if a user decides to install apach=
e.
However it is unreasonable to expect apache to list all those packages, so
we make the other package say that they enhance the apache package.

> I think we need to provide for both common as well as per-XML namespace
> dependencies being aggregated.

Probably, but the common dependencies would need to be a LSB-decision,
otherwise they will be abused I fear.

> OK, then can we agree that file dependencies are hints that can be
> ignored? Or do you wish to relegate them to the rpm XML namespace?

I'ld rather put them in a rpm namespace.

> File dependencies are existence tests (i.e. 5 dependency relations without
> versions) on tokens that begin with '/'?

I know what they are. I just really dislike them.

> However, how should we express the dependency relationship?
>=20
> Currently, rpm has provides/requires on variants like
> 	libc.so.6
> 	libc.so.6(GLIBC_2.0)
> 	libc.so.6(GLIBC_2.1)
> and I'm looking for a way to express that (in rpm XML namespace if necess=
ary)
> dependency. Ideas welcome ...

You have two kinds of dependencies here: actual packages, and sonames.
I'm not sure if they should be treated the same here. Perhaps in dependenci=
es,
with soname-provides for library packages or so.

Wichert.


--6c2NcOVqGQ03X4Wi
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBN5Sf0ajZR/ntlUftAQGRHAL7BOnKRGR6h1u4UZwbtMevJPa5UYs27EkA
tDWMAjKpPH59TyA8r/v3KHPsqj+Jy5aJNfmVZe9WvfbdSNsGei/lpJb52Drpy/+1
NhFNuxCrYjhbGA/CXAUUJLlvN6JbA7w9
=92In
-----END PGP SIGNATURE-----

--6c2NcOVqGQ03X4Wi--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul 20 12:15:31 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id MAA22450;
	Tue, 20 Jul 1999 12:15:29 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA19858;
	Tue, 20 Jul 1999 12:15:29 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA23774;
	Tue, 20 Jul 1999 12:15:28 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA08122;
	Tue, 20 Jul 1999 12:15:28 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA08113
	for packaging-list; Tue, 20 Jul 1999 12:15:24 -0400
Resent-Date: Tue, 20 Jul 1999 12:15:24 -0400
Resent-Message-Id: <199907201615.MAA08113@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:ewt@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA08109
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 12:15:22 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA28087
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 12:17:27 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Tue, 20 Jul 1999 12:17:27 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
In-Reply-To: <19990720181201.A14789@soil.nl>
Message-ID: <Pine.LNX.4.10.9907201215490.28044-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1292
Lines: 31


On Tue, 20 Jul 1999, Wichert Akkerman wrote:

> > OK, then can we agree that file dependencies are hints that can be
> > ignored? Or do you wish to relegate them to the rpm XML namespace?
> 
> I'ld rather put them in a rpm namespace.

How come? We use these pretty agressively for things like /bin/sh (which
every package which uses /bin/sh as a script interpretor uses), and it
would seriously diminsh our package semantics if this didn't make it into
this proposal.

> You have two kinds of dependencies here: actual packages, and sonames.
> I'm not sure if they should be treated the same here. Perhaps in dependencies,
> with soname-provides for library packages or so.

The soname dependencies are the same as virtual packages -- they're implemented
identicaly.

Erik

-------------------------------------------------------------------------------
|       "For the next two hours, VH1 will be filled with foul-mouthed,        |
|          crossdressing Australians. Viewer discretion is advised."          |
|                                                                             |
|   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul 20 12:19:30 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id MAA22622;
	Tue, 20 Jul 1999 12:19:28 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA20292;
	Tue, 20 Jul 1999 12:19:28 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA24202;
	Tue, 20 Jul 1999 12:19:28 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA08406;
	Tue, 20 Jul 1999 12:19:27 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA08397
	for packaging-list; Tue, 20 Jul 1999 12:19:24 -0400
Resent-Date: Tue, 20 Jul 1999 12:19:24 -0400
Resent-Message-Id: <199907201619.MAA08397@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA08392
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 12:19:21 -0400
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian/GNU) id SAA14853
	for packaging@rufus.w3.org; Tue, 20 Jul 1999 18:19:20 +0200
Date: Tue, 20 Jul 1999 18:19:20 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
Message-ID: <19990720181920.B14789@soil.nl>
References: <19990720181201.A14789@soil.nl> <Pine.LNX.4.10.9907201215490.28044-100000@localhost>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=Pd0ReVV5GZGQvF3a; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <Pine.LNX.4.10.9907201215490.28044-100000@localhost>; from Erik Troan on Tue, Jul 20, 1999 at 12:17:27PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1378
Lines: 43



--Pd0ReVV5GZGQvF3a
Content-Type: text/plain; charset=us-ascii

Previously Erik Troan wrote:
> How come? We use these pretty agressively for things like /bin/sh (which
> every package which uses /bin/sh as a script interpretor uses), and it
> would seriously diminsh our package semantics if this didn't make it into
> this proposal.

Mkay. I guess we *could* put them in the common section (semantics are
really easy, so no problems there) and just disallow Debian packages to
use them. The problem they create is that we don't know exactly what
version or implementation of something is used to fulfill the dependency,
so we can't guarantee our package will work flawlessly.

> The soname dependencies are the same as virtual packages -- they're
> implemented identicaly.

Which suggest we could just use already existing virtual packages for
sonames and on package-generation add a Provide with the proper name,
right?

Wichert.


--Pd0ReVV5GZGQvF3a
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBN5ShiKjZR/ntlUftAQGhGgL/dZhOvr8O89Kbp1Uged0h91pnNdNtGrFN
LL+uROmgmKYE94UQXo3gQBtY33tahZwf4t7FG3AF5tGec7sygezePGfxICNOrN2o
IKfRSQSUFJazyw2So5/uQybC8/NWL0Et
=6Uub
-----END PGP SIGNATURE-----

--Pd0ReVV5GZGQvF3a--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul 20 12:42:27 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id MAA23293;
	Tue, 20 Jul 1999 12:42:24 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA22863;
	Tue, 20 Jul 1999 12:42:23 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA26307;
	Tue, 20 Jul 1999 12:42:23 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA09713;
	Tue, 20 Jul 1999 12:42:22 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA09705
	for packaging-list; Tue, 20 Jul 1999 12:42:19 -0400
Resent-Date: Tue, 20 Jul 1999 12:42:19 -0400
Resent-Message-Id: <199907201642.MAA09705@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA09702
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 12:42:17 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id MAA23287;
	Tue, 20 Jul 1999 12:42:16 -0400
Message-ID: <19990720124216.G4404@devserv.devel.redhat.com>
Date: Tue, 20 Jul 1999 12:42:16 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
References: <19990719002916.A5356@tornado.mors.net> <19990720094458.B4404@devserv.devel.redhat.com> <19990720162659.Q12352@soil.nl> <19990720115515.E4404@devserv.devel.redhat.com> <19990720181201.A14789@soil.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19990720181201.A14789@soil.nl>; from Wichert Akkerman on Tue, Jul 20, 1999 at 06:12:01PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 3404
Lines: 93


On Tue, Jul 20, 1999 at 06:12:01PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > Leaving white space in metadata helps address both of these issues. A
> > full rewrite would be needed in certain circumstances of course.
> 
> I still don't think we should go this way. I'm hoping Daniel will step
> in here and shed some light on this..
> 
> > How about permitting optional binaries and/or scripts within the ar-archive
> > that (if conventionally named) override the "official" scripts in the
> > meta-data header. We might as well provide some utility to commiting
> > to an ar-archive format (extendible with common tools ...)
> 
> Sounds very ugly. I don't see why you want to have scripts in the metadata?
> I think that is an extremely bad idea.. it is also the reason why rpm
> needs to mess with interpreters for scripts in the metadata.
> 

Rpm "needs to mess" with interpreters in order to avoid some complicated
dependency loops tied to a dependence on /bin/sh.

> > Possibly even a lookaside URI cache in the ar header?
> 
> Huh? You lost me there :)
> 

Sorry. What I meant was using the table of contents of the ar-archive
as a URI lookaside cache. That would permit the ar-archive to potentially
satisfy something like XML well-formedness (URI resolves to locally
accesible object) even though some objects are not resident in the
XML metadata. Using URI names directly in the ar-header would also
provide guidance on how to name entities within the ar-archive.

All very much a hack, forgive the brain fart.

> > Absolutely. I'm suggesting not only existence tests (as above) but
> > also full versioning for the 5 common dependencies:
> > 
> > 	Requires: libc6 >= 1:2.1.1-5, (svgalib | svgalib-dummy <= 1.0)
> > 
> > Since neither rpm or dpkg has full blown dependency versioning support,
> 
> Euh, dpkg can and will do that correctly. The only thing it doesn't have
> currently is versioned provides.
> 

I'm hoping to elicit (through illustration) consensus on the common
form that package dependencies can be expressed.

FWIW, rpm supports requires and conflicts with versioning, but not prereq
obsoletes or provides. I'm suggesting that we agree on a common syntax
with versioning ...

> 
> I know what they are. I just really dislike them.
> 

I'm suggesting common syntax, not trying to edify you. You can dislike
file dependencies all you want, but please express an opinion on how
best to express them.

> > However, how should we express the dependency relationship?
> > 
> > Currently, rpm has provides/requires on variants like
> > 	libc.so.6
> > 	libc.so.6(GLIBC_2.0)
> > 	libc.so.6(GLIBC_2.1)
> > and I'm looking for a way to express that (in rpm XML namespace if necessary)
> > dependency. Ideas welcome ...
> 
> You have two kinds of dependencies here: actual packages, and sonames.
> I'm not sure if they should be treated the same here. Perhaps in dependencies,
> with soname-provides for library packages or so.
> 

Only the first is an soname. The other two forms are an attempt to express
that either GLIBC_2.0 or GLIBC_2.1 weak symbols were/are needed.

And, as Erik has pointed out, rpm deals with sonames as if they were virtual
packages.

73 de Jeff



-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul 20 13:31:55 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id NAA24759;
	Tue, 20 Jul 1999 13:31:51 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id NAA28140;
	Tue, 20 Jul 1999 13:31:51 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id NAA31340;
	Tue, 20 Jul 1999 13:31:51 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA12835;
	Tue, 20 Jul 1999 13:31:50 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA12823
	for packaging-list; Tue, 20 Jul 1999 13:31:47 -0400
Resent-Date: Tue, 20 Jul 1999 13:31:47 -0400
Resent-Message-Id: <199907201731.NAA12823@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:ewt@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA12819
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 13:31:45 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id NAA28220
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 13:33:49 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Tue, 20 Jul 1999 13:33:49 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
In-Reply-To: <19990720181920.B14789@soil.nl>
Message-ID: <Pine.LNX.4.10.9907201329420.28210-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2028
Lines: 41


On Tue, 20 Jul 1999, Wichert Akkerman wrote:

> Mkay. I guess we *could* put them in the common section (semantics are
> really easy, so no problems there) and just disallow Debian packages to
> use them. The problem they create is that we don't know exactly what
> version or implementation of something is used to fulfill the dependency,
> so we can't guarantee our package will work flawlessly.

The lack of version information could certainly be a problem, and packagers
can always add specific dependencies as necessary. As most simple scripts
don't care which version of /bin/sh they use though, why require bash? As
packaging systems are used across OS's and then only for installing partial
package sets rather then the entire system, using package names can make
life more difficult. 

I feel that allowing file dependencies increaes our flexibility, but leaves
open the option of specifying a more rigid dependency set.

> Which suggest we could just use already existing virtual packages for
> sonames and on package-generation add a Provide with the proper name,
> right?

You could, but the nice thing about using sonames as virtual dependencies
is that they can be automatically generated, and they allow easy 
replacements (for libraries which move betwene packages). After all, 
ls is looking for a library with an soname of libc.so.6.1 (or whatever) -- it 
doesn't care what package owns it. Why not encode what's needed instead of
a particular instance which satisfies the dependency?

Erik

-------------------------------------------------------------------------------
|       "For the next two hours, VH1 will be filled with foul-mouthed,        |
|          crossdressing Australians. Viewer discretion is advised."          |
|                                                                             |
|   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul 20 14:53:40 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id OAA27296;
	Tue, 20 Jul 1999 14:53:36 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id OAA04350;
	Tue, 20 Jul 1999 14:53:35 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id OAA06612;
	Tue, 20 Jul 1999 14:53:32 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id OAA18217;
	Tue, 20 Jul 1999 14:53:31 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id OAA18209
	for packaging-list; Tue, 20 Jul 1999 14:53:29 -0400
Resent-Date: Tue, 20 Jul 1999 14:53:29 -0400
Resent-Message-Id: <199907201853.OAA18209@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from nebula.borked.org (ppp-196.m2-1.pbr.ican.net [142.154.83.196])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id OAA18202
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 14:53:20 -0400
Received: from sbaker by nebula.borked.org with local (Exim 3.02 #1 (Debian))
	id 116f14-0002ne-00
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 14:53:26 -0400
Date: Tue, 20 Jul 1999 14:53:26 -0400
From: Steven Baker <sbaker@debian.org>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
Message-ID: <19990720145325.A10740@nebula.borked.org>
References: <19990719002916.A5356@tornado.mors.net> <19990720094458.B4404@devserv.devel.redhat.com> <19990720162659.Q12352@soil.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990720162659.Q12352@soil.nl>; from Wichert Akkerman on Tue, Jul 20, 1999 at 04:26:59PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1859
Lines: 59


On Tue, Jul 20, 1999 at 04:26:59PM +0200, Wichert Akkerman wrote:
[big hefty snip]
> 
> Probably. Prereq is our Pre-Depends. Required is our Depends, we don't
> have obsoletes (I'm still not sure I like it btw), we have Conflicts
> and Provides. We also have Recommends and Suggests and want to add
> Enhances as well (reverse Suggest).
> 

Isn't our "Replaces" the same as RPM's "Obsoletes"?  Can we just agree
to use one or the other?

> > Can we agree on common semantics for file dependencies?
> 
> Probably, but Debian will never use them.
> 

What would be the reason that Debian wouldn't use these?  Something to
do with Debian Policy, I would imagine?

> > Can we agree on common semantics for soname dependencies?
> 
> I think we said that the LSB should have a say in this?
> 
> > What other dependencies (e.g system::memory or perl5(perl-module) namespace
> > dependencies) might we agree on?
> 
> Not sure, I'll think about it.
> 

I think that it may be important to provide hardware dependencies,
although this would almost be architecture dependent.  For example,
the package GL-Quake requires a 3d accelerator card, and (I think) 16M
of memory.

> > > Currently known distribution-specific tags:
> > > * Debian:
> > >   + essential: (optional) marks a package as required so the
> > >     package-manager refuses to uninstall it
> >    This can/should be common AFAIAC.
> 
> I don't want to make this a common tag since the packagenames and versions
> are different, which means that it doesn't make sense to put them in a
> common block.
> 

I would like to see both RPM and Deb agree on packagenames and
versions.  Is this possible to see?  Or have we just agreed to
disagree on this?

[yet another big fat snip]

-Steven


----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul 20 14:58:49 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id OAA27509;
	Tue, 20 Jul 1999 14:58:45 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id OAA04907;
	Tue, 20 Jul 1999 14:58:45 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id OAA07205;
	Tue, 20 Jul 1999 14:58:44 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id OAA18546;
	Tue, 20 Jul 1999 14:58:44 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id OAA18538
	for packaging-list; Tue, 20 Jul 1999 14:58:40 -0400
Resent-Date: Tue, 20 Jul 1999 14:58:40 -0400
Resent-Message-Id: <199907201858.OAA18538@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from nebula.borked.org (ppp-196.m2-1.pbr.ican.net [142.154.83.196])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id OAA18534
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 14:58:34 -0400
Received: from sbaker by nebula.borked.org with local (Exim 3.02 #1 (Debian))
	id 116f69-0002nk-00
	for <packaging@rufus.w3.org>; Tue, 20 Jul 1999 14:58:41 -0400
Date: Tue, 20 Jul 1999 14:58:41 -0400
From: Steven Baker <sbaker@debian.org>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
Message-ID: <19990720145841.B10740@nebula.borked.org>
References: <19990720181920.B14789@soil.nl> <Pine.LNX.4.10.9907201329420.28210-100000@localhost>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.6i
In-Reply-To: <Pine.LNX.4.10.9907201329420.28210-100000@localhost>; from Erik Troan on Tue, Jul 20, 1999 at 01:33:49PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1905
Lines: 41


On Tue, Jul 20, 1999 at 01:33:49PM -0400, Erik Troan wrote:
[snip]
> You could, but the nice thing about using sonames as virtual dependencies
> is that they can be automatically generated, and they allow easy 
> replacements (for libraries which move betwene packages). After all, 
> ls is looking for a library with an soname of libc.so.6.1 (or whatever) -- it 
> doesn't care what package owns it. Why not encode what's needed instead of
> a particular instance which satisfies the dependency?
> 

I think that dependencies should happen on a per-file basis...  I have
run into many problems with Debian (and RedHat, too, although not
quite as much) where I compiled a library on my own (generally because
of lazy maintainers) and then, had to compile _everything_ on my own.

I recently decided that I wanted to run Gnome CVS.  When I compiled
all of my Gnome CVS, I figured I would just download the package for
gnumeric, since it was (almost) recent.  Of course, gnumeric requires
the libgnome package, instead of the library that libgnome provides.

After compiling the Gnome libraries, I am stuck with forever compiling
anything that requires Gnome (which is a _lot_!).  The solution
outlined by Erik is clearly the better one.

> Erik
> 
> -------------------------------------------------------------------------------
> |       "For the next two hours, VH1 will be filled with foul-mouthed,        |
> |          crossdressing Australians. Viewer discretion is advised."          |
> |                                                                             |
> |   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |
> 
> ----
> message from packaging@rufus.w3.org
> to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org
> 
> 
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Jul 21 08:20:26 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id IAA17438;
	Wed, 21 Jul 1999 08:20:18 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id IAA16570;
	Wed, 21 Jul 1999 08:20:12 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id IAA11817;
	Wed, 21 Jul 1999 08:19:58 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id IAA12757;
	Wed, 21 Jul 1999 08:19:49 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id IAA12749
	for packaging-list; Wed, 21 Jul 1999 08:19:46 -0400
Resent-Date: Wed, 21 Jul 1999 08:19:46 -0400
Resent-Message-Id: <199907211219.IAA12749@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id IAA12744
	for <packaging@rufus.w3.org>; Wed, 21 Jul 1999 08:19:42 -0400
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian/GNU) id OAA18451
	for packaging@rufus.w3.org; Wed, 21 Jul 1999 14:19:41 +0200
Date: Wed, 21 Jul 1999 14:19:40 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
Message-ID: <19990721141940.A18436@soil.nl>
References: <19990720181920.B14789@soil.nl> <Pine.LNX.4.10.9907201329420.28210-100000@localhost> <19990720145841.B10740@nebula.borked.org>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=2oS5YaxWCcQjTEyO; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990720145841.B10740@nebula.borked.org>; from Steven Baker on Tue, Jul 20, 1999 at 02:58:41PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1271
Lines: 37



--2oS5YaxWCcQjTEyO
Content-Type: text/plain; charset=us-ascii

Previously Steven Baker wrote:
> I think that dependencies should happen on a per-file basis...  I have
> run into many problems with Debian (and RedHat, too, although not
> quite as much) where I compiled a library on my own (generally because
> of lazy maintainers) and then, had to compile _everything_ on my own.

And I have seen *way* too many problems with people compiling something
themselves or using a package from another source and then complaining
because our packages break. This is a decision one has to make when
creating policy guidelines for a distribution, and for Debian we have
decided that we don't want to do file dependencies. If people really know
what they are doing they can simply create a dummy-package using dpkg-equivs.

Wichert.


--2oS5YaxWCcQjTEyO
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBN5W63KjZR/ntlUftAQHKcwL/RLctrDw0Vj+1g/P8xSQv/c71TPUIqPcw
S9/xMLt8cFR0ke1LWVPGt3gh+NXknmk/jKpBLd11WmAgvtI81vABlCyWz2PRLknf
CW0iiblxD+LQKCEMqFYhv5jDUcJJj4yN
=ohez
-----END PGP SIGNATURE-----

--2oS5YaxWCcQjTEyO--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Jul 21 08:29:03 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id IAA17572;
	Wed, 21 Jul 1999 08:29:01 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id IAA17066;
	Wed, 21 Jul 1999 08:29:00 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id IAA12493;
	Wed, 21 Jul 1999 08:29:00 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id IAA13348;
	Wed, 21 Jul 1999 08:28:59 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id IAA13340
	for packaging-list; Wed, 21 Jul 1999 08:28:55 -0400
Resent-Date: Wed, 21 Jul 1999 08:28:55 -0400
Resent-Message-Id: <199907211228.IAA13340@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id IAA13335
	for <packaging@rufus.w3.org>; Wed, 21 Jul 1999 08:28:52 -0400
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian/GNU) id OAA18481
	for packaging@rufus.w3.org; Wed, 21 Jul 1999 14:28:51 +0200
Date: Wed, 21 Jul 1999 14:28:51 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
Message-ID: <19990721142851.B18436@soil.nl>
References: <19990719002916.A5356@tornado.mors.net> <19990720094458.B4404@devserv.devel.redhat.com> <19990720162659.Q12352@soil.nl> <19990720145325.A10740@nebula.borked.org>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=LpQ9ahxlCli8rRTG; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <19990720145325.A10740@nebula.borked.org>; from Steven Baker on Tue, Jul 20, 1999 at 02:53:26PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2099
Lines: 63



--LpQ9ahxlCli8rRTG
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Steven Baker wrote:
> Isn't our "Replaces" the same as RPM's "Obsoletes"?  Can we just agree
> to use one or the other?

No, replaces means that you know you will/can overwrite part of another
package. This is useful when you move files from one package to another
for example.

Obsoletes means (at least how I envisioned it) that a package as a newer
implementation of something else and thus make the other package obsolete.
This should probably only happen if the new package also Provides the other
package so we don't break dependencies of already existing packages.

I've been thinking about how one would use it, and I've come to the conclus=
ion
that this should be used as a hint in determining what packages to select
to resolve a dependency problem.=20

> What would be the reason that Debian wouldn't use these?  Something to
> do with Debian Policy, I would imagine?

Indeed. See my reply to your other post.

> I think that it may be important to provide hardware dependencies,
> although this would almost be architecture dependent.  For example,
> the package GL-Quake requires a 3d accelerator card, and (I think) 16M
> of memory.

See the other post I did about this with the comments from Marcus Brinkmann.
=20
> I would like to see both RPM and Deb agree on packagenames and
> versions.  Is this possible to see?  Or have we just agreed to
> disagree on this?

Perhaps for a LSB-proposed basesystem, but for other packagenames
I think this will not happen. The different policies are just too
different.

Wichert.


--LpQ9ahxlCli8rRTG
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBN5W9A6jZR/ntlUftAQHE4AL+OtjStGY6FxpRvK0Kd5nzZ4oCBxWa8wrk
1+Q3d9Cbo1H83ik8rdx/rgecmBf9eOPhX88rPgHBnYqs9gRwpNsxiEjzapxzpADI
60/bihE5kqJaW1bXMvyB4BJq4ipKoE05
=Urf1
-----END PGP SIGNATURE-----

--LpQ9ahxlCli8rRTG--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Jul 21 10:45:38 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id KAA21453;
	Wed, 21 Jul 1999 10:45:36 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA30099;
	Wed, 21 Jul 1999 10:45:35 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA26112;
	Wed, 21 Jul 1999 10:45:35 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA22939;
	Wed, 21 Jul 1999 10:45:34 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA22930
	for packaging-list; Wed, 21 Jul 1999 10:45:30 -0400
Resent-Date: Wed, 21 Jul 1999 10:45:30 -0400
Resent-Message-Id: <199907211445.KAA22930@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:ewt@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA22927
	for <packaging@rufus.w3.org>; Wed, 21 Jul 1999 10:45:27 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA30657
	for <packaging@rufus.w3.org>; Wed, 21 Jul 1999 10:47:22 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Wed, 21 Jul 1999 10:47:22 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
In-Reply-To: <19990721141940.A18436@soil.nl>
Message-ID: <Pine.LNX.4.10.9907211045530.30596-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1368
Lines: 29


On Wed, 21 Jul 1999, Wichert Akkerman wrote:

> And I have seen *way* too many problems with people compiling something
> themselves or using a package from another source and then complaining
> because our packages break. This is a decision one has to make when
> creating policy guidelines for a distribution, and for Debian we have
> decided that we don't want to do file dependencies. If people really know
> what they are doing they can simply create a dummy-package using dpkg-equivs.

I understand your position, but deciding that LSB packages shouldn't use
file dependencies because of a Debian policy (rather then a technical 
argument) doesn't seem even-handed.

What can we do to forge a compromise on this? File dependencies are used
quite heavily (and successfully) by RPM, and I'd really like to see them 
included in this spec.

Erik

-------------------------------------------------------------------------------
|       "For the next two hours, VH1 will be filled with foul-mouthed,        |
|          crossdressing Australians. Viewer discretion is advised."          |
|                                                                             |
|   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Jul 21 10:46:21 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id KAA21484;
	Wed, 21 Jul 1999 10:46:19 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA30196;
	Wed, 21 Jul 1999 10:46:19 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA26196;
	Wed, 21 Jul 1999 10:46:18 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA23006;
	Wed, 21 Jul 1999 10:46:17 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA22996
	for packaging-list; Wed, 21 Jul 1999 10:46:13 -0400
Resent-Date: Wed, 21 Jul 1999 10:46:13 -0400
Resent-Message-Id: <199907211446.KAA22996@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:ewt@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA22992
	for <packaging@rufus.w3.org>; Wed, 21 Jul 1999 10:46:10 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA30663
	for <packaging@rufus.w3.org>; Wed, 21 Jul 1999 10:48:06 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Wed, 21 Jul 1999 10:48:06 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
In-Reply-To: <19990721142851.B18436@soil.nl>
Message-ID: <Pine.LNX.4.10.9907211047450.30596-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 976
Lines: 25


On Wed, 21 Jul 1999, Wichert Akkerman wrote:

> > I would like to see both RPM and Deb agree on packagenames and
> > versions.  Is this possible to see?  Or have we just agreed to
> > disagree on this?
> 
> Perhaps for a LSB-proposed basesystem, but for other packagenames
> I think this will not happen. The different policies are just too
> different.

I think we've agreed that it's LSB's problem, as it's really unrelated to
packaging technology.

Erik

-------------------------------------------------------------------------------
|       "For the next two hours, VH1 will be filled with foul-mouthed,        |
|          crossdressing Australians. Viewer discretion is advised."          |
|                                                                             |
|   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Jul 21 10:54:06 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id KAA21832;
	Wed, 21 Jul 1999 10:54:04 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA31100;
	Wed, 21 Jul 1999 10:54:03 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA26914;
	Wed, 21 Jul 1999 10:54:02 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA23664;
	Wed, 21 Jul 1999 10:54:02 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA23647
	for packaging-list; Wed, 21 Jul 1999 10:53:59 -0400
Resent-Date: Wed, 21 Jul 1999 10:53:59 -0400
Resent-Message-Id: <199907211453.KAA23647@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA23638
	for <packaging@rufus.w3.org>; Wed, 21 Jul 1999 10:53:56 -0400
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian/GNU) id QAA19052
	for packaging@rufus.w3.org; Wed, 21 Jul 1999 16:53:54 +0200
Date: Wed, 21 Jul 1999 16:53:54 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
Message-ID: <19990721165354.N18436@soil.nl>
References: <19990721141940.A18436@soil.nl> <Pine.LNX.4.10.9907211045530.30596-100000@localhost>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=V32M1hWVjliPHW+c; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <Pine.LNX.4.10.9907211045530.30596-100000@localhost>; from Erik Troan on Wed, Jul 21, 1999 at 10:47:22AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1477
Lines: 47



--V32M1hWVjliPHW+c
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Erik Troan wrote:
> I understand your position, but deciding that LSB packages shouldn't use
> file dependencies because of a Debian policy (rather then a technical=20
> argument) doesn't seem even-handed.

I think especially LSB packages should be closely tied together and only
depend on each other.

Like I already said: I don't have a problem with the format allowing
file dependencies, even in the common tags. I'm only saying that
Debian packages will not use them (our package manager will honour
them though).

> What can we do to forge a compromise on this? File dependencies are used
> quite heavily (and successfully) by RPM, and I'd really like to see them=
=20
> included in this spec.

I think you mean by Red Hat and not necessarily RPM. RPM offers them but
their usage is not obligatory. There is a difference between what a
format allows and what the policy for a distribution allows.

Wichert.


--V32M1hWVjliPHW+c
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBN5XfAqjZR/ntlUftAQG7GgL/WbQ8TX4wh9bdCngA0t5wueiMUOaVn5Uw
OY5VHYAU6bRnE5aJty86p+0B3BaJpU8RUnRuW9JY4+sl+mN9i3GZVCioIswH7UWj
WF4buT4Tn4m0TwXqqzsVo/KU5bkwKq89
=n+/3
-----END PGP SIGNATURE-----

--V32M1hWVjliPHW+c--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Jul 21 10:56:33 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id KAA21987;
	Wed, 21 Jul 1999 10:56:30 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA31376;
	Wed, 21 Jul 1999 10:56:28 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA27145;
	Wed, 21 Jul 1999 10:56:28 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA23899;
	Wed, 21 Jul 1999 10:56:27 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA23887
	for packaging-list; Wed, 21 Jul 1999 10:56:25 -0400
Resent-Date: Wed, 21 Jul 1999 10:56:25 -0400
Resent-Message-Id: <199907211456.KAA23887@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:ewt@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA23880
	for <packaging@rufus.w3.org>; Wed, 21 Jul 1999 10:56:24 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA30770
	for <packaging@rufus.w3.org>; Wed, 21 Jul 1999 10:58:20 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Wed, 21 Jul 1999 10:58:20 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
In-Reply-To: <19990721165354.N18436@soil.nl>
Message-ID: <Pine.LNX.4.10.9907211057010.30767-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1411
Lines: 33


On Wed, 21 Jul 1999, Wichert Akkerman wrote:

> Like I already said: I don't have a problem with the format allowing
> file dependencies, even in the common tags. I'm only saying that
> Debian packages will not use them (our package manager will honour
> them though).

Okay, then we're on the same page. As long as you'll honor them and we
can use common tags, I'm perfectly happy.

> I think you mean by Red Hat and not necessarily RPM. RPM offers them but
> their usage is not obligatory. There is a difference between what a
> format allows and what the policy for a distribution allows.

This is on the line -- RPM generates them automatically, so all distributions
that use RPM do use file dependencies. They certainly could go into RPM's
source code and disable that though.

Thanks for your patience on this -- it seems that we were arguing about
something we agreed on <sigh>.

Erik

-------------------------------------------------------------------------------
|       "For the next two hours, VH1 will be filled with foul-mouthed,        |
|          crossdressing Australians. Viewer discretion is advised."          |
|                                                                             |
|   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Jul 21 11:00:32 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA22182;
	Wed, 21 Jul 1999 11:00:30 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA31999;
	Wed, 21 Jul 1999 11:00:29 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA27686;
	Wed, 21 Jul 1999 11:00:29 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA24170;
	Wed, 21 Jul 1999 11:00:29 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA24161
	for packaging-list; Wed, 21 Jul 1999 11:00:26 -0400
Resent-Date: Wed, 21 Jul 1999 11:00:26 -0400
Resent-Message-Id: <199907211500.LAA24161@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA24157
	for <packaging@rufus.w3.org>; Wed, 21 Jul 1999 11:00:23 -0400
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian/GNU) id RAA19139
	for packaging@rufus.w3.org; Wed, 21 Jul 1999 17:00:22 +0200
Date: Wed, 21 Jul 1999 17:00:22 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
Message-ID: <19990721170022.O18436@soil.nl>
References: <19990721165354.N18436@soil.nl> <Pine.LNX.4.10.9907211057010.30767-100000@localhost>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=X1xGqyAVbSpAWs5A; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.6i
In-Reply-To: <Pine.LNX.4.10.9907211057010.30767-100000@localhost>; from Erik Troan on Wed, Jul 21, 1999 at 10:58:20AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1085
Lines: 39



--X1xGqyAVbSpAWs5A
Content-Type: text/plain; charset=us-ascii

Previously Erik Troan wrote:
> This is on the line -- RPM generates them automatically, so all distributions
> that use RPM do use file dependencies. They certainly could go into RPM's
> source code and disable that though.

Wow. I had no idea you guys were using them that much.

> Thanks for your patience on this -- it seems that we were arguing about
> something we agreed on <sigh>.

I'm guessing that will happen again :).

While we're at it, are any of us going to be at the LinuxWorld Expo? If so
it might be nice to get together and work out some details.

Wichert.


--X1xGqyAVbSpAWs5A
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBN5XghqjZR/ntlUftAQF1zQL+KbDe7MqLR/dULEJS4dAg3JZatNtdze/z
9hrBNm9raXloRGiZzPmrak7Qh+oeLZ3KHq81yFB4gCjvnPB4vyzR5U5W6CyzH6O+
RrYgAvKfpajp6cJ9g0Q8kYW0v2bfeJHi
=B3ct
-----END PGP SIGNATURE-----

--X1xGqyAVbSpAWs5A--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Jul 21 11:18:54 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA22925;
	Wed, 21 Jul 1999 11:18:52 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA01782;
	Wed, 21 Jul 1999 11:18:51 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA29402;
	Wed, 21 Jul 1999 11:18:50 -0400
Received: from rpmfind.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA25350;
	Wed, 21 Jul 1999 11:18:50 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA25341
	for packaging-list; Wed, 21 Jul 1999 11:18:47 -0400
Resent-Date: Wed, 21 Jul 1999 11:18:47 -0400
Resent-Message-Id: <199907211518.LAA25341@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:ewt@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA25338
	for <packaging@rufus.w3.org>; Wed, 21 Jul 1999 11:18:45 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id LAA30922
	for <packaging@rufus.w3.org>; Wed, 21 Jul 1999 11:20:39 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Wed, 21 Jul 1999 11:20:39 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: packaging@rufus.w3.org
Subject: Re: [packaging] packageformat spec
In-Reply-To: <19990721170022.O18436@soil.nl>
Message-ID: <Pine.LNX.4.10.9907211120050.30917-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 937
Lines: 24


On Wed, 21 Jul 1999, Wichert Akkerman wrote:

> Wow. I had no idea you guys were using them that much.

Yeah, every time we need a script interpretor (which we count /sbin/ldconfig
as), we automatically spit out a file dependency for it.

> While we're at it, are any of us going to be at the LinuxWorld Expo? If so
> it might be nice to get together and work out some details.

I don't think so, unfortunately.

Erik

-------------------------------------------------------------------------------
|       "For the next two hours, VH1 will be filled with foul-mouthed,        |
|          crossdressing Australians. Viewer discretion is advised."          |
|                                                                             |
|   Linux Application Development  --  http://www.redhat.com/~johnsonm/lad    |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat Oct 23 11:04:46 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA28516;
	Sat, 23 Oct 1999 11:04:41 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA32385;
	Sat, 23 Oct 1999 11:04:40 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA17025;
	Sat, 23 Oct 1999 11:04:40 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA24887;
	Sat, 23 Oct 1999 11:04:39 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA24870
	for packaging-list; Sat, 23 Oct 1999 11:04:35 -0400
Resent-Date: Sat, 23 Oct 1999 11:04:35 -0400
Resent-Message-Id: <199910231504.LAA24870@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from lightning.mors.net (root@home003.wi.leidenuniv.nl [132.229.210.131])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA24863
	for <packaging@rufus.w3.org>; Sat, 23 Oct 1999 11:04:30 -0400
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian 8.9.3-6) id RAA24795
	for packaging@rufus.w3.org; Sat, 23 Oct 1999 17:04:19 +0200
Date: Sat, 23 Oct 1999 17:04:19 +0200
From: Wichert Akkerman <wichert@mors.net>
To: packaging@rufus.w3.org
Subject: [packaging] still alive?
Message-ID: <19991023170419.A24551@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="5mCyUwZo2JvN/JJP"
User-Agent: Mutt/1.0pre4i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 914
Lines: 34



--5mCyUwZo2JvN/JJP
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable


Is this list still alive? If so I'll resend the last draft of the
format..

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--5mCyUwZo2JvN/JJP
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.0 (Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjgRznMACgkQPLiSUC+jvC0qcQCgl81OzG9avIbFmK+NPw3YMBTF
FiMAnj+Bl3d4bxoHbaLdu9jnY/OrrBlp
=id1T
-----END PGP SIGNATURE-----

--5mCyUwZo2JvN/JJP--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat Oct 23 12:19:03 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id MAA30392;
	Sat, 23 Oct 1999 12:18:58 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA05518;
	Sat, 23 Oct 1999 12:18:57 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA31288;
	Sat, 23 Oct 1999 12:18:57 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA02797;
	Sat, 23 Oct 1999 12:18:56 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA02784
	for packaging-list; Sat, 23 Oct 1999 12:18:53 -0400
Resent-Date: Sat, 23 Oct 1999 12:18:53 -0400
Resent-Message-Id: <199910231618.MAA02784@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA02775
	for <packaging@rufus.w3.org>; Sat, 23 Oct 1999 12:18:50 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id MAA30376;
	Sat, 23 Oct 1999 12:18:45 -0400
Message-ID: <19991023121844.T28169@devserv.devel.redhat.com>
Date: Sat, 23 Oct 1999 12:18:44 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] still alive?
References: <19991023170419.A24551@mors.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19991023170419.A24551@mors.net>; from Wichert Akkerman on Sat, Oct 23, 1999 at 05:04:19PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 430
Lines: 18


On Sat, Oct 23, 1999 at 05:04:19PM +0200, Wichert Akkerman wrote:
> 
> Is this list still alive? If so I'll resend the last draft of the
> format..
> 

I'm still here and hoping to get some sort of consensus by early next year.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat Oct 23 17:38:22 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id RAA05438;
	Sat, 23 Oct 1999 17:38:19 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id RAA28710;
	Sat, 23 Oct 1999 17:38:19 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id RAA26537;
	Sat, 23 Oct 1999 17:38:18 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id RAA05396;
	Sat, 23 Oct 1999 17:38:16 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id RAA05386
	for packaging-list; Sat, 23 Oct 1999 17:38:12 -0400
Resent-Date: Sat, 23 Oct 1999 17:38:12 -0400
Resent-Message-Id: <199910232138.RAA05386@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from tux.w3.org (IDENT:veillard@tux.w3.org [18.29.0.27])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id RAA05383
	for <packaging@rufus.w3.org>; Sat, 23 Oct 1999 17:38:10 -0400
Received: (from veillard@localhost)
	by tux.w3.org (8.9.3/8.9.3) id RAA26447
	for packaging@rufus.w3.org; Sat, 23 Oct 1999 17:38:10 -0400
Date: Sat, 23 Oct 1999 17:38:10 -0400
From: Daniel Veillard <Daniel.Veillard@w3.org>
To: packaging@rufus.w3.org
Subject: Re: [packaging] still alive?
Message-ID: <19991023173810.B25620@w3.org>
References: <19991023170419.A24551@mors.net> <19991023121844.T28169@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.7i
In-Reply-To: <19991023121844.T28169@devserv.devel.redhat.com>
Organization: World Wide Web Consortium (W3C http://www.w3.org/)
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 869
Lines: 26


On Sat, Oct 23, 1999 at 12:18:44PM -0400, Jeff Johnson wrote:
> 
> On Sat, Oct 23, 1999 at 05:04:19PM +0200, Wichert Akkerman wrote:
> > 
> > Is this list still alive? If so I'll resend the last draft of the
> > format..
> > 
> 
> I'm still here and hoping to get some sort of consensus by early next year.

  Same here and still interested in contributing/reviewing the XML format
and even provide sample code ...

  Send the draft it may wake people up !

Daniel

-- 
Daniel.Veillard@w3.org | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux, WWW, rpmfind,
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | rpm2html, XML,
http://www.w3.org/People/W3Cpeople.html#Veillard | badminton, and Kaffe.
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Dec  9 08:55:56 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id IAA31629;
	Thu, 9 Dec 1999 08:55:45 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id IAA10552;
	Thu, 9 Dec 1999 08:55:45 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id IAA08346;
	Thu, 9 Dec 1999 08:55:45 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id IAA23031;
	Thu, 9 Dec 1999 08:55:42 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id IAA23022
	for packaging-list; Thu, 9 Dec 1999 08:55:39 -0500
Resent-Date: Thu, 9 Dec 1999 08:55:39 -0500
Resent-Message-Id: <199912091355.IAA23022@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from janeway.cistron.net (root@janeway.cistron.net [195.64.65.23])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id IAA23015
	for <packaging@rufus.w3.org>; Thu, 9 Dec 1999 08:55:33 -0500
Received: from lightning.mors.net (root@wichert.cistron.nl [195.64.66.141])
	by janeway.cistron.net (8.9.3/8.9.3/Debian/GNU) with ESMTP id OAA00993
	for <packaging@rufus.w3.org>; Thu, 9 Dec 1999 14:55:30 +0100
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian 8.9.3-6) id PAA07892
	for packaging@rufus.w3.org; Thu, 9 Dec 1999 15:02:09 +0100
Date: Thu, 9 Dec 1999 15:02:09 +0100
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: [packaging] Packaging format text
Message-ID: <19991209150209.A7797@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="pvezYHf7grwyp3Bc"
User-Agent: Mutt/1.0pre4i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 11149
Lines: 287



--pvezYHf7grwyp3Bc
Content-Type: multipart/mixed; boundary="UugvWAfsgieZRqgk"


--UugvWAfsgieZRqgk
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable


Obviously I got hideously sidetracked in the meantime.. sigh.
Anyway, I've attached the last version of the design text.

I made one small change: instead of tar archives in an ar archive
I've changed it to tar archives in a tar archive. The reason for this
was that you need less tools to unpack an archive if you don't
have a packagetool available (which happens for example on the LinuxCare
emergency CD).

I'm thinking of another change that I would like to discuss: I would
like to add a second versionnumber for the buildversion. Let me explain
why: what currently happens is that packages for different architectures
are built with the same sources. However those builds may differ in the
libraries used. Now suppose we want to recompile a package with a newer
version of a library; we'll have to up the versionnumber or nobody will
get the updated package. Right now we will have to update the
versionnumber in the source to build that package. Then the other
architectures will be out-of-sync and will be rebuild as well, which is
completely unnecessary.

To solve this I want to add a new Build-Version. Using that we don't
need to update the source at all but only increase the Build-Version.

There is a slight practical issue in that we need to know the previous
Build-Version when you rebuild something, since it's not in the source.
I'm thinking of using the current time in UTC.

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--UugvWAfsgieZRqgk
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename=pkgformat
Content-Transfer-Encoding: quoted-printable


Introduction
------------
For a while now Linux has had two popular package formats: the rpm format
as made by Red Hat, and the deb format as created by Debian. This has been
a bit problematic since it means vendors have to support both formats.

As a result there has been a desire for a while now to create a common pack=
age
format that makes it possible to use package on all distributions. We belie=
ve
that will the help of a standard such as the LSB is developing this will he=
lp
make Linux more accessible and friendly.

Design goals
------------
Both the deb and the rpm-format have some unique features that the other
format does not have. Our main goal was creating a new format that would
be a good common ground.

Since all distributions take slightly different approaches in some areas
it should also be possible to have distribution-specific extensions.
We also wanted to add some new features that both formats were lacking
in, such as good verification systems and multi-language support.

We felt another important aspect of a good format is that it should be
extractable using only standard tools. That way even when a
packagemanager is not available software can still be installed.

Global overview
---------------
A package is an tar-archive that contains seperate files. Some files
are compressed to save space. Please note we don't compress the
whole archive so it is easy to get to seperate sections. The
files are:

* version: (uncompressed!) text-file with the versionnumber of the
  package format
* metadata.gz: XML-file containing meta-information about the package
  (name, description, dependencies, etc.). This section is optional.
* scripts.tar.gz: archive containing special scripts/programs that should
  be run at specific moments during package installation or removal
* data.tar.gz: archive containing the actually files in the package
* signatures.gz: XML-file with signatures for all the other files. This
  section is optional.

This is also the preferred order in which sections should be stores in
the archive: metadata at the beginning so we can easily extract and show
it without having to read the entire package. Then scripts, since we can
run a script before we start the actual installation. Signatures is at
the end so we can write all the other sections first and then calculate
the signature.

Metadata section
----------------
We choose to use the XML-format (see http://www.w3.org/TR/REC-xml) since
it as a very extensible and non-proprietary description format, well
suited for inter application exchanges. It also allows us to easily add
features such as translation and distribution-specific extensions.

The basic structure of the XML data is as follows:
  <package>
    common information
	distribution-specific information
  </package>

For the distribution-specific information we use XML namespaces (see
http://www.w3.org/TR/REC-xml-names).

Common metadata-information
---------------------------
This is a list of common tags used by all distributions:
* name: packagename
* version: versionnumber of package, using the format
  (<epoch>:)?<upstream>-<distribution>
* summary: short description of the package (1-line, maximum 60
  characters?)
* description: comprehensive description of the package
* keywords: (optional) list of keywords that apply to this package
* author: author of this package, can also be a group or mailinglist=20
* home: (optional) upstream location of sources (URI)
* packager: person who created this package
* origin: distribution/project this package was made for (ie Debian,
  GNOME, Red Hat, etc.)
* license: (optional) copyright for the contents (ie GPL, LGPL, BSD,
  MIT, etc.)=20

(NOTE: we should probably add the pre-run tag that rpm has to make
life easier for rpm-compatibility. Can someone remind me what that
tag is called?)

Information like dependencies is not put in the common tags, although all
distribution have them, for a good reason: the names and information
used in the dependencies can currently not be shared amongs
distributions due to different naming and versioning conventions. As a
result they have been put in the distribution-specific tags.

We expect that the LSB will request extra common tags with centrally
defineds semantics.

An example:
  <package xmlns:rpm=3D"http://www.rpm.org/v4.0"
           xmlns:deb=3D"http://www.debian.org/dpkg/v2.0">
    <name>mount</name>
    <version>2.9t-1</version>
    <summary>Tools for mounting and manipulating filesystems</summary>
    <description>
      This package provides the mount(8), umount(8), swapon(8),
      swapoff(8), and losetup(8) commands.
    </description>
    <keywords>mount,umount,filesystem</keywords>
    <author>
       <name>I have no clue</name>
       <email>someone@somewhere</email>
       <nick>Zapper</nick>
    </author>
    <packager>
       <name>Vincent Renardias</name>
       <email>vincent@debian.org</email>
    </packager>
    <home>ftp://sunsite.unc.edu:/pub/Linux/system/Misc/util-linux-2.5.tar.g=
z</home>
    <origin>Debian</origin>
    <license>GPL</license>
  </package>

Please note that for persons we have made tags for name, email and nick.
We felt that nick was necessary since these days some people are better
known by their (IRC-)nickname then their given name.

Distribution-specific metadata-information
------------------------------------------
Each distribution will have to create their own tags for features they
need that are not covered by the common tags. We propose however that
those tags are registered at a central point so we can keep track of
them and optionally consider making some tags common if multiple
distributions use them.

Currently known distribution-specific tags:
* Debian:
  + essential: (optional) marks a package as required so the
    package-manager refuses to uninstall it
  + pre-depends: (optional) (used for package relations)
  + depends: (optional) (used for package relations)
  + conflicts: (optional) (used for package relations)
  + replaces: (optional) (used for package relations)
  + provides: (optional) (used for package relations)
  + recommends: (optional) (used for package relations)
  + suggests: (optional) (used for package relations)
  + maintainer: name and contact for person(s) who maintains this package
  + installed-size: size of package after installation
  + section: section package belongs to (base/libs/devel/etc.)
  + priority: used by package-frontends

* Red Hat:
  (can someone more familiar with rpm fill in this list?)

Scripts-section
---------------
When you install, ugrade or remove a package special programs can be
run. These can be used for example to (un)register documentation,=20
fix permissions, start/stop/restart daemons, etc. There are four
programs:
  * prerm: used before a package is being removed or purged
  * postrm: used after a package is removed or purged
  * preinst: run before a package is installed/upgraded
  * postinst: run before a package is installed/upgraded

For the exact order these programs are run and the paramters used please
see the dpkg manual (since rpm does not have these it makes sense to be
compatible with dpkg, which has used them for a long time now).

Data-section
------------
Nothing special needs to be said about this section. It is a standard
tar.gz file with the files that should be installed.

Signature-section
-----------------
This section contains signatures for the data in the other sections. The
exact data used is the contents of the metata.gz, scripts.tar.gz (if
present) and data.tar.gz files concatenated. The signatures are stored
in XML-format so it is easy to have multiple signatures and add new
signature types later. Current signature types are:
  * pgp2
  * OpenPGP (used by GnuPG and pgp5)
  * MD5

Things yet-to-be-decided
------------------------
Currently this document says that tar is used in multiple-file sections
(scripts and data). However cpio is also an option, and a definitive
decision hasn't been made yet.

How to handle multiple OS'es and architectures also hasn't been decided
yet. We currently have two proposals:
* use common OS and architecture-tags
* encode the OS and architecture-needs in the dependencies using virtual
  packages
For both methods the package-manager will have to have a hint-list that
tells it which architectures are compatible. For example: you can
run packages compiled for a sparc on an ultrasparc system.

Contributors
------------
The following people have contributed in designing this format:

  Ben Collins
  Daniel Veillard
  Erik Troan
  Ian Jackson
  Jeff Johnson
  Marcus Brinkmann
  Matt Wilson
  Wichert Akkerman


--UugvWAfsgieZRqgk--

--pvezYHf7grwyp3Bc
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.0 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjhPtmEACgkQPLiSUC+jvC23wgCfc2EE3MhQ0XrDPg6kjI/ZKMZC
Q40An0PP0k69fP7+11TcjyZwMLDmWSnc
=X6l0
-----END PGP SIGNATURE-----

--pvezYHf7grwyp3Bc--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Dec  9 11:48:48 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA05481;
	Thu, 9 Dec 1999 11:48:42 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA31953;
	Thu, 9 Dec 1999 11:48:42 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA17292;
	Thu, 9 Dec 1999 11:48:41 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA05009;
	Thu, 9 Dec 1999 11:48:40 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA04999
	for packaging-list; Thu, 9 Dec 1999 11:48:36 -0500
Resent-Date: Thu, 9 Dec 1999 11:48:36 -0500
Resent-Message-Id: <199912091648.LAA04999@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA04981
	for <packaging@rufus.w3.org>; Thu, 9 Dec 1999 11:48:28 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id LAA05470;
	Thu, 9 Dec 1999 11:48:23 -0500
Message-ID: <19991209114823.D30406@devserv.devel.redhat.com>
Date: Thu, 9 Dec 1999 11:48:23 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Cc: Matt Wilson <msw@redhat.com>, Erik Troan <ewt@redhat.com>
Subject: Re: [packaging] Packaging format text
References: <19991209150209.A7797@mors.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19991209150209.A7797@mors.net>; from Wichert Akkerman on Thu, Dec 09, 1999 at 03:02:09PM +0100
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 17784
Lines: 482


On Thu, Dec 09, 1999 at 03:02:09PM +0100, Wichert Akkerman wrote:
> 
> Obviously I got hideously sidetracked in the meantime.. sigh.
> Anyway, I've attached the last version of the design text.
> 

Hey, nice to see you back.

> I made one small change: instead of tar archives in an ar archive
> I've changed it to tar archives in a tar archive. The reason for this
> was that you need less tools to unpack an archive if you don't
> have a packagetool available (which happens for example on the LinuxCare
> emergency CD).
> 

While I can see that using tar for both the wrapper and payload would
minimize the dependence on install system executables while preserving
the goal of being able to install using only common system utilities,
here are two reasons for *not* chossing tar:

1) A tar wrapper format may prevent use of hierarchical directory structure
within the packaging format.

	The wrapper format should permit incremental packaging. I do
	not believe that it is possible to disassemble/reassemble
	a tarball (that has directory structure) preserving an md5 sum
	in general. Go ahead and try :-)

2) There are limits on file name length within the tar format.

Lest I rekindle old flames, I can think of answers to these problems.
However, if tar is the wrapper format, there will have to be explicit
limits put on the tarball structure in order to preserve the goal of
incremental packaging.

Why do we need hierarchical structure in the wrapper format? I can think
of two immediate uses:
   a) meta-packages (as in a package that contains other packages).
   b) patch packages (as in patches to existing packages).

Why do we need incremental packages? So that the package can be fixed without
rebuilding.

> I'm thinking of another change that I would like to discuss: I would
> like to add a second versionnumber for the buildversion. Let me explain
> why: what currently happens is that packages for different architectures
> are built with the same sources. However those builds may differ in the
> libraries used. Now suppose we want to recompile a package with a newer
> version of a library; we'll have to up the versionnumber or nobody will
> get the updated package. Right now we will have to update the
> versionnumber in the source to build that package. Then the other
> architectures will be out-of-sync and will be rebuild as well, which is
> completely unnecessary.
> 
> To solve this I want to add a new Build-Version. Using that we don't
> need to update the source at all but only increase the Build-Version.
> 
> There is a slight practical issue in that we need to know the previous
> Build-Version when you rebuild something, since it's not in the source.
> I'm thinking of using the current time in UTC.
> 

Per-platform differences in libraries used during a build should be reflected in
dependencies, not in the package version.

> Wichert.
> 
> -- 
>    ________________________________________________________________
>  / Generally uninteresting signature - ignore at your convenience  \
> | wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
> | 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

> 
> Introduction
> ------------
> For a while now Linux has had two popular package formats: the rpm format
> as made by Red Hat, and the deb format as created by Debian. This has been
> a bit problematic since it means vendors have to support both formats.
> 
> As a result there has been a desire for a while now to create a common package
> format that makes it possible to use package on all distributions. We believe
> that will the help of a standard such as the LSB is developing this will help
> make Linux more accessible and friendly.
> 
> Design goals
> ------------
> Both the deb and the rpm-format have some unique features that the other
> format does not have. Our main goal was creating a new format that would
> be a good common ground.
> 
> Since all distributions take slightly different approaches in some areas
> it should also be possible to have distribution-specific extensions.
> We also wanted to add some new features that both formats were lacking
> in, such as good verification systems and multi-language support.
> 
> We felt another important aspect of a good format is that it should be
> extractable using only standard tools. That way even when a
> packagemanager is not available software can still be installed.
> 
> Global overview
> ---------------
> A package is an tar-archive that contains seperate files. Some files
> are compressed to save space. Please note we don't compress the
> whole archive so it is easy to get to seperate sections. The
> files are:
> 
> * version: (uncompressed!) text-file with the versionnumber of the
>   package format
> * metadata.gz: XML-file containing meta-information about the package
>   (name, description, dependencies, etc.). This section is optional.
> * scripts.tar.gz: archive containing special scripts/programs that should
>   be run at specific moments during package installation or removal
> * data.tar.gz: archive containing the actually files in the package
> * signatures.gz: XML-file with signatures for all the other files. This
>   section is optional.
> 

A separate uncompressed file containing version seems like overkill.
Why not just extract the version from the name of the first file found
in the wrapper? That would seem to preserve the goal of having the
version visible (i.e. uncompressed) and would simplify (by eliminating
a component) the wrapper format.

I'd like to see scripts (and signatures but that's harder) as part of the
metadata.

> This is also the preferred order in which sections should be stores in
> the archive: metadata at the beginning so we can easily extract and show
> it without having to read the entire package. Then scripts, since we can
> run a script before we start the actual installation. Signatures is at
> the end so we can write all the other sections first and then calculate
> the signature.
> 
> Metadata section
> ----------------
> We choose to use the XML-format (see http://www.w3.org/TR/REC-xml) since
> it as a very extensible and non-proprietary description format, well
> suited for inter application exchanges. It also allows us to easily add
> features such as translation and distribution-specific extensions.
> 
> The basic structure of the XML data is as follows:
>   <package>
>     common information
> 	distribution-specific information
>   </package>
> 
> For the distribution-specific information we use XML namespaces (see
> http://www.w3.org/TR/REC-xml-names).
> 

(I'm interposing rpm:	TAGNAME for reference)

> Common metadata-information
> ---------------------------
> This is a list of common tags used by all distributions:
> * name: packagename

	rpm:	NAME

> * version: versionnumber of package, using the format
>   (<epoch>:)?<upstream>-<distribution>

	rpm:	(EPOCH:)VERSION(-RELEASE)
What's an upstream-distribution?

> * summary: short description of the package (1-line, maximum 60
>   characters?)

	rpm:	SUMMARY

> * description: comprehensive description of the package

	rpm:	DESCRIPTION

> * keywords: (optional) list of keywords that apply to this package

	rpm:	(has not, will add but need conventions for use)

> * author: author of this package, can also be a group or mailinglist 

	rpm:	(has not, will add)

> * home: (optional) upstream location of sources (URI)

	rpm:	URL

> * packager: person who created this package

	rpm:	PACKAGER

> * origin: distribution/project this package was made for (ie Debian,
>   GNOME, Red Hat, etc.)

	rpm:	DISTRIBUTION	(can rename)

> * license: (optional) copyright for the contents (ie GPL, LGPL, BSD,
>   MIT, etc.) 
> 

	rpm:	LICENSE

> (NOTE: we should probably add the pre-run tag that rpm has to make
> life easier for rpm-compatibility. Can someone remind me what that
> tag is called?)
> 

I'm not sure what tag you are looking for.

> Information like dependencies is not put in the common tags, although all
> distribution have them, for a good reason: the names and information
> used in the dependencies can currently not be shared amongs
> distributions due to different naming and versioning conventions. As a
> result they have been put in the distribution-specific tags.
> 
> We expect that the LSB will request extra common tags with centrally
> defineds semantics.

We should be able to specify the format (with LSB blessing the content)
of the common dependencies (at least for packages):
	provides
	requires
	prereq
	obsoletes
	conflicts

We should also be able to specify the logical operations permitted
and the format (at least for packages) of the (EPOCH:)VERSION(-RELEASE)
checks.

> 
> An example:
>   <package xmlns:rpm="http://www.rpm.org/v4.0"
>            xmlns:deb="http://www.debian.org/dpkg/v2.0">
>     <name>mount</name>
>     <version>2.9t-1</version>
>     <summary>Tools for mounting and manipulating filesystems</summary>
>     <description>
>       This package provides the mount(8), umount(8), swapon(8),
>       swapoff(8), and losetup(8) commands.
>     </description>
>     <keywords>mount,umount,filesystem</keywords>
>     <author>
>        <name>I have no clue</name>
>        <email>someone@somewhere</email>
>        <nick>Zapper</nick>
>     </author>
>     <packager>
>        <name>Vincent Renardias</name>
>        <email>vincent@debian.org</email>
>     </packager>
>     <home>ftp://sunsite.unc.edu:/pub/Linux/system/Misc/util-linux-2.5.tar.gz</home>
>     <origin>Debian</origin>
>     <license>GPL</license>
>   </package>
> 
> Please note that for persons we have made tags for name, email and nick.
> We felt that nick was necessary since these days some people are better
> known by their (IRC-)nickname then their given name.
> 
> Distribution-specific metadata-information
> ------------------------------------------
> Each distribution will have to create their own tags for features they
> need that are not covered by the common tags. We propose however that
> those tags are registered at a central point so we can keep track of
> them and optionally consider making some tags common if multiple
> distributions use them.
> 

(I'm interposing rpm:	TAGNAME for reference)

For all package-like dependencies (e.g. REQUIRE), rpm uses a triple
	REQUIRENAME		name of the dependecy
	REQUIREVERSION		(optional) (EPOCH:)VERSION(-RELEASE)
	REQUIREFLAGS		(optional) logical operation and pre-requisite

> Currently known distribution-specific tags:
> * Debian:
>   + essential: (optional) marks a package as required so the
>     package-manager refuses to uninstall it

	rpm:	(has not)

>   + pre-depends: (optional) (used for package relations)

	rpm:	(rpm uses REQUIREFLAGS to mark REQUIRES as a pre-requisite)

>   + depends: (optional) (used for package relations)

	rpm:	(optional) REQUIRENAME (REQUIREVERSION REQUIREFLAGS)

>   + conflicts: (optional) (used for package relations)

	rpm:	(optional) CONFLICTNAME (CONFLICTVERSION CONFLICTFLAGS)

>   + replaces: (optional) (used for package relations)

	rpm:	(optional) OBSOLETENAME (OBSOLETEVERSION OBSOLETEFLAGS)

>   + provides: (optional) (used for package relations)

	rpm:	(optional) PROVIDENAME (PROVIDEVERSION PROVIDEFLAGS)

>   + recommends: (optional) (used for package relations)

	rpm:	(has not)

>   + suggests: (optional) (used for package relations)

	rpm:	(has not)

>   + maintainer: name and contact for person(s) who maintains this package

	rpm:	(has not, probably should add)

>   + installed-size: size of package after installation

	rpm:	SIZE

>   + section: section package belongs to (base/libs/devel/etc.)

	rpm:	GROUP

>   + priority: used by package-frontends

	rpm:	(has not)

> 
> * Red Hat:
>   (can someone more familiar with rpm fill in this list?)
> 

 * RPM meta-payload information
    + FILENAMES/DIRNAMES/BASENAMES/DIRINDEXES: file names, old/new format
    + FILE{SIZES,UIDS,GIDS,MODES,RDEVS,DEVICES,INODES,MTIMES}: stat(2) info
    + FILE{USERNAME,GROUPNAME,FLAGS,MD5S,LINKTOS,VERIFYFLAGS,LANGS}:
	additional per-file info
    + PREFIXES:	(optional) leading components of path that can be relocated
    + SOURCE/PATCH: (src rpm's only) URI's for virgin sources/patches

 * RPM packaging information
    + ARCH/OS: the architecture and os for which the package was intended
    + RPMVERSION: the version of rpm (and packaging) used
    + BUILDTIME: time the package was built
    + BUILDHOST: hostname of the build machine
    + SOURCERPM: the name of the src rpm the binary was built from
    + GIF/XPM/ICON: (optional) icon to use for the package
    + CHANGELOG{TIME,NAME,TEXT}: (optional) the packaging changelog
    + ARCHIVESIZE: the size of the payload
    + COOKIE: a marker that can be used by 3rd party maintainers
    + CAPABILITY: (unused but non-optional) a minor rpm version
    + BUILDMACROS: (unused but non-optional) configuration macros used in build

 * RPM database tags (not found in packages)
    + INSTALLTIME: time the package was installed
    + INSTPREFIXES: the relocation prefixes used to install
    + FILESTATES: the state of the file after installing (e.g. not installed)
    + ORIGFILENAMES/ORIGDIRNAMES/ORIGBASENAMES/ORIGDIRINDEXES: file name info

 * RPM scripts (common scripts described below)
    + {PREIN,POSTIN,PREUN,POSTUN}PROG: interpreter paths for common scripts
    + VERIFYSCRIPT/VERIFYSCRIPTPROG: (optional) script and interpreter path
	that can be executed to verify that package is correctly installed
    + TRIGGER(NAME,VERSION,FLAGS,INDEX}: (optional) dependency-like information
	used to test a trigger condition
    + TRIGGERSCRIPTS/TRIGGERSCRIPTPROG: (optional) script and interpreter path
	that will be executed if trigger conditions are met.

> Scripts-section
> ---------------
> When you install, ugrade or remove a package special programs can be
> run. These can be used for example to (un)register documentation, 
> fix permissions, start/stop/restart daemons, etc. There are four
> programs:
>   * prerm: used before a package is being removed or purged

	rpm: PREUN

>   * postrm: used after a package is removed or purged

	rpm: POSTUN

>   * preinst: run before a package is installed/upgraded

	rpm: PREIN

>   * postinst: run before a package is installed/upgraded

	rpm: POSTIN
> 
> For the exact order these programs are run and the paramters used please
> see the dpkg manual (since rpm does not have these it makes sense to be
> compatible with dpkg, which has used them for a long time now).
> 

I'd like to see the scripts moved into the metadata section so that we
can use the RDF facilities of XML to (ahem) "agree to disagree" about
whether packages should install-before-uninstall or vice versa. Even if you
insist that scripts should be in their own section, this standard is going
to have to provide sufficient guidance regarding script naming conventions that
real world packagers can actually write scripts that are used to install
packages.

> Data-section
> ------------
> Nothing special needs to be said about this section. It is a standard
> tar.gz file with the files that should be installed.
> 

While the payload is opaque, the objections to tar in the wrapper apply
here. It's not possible in general to disassemble/reassemble a tarball and
preserve an md5 sum, and there are limits on name lengths. While the
issue can be finessed by
	requiring incremental packagers to recalculate md5 sums
	never reassembling tar balls
I'd like to see as a design goal both a wrapper/payload format that can be
disassembled and reassembled with common system utilities without affecting
pre-existing md5 sums and signatures.

> Signature-section
> -----------------
> This section contains signatures for the data in the other sections. The
> exact data used is the contents of the metata.gz, scripts.tar.gz (if
> present) and data.tar.gz files concatenated. The signatures are stored
> in XML-format so it is easy to have multiple signatures and add new
> signature types later. Current signature types are:
>   * pgp2
>   * OpenPGP (used by GnuPG and pgp5)
>   * MD5
> 
> Things yet-to-be-decided
> ------------------------
> Currently this document says that tar is used in multiple-file sections
> (scripts and data). However cpio is also an option, and a definitive
> decision hasn't been made yet.
> 

As much as I like tar and hate the mind-numbing complexity of cpio, I
don't think we should devise a standard with built in limits imposed
by the (conflicting) goal of having a package format that is understood by
common system utilities.

Historically, rpm has a heavy investment in cpio format, and choosing a
tar format is going to delay deployment in rpm -- there's gonna be a
*lot* of legacy rpm's around in cpio format. I believe that we should
come up with a packaging standard that deals with legacy packaging issues
as well as future standards.

> How to handle multiple OS'es and architectures also hasn't been decided
> yet. We currently have two proposals:
> * use common OS and architecture-tags
> * encode the OS and architecture-needs in the dependencies using virtual
>   packages
> For both methods the package-manager will have to have a hint-list that
> tells it which architectures are compatible. For example: you can
> run packages compiled for a sparc on an ultrasparc system.
> 
> Contributors
> ------------
> The following people have contributed in designing this format:
> 
>   Ben Collins
>   Daniel Veillard
>   Erik Troan
>   Ian Jackson
>   Jeff Johnson
>   Marcus Brinkmann
>   Matt Wilson
>   Wichert Akkerman
> 




-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Dec  9 12:14:46 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id MAA06366;
	Thu, 9 Dec 1999 12:14:38 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA02845;
	Thu, 9 Dec 1999 12:14:37 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA19043;
	Thu, 9 Dec 1999 12:14:36 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA07093;
	Thu, 9 Dec 1999 12:14:35 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA07083
	for packaging-list; Thu, 9 Dec 1999 12:14:31 -0500
Resent-Date: Thu, 9 Dec 1999 12:14:31 -0500
Resent-Message-Id: <199912091714.MAA07083@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA07079
	for <packaging@rufus.w3.org>; Thu, 9 Dec 1999 12:14:29 -0500
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian 8.9.3-6) id SAA32565
	for packaging@rufus.w3.org; Thu, 9 Dec 1999 18:14:28 +0100
Date: Thu, 9 Dec 1999 18:14:27 +0100
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Packaging format text
Message-ID: <19991209181427.B32495@liacs.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <19991209150209.A7797@mors.net> <19991209114823.D30406@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-md5;
	protocol="application/pgp-signature"; boundary="LpQ9ahxlCli8rRTG"
User-Agent: Mutt/1.0i
In-Reply-To: <19991209114823.D30406@devserv.devel.redhat.com>; from jbj@redhat.com on Thu, Dec 09, 1999 at 11:48:23AM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2562
Lines: 82



--LpQ9ahxlCli8rRTG
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> Hey, nice to see you back.

Thanks :)

> 1) A tar wrapper format may prevent use of hierarchical directory structu=
re
> within the packaging format.

I fail to see that, can you expand on this?

> 	The wrapper format should permit incremental packaging. I do
> 	not believe that it is possible to disassemble/reassemble
> 	a tarball (that has directory structure) preserving an md5 sum
> 	in general. Go ahead and try :-)

You don't md5 the whole archive, but parts of it.=20

> 2) There are limits on file name length within the tar format.

There is a well excepted GNU extension that gives you filenames of
unlimited lengths. We have to use that in the data-part anyway, so
I don't see the problem.

I also don't see these two points as being tar-specific.

> Lest I rekindle old flames, I can think of answers to these problems.
> However, if tar is the wrapper format, there will have to be explicit
> limits put on the tarball structure in order to preserve the goal of
> incremental packaging.

We probably need to do that for whatever format we use..

> Why do we need hierarchical structure in the wrapper format? I can think
> of two immediate uses:
>    a) meta-packages (as in a package that contains other packages).

I would call that a super-package. A better example might be a fat-package
that contains binaries for multiple architectures?

>    b) patch packages (as in patches to existing packages).

How do you envision that?

> Per-platform differences in libraries used during a build should be refle=
cted
> in dependencies, not in the package version.

They should be reflected in both: you need the package version for automated
ugprades and rebuilds.=20

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |


--LpQ9ahxlCli8rRTG
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBOE/jc6jZR/ntlUftAQGIKAL9HZ8caEJqHDOTKLPVOMSBL6bOSJijKjkQ
bHcRsXJUTECYBYo0EYEYyKxvumpJiyY4pBzAO56VWc8YEKLVn36298r7k6Jf19ov
cLlVcinGGTHYRyHqqCNE++1guO7ll0qF
=oma6
-----END PGP SIGNATURE-----

--LpQ9ahxlCli8rRTG--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Dec  9 13:03:16 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id NAA08785;
	Thu, 9 Dec 1999 13:03:10 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id NAA09931;
	Thu, 9 Dec 1999 13:03:09 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id NAA22287;
	Thu, 9 Dec 1999 13:03:09 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA11161;
	Thu, 9 Dec 1999 13:03:07 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA11131
	for packaging-list; Thu, 9 Dec 1999 13:03:03 -0500
Resent-Date: Thu, 9 Dec 1999 13:03:03 -0500
Resent-Message-Id: <199912091803.NAA11131@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA11108
	for <packaging@rufus.w3.org>; Thu, 9 Dec 1999 13:02:57 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id NAA08774;
	Thu, 9 Dec 1999 13:02:57 -0500
Message-ID: <19991209130257.F30406@devserv.devel.redhat.com>
Date: Thu, 9 Dec 1999 13:02:57 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Packaging format text
References: <19991209150209.A7797@mors.net> <19991209114823.D30406@devserv.devel.redhat.com> <19991209181427.B32495@liacs.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19991209181427.B32495@liacs.nl>; from Wichert Akkerman on Thu, Dec 09, 1999 at 06:14:27PM +0100
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 3794
Lines: 102


On Thu, Dec 09, 1999 at 06:14:27PM +0100, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > Hey, nice to see you back.
> 
> Thanks :)
> 
> > 1) A tar wrapper format may prevent use of hierarchical directory structure
> > within the packaging format.
> 
> I fail to see that, can you expand on this?
> 
> > 	The wrapper format should permit incremental packaging. I do
> > 	not believe that it is possible to disassemble/reassemble
> > 	a tarball (that has directory structure) preserving an md5 sum
> > 	in general. Go ahead and try :-)
> 
> You don't md5 the whole archive, but parts of it. 
> 

Technically correct, but practically wrong. Many people routinely use
md5 sums on packages as a sanity check, and we need a scheme that permits
(at least in principle) package disassembly/reassembly preserving an
md5 sum that is not part of the packging standard but is routinely applied
to packages.

And, this same problem with using tar for the payload is far worse (because
it's more likely to be necessary to reassemble packages from component files
rather than saving tarballs preserving md5 sums in the future) for incremental
packaging than the problem of using tar for the wrapper.

Alternatively, it is possible to specify explicitly that payload tarballs can
never be reassembled.

> > 2) There are limits on file name length within the tar format.
> 
> There is a well excepted GNU extension that gives you filenames of
> unlimited lengths. We have to use that in the data-part anyway, so
> I don't see the problem.
> 

Relying on GNU-specific extensions is at odds with the goal of packages
being understood by commonly used system utilities.

Tedious, tendentious, and true ...

> I also don't see these two points as being tar-specific.
> 

If you mean that other candidate formats have problems too, I agree. However,
I believe a cpio ball can be reassembled without changing the md5 sum, and ar
(a format I use little) possibly has this property also. Tar specifically
doesn't have this property (I claim).

> > Lest I rekindle old flames, I can think of answers to these problems.
> > However, if tar is the wrapper format, there will have to be explicit
> > limits put on the tarball structure in order to preserve the goal of
> > incremental packaging.
> 
> We probably need to do that for whatever format we use..
> 
> > Why do we need hierarchical structure in the wrapper format? I can think
> > of two immediate uses:
> >    a) meta-packages (as in a package that contains other packages).
> 
> I would call that a super-package. A better example might be a fat-package
> that contains binaries for multiple architectures?
> 

Variants on a theme. We should devise a packaging standard that explicitly
provides guidance for these sorts of extensions.

> >    b) patch packages (as in patches to existing packages).
> 
> How do you envision that?
> 

For example a patch that simply adds/modifies a file would be appended
as a 2nd metadata/payload/... component at the end of the original package,
with the heuristic that a series of metadata/payload sections should be
run sequentially.  A big win on rsync-like transfers, also would assist
in insturmenting optional sub-components within packaging.

> > Per-platform differences in libraries used during a build should be reflected
> > in dependencies, not in the package version.
> 
> They should be reflected in both: you need the package version for automated
> ugprades and rebuilds. 
> 

I need more information to understand the necessity of a 2nd version number
in the common part of package metadata.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Dec  9 13:22:13 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id NAA09529;
	Thu, 9 Dec 1999 13:22:03 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id NAA12562;
	Thu, 9 Dec 1999 13:22:03 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id NAA23470;
	Thu, 9 Dec 1999 13:22:02 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA12647;
	Thu, 9 Dec 1999 13:22:01 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA12633
	for packaging-list; Thu, 9 Dec 1999 13:21:58 -0500
Resent-Date: Thu, 9 Dec 1999 13:21:58 -0500
Resent-Message-Id: <199912091821.NAA12633@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA12626
	for <packaging@rufus.w3.org>; Thu, 9 Dec 1999 13:21:55 -0500
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian 8.9.3-6) id TAA00518
	for packaging@rufus.w3.org; Thu, 9 Dec 1999 19:21:55 +0100
Date: Thu, 9 Dec 1999 19:21:55 +0100
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Packaging format text
Message-ID: <19991209192155.A386@liacs.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <19991209150209.A7797@mors.net> <19991209114823.D30406@devserv.devel.redhat.com> <19991209181427.B32495@liacs.nl> <19991209130257.F30406@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-md5;
	protocol="application/pgp-signature"; boundary="FL5UXtIhxfXey3p5"
User-Agent: Mutt/1.0i
In-Reply-To: <19991209130257.F30406@devserv.devel.redhat.com>; from jbj@redhat.com on Thu, Dec 09, 1999 at 01:02:57PM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 4193
Lines: 108



--FL5UXtIhxfXey3p5
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> Technically correct, but practically wrong. Many people routinely use
> md5 sums on packages as a sanity check, and we need a scheme that permits
> (at least in principle) package disassembly/reassembly preserving an
> md5 sum that is not part of the packging standard but is routinely applied
> to packages.

Packages are not routinely disassembled and reassembled. What we already
have is a way to put a checksum (which can be or include md5) in the
package that does not break when packages are reassembled. Making the
packageformat more difficult just to add this requirement feels very wrong
to me.

The md5sum of the whole package will change, for example because the change
means you have a new timestamp for the included file. That is useful
information to me.

> Alternatively, it is possible to specify explicitly that payload tarballs=
 can
> never be reassembled.

We can explicitly say that the md5sum of the complete package will change
on reassembly, but the m5d and other checksums that are inside the package
will not change.=20
=20
> Relying on GNU-specific extensions is at odds with the goal of packages
> being understood by commonly used system utilities.

We will have to, otherwise we will have a documented problem in that we
can never produce packages with long filenames. Which means that you
can't package enlightenment for example.. For the main package however
we only need a small subset of tar, and we can document which subset
that is.

> Variants on a theme. We should devise a packaging standard that explicitly
> provides guidance for these sorts of extensions.

That's new territory though which we haven't discussed before. I'm not
sure if we want to add that right now; personally I would like to get
this solidified first and then start thinking about extensions.

> For example a patch that simply adds/modifies a file would be appended
> as a 2nd metadata/payload/... component at the end of the original packag=
e,

Modifications aren't changes in metadata but in real data. I think what
you want is multiple payloads in the package, right?=20

> I need more information to understand the necessity of a 2nd version numb=
er
> in the common part of package metadata.

Here is what happens quite often:
* maintainer builds a package for and uploads source and i386 binary,
  version is 1.2-1
* package is installed in the archive
* autobuilder for m68k notices that the m68k version is older then the late=
st
  available source and rebuilds the package for m68k. version is still 1.2-1
* m68k package is installed in the archive
* someone notices the autobuilder used an outdated library to build the pac=
kage
  and files a bugreport
* a new build and upload for m68k is done, version is now 1.2-1.1. This
  means the source has to be changed to get the new versionnumber.
* i386 autobuilder notes that its version is older then the m68k version
  and rebuilds

There are two problems here:
1. the source needed to be modified to get the new version
2. the i386 recompile wasn't really needed since the only reason for the
   new source was to get a corrected binary for m68k.

If we add a Build-Version to this system the last couple of steps
are suddenly much different: it's no longer necessary to update the
source, and no other architectures will need a rebuild.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |


--FL5UXtIhxfXey3p5
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBOE/zQ6jZR/ntlUftAQHzwgL+MOA4mESSUV2IyMSAQyVbfiWAwWB6MAc1
V7I//piEM5YSqBqi4Ba17hwaGWEAhrJgakxK4cY2ieIp9tYEvugTQP2BvZf3k4CO
UX0lItMMUCGAWjtMeaNEgrjOPQ8tlQUc
=9EGG
-----END PGP SIGNATURE-----

--FL5UXtIhxfXey3p5--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Dec  9 14:05:22 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id OAA10963;
	Thu, 9 Dec 1999 14:05:16 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id OAA18001;
	Thu, 9 Dec 1999 14:05:16 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id OAA25995;
	Thu, 9 Dec 1999 14:05:15 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id OAA15927;
	Thu, 9 Dec 1999 14:05:11 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id OAA15918
	for packaging-list; Thu, 9 Dec 1999 14:05:08 -0500
Resent-Date: Thu, 9 Dec 1999 14:05:08 -0500
Resent-Message-Id: <199912091905.OAA15918@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id OAA15915
	for <packaging@rufus.w3.org>; Thu, 9 Dec 1999 14:05:05 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id OAA10951;
	Thu, 9 Dec 1999 14:04:55 -0500
Message-ID: <19991209140455.G30406@devserv.devel.redhat.com>
Date: Thu, 9 Dec 1999 14:04:55 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Packaging format text
References: <19991209150209.A7797@mors.net> <19991209114823.D30406@devserv.devel.redhat.com> <19991209181427.B32495@liacs.nl> <19991209130257.F30406@devserv.devel.redhat.com> <19991209192155.A386@liacs.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19991209192155.A386@liacs.nl>; from Wichert Akkerman on Thu, Dec 09, 1999 at 07:21:55PM +0100
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 6083
Lines: 131


On Thu, Dec 09, 1999 at 07:21:55PM +0100, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > Technically correct, but practically wrong. Many people routinely use
> > md5 sums on packages as a sanity check, and we need a scheme that permits
> > (at least in principle) package disassembly/reassembly preserving an
> > md5 sum that is not part of the packging standard but is routinely applied
> > to packages.
> 
> Packages are not routinely disassembled and reassembled. What we already
> have is a way to put a checksum (which can be or include md5) in the
> package that does not break when packages are reassembled. Making the
> packageformat more difficult just to add this requirement feels very wrong
> to me.
> 

Consider:

1) package is made available to world on some site.
2) careful user downloads package, and computes (and saves) md5sum for
   package as well as package.
3) package sits on site (possibly for years).
4) buggy raid software corrupts package.
5) package is reconstructed (and md5 sum changes).
6) careful user tries to verify that their copy of the package is correct.

I went through exactly this scenario a couple of months ago. Saying that
this is a backup problem is true, but I believe that we need to design
a package format that permits idempotent reassembly to provide alternative
methods of package preservation.

> The md5sum of the whole package will change, for example because the change
> means you have a new timestamp for the included file. That is useful
> information to me.
> 
> > Alternatively, it is possible to specify explicitly that payload tarballs can
> > never be reassembled.
> 
> We can explicitly say that the md5sum of the complete package will change
> on reassembly, but the m5d and other checksums that are inside the package
> will not change. 
>  
> > Relying on GNU-specific extensions is at odds with the goal of packages
> > being understood by commonly used system utilities.
> 
> We will have to, otherwise we will have a documented problem in that we
> can never produce packages with long filenames. Which means that you
> can't package enlightenment for example.. For the main package however
> we only need a small subset of tar, and we can document which subset
> that is.
> 

I'd *love* to use tar, believe me. I spent several days trying to figure out
how to use tar and still permit incremental packaging. There are problems in
specifying the order in which files and directories appear in the tarball
(that's what breaks the md5 sum) and that may break other meta-information
regarding the package format too. The basic problem is that there is no
easy way to specify a directory without incuding its contents in readdir
order IIRC.

> > Variants on a theme. We should devise a packaging standard that explicitly
> > provides guidance for these sorts of extensions.
> 
> That's new territory though which we haven't discussed before. I'm not
> sure if we want to add that right now; personally I would like to get
> this solidified first and then start thinking about extensions.
> 
> > For example a patch that simply adds/modifies a file would be appended
> > as a 2nd metadata/payload/... component at the end of the original package,
> 
> Modifications aren't changes in metadata but in real data. I think what
> you want is multiple payloads in the package, right? 
> 

Yes, the packaging standard needs provisions for multiple metadata/payload
pairs for a number of reasons. Rpm is starting to be faced with these issues,
and I believe that I'm going to have to commit to some sort of scheme within
the next 6 months.  I'd like to be able to solve those rpm problems by
implementing this packaging standard.

> > I need more information to understand the necessity of a 2nd version number
> > in the common part of package metadata.
> 
> Here is what happens quite often:
> * maintainer builds a package for and uploads source and i386 binary,
>   version is 1.2-1
> * package is installed in the archive
> * autobuilder for m68k notices that the m68k version is older then the latest
>   available source and rebuilds the package for m68k. version is still 1.2-1
> * m68k package is installed in the archive
> * someone notices the autobuilder used an outdated library to build the package
>   and files a bugreport
> * a new build and upload for m68k is done, version is now 1.2-1.1. This
>   means the source has to be changed to get the new versionnumber.
> * i386 autobuilder notes that its version is older then the m68k version
>   and rebuilds
> 
> There are two problems here:
> 1. the source needed to be modified to get the new version
> 2. the i386 recompile wasn't really needed since the only reason for the
>    new source was to get a corrected binary for m68k.
> 
> If we add a Build-Version to this system the last couple of steps
> are suddenly much different: it's no longer necessary to update the
> source, and no other architectures will need a rebuild.
> 

Ah, I see. At the root of this problem is the decision to bump the
version number on m68k, and that has potential ramifications for dependencies
that are much more difficult to solve than the build problem you mention.

Another way to look at the problem is to notice that only the dependency
information (i.e. the old library on m68k) changed, so there is no need
to recompile on every arch, only on m68k. Since dependencies on libraries
are intrinsically per-platform, why not handle this with common and
per-platform dependencies, and put a version and/or timestamp number on both
common and per-platform dependencies? And, since dependencies are only one
form of metadata, we probably should think of versioning/timestamping the
metadata. Otherwise, your build system is going to be rebuilding packages
because Red Hat decided to add a tag within the rpm-specific section of the
RDF metadata ... :-)

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Dec  9 15:37:50 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id PAA14849;
	Thu, 9 Dec 1999 15:37:37 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id PAA29001;
	Thu, 9 Dec 1999 15:37:37 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id PAA31259;
	Thu, 9 Dec 1999 15:37:36 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id PAA23494;
	Thu, 9 Dec 1999 15:37:34 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id PAA23485
	for packaging-list; Thu, 9 Dec 1999 15:37:31 -0500
Resent-Date: Thu, 9 Dec 1999 15:37:31 -0500
Resent-Message-Id: <199912092037.PAA23485@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from janeway.cistron.net (root@janeway.cistron.net [195.64.65.23])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id PAA23479
	for <packaging@rufus.w3.org>; Thu, 9 Dec 1999 15:37:26 -0500
Received: from lightning.mors.net (root@wichert.cistron.nl [195.64.66.141])
	by janeway.cistron.net (8.9.3/8.9.3/Debian/GNU) with ESMTP id VAA13844
	for <packaging@rufus.w3.org>; Thu, 9 Dec 1999 21:37:23 +0100
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian 8.9.3-6) id VAA16233
	for packaging@rufus.w3.org; Thu, 9 Dec 1999 21:50:22 +0100
Date: Thu, 9 Dec 1999 21:50:22 +0100
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: [packaging] Meeting at the LWCENY
Message-ID: <19991209215022.C16139@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="jy6Sn24JjFx/iggw"
User-Agent: Mutt/1.0pre4i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1059
Lines: 36



--jy6Sn24JjFx/iggw
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable


I am wondering if it would make sense to arrange a meeting to work out
the remaining details on this format and how to get it implemented, to
the LSB, etc... perhaps we could do that at the LWCE in NY this
february?

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--jy6Sn24JjFx/iggw
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.0 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjhQFg4ACgkQPLiSUC+jvC0ICACfdX4n/d7BrGhA5+cAq8zcu+pv
jwYAnjx4oZQ6myqu98HBzn944p+ZoQSq
=XzrP
-----END PGP SIGNATURE-----

--jy6Sn24JjFx/iggw--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Dec  9 16:13:09 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id QAA16180;
	Thu, 9 Dec 1999 16:13:03 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA01531;
	Thu, 9 Dec 1999 16:13:02 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA00832;
	Thu, 9 Dec 1999 16:13:02 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA27271;
	Thu, 9 Dec 1999 16:13:00 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA27249
	for packaging-list; Thu, 9 Dec 1999 16:12:57 -0500
Resent-Date: Thu, 9 Dec 1999 16:12:57 -0500
Resent-Message-Id: <199912092112.QAA27249@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA27243
	for <packaging@rufus.w3.org>; Thu, 9 Dec 1999 16:12:54 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id QAA16172;
	Thu, 9 Dec 1999 16:12:53 -0500
Message-ID: <19991209161253.J30406@devserv.devel.redhat.com>
Date: Thu, 9 Dec 1999 16:12:53 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Meeting at the LWCENY
References: <19991209215022.C16139@mors.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19991209215022.C16139@mors.net>; from Wichert Akkerman on Thu, Dec 09, 1999 at 09:50:22PM +0100
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 942
Lines: 26


On Thu, Dec 09, 1999 at 09:50:22PM +0100, Wichert Akkerman wrote:
> 
> I am wondering if it would make sense to arrange a meeting to work out
> the remaining details on this format and how to get it implemented, to
> the LSB, etc... perhaps we could do that at the LWCE in NY this
> february?
> 

AFAIAC, sooner the better. I believe that reaching consensus on a common
on-disk format for rpm/dpkg is important enough that Red Hat may be willing
to mail me to whatever location is most convenient for you and others.

I suspect that we still need to work out what we are trying to accomplish
before we meet. We keep spinning off in different rpm/dpkg directions when
we should be focussing more narrowly on the on-disk format problem IMHO.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Dec  9 16:16:25 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id QAA16326;
	Thu, 9 Dec 1999 16:16:12 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA01942;
	Thu, 9 Dec 1999 16:16:11 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA01043;
	Thu, 9 Dec 1999 16:16:10 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA27563;
	Thu, 9 Dec 1999 16:16:09 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA27552
	for packaging-list; Thu, 9 Dec 1999 16:16:07 -0500
Resent-Date: Thu, 9 Dec 1999 16:16:07 -0500
Resent-Message-Id: <199912092116.QAA27552@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA27546
	for <packaging@rufus.w3.org>; Thu, 9 Dec 1999 16:16:04 -0500
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian 8.9.3-6) id WAA01213
	for packaging@rufus.w3.org; Thu, 9 Dec 1999 22:16:03 +0100
Date: Thu, 9 Dec 1999 22:16:03 +0100
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Meeting at the LWCENY
Message-ID: <19991209221603.A1198@liacs.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <19991209215022.C16139@mors.net> <19991209161253.J30406@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-md5;
	protocol="application/pgp-signature"; boundary="0OAP2g/MAC+5xKAE"
User-Agent: Mutt/1.0i
In-Reply-To: <19991209161253.J30406@devserv.devel.redhat.com>; from jbj@redhat.com on Thu, Dec 09, 1999 at 04:12:53PM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1199
Lines: 41



--0OAP2g/MAC+5xKAE
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> AFAIAC, sooner the better. I believe that reaching consensus on a common
> on-disk format for rpm/dpkg is important enough that Red Hat may be willi=
ng
> to mail me to whatever location is most convenient for you and others.

I didn't know RH usually ships developers per mail? Sounds rather uncomfort=
able
to me :)

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |


--0OAP2g/MAC+5xKAE
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBOFAcE6jZR/ntlUftAQEgBQL/ex7b4TZ4K8b+7l8nC7GKybc9mdrBh93J
jpw0C31eb+7HuvE/3mYRIOQNz7emNmi2+wzEEquezKYdpNWKHYiFgNcPv4nb3tGk
NCmoSJ0620pnz40NWpHdetuU2zDAezqL
=Yyqi
-----END PGP SIGNATURE-----

--0OAP2g/MAC+5xKAE--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Dec  9 17:52:43 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id RAA20121;
	Thu, 9 Dec 1999 17:52:13 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id RAA12534;
	Thu, 9 Dec 1999 17:52:12 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id RAA06906;
	Thu, 9 Dec 1999 17:52:12 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id RAA04258;
	Thu, 9 Dec 1999 17:52:10 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id RAA04248
	for packaging-list; Thu, 9 Dec 1999 17:52:07 -0500
Resent-Date: Thu, 9 Dec 1999 17:52:07 -0500
Resent-Message-Id: <199912092252.RAA04248@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:root@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id RAA04244
	for <packaging@rufus.w3.org>; Thu, 9 Dec 1999 17:52:04 -0500
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA04468
	for <packaging@rufus.w3.org>; Thu, 9 Dec 1999 17:49:25 -0500
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Thu, 9 Dec 1999 17:49:25 -0500 (EST)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@localhost
To: packaging@rufus.w3.org
Subject: Re: [packaging] Meeting at the LWCENY
In-Reply-To: <19991209221603.A1198@liacs.nl>
Message-ID: <Pine.LNX.4.10.9912091749190.4443-100000@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 591
Lines: 18


On Thu, 9 Dec 1999, Wichert Akkerman wrote:

> I didn't know RH usually ships developers per mail? Sounds rather uncomfortable
> to me :)

Cheaper though!

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/~johnsonm/lad  |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Dec 12 18:04:22 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id SAA26488;
	Sun, 12 Dec 1999 18:04:14 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA09461;
	Sun, 12 Dec 1999 18:04:14 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA20338;
	Sun, 12 Dec 1999 18:04:13 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA15655;
	Sun, 12 Dec 1999 18:04:11 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id SAA15645
	for packaging-list; Sun, 12 Dec 1999 18:04:08 -0500
Resent-Date: Sun, 12 Dec 1999 18:04:08 -0500
Resent-Message-Id: <199912122304.SAA15645@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from janeway.cistron.net (root@janeway.cistron.net [195.64.65.23])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id SAA15638
	for <packaging@rufus.w3.org>; Sun, 12 Dec 1999 18:04:04 -0500
Received: from lightning.mors.net (root@wichert.cistron.nl [195.64.66.141])
	by janeway.cistron.net (8.9.3/8.9.3/Debian/GNU) with ESMTP id AAA09931
	for <packaging@rufus.w3.org>; Mon, 13 Dec 1999 00:04:02 +0100
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian 8.9.3-6) id WAA19631
	for packaging@rufus.w3.org; Sun, 12 Dec 1999 22:33:49 +0100
Date: Sun, 12 Dec 1999 22:33:48 +0100
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Meeting at the LWCENY
Message-ID: <19991212223348.D19547@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <19991209215022.C16139@mors.net> <19991209161253.J30406@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="mvpLiMfbWzRoNl4x"
User-Agent: Mutt/1.0pre4i
In-Reply-To: <19991209161253.J30406@devserv.devel.redhat.com>; from jbj@redhat.com on Thu, Dec 09, 1999 at 04:12:53PM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1875
Lines: 54



--mvpLiMfbWzRoNl4x
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> AFAIAC, sooner the better. I believe that reaching consensus on a common
> on-disk format for rpm/dpkg is important enough that Red Hat may be willi=
ng
> to mail me to whatever location is most convenient for you and others.

Same here, but December and Januari are filled with exams as well as
the usual other stuff, so I'm probably not available earlier..=20

> I suspect that we still need to work out what we are trying to accomplish
> before we meet. We keep spinning off in different rpm/dpkg directions when
> we should be focussing more narrowly on the on-disk format problem IMHO.

In my opinion the meta-data is more important so I've been focusing on
that mostly and haven't given much thought to extended the format beyond
what the currently existing on-disk formats do (with the exception of
signatures).

Can we begin with a set of guidelines on which we can base things of?
=46rom your mails I'm gathering you want:
* add updates to a package
* multiple-architecture packages
* more?

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--mvpLiMfbWzRoNl4x
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.0 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjhUFLwACgkQPLiSUC+jvC2A/gCfXVqyK3d2XiS+Q/sCzJXAZ230
u/gAnRNEqxmOe0w/se10ptT/YeUSI1Zm
=j9tA
-----END PGP SIGNATURE-----

--mvpLiMfbWzRoNl4x--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Dec 13 09:53:21 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id JAA16237;
	Mon, 13 Dec 1999 09:53:12 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id JAA32548;
	Mon, 13 Dec 1999 09:53:12 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id JAA27282;
	Mon, 13 Dec 1999 09:53:11 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id JAA21068;
	Mon, 13 Dec 1999 09:53:10 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id JAA21039
	for packaging-list; Mon, 13 Dec 1999 09:53:05 -0500
Resent-Date: Mon, 13 Dec 1999 09:53:05 -0500
Resent-Message-Id: <199912131453.JAA21039@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id JAA21034
	for <packaging@rufus.w3.org>; Mon, 13 Dec 1999 09:53:02 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id JAA16228;
	Mon, 13 Dec 1999 09:53:00 -0500
Message-ID: <19991213095300.J30406@devserv.devel.redhat.com>
Date: Mon, 13 Dec 1999 09:53:00 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Meeting at the LWCENY
References: <19991209215022.C16139@mors.net> <19991209161253.J30406@devserv.devel.redhat.com> <19991212223348.D19547@mors.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19991212223348.D19547@mors.net>; from Wichert Akkerman on Sun, Dec 12, 1999 at 10:33:48PM +0100
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 4327
Lines: 109


On Sun, Dec 12, 1999 at 10:33:48PM +0100, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > AFAIAC, sooner the better. I believe that reaching consensus on a common
> > on-disk format for rpm/dpkg is important enough that Red Hat may be willing
> > to mail me to whatever location is most convenient for you and others.
> 
> Same here, but December and Januari are filled with exams as well as
> the usual other stuff, so I'm probably not available earlier.. 
> 

OK, that'll give me 2 months to figger where/when/what/who is LWCENY :-)

> > I suspect that we still need to work out what we are trying to accomplish
> > before we meet. We keep spinning off in different rpm/dpkg directions when
> > we should be focussing more narrowly on the on-disk format problem IMHO.
> 
> In my opinion the meta-data is more important so I've been focusing on
> that mostly and haven't given much thought to extended the format beyond
> what the currently existing on-disk formats do (with the exception of
> signatures).
> 

Globally, what is the final deliverable of this packaging discussion?

Is it
	a) a DTD of some sort that can/will be implemented by rpm/dpkg?
	b) a paper standard to be deliverd to LSB for further review?
	c) an actual implementation in dpkg/rpm so that packages that use
	this format can be shared?
	d) a work-in-progress that will prevent the Balkanization of Linux
	accentuated by rpm/dpkg?

We need to decide explicitly which problems we are trying to whack ...

The meta-data contents is crucually important, the representation in XML,
rpm/dpkg, and/or cpio/tar headers less so. If we simply shovel dpkg meta-data
into a dpkg RDF name space, and rpm headers into a rpm RDF name space, we
will have failed (IMHO) to develop a meaningful packaging standard.

Specifically,

How much dependency meta-data can be made common between rpm and dpkg?

Package dependencies at least, possibly soname dependencies, maybe file
dependencies. Rpm is also just starting to get into name space dependencies
that (tentatively) will look like
	PATH(grep)
	LD_LIBRARY_PATH(libc.so.6)
with dynamic which(1)-like resolution semantics on the install machine.

Should *all* dependencies support full [epoch:]version[-release] versioning?
(I have requests to provide support for versioning on configuration files.)

There also needs to be provisions for installer (i.e. rpm/dpkg) specific
dependencies as well as common dependencies. Do we need platform-specific
dependencies? Almost certainly. How can we use XML/RDF to organize this
information in a (presumably) extensible fashion?

We also have not addressed the packaging needs of source packages separately
from the needs of binary packages.

> Can we begin with a set of guidelines on which we can base things of?
> From your mails I'm gathering you want:
> * add updates to a package
> * multiple-architecture packages
> * more?
> 

I believe, as a guideline, that we need to identify a wrapper format that
	is extensible
	is implemented in a common system utility
	can be disassembled/reassembled from other components.

For discussion, I think of a package as a meta-data/payload pair, as I believe
that the problems of detached/embedded signatures are well understood, and
that your separate scripts tarball is just a type of meta-data (Except for
inconvenience, is there any reason that scripts shouldn't be stored
using the facilities of XML/RDF?)

So, assuming that a package is composed of meta-data(MD) and payload(PL),
an extensible wrapper format could accomodate all the above if we were
able to decide where to find, for sub-components 1..n, the location in
the wrapper format of MD1..MDn and PL1..PLn. Obvious solutions include
	MD1 PL1	MD2 PL2	... MDn PLn
or
	MD1 MD2 ... MDn			PL1 PL2 ... PLn
or
	METADATA(MD1 MD2 ... MDn)	PL1 PL2 ... PLn
or
	MD1 MD2 ... MDn			PAYLOAD(PL1 PL2 ... PLn)
or
	METADATA(MD1 MD2 ... MDn)	PAYLOAD(PL1 PL2 ... PLn)

where METADATA(...) and PAYLOAD(...) indicate some unspecified aggregation.

I prefer the simplest
	MD1 PL1	MD2 PL2	... MDn PLn
unless there are explicit performance reasons to prefer some other scheme.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Dec 13 10:47:37 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id KAA18451;
	Mon, 13 Dec 1999 10:47:29 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA08507;
	Mon, 13 Dec 1999 10:47:28 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA30838;
	Mon, 13 Dec 1999 10:47:27 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA26110;
	Mon, 13 Dec 1999 10:47:23 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA26099
	for packaging-list; Mon, 13 Dec 1999 10:47:19 -0500
Resent-Date: Mon, 13 Dec 1999 10:47:19 -0500
Resent-Message-Id: <199912131547.KAA26099@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA26095
	for <packaging@rufus.w3.org>; Mon, 13 Dec 1999 10:47:17 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id KAA18427;
	Mon, 13 Dec 1999 10:47:14 -0500
Message-ID: <19991213104713.L30406@devserv.devel.redhat.com>
Date: Mon, 13 Dec 1999 10:47:13 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: [packaging] What to do about scripts?
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2447
Lines: 71


How are we going to handle script contents?

At the core of the problem is that rpm does install-before-uninstall while
dpkge does uninstall-before-install.

Other minor problems include
	rpm requires the interpreter to be specified
	rpm supplies certain infomation to scripts using argv[1] and argv[2]
	rpm supplies certain information to ecripts in the environment
	dpkg permits binaries as well as scripts to be run
	(please fill in other dpkg problems here)

We need to supply guidance on how to write scripts for the new packaging
format.

We can certainly finesse this issue (and any other issue) by using the XML/RDF
facility to hide per-installer (i.e. rpm/dpkg) %pre/%post scripts, but that
requires packagers to provide two flavors of scripts which will lead to
some complexity in the use of (and reluctance to use) the new packaging format.

Another alternative would be to permit, in common meta-data, a BEFORE/AFTER
script permitting both rpm and dpkg to map 2 out of 4 of the scripts into
the common area:
	rpm:	BEFORE = %pre	AFTER = %postun
	dpkg:	(forgive me, I've forgotten the dpkg names)

Extending this further would mean identifying a BETWEEN area that would be

	rpm:	BETWEEN	%post followed by %preun
	dpkg:	(forgive me, I've forgotten the dpkg names)

Can we devise a common scheme for passing information to scripts?

Finally, there are rpm triggers. Here's the complete order of rpm script
execution:

Order of Script Execution
-------------------------

For reference, here's the order in which scripts are executed on a single
package upgrade:

  new-%pre      for new version of package being installed
  ...           (all new files are installed)
  new-%post     for new version of package being installed

  any-%triggerin (%triggerin from other packages set off by new install)
  new-%triggerin
  old-%triggerun
  any-%triggerun (%triggerun from other packages set off by old uninstall)

  old-%preun    for old version of package being removed
  ...           (all old files are removed)
  old-%postun   for old version of package being removed

  old-%triggerpostun
  any-%triggerpostun (%triggerpostun from other packages set off by old un
                install)

Do you want to try and sort out this issue?

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Dec 13 11:45:04 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA20715;
	Mon, 13 Dec 1999 11:44:49 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA15938;
	Mon, 13 Dec 1999 11:44:48 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA01435;
	Mon, 13 Dec 1999 11:44:47 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA30878;
	Mon, 13 Dec 1999 11:44:46 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA30867
	for packaging-list; Mon, 13 Dec 1999 11:44:44 -0500
Resent-Date: Mon, 13 Dec 1999 11:44:44 -0500
Resent-Message-Id: <199912131644.LAA30867@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from janeway.cistron.net (root@janeway.cistron.net [195.64.65.23])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA30859
	for <packaging@rufus.w3.org>; Mon, 13 Dec 1999 11:44:40 -0500
Received: from lightning.mors.net (root@wichert.cistron.nl [195.64.66.141])
	by janeway.cistron.net (8.9.3/8.9.3/Debian/GNU) with ESMTP id RAA01030
	for <packaging@rufus.w3.org>; Mon, 13 Dec 1999 17:44:32 +0100
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian 8.9.3-6) id RAA09070
	for packaging@rufus.w3.org; Mon, 13 Dec 1999 17:28:41 +0100
Date: Mon, 13 Dec 1999 17:28:41 +0100
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] What to do about scripts?
Message-ID: <19991213172841.A8936@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <19991213104713.L30406@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="rwEMma7ioTxnRzrJ"
User-Agent: Mutt/1.0pre4i
In-Reply-To: <19991213104713.L30406@devserv.devel.redhat.com>; from jbj@redhat.com on Mon, Dec 13, 1999 at 10:47:13AM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 5518
Lines: 156



--rwEMma7ioTxnRzrJ
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
>=20
> How are we going to handle script contents?
>=20
> At the core of the problem is that rpm does install-before-uninstall while
> dpkge does uninstall-before-install.

No, dpkg does both. Actually we are going to add a new stage as well,
so we will have:
  1. configure package
  2. run pre-installation script
  3. install package
  4. run post-installation script

The idea is to first run the configure-stage of all packages that will
be processed, and after that has been done continue with the normal
work.

> Other minor problems include
> 	rpm requires the interpreter to be specified
> 	rpm supplies certain infomation to scripts using argv[1] and argv[2]
> 	rpm supplies certain information to ecripts in the environment
> 	dpkg permits binaries as well as scripts to be run
> 	(please fill in other dpkg problems here)

dpkg supplies certain information to scripts using argv[1..2] as well.
dpkg also runs scripts before and after removal of packages.

I never understood why you would want to list the interpreter in the
metadata.. we are running a binary here so the kernel will figure out
how to run it anyway.

I take it that for rpm these scripts are in the installed part of the
package, while for dpkg they are put in another part (the same as the
metadata) so people don't see them (unless they start looking in the
dpkg database of course). I think this makes sense, since those scripts
are not meant to be run at any moment except package
installation/removal/etc.

> We need to supply guidance on how to write scripts for the new packaging
> format.

Can you please take a moment to look at how dpkg handles these scripts?
I'll attach the relevant chapter or our packaging manual to this mail.

> We can certainly finesse this issue (and any other issue) by using the XM=
L/RDF
> facility to hide per-installer (i.e. rpm/dpkg) %pre/%post scripts, but th=
at
> requires packagers to provide two flavors of scripts which will lead to
> some complexity in the use of (and reluctance to use) the new packaging f=
ormat.

Which is not what we want..

> Another alternative would be to permit, in common meta-data, a BEFORE/AFT=
ER
> script permitting both rpm and dpkg to map 2 out of 4 of the scripts into
> the common area:
> 	rpm:	BEFORE =3D %pre	AFTER =3D %postun
> 	dpkg:	(forgive me, I've forgotten the dpkg names)

I'm sorry, but I'm not sure what you mean here..

> Extending this further would mean identifying a BETWEEN area that would be
>=20
> 	rpm:	BETWEEN	%post followed by %preun
> 	dpkg:	(forgive me, I've forgotten the dpkg names)

Between? Now you've really lost me..

> Can we devise a common scheme for passing information to scripts?

What we currently do is `script <stage> <last installed version>',
where <stage> tells the script what we are actually doing (see the
attached text). Is there any objection to using this approach?

> Finally, there are rpm triggers.

Triggers are something that dpkg currently doesn't have, but I do want
to add them. I can see 2 types of triggers: file-based and
package-based. It might also be useful to have pre- and post- versions
of the trigger, you currently seem to only have the post-version, right?


> Here's the complete order of rpm script execution:
>=20
> Order of Script Execution
> -------------------------
>=20
> For reference, here's the order in which scripts are executed on a single
> package upgrade:
>=20
>   new-%pre      for new version of package being installed
>   ...           (all new files are installed)

Doesn't it make more sense to run old-%pre here? That way you don't have
to keep a lot of compatibility-stuff in there, and it will work better
if you the new package comes from another source and might have an
incompatibly %pre. (dpkg does this currently, but will fallback to
new%-pre if old-%pre fails).

>   new-%post     for new version of package being installed
>=20
>   any-%triggerin (%triggerin from other packages set off by new install)
>   new-%triggerin

This runs all triggers in the newly installed packages for things
that are already installed, right?

>   old-%triggerun
>   any-%triggerun (%triggerun from other packages set off by old uninstall)

>   old-%preun    for old version of package being removed
>   ...           (all old files are removed)
>   old-%postun   for old version of package being removed
>=20
>   old-%triggerpostun
>   any-%triggerpostun (%triggerpostun from other packages set off by old un
>                 install)
>=20
> Do you want to try and sort out this issue?

Yes. It seems that rpm has grown since I last looked at it and the
differences aren't as big as they used to be.

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--rwEMma7ioTxnRzrJ
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.0 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjhVHrkACgkQPLiSUC+jvC24dwCfcvl0tSCEux+ubIAuAYYPgdfj
/ekAn3me53zVk+fL61djrUqUzaI3m4Tf
=X8Aj
-----END PGP SIGNATURE-----

--rwEMma7ioTxnRzrJ--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Dec 13 11:45:04 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id LAA20718;
	Mon, 13 Dec 1999 11:44:50 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA15936;
	Mon, 13 Dec 1999 11:44:48 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA01433;
	Mon, 13 Dec 1999 11:44:47 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA30864;
	Mon, 13 Dec 1999 11:44:43 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA30851
	for packaging-list; Mon, 13 Dec 1999 11:44:39 -0500
Resent-Date: Mon, 13 Dec 1999 11:44:39 -0500
Resent-Message-Id: <199912131644.LAA30851@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from janeway.cistron.net (root@janeway.cistron.net [195.64.65.23])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA30847
	for <packaging@rufus.w3.org>; Mon, 13 Dec 1999 11:44:35 -0500
Received: from lightning.mors.net (root@wichert.cistron.nl [195.64.66.141])
	by janeway.cistron.net (8.9.3/8.9.3/Debian/GNU) with ESMTP id RAA01029
	for <packaging@rufus.w3.org>; Mon, 13 Dec 1999 17:44:32 +0100
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian 8.9.3-6) id RAA09157
	for packaging@rufus.w3.org; Mon, 13 Dec 1999 17:43:17 +0100
Date: Mon, 13 Dec 1999 17:43:17 +0100
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Meeting at the LWCENY
Message-ID: <19991213174316.B8936@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <19991209215022.C16139@mors.net> <19991209161253.J30406@devserv.devel.redhat.com> <19991212223348.D19547@mors.net> <19991213095300.J30406@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="hQiwHBbRI9kgIhsi"
User-Agent: Mutt/1.0pre4i
In-Reply-To: <19991213095300.J30406@devserv.devel.redhat.com>; from jbj@redhat.com on Mon, Dec 13, 1999 at 09:53:00AM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 4234
Lines: 126



--hQiwHBbRI9kgIhsi
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> OK, that'll give me 2 months to figger where/when/what/who is LWCENY :-)

LinuxWorld Conference & Expo, New York, first week of Feburari. It used
to be in San Jose but apparently they moved..
=20
> Globally, what is the final deliverable of this packaging discussion?

My idea was:
a) come up with a standard that we feel happy with and want to support
b) present it to LSB for review
c) (probably overlapping with b) implement it in dpkg and rpm (or hpml)

> The meta-data contents is crucually important, the representation in XML,
> rpm/dpkg, and/or cpio/tar headers less so.

Agreed.

> If we simply shovel dpkg meta-data into a dpkg RDF name space, and rpm
> headers into a rpm RDF name space, we will have failed (IMHO) to
> develop a meaningful packaging standard.

Namespaces are useful for prototyping new things or really
distribution-specific items. Common stuff should really be made common
or we will loose.

> How much dependency meta-data can be made common between rpm and dpkg?

Quite a lot I think.. most of the differences seem to be in scripts and
policies.

> Package dependencies at least, possibly soname dependencies, maybe file
> dependencies. Rpm is also just starting to get into name space dependenci=
es
> that (tentatively) will look like
> 	PATH(grep)
> 	LD_LIBRARY_PATH(libc.so.6)
> with dynamic which(1)-like resolution semantics on the install machine.

Instead of the current dependencies you mean? Sounds like a good
approach. You could extend this with:

  OS(Linux)
  ARCHITECTURE(i586)

Which would suit me fine, since I want to get architecture-checks in the
dependencies.

> Should *all* dependencies support full [epoch:]version[-release] versioni=
ng?
> (I have requests to provide support for versioning on configuration files=
.)

All versionsened dependencies, yes. I don't see why not.

> There also needs to be provisions for installer (i.e. rpm/dpkg) specific
> dependencies as well as common dependencies.

With namespace-dependencies you get that automatically; if a namespace
is used that the packagemanager doesn't support you just abort or force
it.

> Do we need platform-specific dependencies?

Somehow I get the feeling you missed the beginning of this whole
discussion :). Anyway: yes. It's beginning to become more and more
important. Like I already mentioned above we need to be able to handle
OS interfaces and architectures, and dependencies are the best way to do
it. For example HURD supports both Linux and HURD interfaces, sparc64=20
can run sparc32 binaries, etc.

> Almost certainly. How can we use XML/RDF to organize this
> information in a (presumably) extensible fashion?

Daniel, can you answer this?

> I believe, as a guideline, that we need to identify a wrapper format that
> 	is extensible
> 	is implemented in a common system utility
> 	can be disassembled/reassembled from other components.

Agreed.

> (Except for inconvenience, is there any reason that scripts shouldn't
> be stored using the facilities of XML/RDF?)

Yes, since scripts can be binaries with dpkg, and that is something we
really want to be able to do.=20
=20
> I prefer the simplest
> 	MD1 PL1	MD2 PL2	... MDn PLn
> unless there are explicit performance reasons to prefer some other scheme.

Why not list the PL1-name in MD1 and support all of the above? What
ordering the packager uses shouldn't matter then.

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--hQiwHBbRI9kgIhsi
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.0 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjhVIiQACgkQPLiSUC+jvC3S2gCfZrnhCktbeLeI1B8Vd2CBL1bN
sBAAnAhhQjuK4oyA70d3cZ2FXE6yp88E
=M/7g
-----END PGP SIGNATURE-----

--hQiwHBbRI9kgIhsi--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Dec 13 12:49:57 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id MAA23164;
	Mon, 13 Dec 1999 12:49:51 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA24991;
	Mon, 13 Dec 1999 12:49:51 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA05037;
	Mon, 13 Dec 1999 12:49:49 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA03627;
	Mon, 13 Dec 1999 12:49:48 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA03619
	for packaging-list; Mon, 13 Dec 1999 12:49:45 -0500
Resent-Date: Mon, 13 Dec 1999 12:49:45 -0500
Resent-Message-Id: <199912131749.MAA03619@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA03615
	for <packaging@rufus.w3.org>; Mon, 13 Dec 1999 12:49:42 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id MAA23155;
	Mon, 13 Dec 1999 12:49:41 -0500
Message-ID: <19991213124941.N30406@devserv.devel.redhat.com>
Date: Mon, 13 Dec 1999 12:49:41 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Meeting at the LWCENY
References: <19991209215022.C16139@mors.net> <19991209161253.J30406@devserv.devel.redhat.com> <19991212223348.D19547@mors.net> <19991213095300.J30406@devserv.devel.redhat.com> <19991213174316.B8936@mors.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19991213174316.B8936@mors.net>; from Wichert Akkerman on Mon, Dec 13, 1999 at 05:43:17PM +0100
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 6874
Lines: 184


On Mon, Dec 13, 1999 at 05:43:17PM +0100, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > OK, that'll give me 2 months to figger where/when/what/who is LWCENY :-)
> 
> LinuxWorld Conference & Expo, New York, first week of Feburari. It used
> to be in San Jose but apparently they moved..
>  
> > Globally, what is the final deliverable of this packaging discussion?
> 
> My idea was:
> a) come up with a standard that we feel happy with and want to support
> b) present it to LSB for review
> c) (probably overlapping with b) implement it in dpkg and rpm (or hpml)
> 
> > The meta-data contents is crucually important, the representation in XML,
> > rpm/dpkg, and/or cpio/tar headers less so.
> 
> Agreed.
> 
> > If we simply shovel dpkg meta-data into a dpkg RDF name space, and rpm
> > headers into a rpm RDF name space, we will have failed (IMHO) to
> > develop a meaningful packaging standard.
> 
> Namespaces are useful for prototyping new things or really
> distribution-specific items. Common stuff should really be made common
> or we will loose.
> 
> > How much dependency meta-data can be made common between rpm and dpkg?
> 
> Quite a lot I think.. most of the differences seem to be in scripts and
> policies.
> 

Good.

> > Package dependencies at least, possibly soname dependencies, maybe file
> > dependencies. Rpm is also just starting to get into name space dependencies
> > that (tentatively) will look like
> > 	PATH(grep)
> > 	LD_LIBRARY_PATH(libc.so.6)
> > with dynamic which(1)-like resolution semantics on the install machine.
> 
> Instead of the current dependencies you mean? Sounds like a good
> approach. You could extend this with:
> 

The above dependencies would augment the current package/soname/file/virtual
dependencies in rpm. What distinguishes the name space dependencies above
is the explicit semantics, not the FOO(...) syntax, which already embeds quite
nicely within virtual provides/requires (see below).

>   OS(Linux)
>   ARCHITECTURE(i586)
> 

I hesitate to leap on inventing semantics for various name spaces that
I will regret later. I'm really, really hoping that I can finesse deciding
or enumerating arch's and/or os's by applying RE's to config.guess output
(as I suggested at the beginning of the summer). I'm still carrying rpmrc
baggage for i986 compiler flags, and I have configurations for
	arch_canon:     m68kmint: m68kmint      13
	arch_canon:     atarist: m68kmint       13
	arch_canon:     atariste: m68kmint      13
	arch_canon:     ataritt: m68kmint       13
	arch_canon:     falcon: m68kmint        13
	arch_canon:     atariclone: m68kmint    13
	arch_canon:     milan: m68kmint         13
	arch_canon:     hades: m68kmint         13
	arch_canon:     i370: i370      14
	arch_canon:     i390: i390      15
that I cannot remove (in order to implement RE's on config.guess output)
w/o pissing off someone, somewhere, somewhen ...

> Which would suit me fine, since I want to get architecture-checks in the
> dependencies.
> 

Please, RE's on config.guess output? Scoring by RE application order?

Far too many standards end up enumerating arch/os/protocol/interface/whatever
imperfectly.

> > Should *all* dependencies support full [epoch:]version[-release] versioning?
> > (I have requests to provide support for versioning on configuration files.)
> 
> All versionsened dependencies, yes. I don't see why not.
> 

Good.

> > There also needs to be provisions for installer (i.e. rpm/dpkg) specific
> > dependencies as well as common dependencies.
> 
> With namespace-dependencies you get that automatically; if a namespace
> is used that the packagemanager doesn't support you just abort or force
> it.
> 

Namespace dependencies are pretty useless w/o explicit semantics for
how to resolve. For example, I will probably have
	html(...)
	perl(...)
	tcl(...)
	python(...)
name spaces in rpm shortly, and I'd rather *not* have rpm (and me) go
digging through beaucoup gook tring to resolve the semantics of these
dependencies. Arbitrating how to imbue these name spaces with semantics
(as rpm package maintainer) leads to tedious technical discussions about
nuances of packaging that I cannot and do not appreciate.

Far better to embed the name space dependency resolution into the existing
virtual scheme (as in rpm) that is simple to explain

	segmented string compares (using strcmp) to determine ordering

The alternative, abort and force, usually leads to unhappy users who
wish their problem explained and/or fixed.

> > Do we need platform-specific dependencies?
> 
> Somehow I get the feeling you missed the beginning of this whole
> discussion :). Anyway: yes. It's beginning to become more and more
> important. Like I already mentioned above we need to be able to handle
> OS interfaces and architectures, and dependencies are the best way to do
> it. For example HURD supports both Linux and HURD interfaces, sparc64 
> can run sparc32 binaries, etc.
> 

No I've been here all along :-) Your document does not yet say much about
platforms, and does not yet provide for platform-dependencies in sufficient
detail that I can understand the mechanism. Just (politely) poking ...

> > Almost certainly. How can we use XML/RDF to organize this
> > information in a (presumably) extensible fashion?
> 
> Daniel, can you answer this?
> 
> > I believe, as a guideline, that we need to identify a wrapper format that
> > 	is extensible
> > 	is implemented in a common system utility
> > 	can be disassembled/reassembled from other components.
> 
> Agreed.
> 

Good.

> > (Except for inconvenience, is there any reason that scripts shouldn't
> > be stored using the facilities of XML/RDF?)
> 
> Yes, since scripts can be binaries with dpkg, and that is something we
> really want to be able to do. 
>  

Ahh, I see. How about plopping binaries by name into the wrapper, but
leaving open the possibility that more portable formats like scripts
can be stored by value as well as by reference in the meta-data.

That would also permit sharing binaries used in %pre/%post to be shared
amongst a set of MDn/PLn pairs, if that is desirable ...

> > I prefer the simplest
> > 	MD1 PL1	MD2 PL2	... MDn PLn
> > unless there are explicit performance reasons to prefer some other scheme.
> 
> Why not list the PL1-name in MD1 and support all of the above? What
> ordering the packager uses shouldn't matter then.
> 

Adding MD/PL pairs sequentially in the wrapper doesn't require the MD1 cross
reference to be updated simply becausee PL1 changed it's name. And,
since it depends on the existence rather than the name of the following
payload, that means we don't have to specify what the name should be.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Dec 13 13:55:46 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id NAA25923;
	Mon, 13 Dec 1999 13:55:40 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id NAA02675;
	Mon, 13 Dec 1999 13:55:39 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id NAA09418;
	Mon, 13 Dec 1999 13:55:38 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA09217;
	Mon, 13 Dec 1999 13:55:36 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA09206
	for packaging-list; Mon, 13 Dec 1999 13:55:33 -0500
Resent-Date: Mon, 13 Dec 1999 13:55:33 -0500
Resent-Message-Id: <199912131855.NAA09206@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA09199
	for <packaging@rufus.w3.org>; Mon, 13 Dec 1999 13:55:26 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id NAA25914;
	Mon, 13 Dec 1999 13:55:19 -0500
Message-ID: <19991213135518.O30406@devserv.devel.redhat.com>
Date: Mon, 13 Dec 1999 13:55:18 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] What to do about scripts?
References: <19991213104713.L30406@devserv.devel.redhat.com> <19991213172841.A8936@mors.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19991213172841.A8936@mors.net>; from Wichert Akkerman on Mon, Dec 13, 1999 at 05:28:41PM +0100
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 7956
Lines: 209


On Mon, Dec 13, 1999 at 05:28:41PM +0100, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > 
> > How are we going to handle script contents?
> > 
> > At the core of the problem is that rpm does install-before-uninstall while
> > dpkge does uninstall-before-install.
> 
> No, dpkg does both. Actually we are going to add a new stage as well,
> so we will have:
>   1. configure package
>   2. run pre-installation script
>   3. install package
>   4. run post-installation script
> 

Presumably, "configure package" is acquiring system specific information
like ip address as well package specific information like paths for
relocatable binaries ...

I don't see where packages are removed in the scheme above (but I haven't
looked at the attachment yet ...)

> The idea is to first run the configure-stage of all packages that will
> be processed, and after that has been done continue with the normal
> work.
> 
> > Other minor problems include
> > 	rpm requires the interpreter to be specified
> > 	rpm supplies certain infomation to scripts using argv[1] and argv[2]
> > 	rpm supplies certain information to ecripts in the environment
> > 	dpkg permits binaries as well as scripts to be run
> > 	(please fill in other dpkg problems here)
> 
> dpkg supplies certain information to scripts using argv[1..2] as well.
> dpkg also runs scripts before and after removal of packages.
> 
> I never understood why you would want to list the interpreter in the
> metadata.. we are running a binary here so the kernel will figure out
> how to run it anyway.
> 

I had not the luxury of designing rpm, sorry. Meanwhile, I need to
figure out how to wire the interpreter tag into the meta-data.

> I take it that for rpm these scripts are in the installed part of the
> package, while for dpkg they are put in another part (the same as the
> metadata) so people don't see them (unless they start looking in the
> dpkg database of course). I think this makes sense, since those scripts
> are not meant to be run at any moment except package
> installation/removal/etc.
> 

The scripts simply reside in the header which is copied into the rpm
database. If you mean by "in the installed part" that the scripts are
in the payload, or somewhere on the file system, the answer is no, the
scripts are in the database.

> > We need to supply guidance on how to write scripts for the new packaging
> > format.
> 
> Can you please take a moment to look at how dpkg handles these scripts?
> I'll attach the relevant chapter or our packaging manual to this mail.
> 

(Haven't done yet, will do next.)

What is still needed in order to "rationalize" script packaging and use
by packaging software
	1) a common set of scripts/binaries
	2) a well defined, possibly over generated, common install process
	3) provisions for per-installer (i.e. rpm/dpkg) scripts/binaries
	4) explicit locations within the common install process where
	per-installer scripts/binaries will be executed.
	5) a common execution environment (argv, environment, interpreter)

I'm not whether 5) is desirable and/or achievable, but I will include
anyways.

> > We can certainly finesse this issue (and any other issue) by using the XML/RDF
> > facility to hide per-installer (i.e. rpm/dpkg) %pre/%post scripts, but that
> > requires packagers to provide two flavors of scripts which will lead to
> > some complexity in the use of (and reluctance to use) the new packaging format.
> 
> Which is not what we want..
> 

Yes.

> > Another alternative would be to permit, in common meta-data, a BEFORE/AFTER
> > script permitting both rpm and dpkg to map 2 out of 4 of the scripts into
> > the common area:
> > 	rpm:	BEFORE = %pre	AFTER = %postun
> > 	dpkg:	(forgive me, I've forgotten the dpkg names)
> 
> I'm sorry, but I'm not sure what you mean here..
> 
> > Extending this further would mean identifying a BETWEEN area that would be
> > 
> > 	rpm:	BETWEEN	%post followed by %preun
> > 	dpkg:	(forgive me, I've forgotten the dpkg names)
> 
> Between? Now you've really lost me..
> 

I was trying to identify a mapping between scripts that might permit
both rpm and dpkg to have common {pre-,post-}{install,remove} scripts
even though rpm does install-before-remove. BEFORE/AFTER/BETWEEN are
wrto package install and remove steps during upgrade. Sorry to be oblique.

> > Can we devise a common scheme for passing information to scripts?
> 
> What we currently do is `script <stage> <last installed version>',
> where <stage> tells the script what we are actually doing (see the
> attached text). Is there any objection to using this approach?
> 

Rpm passes the "number of instances of the package that will remain
after the script has finished executing" as arg 1. Arg 2 is used only for
triggers, and is (roughly) the "number of instances of the other package ..."
as in triggerer/triggeree. I'd have to look to figure out which arg
is which ...

Probably the best thing to do is come up with a 4 argument scheme that
breaks both current dpkg and rpm conventions, and have both dpkg and
rpm deal with its own legacy issues :-)

> > Finally, there are rpm triggers.
> 
> Triggers are something that dpkg currently doesn't have, but I do want
> to add them. I can see 2 types of triggers: file-based and
> package-based. It might also be useful to have pre- and post- versions
> of the trigger, you currently seem to only have the post-version, right?
> 

Triggers are quite elegant and horrendously complicated to explain and
use reliably in packaging.

The important issue is to come up with a common install process order, and add
the hooks for trigger script execution now for planned expansion later.
We might also want to standardize on the dependency-like format for trigger
execution.

> 
> > Here's the complete order of rpm script execution:
> > 
> > Order of Script Execution
> > -------------------------
> > 
> > For reference, here's the order in which scripts are executed on a single
> > package upgrade:
> > 
> >   new-%pre      for new version of package being installed
> >   ...           (all new files are installed)
> 
> Doesn't it make more sense to run old-%pre here? That way you don't have
> to keep a lot of compatibility-stuff in there, and it will work better
> if you the new package comes from another source and might have an
> incompatibly %pre. (dpkg does this currently, but will fallback to
> new%-pre if old-%pre fails).
> 

This is at the core of the difference between rpm install-before-remove
versus dpkg remove-before-install. For the moment, since I have not the
luxury of being able to re-design rpm script execution order, let me
punt and say "Maybe".

> >   new-%post     for new version of package being installed
> > 
> >   any-%triggerin (%triggerin from other packages set off by new install)
> >   new-%triggerin
> 
> This runs all triggers in the newly installed packages for things
> that are already installed, right?
> 

Yes. The "new" package is (usually) the incoming version, the "old" package
is the already installed (but about to be removed) package, and "any" is
any other installed package in the database.

> >   old-%triggerun
> >   any-%triggerun (%triggerun from other packages set off by old uninstall)
> 
> >   old-%preun    for old version of package being removed
> >   ...           (all old files are removed)
> >   old-%postun   for old version of package being removed
> > 
> >   old-%triggerpostun
> >   any-%triggerpostun (%triggerpostun from other packages set off by old un
> >                 install)
> > 
> > Do you want to try and sort out this issue?
> 
> Yes. It seems that rpm has grown since I last looked at it and the
> differences aren't as big as they used to be.
> 

Off to read about dpkg scripts ...

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Dec 13 14:50:34 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id OAA28138;
	Mon, 13 Dec 1999 14:50:27 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id OAA11334;
	Mon, 13 Dec 1999 14:50:27 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id OAA13347;
	Mon, 13 Dec 1999 14:50:26 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id OAA14319;
	Mon, 13 Dec 1999 14:50:13 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id OAA14309
	for packaging-list; Mon, 13 Dec 1999 14:50:09 -0500
Resent-Date: Mon, 13 Dec 1999 14:50:09 -0500
Resent-Message-Id: <199912131950.OAA14309@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id OAA14303
	for <packaging@rufus.w3.org>; Mon, 13 Dec 1999 14:50:06 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id OAA28116;
	Mon, 13 Dec 1999 14:50:03 -0500
Message-ID: <19991213145003.P30406@devserv.devel.redhat.com>
Date: Mon, 13 Dec 1999 14:50:03 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: [packaging] Source packaging needs per-platform build dependencies
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 770
Lines: 24


Ah, I understand your confusion :-)

I've been mulling over how to implement auto-generated build dependencies
by parsing "strace -q -etrace=open,execve" output and/or snatching the
same two syscalls using LD_PRELOAD.

In order to package sources with build requirements (mechanism identical
to binary packages but resolved in the build system environment), I see
a need for being able to specify per-platform dependencies as well as
common build dependencies.

Packages containing multiple per-platform payloads may need this too if
we decide to aggregate meta-data.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Dec 13 21:55:39 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id VAA11092;
	Mon, 13 Dec 1999 21:55:26 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id VAA27194;
	Mon, 13 Dec 1999 21:55:25 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id VAA04624;
	Mon, 13 Dec 1999 21:55:24 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id VAA20397;
	Mon, 13 Dec 1999 21:55:22 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id VAA20366
	for packaging-list; Mon, 13 Dec 1999 21:55:11 -0500
Resent-Date: Mon, 13 Dec 1999 21:55:11 -0500
Resent-Message-Id: <199912140255.VAA20366@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from janeway.cistron.net (root@janeway.cistron.net [195.64.65.23])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id VAA20299
	for <packaging@rufus.w3.org>; Mon, 13 Dec 1999 21:54:57 -0500
Received: from lightning.mors.net (root@wichert.cistron.nl [195.64.66.141])
	by janeway.cistron.net (8.9.3/8.9.3/Debian/GNU) with ESMTP id DAA27484
	for <packaging@rufus.w3.org>; Tue, 14 Dec 1999 03:54:54 +0100
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian 8.9.3-6) id DAA28356
	for packaging@rufus.w3.org; Tue, 14 Dec 1999 03:53:48 +0100
Date: Tue, 14 Dec 1999 03:53:48 +0100
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Meeting at the LWCENY
Message-ID: <19991214035348.E27879@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <19991209215022.C16139@mors.net> <19991209161253.J30406@devserv.devel.redhat.com> <19991212223348.D19547@mors.net> <19991213095300.J30406@devserv.devel.redhat.com> <19991213174316.B8936@mors.net> <19991213124941.N30406@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="EXKGNeO8l0xGFBjy"
User-Agent: Mutt/1.0i
In-Reply-To: <19991213124941.N30406@devserv.devel.redhat.com>; from jbj@redhat.com on Mon, Dec 13, 1999 at 12:49:41PM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 5663
Lines: 146



--EXKGNeO8l0xGFBjy
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> The above dependencies would augment the current package/soname/file/virt=
ual
> dependencies in rpm. What distinguishes the name space dependencies above
> is the explicit semantics, not the FOO(...) syntax, which already embeds =
quite
> nicely within virtual provides/requires (see below).

Right, I got that.

> I hesitate to leap on inventing semantics for various name spaces that
> I will regret later. I'm really, really hoping that I can finesse deciding
> or enumerating arch's and/or os's by applying RE's to config.guess output

I need to double check this with some people; I remember somebody
telling me about a problem with config.guess output that makes things
difficult.

config.guess also isn't a single standard unfortunately, different
versions can produce wildly different output (on unixware for example).

> (as I suggested at the beginning of the summer). I'm still carrying rpmrc
> baggage for i986 compiler flags, and I have configurations for

Looks like the archtable in dpkg:

	# This file contains a table of known architecture strings, with
	# things to map them to. `configure' will take the output of gcc
	# --print-libgcc-file-name, strip off leading directories up to and
	# including gcc-lib, strip off trailing /libgcc.a and trailing version
	# number directory, and then strip off everything after the first
	# hyphen.  The idea is that you're left with this bit:
	#   $ gcc --print-libgcc-file-name
	#   /usr/lib/gcc-lib/i486-linux/2.7.2/libgcc.a
	#                    ^^^^
	# This is then looked up in the table below, to find out what to map
	# it to.  If it isn't found then configure will print a warning and
	# continue.  You can override configure's ideas using --with-arch.
	# The third field is the GNU configure architecture to use with
	# this build architecture.
	i386    i386    i486
	i486    i386    i486
	i586    i386    i486
	i686    i386    i486
	pentium i386    i486
	sparc   sparc   sparc
	sparc64 sparc64 sparc64
	alpha   alpha   alpha
	alphaev4        alpha   alpha
	alphaev5        alpha   alpha
	alphaev56       alpha   alpha
	alphaev6        alpha   alpha
	alphapca56      alpha   alpha


> Please, RE's on config.guess output? Scoring by RE application order?

I need to think about this more, but it sounds right.

> Namespace dependencies are pretty useless w/o explicit semantics for
> how to resolve. For example, I will probably have
> 	html(...)
> 	perl(...)
> 	tcl(...)
> 	python(...)
> name spaces in rpm shortly, and I'd rather *not* have rpm (and me) go
> digging through beaucoup gook tring to resolve the semantics of these
> dependencies. Arbitrating how to imbue these name spaces with semantics
> (as rpm package maintainer) leads to tedious technical discussions about
> nuances of packaging that I cannot and do not appreciate.

Let me make sure I have this right: you use a single dependency type,
and instead of putting in packagenames like we do name you do
`semantic(constraint)', right? Then you define a (small) set of
semantics that people can use? The term namespaces is probably not very
correct then.. lets call them semantic-enhanced dependencies or just
semantic dependencies.

> The alternative, abort and force, usually leads to unhappy users who
> wish their problem explained and/or fixed.

You will always have abort, for example if you have a package that uses
a new semantic and try to install it with an older tool that doesn't
support that particular semantic.

> No I've been here all along :-) Your document does not yet say much about
> platforms, and does not yet provide for platform-dependencies in sufficie=
nt
> detail that I can understand the mechanism. Just (politely) poking ...

Mostly because it wasn't really discussed yet and I haven't had the time
to sit down and work it out.. I'm glad that the discussion has finally
to this though. Gives me a reason to set some other things aside and
think about it :)

> Ahh, I see. How about plopping binaries by name into the wrapper, but
> leaving open the possibility that more portable formats like scripts
> can be stored by value as well as by reference in the meta-data.

I still don't see why we also want to support store-by-value here. It
feels like a needless extra option. I would like to keep things as
simple as possible. This isn't perl :)

> That would also permit sharing binaries used in %pre/%post to be shared
> amongst a set of MDn/PLn pairs, if that is desirable ...

lets call it an added bonus.

> Adding MD/PL pairs sequentially in the wrapper doesn't require the MD1 cr=
oss
> reference to be updated simply becausee PL1 changed it's name. And,
> since it depends on the existence rather than the name of the following
> payload, that means we don't have to specify what the name should be.

Valid point.

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--EXKGNeO8l0xGFBjy
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.0 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjhVsTwACgkQPLiSUC+jvC0m1wCfe562NRRZceplXF6ulP8ivM1b
DSkAoIGG3j1vwbVsCmsuP50/Xel3/y0l
=Y/vi
-----END PGP SIGNATURE-----

--EXKGNeO8l0xGFBjy--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Dec 13 22:28:19 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id WAA12160;
	Mon, 13 Dec 1999 22:28:12 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id WAA29105;
	Mon, 13 Dec 1999 22:28:12 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id WAA05929;
	Mon, 13 Dec 1999 22:28:12 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id VAA20404;
	Mon, 13 Dec 1999 21:55:25 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id VAA20385
	for packaging-list; Mon, 13 Dec 1999 21:55:20 -0500
Resent-Date: Mon, 13 Dec 1999 21:55:20 -0500
Resent-Message-Id: <199912140255.VAA20385@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from janeway.cistron.net (root@janeway.cistron.net [195.64.65.23])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id VAA20307
	for <packaging@rufus.w3.org>; Mon, 13 Dec 1999 21:54:59 -0500
Received: from lightning.mors.net (root@wichert.cistron.nl [195.64.66.141])
	by janeway.cistron.net (8.9.3/8.9.3/Debian/GNU) with ESMTP id DAA27499
	for <packaging@rufus.w3.org>; Tue, 14 Dec 1999 03:54:58 +0100
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian 8.9.3-6) id DAA28219
	for packaging@rufus.w3.org; Tue, 14 Dec 1999 03:28:00 +0100
Date: Tue, 14 Dec 1999 03:28:00 +0100
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Source packaging needs per-platform build dependencies
Message-ID: <19991214032800.C27879@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <19991213145003.P30406@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="2JFBq9zoW8cOFH7v"
User-Agent: Mutt/1.0i
In-Reply-To: <19991213145003.P30406@devserv.devel.redhat.com>; from jbj@redhat.com on Mon, Dec 13, 1999 at 02:50:03PM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1712
Lines: 49



--2JFBq9zoW8cOFH7v
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> I've been mulling over how to implement auto-generated build dependencies
> by parsing "strace -q -etrace=3Dopen,execve" output and/or snatching the
> same two syscalls using LD_PRELOAD.

The latter is a better approach, but it will still give you lots of
headaches (especially on new architectures). It's not a simple task.
You might want to look at our fakeroot package which might be a nice
start. (There is/was also libtricks, but that has been designated a
failed experimented by now.)

> In order to package sources with build requirements (mechanism identical
> to binary packages but resolved in the build system environment), I see
> a need for being able to specify per-platform dependencies as well as
> common build dependencies.

Yes; very nasty since you can never be sure you have everything listed
for all architectures.

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--2JFBq9zoW8cOFH7v
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.0 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjhVqzAACgkQPLiSUC+jvC1uvACfQFdp3XvJM/2l7YKFR9kz/m6g
CdkAn1vIuZgT7IoVuzBP/UW2kOh8JnTa
=+UvX
-----END PGP SIGNATURE-----

--2JFBq9zoW8cOFH7v--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Dec 13 22:28:25 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id WAA12166;
	Mon, 13 Dec 1999 22:28:18 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id WAA29109;
	Mon, 13 Dec 1999 22:28:17 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id WAA05933;
	Mon, 13 Dec 1999 22:28:17 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id VAA20398;
	Mon, 13 Dec 1999 21:55:23 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id VAA20367
	for packaging-list; Mon, 13 Dec 1999 21:55:12 -0500
Resent-Date: Mon, 13 Dec 1999 21:55:12 -0500
Resent-Message-Id: <199912140255.VAA20367@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from janeway.cistron.net (root@janeway.cistron.net [195.64.65.23])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id VAA20303
	for <packaging@rufus.w3.org>; Mon, 13 Dec 1999 21:54:58 -0500
Received: from lightning.mors.net (root@wichert.cistron.nl [195.64.66.141])
	by janeway.cistron.net (8.9.3/8.9.3/Debian/GNU) with ESMTP id DAA27495
	for <packaging@rufus.w3.org>; Tue, 14 Dec 1999 03:54:56 +0100
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian 8.9.3-6) id DAA28264
	for packaging@rufus.w3.org; Tue, 14 Dec 1999 03:36:39 +0100
Date: Tue, 14 Dec 1999 03:36:39 +0100
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] What to do about scripts?
Message-ID: <19991214033639.D27879@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <19991213104713.L30406@devserv.devel.redhat.com> <19991213172841.A8936@mors.net> <19991213135518.O30406@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="1sNVjLsmu1MXqwQ/"
User-Agent: Mutt/1.0i
In-Reply-To: <19991213135518.O30406@devserv.devel.redhat.com>; from jbj@redhat.com on Mon, Dec 13, 1999 at 01:55:18PM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 3816
Lines: 103



--1sNVjLsmu1MXqwQ/
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> Presumably, "configure package" is acquiring system specific information
> like ip address as well package specific information like paths for
> relocatable binaries ...

Anything that requires user-interaction generally; the idea is to have
all interaction in one place and then start installing everything.

> I don't see where packages are removed in the scheme above (but I haven't
> looked at the attachment yet ...)

Because I haven't described that, it's all in the attachment :)

> I had not the luxury of designing rpm, sorry. Meanwhile, I need to
> figure out how to wire the interpreter tag into the meta-data.

If we are going to use a new format can't we just loose that
interpreter-tag? (isn't the designer (or one of them) also reading this?  :)

> The scripts simply reside in the header which is copied into the rpm
> database. If you mean by "in the installed part" that the scripts are
> in the payload, or somewhere on the file system, the answer is no, the
> scripts are in the database.

Same as with dpkg then; but since we ship the metadata in a tar-ball we
can use binary scripts (and don't bother with an interpreter tag).

> What is still needed in order to "rationalize" script packaging and use
> by packaging software
> 	1) a common set of scripts/binaries
> 	2) a well defined, possibly over generated, common install process
> 	3) provisions for per-installer (i.e. rpm/dpkg) scripts/binaries
> 	4) explicit locations within the common install process where
> 	per-installer scripts/binaries will be executed.
> 	5) a common execution environment (argv, environment, interpreter)

I'll draft something this weekend (probably won't have time earlier).
=20
> I'm not whether 5) is desirable and/or achievable, but I will include
> anyways.

dpkg currently checks if a small set of binaries is listed in the PATH
and will abort it they aren't. Generally we have a set of packages that
are tagged as required that can always be assumed to be present and
working.

> Rpm passes the "number of instances of the package that will remain
> after the script has finished executing" as arg 1. Arg 2 is used only for
> triggers, and is (roughly) the "number of instances of the other package =
..."
> as in triggerer/triggeree. I'd have to look to figure out which arg
> is which ...

Oh, the multiple-instance thing. We don't do that.. generally we seem to
have something like `current action' as arg 1, and `previous version' as
arg2.=20

> Probably the best thing to do is come up with a 4 argument scheme that
> breaks both current dpkg and rpm conventions, and have both dpkg and
> rpm deal with its own legacy issues :-)

Shouldn't be that hard even. At least not with one of my current pet
projects to reimplement dpkg :).

> Triggers are quite elegant and horrendously complicated to explain and
> use reliably in packaging.

Probably very abused as well..

> Off to read about dpkg scripts ...

Off to sleep :)

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--1sNVjLsmu1MXqwQ/
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.0 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjhVrTcACgkQPLiSUC+jvC3OHQCfbCZxPvNomryVLkRoGMsZ1zcX
CjQAniOWJseTQilIwQWLIq5Sa7SHN4mc
=WImt
-----END PGP SIGNATURE-----

--1sNVjLsmu1MXqwQ/--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Dec 14 09:17:39 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id JAA27261;
	Tue, 14 Dec 1999 09:17:33 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id JAA05190;
	Tue, 14 Dec 1999 09:17:32 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id JAA27519;
	Tue, 14 Dec 1999 09:17:32 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id JAA04668;
	Tue, 14 Dec 1999 09:17:30 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id JAA04635
	for packaging-list; Tue, 14 Dec 1999 09:17:26 -0500
Resent-Date: Tue, 14 Dec 1999 09:17:26 -0500
Resent-Message-Id: <199912141417.JAA04635@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id JAA04629
	for <packaging@rufus.w3.org>; Tue, 14 Dec 1999 09:17:23 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id JAA27252;
	Tue, 14 Dec 1999 09:17:22 -0500
Message-ID: <19991214091722.R30406@devserv.devel.redhat.com>
Date: Tue, 14 Dec 1999 09:17:22 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] What to do about scripts?
References: <19991213104713.L30406@devserv.devel.redhat.com> <19991213172841.A8936@mors.net> <19991213135518.O30406@devserv.devel.redhat.com> <19991214033639.D27879@mors.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19991214033639.D27879@mors.net>; from Wichert Akkerman on Tue, Dec 14, 1999 at 03:36:39AM +0100
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 3513
Lines: 91


On Tue, Dec 14, 1999 at 03:36:39AM +0100, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> 
> If we are going to use a new format can't we just loose that
> interpreter-tag? (isn't the designer (or one of them) also reading this?  :)
> 

I'm sure we'll hear more :-). Meanwhile, pragmatically, I need to wire the
legacy tag somehow (but I can always duplicate the interpreter into
a #! at the beginning of each scriptlet when executing, and hide the
tag in rpm's XML/RDF section).

I suspect that at least some of the reasons that interpreters were
distingusihed with a separate tag were to
	1) automatically generate a dependency for interpreters.
	2) permit rpm to run on platforms that have not #!.
	3) permit dependency queries that are useful in vetting a
	a distribution (tags can always be queried with rpm).

> 
> > What is still needed in order to "rationalize" script packaging and use
> > by packaging software
> > 	1) a common set of scripts/binaries
> > 	2) a well defined, possibly over generated, common install process
> > 	3) provisions for per-installer (i.e. rpm/dpkg) scripts/binaries
> > 	4) explicit locations within the common install process where
> > 	per-installer scripts/binaries will be executed.
> > 	5) a common execution environment (argv, environment, interpreter)
> 
> I'll draft something this weekend (probably won't have time earlier).
>  

Good.

> > I'm not whether 5) is desirable and/or achievable, but I will include
> > anyways.
> 
> dpkg currently checks if a small set of binaries is listed in the PATH
> and will abort it they aren't. Generally we have a set of packages that
> are tagged as required that can always be assumed to be present and
> working.
> 

I can see both plusses and minusses relying on a "core set" of binaries. Rpm
reorders package installs (using prereqs) to insure that whatever is needed
is installed before execution will be attempted. The reordering complicates
the dependency maintainance, particularly the interlocking dependencies of
the core set of packages, but the benefit is not having to arbitrate what
should/shouldn't be in the "core set".

> > Rpm passes the "number of instances of the package that will remain
> > after the script has finished executing" as arg 1. Arg 2 is used only for
> > triggers, and is (roughly) the "number of instances of the other package ..."
> > as in triggerer/triggeree. I'd have to look to figure out which arg
> > is which ...
> 
> Oh, the multiple-instance thing. We don't do that.. generally we seem to
> have something like `current action' as arg 1, and `previous version' as
> arg2. 
> 
> > Probably the best thing to do is come up with a 4 argument scheme that
> > breaks both current dpkg and rpm conventions, and have both dpkg and
> > rpm deal with its own legacy issues :-)
> 
> Shouldn't be that hard even. At least not with one of my current pet
> projects to reimplement dpkg :).
> 

It would be nice to standardize syntax between dpkg/rpm, on trigger syntax
especially.

> > Triggers are quite elegant and horrendously complicated to explain and
> > use reliably in packaging.
> 
> Probably very abused as well..
> 

Hardly used is closer to reality, since the major focus in rpm is on a
package rather than on the wider distribution context in which triggers
reside.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Dec 14 10:14:36 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id KAA29123;
	Tue, 14 Dec 1999 10:14:25 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA13088;
	Tue, 14 Dec 1999 10:14:25 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA30591;
	Tue, 14 Dec 1999 10:14:24 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA08980;
	Tue, 14 Dec 1999 10:14:23 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA08969
	for packaging-list; Tue, 14 Dec 1999 10:14:19 -0500
Resent-Date: Tue, 14 Dec 1999 10:14:19 -0500
Resent-Message-Id: <199912141514.KAA08969@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA08964
	for <packaging@rufus.w3.org>; Tue, 14 Dec 1999 10:14:17 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id KAA29110;
	Tue, 14 Dec 1999 10:14:16 -0500
Message-ID: <19991214101416.S30406@devserv.devel.redhat.com>
Date: Tue, 14 Dec 1999 10:14:16 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Meeting at the LWCENY
References: <19991209215022.C16139@mors.net> <19991209161253.J30406@devserv.devel.redhat.com> <19991212223348.D19547@mors.net> <19991213095300.J30406@devserv.devel.redhat.com> <19991213174316.B8936@mors.net> <19991213124941.N30406@devserv.devel.redhat.com> <19991214035348.E27879@mors.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19991214035348.E27879@mors.net>; from Wichert Akkerman on Tue, Dec 14, 1999 at 03:53:48AM +0100
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 3574
Lines: 81


On Tue, Dec 14, 1999 at 03:53:48AM +0100, Wichert Akkerman wrote:
> 
> Let me make sure I have this right: you use a single dependency type,
> and instead of putting in packagenames like we do name you do
> `semantic(constraint)', right? Then you define a (small) set of
> semantics that people can use? The term namespaces is probably not very
> correct then.. lets call them semantic-enhanced dependencies or just
> semantic dependencies.
> 

Yes, "name space dependencies" is rpm-jargon. Let me try a different approach
to explain, focussing on the semantics implemented rather than the apparent
syntax or implied semantics.

There are 3 basic semantics currently implemented in rpm that use information
from meta-data found in the database:

	1) package dependendencies (always versioned)
		resolved by looking at name-version-release.
	2) file dependendencies (always start with '/', currently unversioned)
		resolved by looking at file lists.
	3) string dependencies (optionally versioned)
		resolved by looking at provides/requires strings.

Currently, soname/virtual dependencies are string dependencies. In the
future, package dependencies may be implemented as string dependencies
as well now that string dependencies permit versions in rpm.

So, the "foo(bar)" syntax is currently implemented as a string dependency.

String dependencies with versions will permit tracking, for example,
perl/jave/tcl/python modules in rpm without having to do the hard work
of defining per-something semantics.

I can see a need to implement semantics for PATH(...), and possibly
LD_LIBARY_PATH(...), because they would be a big win on systems that
are only partially under rpm/dpkg control (i.e. not everything is in the
database). Beyond that I cannot see, and I'm reluctant to commit to
something I only imperfectly understand, hence objections to OS(...) and/or
ARCH(...).

> 
> > Ahh, I see. How about plopping binaries by name into the wrapper, but
> > leaving open the possibility that more portable formats like scripts
> > can be stored by value as well as by reference in the meta-data.
> 
> I still don't see why we also want to support store-by-value here. It
> feels like a needless extra option. I would like to keep things as
> simple as possible. This isn't perl :)
> 

Here's a quick rationale for store-by-value:

What we are referring to as "scripts" are hybrid objects wrto the packaging
format that we are discussing. Scripts are not wholly meta-data because
they're not (always) interpreted or even text (e.g. helper binaries), and
scripts are not wholly payload since they reside in the database rather
than on the file system. We haven't yet thought deeply about the consequences
of storing scripts as a separate section in the package :-)

Permitting store-by-value would permit a largish sub-set (e.g. interpreted
shell scripts) to be classified as (more or less) meta-data. The benefits
would include
	1) meta-data changes aren't payload changes (e.g. your build-version
	problem already discussed).
	2) meta-data changes will become much easier using XML parsers on
	interpreted text (e.g. consider some change like --prefix=/usr without
	relying on some shell environment variable passed to a "script").
The drawbacks include the difficulty of getting at the script at execution
time, and the need to accomodate store-by-reference helper binaries.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Dec 14 15:30:57 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id PAA09627;
	Tue, 14 Dec 1999 15:30:44 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id PAA27755;
	Tue, 14 Dec 1999 15:30:44 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id PAA18074;
	Tue, 14 Dec 1999 15:30:39 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id PAA02483;
	Tue, 14 Dec 1999 15:30:26 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id PAA02474
	for packaging-list; Tue, 14 Dec 1999 15:30:22 -0500
Resent-Date: Tue, 14 Dec 1999 15:30:22 -0500
Resent-Message-Id: <199912142030.PAA02474@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id PAA02470
	for <packaging@rufus.w3.org>; Tue, 14 Dec 1999 15:30:17 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id PAA09586;
	Tue, 14 Dec 1999 15:30:16 -0500
Message-ID: <19991214153016.X30406@devserv.devel.redhat.com>
Date: Tue, 14 Dec 1999 15:30:16 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Cc: kestes@staff.mail.com
Subject: [packaging] Two more packaging gedanken, with possible meta-data solutions
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 3295
Lines: 76


Here are two packaging problems which may be partially remedied by
additional features in meta-data:

The first was reported by Ken Estes <kestes@staff.mail.com> who, amongst
other things, has interesting thoughts about how dependencies can be
used in packaging (I'll copy him in case he wishes to participate).

His problem arose in trying to package Oracle in an rpm on Solaris.
He, as packager rather than builder, encountered automatically generated
dependencies on sonames that didn't exist on his version of Solaris
(read: the build machine != the install machine). Because of the
binary-only nature of the payload, he wished some mechanism to
ignore certain automatically generated dependncies. Meanwhile, the
automatically generated sonames affected only the functionality of
a very small sub-set of the package.

Lest the proprietary nature of Oracle and Solaris mislead you, I believe
that this is an example of a very large sub-class of problems when
trying to convert or repackage, for example, Debian packages into
RPM packages using something like alien. There's another whole class of
problems with dependencies in emulators, etc, that I believe may be most easily
solved by diddling meta-data (as described below).

One way to address these problems is with packages with virtual provides
on the install machine, and that's certainly workable but unwieldy.
Since the focus of packaging is often "the package", rather than "the
distribution", some explicit mechanism to "white out" or "replace" bogus
(in the sense above) dependencies in typically auto-generated meta-data
might be needed.

I had originally considered solving Ken's problem in rpm by exploiting
local dependency scope in meta-data. Basically, if
	Requires: libfromhell.so.129
is bogus, then adding
	Provides: libfromhell.so.129
would satisfy the dependency within the local scope of the package and
neither the requires nor the provides would be included in the final
package.

I'll leave it for others to consider packaging problems like glibc which
may simultaneously provide and require libc.so.6. What's important to
realize is

	1) dependencies can have resolution scope (e.g. the hack above)
	that might be useful for packaging.
	2) there may need to be an explict meta-data mechanism (other than
	whacking XML directly) that can be used to fix inconvenient
	items in otherwise useful autogenerated dependencies.


The other problem also has to do with auto-generated dependencies, this
time as build prereqs implemented with strace/LD_PRELOAD. How should
information like
	Build requires /usr/include/foo.h
be usefully included in packaging, since, on another, otherwise
satisfactory, build system, foo.h is in /opt/include.

One way to address this in meta-data would permit marking the
dependency somehow as tenative, or informative, or ...

I don't have satisfactory answers for these problems, but added
facilities in meta-data may be part of the solution.

If nothing else, these problems are relatively trivial to remedy at the
package level, but can be nearly insoluble at the distribution level.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Dec 16 08:34:36 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id IAA20067;
	Thu, 16 Dec 1999 08:34:24 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id IAA20034;
	Thu, 16 Dec 1999 08:34:23 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id IAA31014;
	Thu, 16 Dec 1999 08:34:21 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id IAA30789;
	Thu, 16 Dec 1999 08:34:18 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id IAA30779
	for packaging-list; Thu, 16 Dec 1999 08:34:14 -0500
Resent-Date: Thu, 16 Dec 1999 08:34:14 -0500
Resent-Message-Id: <199912161334.IAA30779@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id IAA30775
	for <packaging@rufus.w3.org>; Thu, 16 Dec 1999 08:34:11 -0500
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian 8.9.3-6) id OAA30124;
	Thu, 16 Dec 1999 14:34:07 +0100
Date: Thu, 16 Dec 1999 14:34:06 +0100
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Cc: kestes@staff.mail.com
Subject: Re: [packaging] Two more packaging gedanken, with possible meta-data solutions
Message-ID: <19991216143406.C27674@liacs.nl>
References: <19991214153016.X30406@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-md5;
	protocol="application/pgp-signature"; boundary="K8nIJk4ghYZn606h"
User-Agent: Mutt/1.0i
In-Reply-To: <19991214153016.X30406@devserv.devel.redhat.com>; from jbj@redhat.com on Tue, Dec 14, 1999 at 03:30:16PM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2567
Lines: 72



--K8nIJk4ghYZn606h
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> His problem arose in trying to package Oracle in an rpm on Solaris.
> He, as packager rather than builder, encountered automatically generated
> dependencies on sonames that didn't exist on his version of Solaris
> (read: the build machine !=3D the install machine).

This sounds like he is using ldd to get the sonames. While this approach
works it's preferable to use objdump to see what you really need so
you don't see the indirect dependencies. (We're going to do that for the
next Debian release as well).

> Because of the binary-only nature of the payload, he wished some mechanis=
m to
> ignore certain automatically generated dependncies. Meanwhile, the
> automatically generated sonames affected only the functionality of
> a very small sub-set of the package.

In this case I think he demonstrated another problem (wrong dependencies
being generated)

> One way to address these problems is with packages with virtual provides
> on the install machine, and that's certainly workable but unwieldy.

It's a kluge.

> The other problem also has to do with auto-generated dependencies, this
> time as build prereqs implemented with strace/LD_PRELOAD. How should
> information like
> 	Build requires /usr/include/foo.h
> be usefully included in packaging, since, on another, otherwise
> satisfactory, build system, foo.h is in /opt/include.

I'm quite sure we don't want to discuss how to gather build depencies
here.. it's somewhat offtopic. A better topic would be source packages
then.

> One way to address this in meta-data would permit marking the
> dependency somehow as tenative, or informative, or ...

A `temp' namespace that gets zapped when the package is generated?

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |


--K8nIJk4ghYZn606h
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBOFjqTqjZR/ntlUftAQG06gL/dwnGz0sPxHRmn4RZFM5jF+9IAWNd0xxq
ZkSMowR7+uEXJm56aFEh1H2+jfgf9iKMTVlqJm0PqXBWYzB53dzeSUiecX51eub6
tYAJvpkLV36Z7IKfRYgLjWHsQAH0dqUY
=huVW
-----END PGP SIGNATURE-----

--K8nIJk4ghYZn606h--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Dec 16 10:07:31 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id KAA23040;
	Thu, 16 Dec 1999 10:07:22 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA31276;
	Thu, 16 Dec 1999 10:07:21 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA03013;
	Thu, 16 Dec 1999 10:07:21 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA06928;
	Thu, 16 Dec 1999 10:07:19 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA06919
	for packaging-list; Thu, 16 Dec 1999 10:07:15 -0500
Resent-Date: Thu, 16 Dec 1999 10:07:15 -0500
Resent-Message-Id: <199912161507.KAA06919@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:jbj@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA06912
	for <packaging@rufus.w3.org>; Thu, 16 Dec 1999 10:07:10 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.8.7/8.8.7) id KAA23024;
	Thu, 16 Dec 1999 10:07:08 -0500
Message-ID: <19991216100708.I30406@devserv.devel.redhat.com>
Date: Thu, 16 Dec 1999 10:07:08 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Two more packaging gedanken, with possible meta-data solutions
References: <19991214153016.X30406@devserv.devel.redhat.com> <19991216143406.C27674@liacs.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
In-Reply-To: <19991216143406.C27674@liacs.nl>; from Wichert Akkerman on Thu, Dec 16, 1999 at 02:34:06PM +0100
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 5053
Lines: 116


On Thu, Dec 16, 1999 at 02:34:06PM +0100, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > His problem arose in trying to package Oracle in an rpm on Solaris.
> > He, as packager rather than builder, encountered automatically generated
> > dependencies on sonames that didn't exist on his version of Solaris
> > (read: the build machine != the install machine).
> 
> This sounds like he is using ldd to get the sonames. While this approach
> works it's preferable to use objdump to see what you really need so
> you don't see the indirect dependencies. (We're going to do that for the
> next Debian release as well).
> 

Correct, ldd is used by rpm on solaris, but that has to do with the
dependency content rather than the existence.

The issue, however, is what should the packager do in the circumstance
	1) the package cannot (read: it's seriously inconvenient) be rebuilt.
	2) there are reasons to collect all components into a single package.
	3) a small part of the overall package has dependencies that
	cannot (read: its's seriously inconvenient) be resolved on
	a random install platform.
These are all real world practical (rather than theoretical) matters, and
there are certainly solutions outside of the the packaging format. Even
within the packaging format, if the meta-data is XML, these problems
can be solved.

> > Because of the binary-only nature of the payload, he wished some mechanism to
> > ignore certain automatically generated dependncies. Meanwhile, the
> > automatically generated sonames affected only the functionality of
> > a very small sub-set of the package.
> 
> In this case I think he demonstrated another problem (wrong dependencies
> being generated)
> 

Or that the package should be split into finer grained components, or that
packaging should have been attempted with a stub package, or the
automatic dependency generation needs to be fixed, or the install
platform should somehow provide what is needed or ...

All these are valid, but unwieldy, solutions if the need is to produce
a single package with some auto-generated dependencies removed. Editing
the meta-data post-packaging doesn't usually lead to the most robust packaging.
Something as simple as a changelog for the meta-data might work, I'm looking
for a more explicit mechanism within the meta-data format.

> > One way to address these problems is with packages with virtual provides
> > on the install machine, and that's certainly workable but unwieldy.
> 
> It's a kluge.
> 

If you mean the lie that an added stub package provides dependencies that
are in fact not present, yes.

Diddling auto-generated dependencies in packages is a kluge on a smaller
scale, but still a kluge.

> > The other problem also has to do with auto-generated dependencies, this
> > time as build prereqs implemented with strace/LD_PRELOAD. How should
> > information like
> > 	Build requires /usr/include/foo.h
> > be usefully included in packaging, since, on another, otherwise
> > satisfactory, build system, foo.h is in /opt/include.
> 
> I'm quite sure we don't want to discuss how to gather build depencies
> here.. it's somewhat offtopic. A better topic would be source packages
> then.
> 

I meant only to illustrate that we may need, in practice, a parameter
to mark dependencies as, well, somehow optional ...

> > One way to address this in meta-data would permit marking the
> > dependency somehow as tenative, or informative, or ...
> 
> A `temp' namespace that gets zapped when the package is generated?
> 

I'm not sure what you mean. I'm looking for a mechanism that permits
including (possibly) conflicting and inconsistent, from the vantage point
of the random install platform but not a "pure" reference install platform,
auto-generated information in the package meta-data, not creating a
namespace useful in constructing a package.

You missed (or I explained imperfectly :-), the possible uses of
"resolution scope" in resolving dependencies.

We are using "resolution scope" in rpm quite nicely to aggregate packages
into a "transaction set" that is eventually installed atomically.
The resolution mechanism is wired into a protocol (in the Red Hat up2date
package) that involves an exchange of partial meta-data (read: dependencies
and as little else as possible), a partial goal being to minimize external
dependencies of the about to be installed transaction set before committing
to payload transport.

What about doing something similar with MDn/PLn type packages? I see
possible uses for hints about the resolution scope within METADATA(MDn)
aggregations. If nothing else, it would be cheaper to pre-compute dependencies
once and include in the package, rather than re-compute dependencies on
each install platform, sort of like incremental archiving and/or linking
ala ranlib/ld.

I hope that's clearer, maybe not :-)

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri Dec 24 10:30:52 1999
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.8.7/8.8.7) with ESMTP id KAA06795;
	Fri, 24 Dec 1999 10:30:49 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA24038;
	Fri, 24 Dec 1999 10:30:47 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA00928;
	Fri, 24 Dec 1999 10:30:47 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA06768;
	Fri, 24 Dec 1999 10:30:37 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA06758
	for packaging-list; Fri, 24 Dec 1999 10:30:35 -0500
Resent-Date: Fri, 24 Dec 1999 10:30:35 -0500
Resent-Message-Id: <199912241530.KAA06758@rpmfind.net>
Received: from janeway.cistron.net (root@janeway.cistron.net [195.64.65.23])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA06755
	for <packaging@rufus.w3.org>; Fri, 24 Dec 1999 10:30:32 -0500
Received: from lightning.mors.net (root@wichert.cistron.nl [195.64.66.141])
	by janeway.cistron.net (8.9.3/8.9.3/Debian 8.9.3-6) with ESMTP id QAA24031
	for <packaging@rufus.w3.org>; Fri, 24 Dec 1999 16:30:31 +0100
X-Authentication-Warning: janeway.cistron.net: Host root@wichert.cistron.nl [195.64.66.141] claimed to be lightning.mors.net
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian 8.9.3-6) id QAA12454
	for packaging@rufus.w3.org; Fri, 24 Dec 1999 16:15:36 +0100
Date: Fri, 24 Dec 1999 16:15:36 +0100
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: [packaging] vacation notice
Message-ID: <19991224161536.A12440@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="wRRV7LY7NUeQGEoC"
User-Agent: Mutt/1.0i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1148
Lines: 40



--wRRV7LY7NUeQGEoC
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable


Unfortunately I haven't had the time yet to work on a new text; I'm
currently struggling to get a project finished before I'm off for a
short vacation next week, so it will have to wait until I get back.

I hope to have something on Jan 5. Should the world still exist that is
:)

Anyway, happy holidays!

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--wRRV7LY7NUeQGEoC
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjhjjhgACgkQPLiSUC+jvC0WBgCeKzCX/BcI1NytfaSwbZrFUhF5
8NEAoKhzFMMixV5S9Vkv5wYkjNiWo4v0
=rhwb
-----END PGP SIGNATURE-----

--wRRV7LY7NUeQGEoC--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jan 25 08:37:17 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (IDENT:root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id IAA16588;
	Tue, 25 Jan 2000 08:37:17 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id IAA03258;
	Tue, 25 Jan 2000 08:37:16 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id IAA04106;
	Tue, 25 Jan 2000 08:37:16 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id IAA10632;
	Tue, 25 Jan 2000 08:37:09 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id IAA10622
	for packaging-list; Tue, 25 Jan 2000 08:37:07 -0500
Resent-Date: Tue, 25 Jan 2000 08:37:07 -0500
Resent-Message-Id: <200001251337.IAA10622@rpmfind.net>
Received: from janeway.cistron.net (root@janeway.cistron.net [195.64.65.23])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id IAA10618
	for <packaging@rufus.w3.org>; Tue, 25 Jan 2000 08:37:04 -0500
Received: from lightning.mors.net (root@wichert.cistron.nl [195.64.66.141])
	by janeway.cistron.net (8.9.3/8.9.3/Debian 8.9.3-6) with ESMTP id OAA15586
	for <packaging@rufus.w3.org>; Tue, 25 Jan 2000 14:37:01 +0100
X-Authentication-Warning: janeway.cistron.net: Host root@wichert.cistron.nl [195.64.66.141] claimed to be lightning.mors.net
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian 8.9.3-6) id OAA26450
	for packaging@rufus.w3.org; Tue, 25 Jan 2000 14:32:06 +0100
Date: Tue, 25 Jan 2000 14:32:06 +0100
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: [packaging] packging update
Message-ID: <20000125143206.A26431@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="qMm9M+Fa2AknHoGS"
User-Agent: Mutt/1.0i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1222
Lines: 40



--qMm9M+Fa2AknHoGS
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable


Unfortunately things haven't gone as planned and I haven't had
the time to look at it.. I'll print everything out and work on
it while flying out to the LSB though, should have plenty of
time with nothing else to do then :)

Will there be other people at the LWCE as well? I would like to
see if we could get together sometime and discuss the format
and where we want it to go..

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--qMm9M+Fa2AknHoGS
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjiNpdUACgkQPLiSUC+jvC1PBACfRan/Im8tKYZVHyxep8avHF3+
SoQAmgP4WWH1peioaSJkYqVfqdF6caXA
=xpYr
-----END PGP SIGNATURE-----

--qMm9M+Fa2AknHoGS--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Jan 27 11:34:14 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (IDENT:root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id LAA25913;
	Thu, 27 Jan 2000 11:34:13 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA21836;
	Thu, 27 Jan 2000 11:34:10 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA02817;
	Thu, 27 Jan 2000 11:34:09 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA26806;
	Thu, 27 Jan 2000 11:34:03 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA26772
	for packaging-list; Thu, 27 Jan 2000 11:33:59 -0500
Resent-Date: Thu, 27 Jan 2000 11:33:59 -0500
Resent-Message-Id: <200001271633.LAA26772@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA26769
	for <packaging@rufus.w3.org>; Thu, 27 Jan 2000 11:33:58 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id LAA25729
	for packaging@rufus.w3.org; Thu, 27 Jan 2000 11:33:58 -0500
Date: Thu, 27 Jan 2000 11:33:58 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packging update
Message-ID: <20000127113358.A24906@devserv.devel.redhat.com>
References: <20000125143206.A26431@mors.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000125143206.A26431@mors.net>; from wichert@cistron.nl on Tue, Jan 25, 2000 at 02:32:06PM +0100
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 797
Lines: 25


On Tue, Jan 25, 2000 at 02:32:06PM +0100, Wichert Akkerman wrote:
> 
> Unfortunately things haven't gone as planned and I haven't had
> the time to look at it.. I'll print everything out and work on
> it while flying out to the LSB though, should have plenty of
> time with nothing else to do then :)
> 
> Will there be other people at the LWCE as well? I would like to
> see if we could get together sometime and discuss the format
> and where we want it to go..
> 

I will be at Linux World. I'll have some nominal booth duties, but the
main reason I'm going is to discuss packaging with you.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Jan 27 11:43:42 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (IDENT:root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id LAA27413;
	Thu, 27 Jan 2000 11:43:41 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA23251;
	Thu, 27 Jan 2000 11:43:41 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA03354;
	Thu, 27 Jan 2000 11:43:40 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA27716;
	Thu, 27 Jan 2000 11:43:39 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA27705
	for packaging-list; Thu, 27 Jan 2000 11:43:36 -0500
Resent-Date: Thu, 27 Jan 2000 11:43:36 -0500
Resent-Message-Id: <200001271643.LAA27705@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA27702
	for <packaging@rufus.w3.org>; Thu, 27 Jan 2000 11:43:34 -0500
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian 8.9.3-6) id RAA02785
	for packaging@rufus.w3.org; Thu, 27 Jan 2000 17:43:34 +0100
Date: Thu, 27 Jan 2000 17:43:34 +0100
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] packging update
Message-ID: <20000127174334.A2686@liacs.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000125143206.A26431@mors.net> <20000127113358.A24906@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-md5;
	protocol="application/pgp-signature"; boundary="17pEHd4RhPHOinZp"
User-Agent: Mutt/1.0i
In-Reply-To: <20000127113358.A24906@devserv.devel.redhat.com>; from jbj@redhat.com on Thu, Jan 27, 2000 at 11:33:58AM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1136
Lines: 38



--17pEHd4RhPHOinZp
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> I will be at Linux World. I'll have some nominal booth duties, but the
> main reason I'm going is to discuss packaging with you.

I'm flattered now :). Should we pick a date and place to discuss this now or
compare schedules at the beginning of the expo?

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |


--17pEHd4RhPHOinZp
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBOJB1tqjZR/ntlUftAQFUJQMAi19DloZ7lmHyV7dsFr3zTdAPk2ccIhik
F2LGrdypXmHpaknocjKb7a5GNDqf6rw1MWvWbQNNsl2OzMK4do0+DqhAh/caTKNO
XPYdbEZVVeUAg1aUx01nTDbCDhIM01gt
=1dbg
-----END PGP SIGNATURE-----

--17pEHd4RhPHOinZp--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Feb 22 19:24:30 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id TAA10880;
	Tue, 22 Feb 2000 19:24:29 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id TAA18282;
	Tue, 22 Feb 2000 19:24:28 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id TAA15330;
	Tue, 22 Feb 2000 19:24:28 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id TAA29817;
	Tue, 22 Feb 2000 19:24:21 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id TAA29799
	for packaging-list; Tue, 22 Feb 2000 19:24:14 -0500
Resent-Date: Tue, 22 Feb 2000 19:24:14 -0500
Resent-Message-Id: <200002230024.TAA29799@rpmfind.net>
Received: from voyager.cistron.net (root@voyager.cistron.net [195.64.68.34])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id TAA29780
	for <packaging@rufus.w3.org>; Tue, 22 Feb 2000 19:24:03 -0500
Received: from lightning.mors.net (root@wichert.cistron.nl [195.64.66.141])
	by voyager.cistron.net (8.9.3/8.9.3/Debian/GNU) with ESMTP id BAA13625
	for <packaging@rufus.w3.org>; Wed, 23 Feb 2000 01:24:10 +0100
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian 8.9.3-6) id BAA27671
	for packaging@rufus.w3.org; Wed, 23 Feb 2000 01:20:22 +0100
Date: Wed, 23 Feb 2000 01:20:22 +0100
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: [packaging] two items
Message-ID: <20000223012022.B26369@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="8P1HSweYDcXXzwPJ"
User-Agent: Mutt/1.0.1i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1313
Lines: 42



--8P1HSweYDcXXzwPJ
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable


Two questions:
1. I'm giving a talk on Linux package management at the `Linux Open
Source expo & Conference' (quite a mouthfull) in Sydney, and would
like to discuss this effort as well. I hope nobody has a problem with
that, considering it would probably be the first really public
presentation.

2. Daniel: can you subscribe Ian Jackson with the address
ijackson+sauce-bypass+packaging-q9m5rzup@chiark.greenend.org.uk ?
That will allow mail to bypass his spam filter.

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--8P1HSweYDcXXzwPJ
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjizJ8YACgkQPLiSUC+jvC04PACePol7MJBIAsRbOUs23DDjqWTV
k+YAoKNy6tPCNaBpQWLTyLDYoCRmdqFu
=Ixvn
-----END PGP SIGNATURE-----

--8P1HSweYDcXXzwPJ--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Feb 22 20:31:16 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id UAA14165;
	Tue, 22 Feb 2000 20:31:16 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id UAA25706;
	Tue, 22 Feb 2000 20:31:15 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id UAA18635;
	Tue, 22 Feb 2000 20:31:15 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id UAA02483;
	Tue, 22 Feb 2000 20:31:09 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id UAA02443
	for packaging-list; Tue, 22 Feb 2000 20:30:58 -0500
Resent-Date: Tue, 22 Feb 2000 20:30:58 -0500
Resent-Message-Id: <200002230130.UAA02443@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id UAA02436
	for <packaging@rufus.w3.org>; Tue, 22 Feb 2000 20:30:51 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id UAA14134
	for packaging@rufus.w3.org; Tue, 22 Feb 2000 20:30:50 -0500
Date: Tue, 22 Feb 2000 20:30:50 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] two items
Message-ID: <20000222203050.B12465@devserv.devel.redhat.com>
References: <20000223012022.B26369@mors.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000223012022.B26369@mors.net>; from wichert@cistron.nl on Wed, Feb 23, 2000 at 01:20:22AM +0100
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 696
Lines: 23


On Wed, Feb 23, 2000 at 01:20:22AM +0100, Wichert Akkerman wrote:
> 
> Two questions:
> 1. I'm giving a talk on Linux package management at the `Linux Open
> Source expo & Conference' (quite a mouthfull) in Sydney, and would
> like to discuss this effort as well. I hope nobody has a problem with
> that, considering it would probably be the first really public
> presentation.
> 

It's fine by me. When are you going? I might be able to give you an
example metadata header in XML in ~2 weeks.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Feb 23 05:14:35 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id FAA07929;
	Wed, 23 Feb 2000 05:14:35 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id FAA30825;
	Wed, 23 Feb 2000 05:14:34 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id FAA14367;
	Wed, 23 Feb 2000 05:14:34 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id FAA18897;
	Wed, 23 Feb 2000 05:14:21 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id FAA18880
	for packaging-list; Wed, 23 Feb 2000 05:14:11 -0500
Resent-Date: Wed, 23 Feb 2000 05:14:11 -0500
Resent-Message-Id: <200002231014.FAA18880@rpmfind.net>
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id FAA18847
	for <packaging@rufus.w3.org>; Wed, 23 Feb 2000 05:13:59 -0500
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian 8.9.3-6) id LAA01891
	for packaging@rufus.w3.org; Wed, 23 Feb 2000 11:13:58 +0100
Date: Wed, 23 Feb 2000 11:13:58 +0100
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] two items
Message-ID: <20000223111358.A32287@liacs.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000223012022.B26369@mors.net> <20000222203050.B12465@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-md5;
	protocol="application/pgp-signature"; boundary="SLDf9lqlvOQaIe6s"
User-Agent: Mutt/1.0.1i
In-Reply-To: <20000222203050.B12465@devserv.devel.redhat.com>; from jbj@redhat.com on Tue, Feb 22, 2000 at 08:30:50PM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1004
Lines: 37



--SLDf9lqlvOQaIe6s
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> It's fine by me. When are you going? I might be able to give you an
> example metadata header in XML in ~2 weeks.

March 3

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |


--SLDf9lqlvOQaIe6s
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBOLOy5ajZR/ntlUftAQGfsAL+ITIKcdCkODAVxUdxn4qd00mXc+kyM0WV
2aWchVudDp2rMaetqFh0PgI4IoPZYi0XuGdfV0CZ9CgH7y6IN4MmgQ0VmW+3xFpA
k1MLRvYREfMW5YSNlKR4fAmlKhvDmPf4
=ArHu
-----END PGP SIGNATURE-----

--SLDf9lqlvOQaIe6s--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Mar  1 08:07:17 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id IAA03709;
	Wed, 1 Mar 2000 08:07:16 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id IAA05588;
	Wed, 1 Mar 2000 08:07:12 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id IAA07713;
	Wed, 1 Mar 2000 08:07:11 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id IAA24723;
	Wed, 1 Mar 2000 08:07:08 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id IAA24711
	for packaging-list; Wed, 1 Mar 2000 08:07:04 -0500
Resent-Date: Wed, 1 Mar 2000 08:07:04 -0500
Resent-Message-Id: <200003011307.IAA24711@rpmfind.net>
Received: from voyager.cistron.net (root@voyager.cistron.net [195.64.68.34])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id IAA24688
	for <packaging@rufus.w3.org>; Wed, 1 Mar 2000 08:06:59 -0500
Received: from lightning.mors.net (root@wichert.cistron.nl [195.64.66.141])
	by voyager.cistron.net (8.9.3/8.9.3/Debian/GNU) with ESMTP id OAA14388
	for <packaging@rufus.w3.org>; Wed, 1 Mar 2000 14:07:00 +0100
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian 8.9.3-6) id OAA10513
	for packaging@rufus.w3.org; Wed, 1 Mar 2000 14:05:55 +0100
Date: Wed, 1 Mar 2000 14:05:55 +0100
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: [packaging] multi-arch & OS handling
Message-ID: <20000301140555.A10467@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="cmJC7u66zC7hs+87"
User-Agent: Mutt/1.0.1i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 11278
Lines: 254



--cmJC7u66zC7hs+87
Content-Type: multipart/mixed; boundary="HlL+5n6rz5pIUxbD"


--HlL+5n6rz5pIUxbD
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable


Jeff,

It seems we cannot use regexps for handling architectures and operating
systems as you wanted. I'll attach an updated version of a text from
Marcus Brinkman which lists a lot of the issues involved.

A simple example will show where it will break: assume we are running
on a Linux system and want to install a Solaris x86 package. Of course
the regexp in the package and those from the packagemanager won't match,
so we can't install it.  However there is actually a way to install it:
if you install the icbs kernel module your system is suddenly capable of
handling Solaris x86 binaries. The same holds for kernels which don't
support a.out and ship it as a kernel module in a seperate package.

By using standard (virtual) depends and provides the package manager
will be able to see that it can install such a kernel extension in order
to extend the number archs/operating systems/ABIs/whatever it supports.

The point basically is that with modern systems it is very possible
to change the OS-interfaces and architectures (think of a chip like
Crusoe which already emulates another chip) runtime (and during an
installtion cycle). The only way to properly support that is to use the
flexibility that depends/provides give us.

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--HlL+5n6rz5pIUxbD
Content-Type: text/plain
Content-Disposition: attachment; filename="arch-handling.txt"
Content-Transfer-Encoding: quoted-printable

Architecture Handling in Distributed Software Collections
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D

Copyright 1999, 2000 Marcus Brinkmann <brinkmd@debian.org>
 distribution of verbatim copies allowed without restriction.=20
 If you want to modify this, contact me and I will put it under a better
 license. I am not unwilling, just lazy.

They way I think about architecture treatment stems from my experiences with
the Debian package tools and bootstrapping the Debian GNU/Hurd system.

The concept presented below has the following core ideas, which I think are
important enough to summarize them in a short list:

* Package installation is orthogonal to distribution creation.
* Package installation requires only dependency verification.
* Distribution creation requires dependency verification and scoring.


Package Installation
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

A package manager (the part of the packaging system that installs packages
on a host machine) should only be concerned with fulfilling dependencies. It
should determine if a package is installable, and if it is, it should
perform the required action.

For this, (probably virtual) packages representing ABI capabilities really
perform best. You can provide virtual architecture packages for any ABI
feature, like which processor is required, the object format (a.out, elf),
if a /proc filesystem is provided and to which standard it conforms, if
linux syscalls are available, if mach interfaces are provided and so on.
IMO, dependencies should be as weak as possible. If a pentium optimized
package runs also on a 486, the dependency should be "486" (or even 386),
not "pentium".

Examples:
=2E "grub" only depends on "i386", regardless of the operating system
  running.
=2E Most linux binaries will depend on a certain cpu only (apart from any
  libraries), the elf object format, and ceertain libraries determined by
  the soname, and will not make use of syscalls or the proc filessystem
  directly. Those will run on the Hurd without recompilation.
=2E A perl script evaluating the linux proc fs (version 2.2) can depend
  on perl and the procfs virtual package of version 2.2.

That was the "depends on" side. There is also the "provides" side. A usual
pentium linux box will provide "i386, i486, i586", "linux-syscalls (=3D 2.2=
)",
"elf" and "proc-fs" for example. Note that you can have version numbers her=
e,
too. Which packages are provided is a feature of the "distribution".

Distributions
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

The distribution is really a concept that should not be built directly into
the package installer, because it requires some overview on the system. The
reason is that a distribution needs to be a consistent set of packages.

Here config.guess may come in. There is a "default" mapping from
canonicalized host type strings to virtual packages, for example:

i586-gnu-linux   -->   "i386", "i486", "i586", "linux"
i486-gnu         -->   "i386", "i486", "gnu"

Note that concepts like "linux-syscalls", "elf" and "procfs" would be
provided by the linux kernel package itself. (Or by emulator packages on the
Hurd, for example).

It is not hard to write a utility that can create distributions on the
fly if all available packages are collected in a pool. You just have to map
your host system type to a set of virtual packages provided, and start
adding packages which dependencies can be fulfilled. Of course, you will
get further possibilities through additional "provides:" in the packages you
added, so you can add more and more packages from your pool to your
distribution. Using some standard algorithms from graph theory, you should
be able to take into account conflicting packages etc, to get a maximum
distribution, e.g., a distribution which only consists of packages which are
installable using packages from this distribution, and is not missing any
package from the pool with this property.

Hints or Scoring
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

Hints can be complex and I haven't thought them completely through. But her=
e is
a rather complete analysis of the different cases that you have to treat
differently when considering scoring:

Usually, we would recompile a package for another architetcture only if it
is not yet available for this architecture, eg, if it is not in this
architectures distribution. Furthermore, recompiling for another
architecture would often result in a binary package that is not useful on
any of the existing architectures, so there is no conflict.

Example:
 Package foo is available for all i386 arches, because it only
 depends on the virtual package "i386".

Because we want to support powerpc, we recompile it for this architectures.
The resulting binary depends on powerpc only. Currently, no platform can run
i386 and powerpcs at the same time. Therefore, all distributions we create
with the procedure above will only contain either of these packages.

If two binary versions of the same package happen to match the same
distribution, two cases are possible:

1) "Scoring": Both packages have different dependencies ("i386" vs.
   "powerpc") or do not carry hints.
2) "Hints": Both packages have the same dependencies ("i386" native and
   "i386" with pentium optimization [but without pentium specific
   instructions]). Then we need hints to decide.

I won't go into detail how b1 and b2 could be treated, only so much:

For b1), it would be sufficient to order the available virtual dependency
packages that should be considered in a priority list. Or more abstract:
You have a function "int score(list of dependencies)" which calculates a
value for each package, and the highest value wins. equal value would mean
both packages are equal and it doesn't matter which one is picked. The
function can be very simple and only catch the cases that are known to
occure.

If both packages have same dependencies, but are not equal, they have to
tell us more about them in a "hints" metadata. This could be the
config.guess of the compiled architecture for example, or some preferred
target architecture, or something alike. The scoring would then be a
function of the dependencies and the hints metadata. This can actually
be a very simple function (like hint "i586" is better than "i486" is
better than "i386" for the i586 distribution).

The _important_ thing is that scoring is part of the distribution creation,
not part of package installation. I should always be allowed to install a
package with a bad score, even if it is a worse score than the default pack=
age
it would replace. For example, I could fetch such a package from the package
pool to override a bug in the optimization or something alike.=20


Complexity
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

I think my concept is rather complete, at least it is not obvious to me whi=
ch
weird combination of architecture dependency is not covered by it. But is it
actually too complex? Is it overkill?

I think not, and this has two reasons:

1. The main complexity is in the distribution creation, which is completely
hidden from the user. It will happen at the main repository of the software
distribution. Users will continue to get a i386 linux distribution, or a
powerpc distribution of the Hurd, in short: there will be distributions
created for the config.guess system types as we do now. What we gain back
is a VERY simple package installation tool which is not any longer concerned
about scoring or similar, but merely a dependency checker.

2. The most difficult part seems to be the scoring. But this is only
complicated if you want to implement a general catch-all solution.
I think the number of cases were scoring actually happens is very small,
and can be covered by some simple rules.

The rest is really only organization of the packages that are uploaded and
installed in the distribution.

Determining if a package needs to be recompiled
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

Consider the following situation: System B emulates system A completely, but
has additional features, which software C can use.

If C is compiled for A, the resulting binary can run on B, but when C is
recompiled for B, it will make use of the special features provided by
system B.

In reality, most packages adopt themselve at run time or are conflicting, so
the case above should occur rather seldom. In this case, a feature list can
be added to the source package, which contains a hint for the builder
that if compiled for system B, the package will offer further features.

I have not worked out the details for this, mostly because this case occurs
very rarely and any agreement on the feature tag that offers the above
distinction will fit.

--HlL+5n6rz5pIUxbD--

--cmJC7u66zC7hs+87
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAji9FbMACgkQPLiSUC+jvC1VMwCfdxUnv+2WRbO4jOzUlDd3GjAM
jykAn1keEXcF5AuC/Vef4B8f2wSrv7yY
=GUn6
-----END PGP SIGNATURE-----

--cmJC7u66zC7hs+87--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Mar  1 12:19:20 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA20935;
	Wed, 1 Mar 2000 12:19:20 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA26436;
	Wed, 1 Mar 2000 12:19:18 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA23908;
	Wed, 1 Mar 2000 12:19:18 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA28391;
	Wed, 1 Mar 2000 12:19:14 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA28367
	for packaging-list; Wed, 1 Mar 2000 12:19:09 -0500
Resent-Date: Wed, 1 Mar 2000 12:19:09 -0500
Resent-Message-Id: <200003011719.MAA28367@rpmfind.net>
Received: from devserv.devel.redhat.com (devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA28344
	for <packaging@rufus.w3.org>; Wed, 1 Mar 2000 12:19:01 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id MAA20879
	for packaging@rufus.w3.org; Wed, 1 Mar 2000 12:19:00 -0500
Date: Wed, 1 Mar 2000 12:19:00 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] multi-arch & OS handling
Message-ID: <20000301121900.O7795@devserv.devel.redhat.com>
References: <20000301140555.A10467@mors.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000301140555.A10467@mors.net>; from wichert@cistron.nl on Wed, Mar 01, 2000 at 02:05:55PM +0100
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 12844
Lines: 268


On Wed, Mar 01, 2000 at 02:05:55PM +0100, Wichert Akkerman wrote:
> 
> Jeff,
> 
> It seems we cannot use regexps for handling architectures and operating
> systems as you wanted. I'll attach an updated version of a text from
> Marcus Brinkman which lists a lot of the issues involved.
> 
> A simple example will show where it will break: assume we are running
> on a Linux system and want to install a Solaris x86 package. Of course
> the regexp in the package and those from the packagemanager won't match,
> so we can't install it.  However there is actually a way to install it:
> if you install the icbs kernel module your system is suddenly capable of
> handling Solaris x86 binaries. The same holds for kernels which don't
> support a.out and ship it as a kernel module in a seperate package.
> 

The simple example is handled by augmenting the packagemanager configuration
with RE's for platforms the packagemanager is willing to "accept"
(read: attempt to install) that are added when the emulator is installed.

BTW, the package contains a config.guess output string, not a regular
expression, to identify the platform for which the package is intended.
If platform hints need to be generalized, then the platfornm will be an array
of strings, not a regular expression.

> By using standard (virtual) depends and provides the package manager
> will be able to see that it can install such a kernel extension in order
> to extend the number archs/operating systems/ABIs/whatever it supports.
> 
> The point basically is that with modern systems it is very possible
> to change the OS-interfaces and architectures (think of a chip like
> Crusoe which already emulates another chip) runtime (and during an
> installtion cycle). The only way to properly support that is to use the
> flexibility that depends/provides give us.
> 

I agree 110% that platform dependencies (i.e. arch/os hints) are best
handled with all the rest of the dependencies, as described in your
attachment. The design of those platform dependencies is ultimately
in the hands of LSB, and is not really part of an on-disk package layout
standard however.

Meanwhile, for better or worse, the
	Requires: <platform>
is, in many senses, the most important dependency of all, and will
be duplicated and used outside of packaging in directory names, file names,
download decisions, etc. Hence, I believe that the <platform> needs to be
easily accessible (i.e. in the wrapper rather than the metadata), and that
config.guess output string (or strings, but I hope that's not necessary) as
a hint regarding the platform for which the package is intended is at least
simple (and hopefully intuitive).

If having dependency info in the wrapper that is redundant with metadata
information is somehow bothersome, then we will need to somehow mark the
platform dependencies differently than the rest for ease of extraction,
as the current dependency scheme is entirely opaque to the design
of an on-disk format. I'd really like not to have to mark some dependecies
as "special" in any way at all, and I'd also like not to have the package
format dictate required dependencies because we-as-packagers can't possibly
guess at what dependencies should be "required" in the future.

Does that clarify matters some?

Good luck on your talk, I won't be able to get an example rpm header in XML
as Red Hat 6.2 is looming large.

73 de Jeff

> Wichert.
> 
> -- 
>    ________________________________________________________________
>  / Generally uninteresting signature - ignore at your convenience  \
> | wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
> | 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

> Architecture Handling in Distributed Software Collections
> =========================================================
> 
> Copyright 1999, 2000 Marcus Brinkmann <brinkmd@debian.org>
>  distribution of verbatim copies allowed without restriction. 
>  If you want to modify this, contact me and I will put it under a better
>  license. I am not unwilling, just lazy.
> 
> They way I think about architecture treatment stems from my experiences with
> the Debian package tools and bootstrapping the Debian GNU/Hurd system.
> 
> The concept presented below has the following core ideas, which I think are
> important enough to summarize them in a short list:
> 
> * Package installation is orthogonal to distribution creation.
> * Package installation requires only dependency verification.
> * Distribution creation requires dependency verification and scoring.
> 
> 
> Package Installation
> ====================
> 
> A package manager (the part of the packaging system that installs packages
> on a host machine) should only be concerned with fulfilling dependencies. It
> should determine if a package is installable, and if it is, it should
> perform the required action.
> 
> For this, (probably virtual) packages representing ABI capabilities really
> perform best. You can provide virtual architecture packages for any ABI
> feature, like which processor is required, the object format (a.out, elf),
> if a /proc filesystem is provided and to which standard it conforms, if
> linux syscalls are available, if mach interfaces are provided and so on.
> IMO, dependencies should be as weak as possible. If a pentium optimized
> package runs also on a 486, the dependency should be "486" (or even 386),
> not "pentium".
> 
> Examples:
> . "grub" only depends on "i386", regardless of the operating system
>   running.
> . Most linux binaries will depend on a certain cpu only (apart from any
>   libraries), the elf object format, and ceertain libraries determined by
>   the soname, and will not make use of syscalls or the proc filessystem
>   directly. Those will run on the Hurd without recompilation.
> . A perl script evaluating the linux proc fs (version 2.2) can depend
>   on perl and the procfs virtual package of version 2.2.
> 
> That was the "depends on" side. There is also the "provides" side. A usual
> pentium linux box will provide "i386, i486, i586", "linux-syscalls (= 2.2)",
> "elf" and "proc-fs" for example. Note that you can have version numbers here,
> too. Which packages are provided is a feature of the "distribution".
> 
> Distributions
> =============
> 
> The distribution is really a concept that should not be built directly into
> the package installer, because it requires some overview on the system. The
> reason is that a distribution needs to be a consistent set of packages.
> 
> Here config.guess may come in. There is a "default" mapping from
> canonicalized host type strings to virtual packages, for example:
> 
> i586-gnu-linux   -->   "i386", "i486", "i586", "linux"
> i486-gnu         -->   "i386", "i486", "gnu"
> 
> Note that concepts like "linux-syscalls", "elf" and "procfs" would be
> provided by the linux kernel package itself. (Or by emulator packages on the
> Hurd, for example).
> 
> It is not hard to write a utility that can create distributions on the
> fly if all available packages are collected in a pool. You just have to map
> your host system type to a set of virtual packages provided, and start
> adding packages which dependencies can be fulfilled. Of course, you will
> get further possibilities through additional "provides:" in the packages you
> added, so you can add more and more packages from your pool to your
> distribution. Using some standard algorithms from graph theory, you should
> be able to take into account conflicting packages etc, to get a maximum
> distribution, e.g., a distribution which only consists of packages which are
> installable using packages from this distribution, and is not missing any
> package from the pool with this property.
> 
> Hints or Scoring
> ================
> 
> Hints can be complex and I haven't thought them completely through. But here is
> a rather complete analysis of the different cases that you have to treat
> differently when considering scoring:
> 
> Usually, we would recompile a package for another architetcture only if it
> is not yet available for this architecture, eg, if it is not in this
> architectures distribution. Furthermore, recompiling for another
> architecture would often result in a binary package that is not useful on
> any of the existing architectures, so there is no conflict.
> 
> Example:
>  Package foo is available for all i386 arches, because it only
>  depends on the virtual package "i386".
> 
> Because we want to support powerpc, we recompile it for this architectures.
> The resulting binary depends on powerpc only. Currently, no platform can run
> i386 and powerpcs at the same time. Therefore, all distributions we create
> with the procedure above will only contain either of these packages.
> 
> If two binary versions of the same package happen to match the same
> distribution, two cases are possible:
> 
> 1) "Scoring": Both packages have different dependencies ("i386" vs.
>    "powerpc") or do not carry hints.
> 2) "Hints": Both packages have the same dependencies ("i386" native and
>    "i386" with pentium optimization [but without pentium specific
>    instructions]). Then we need hints to decide.
> 
> I won't go into detail how b1 and b2 could be treated, only so much:
> 
> For b1), it would be sufficient to order the available virtual dependency
> packages that should be considered in a priority list. Or more abstract:
> You have a function "int score(list of dependencies)" which calculates a
> value for each package, and the highest value wins. equal value would mean
> both packages are equal and it doesn't matter which one is picked. The
> function can be very simple and only catch the cases that are known to
> occure.
> 
> If both packages have same dependencies, but are not equal, they have to
> tell us more about them in a "hints" metadata. This could be the
> config.guess of the compiled architecture for example, or some preferred
> target architecture, or something alike. The scoring would then be a
> function of the dependencies and the hints metadata. This can actually
> be a very simple function (like hint "i586" is better than "i486" is
> better than "i386" for the i586 distribution).
> 
> The _important_ thing is that scoring is part of the distribution creation,
> not part of package installation. I should always be allowed to install a
> package with a bad score, even if it is a worse score than the default package
> it would replace. For example, I could fetch such a package from the package
> pool to override a bug in the optimization or something alike. 
> 
> 
> Complexity
> ==========
> 
> I think my concept is rather complete, at least it is not obvious to me which
> weird combination of architecture dependency is not covered by it. But is it
> actually too complex? Is it overkill?
> 
> I think not, and this has two reasons:
> 
> 1. The main complexity is in the distribution creation, which is completely
> hidden from the user. It will happen at the main repository of the software
> distribution. Users will continue to get a i386 linux distribution, or a
> powerpc distribution of the Hurd, in short: there will be distributions
> created for the config.guess system types as we do now. What we gain back
> is a VERY simple package installation tool which is not any longer concerned
> about scoring or similar, but merely a dependency checker.
> 
> 2. The most difficult part seems to be the scoring. But this is only
> complicated if you want to implement a general catch-all solution.
> I think the number of cases were scoring actually happens is very small,
> and can be covered by some simple rules.
> 
> The rest is really only organization of the packages that are uploaded and
> installed in the distribution.
> 
> Determining if a package needs to be recompiled
> ===============================================
> 
> Consider the following situation: System B emulates system A completely, but
> has additional features, which software C can use.
> 
> If C is compiled for A, the resulting binary can run on B, but when C is
> recompiled for B, it will make use of the special features provided by
> system B.
> 
> In reality, most packages adopt themselve at run time or are conflicting, so
> the case above should occur rather seldom. In this case, a feature list can
> be added to the source package, which contains a hint for the builder
> that if compiled for system B, the package will offer further features.
> 
> I have not worked out the details for this, mostly because this case occurs
> very rarely and any agreement on the feature tag that offers the above
> distinction will fit.




-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Mar  1 12:46:46 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA23452;
	Wed, 1 Mar 2000 12:46:40 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA01729;
	Wed, 1 Mar 2000 12:46:40 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA26294;
	Wed, 1 Mar 2000 12:46:40 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA31702;
	Wed, 1 Mar 2000 12:46:37 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA31684
	for packaging-list; Wed, 1 Mar 2000 12:46:33 -0500
Resent-Date: Wed, 1 Mar 2000 12:46:33 -0500
Resent-Message-Id: <200003011746.MAA31684@rpmfind.net>
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA31675
	for <packaging@rufus.w3.org>; Wed, 1 Mar 2000 12:46:29 -0500
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian 8.9.3-6) id SAA05491
	for packaging@rufus.w3.org; Wed, 1 Mar 2000 18:46:28 +0100
Date: Wed, 1 Mar 2000 18:46:28 +0100
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] multi-arch & OS handling
Message-ID: <20000301184628.A5333@liacs.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000301140555.A10467@mors.net> <20000301121900.O7795@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-md5;
	protocol="application/pgp-signature"; boundary="i0/AhcQY5QxfSsSZ"
User-Agent: Mutt/1.0.1i
In-Reply-To: <20000301121900.O7795@devserv.devel.redhat.com>; from jbj@redhat.com on Wed, Mar 01, 2000 at 12:19:00PM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1587
Lines: 52



--i0/AhcQY5QxfSsSZ
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> The simple example is handled by augmenting the packagemanager configurat=
ion
> with RE's for platforms the packagemanager is willing to "accept"
> (read: attempt to install) that are added when the emulator is installed.

No, since the package manager has to know that in advance so it can decide =
it
needs to install the emulator. Otherwise the user will still have to manual=
ly
install the emulator before being able to use hte packages.

> BTW, the package contains a config.guess output string, not a regular
> expression, to identify the platform for which the package is intended.

Right.

(I'll comment on the rest later, I'm desperately trying to get everything s=
ort
of sorted out on time :)

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |


--i0/AhcQY5QxfSsSZ
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBOL1XdKjZR/ntlUftAQHgPQL/TuJzf2xb6gd+UW5tpCjHrFy6ZRO89ghg
bnOd7IQ2Wj1g91JR2p+0x9tcu39IZWIrWSX8le4XwUT7fTRM5EO/HtqMq1Q++Upk
wK2kRUQXn8i5Ha7B6ylOg5t1QJCfx2zC
=Sxo0
-----END PGP SIGNATURE-----

--i0/AhcQY5QxfSsSZ--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Mar  1 13:00:26 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id NAA24605;
	Wed, 1 Mar 2000 13:00:25 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id NAA04854;
	Wed, 1 Mar 2000 13:00:25 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id NAA27321;
	Wed, 1 Mar 2000 13:00:25 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA00954;
	Wed, 1 Mar 2000 13:00:22 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA00938
	for packaging-list; Wed, 1 Mar 2000 13:00:18 -0500
Resent-Date: Wed, 1 Mar 2000 13:00:18 -0500
Resent-Message-Id: <200003011800.NAA00938@rpmfind.net>
Received: from devserv.devel.redhat.com (devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA00925
	for <packaging@rufus.w3.org>; Wed, 1 Mar 2000 13:00:15 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id NAA24571
	for packaging@rufus.w3.org; Wed, 1 Mar 2000 13:00:15 -0500
Date: Wed, 1 Mar 2000 13:00:14 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] multi-arch & OS handling
Message-ID: <20000301130014.P7795@devserv.devel.redhat.com>
References: <20000301140555.A10467@mors.net> <20000301121900.O7795@devserv.devel.redhat.com> <20000301184628.A5333@liacs.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000301184628.A5333@liacs.nl>; from wichert@soil.nl on Wed, Mar 01, 2000 at 06:46:28PM +0100
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 918
Lines: 28


On Wed, Mar 01, 2000 at 06:46:28PM +0100, Wichert Akkerman wrote:
> 
> No, since the package manager has to know that in advance so it can decide it
> needs to install the emulator. Otherwise the user will still have to manually
> install the emulator before being able to use hte packages.
> 

In my mind, the decision to install the emulator (because it's required)
is handled by resolving metadata dependencies, while the decision to download
a package or to attempt to install an i586-*-* package rather than a i386-*-*
package is handled by the wrapper hint. That's the crux of the mattter.

> (I'll comment on the rest later, I'm desperately trying to get everything sort
> of sorted out on time :)
> 

(grin)

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu Mar  2 06:13:00 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id GAA20547;
	Thu, 2 Mar 2000 06:12:59 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id GAA29612;
	Thu, 2 Mar 2000 06:12:59 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id GAA22948;
	Thu, 2 Mar 2000 06:12:59 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id GAA02533;
	Thu, 2 Mar 2000 06:12:55 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id GAA02522
	for packaging-list; Thu, 2 Mar 2000 06:12:51 -0500
Resent-Date: Thu, 2 Mar 2000 06:12:51 -0500
Resent-Message-Id: <200003021112.GAA02522@rpmfind.net>
Received: from soong.cistron.net (postfix@soong.cistron.net [195.64.68.35])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id GAA02516
	for <packaging@rufus.w3.org>; Thu, 2 Mar 2000 06:12:46 -0500
Received: from lightning.mors.net (wichert.cistron.nl [195.64.66.141])
	by soong.cistron.net (Postfix) with ESMTP id 0271A21069
	for <packaging@rufus.w3.org>; Thu,  2 Mar 2000 12:12:44 +0100 (CET)
Received: (from wichert@localhost)
	by lightning.mors.net (8.9.3/8.9.3/Debian 8.9.3-6) id LAA15435
	for packaging@rufus.w3.org; Thu, 2 Mar 2000 11:52:29 +0100
Date: Thu, 2 Mar 2000 11:52:29 +0100
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: [packaging] name..
Message-ID: <20000302115229.A15426@mors.net>
Mail-Followup-To: packaging@rufus.w3.org
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="Qxx1br4bt0+wmkIi"
User-Agent: Mutt/1.0.1i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 954
Lines: 34



--Qxx1br4bt0+wmkIi
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable


Did it occur to anyone else that we need a name for this new
format? Right now it's just The Unnamed Format :)

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--Qxx1br4bt0+wmkIi
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAji+R+0ACgkQPLiSUC+jvC2q3gCeKm62CfixRcVwj+dnk0KfIXAE
H04AoJI/5rNvZq0fEbeS3bHYRh8KeOOG
=BZnJ
-----END PGP SIGNATURE-----

--Qxx1br4bt0+wmkIi--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri Mar 24 14:13:17 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id OAA28755;
	Fri, 24 Mar 2000 14:13:16 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id OAA26446;
	Fri, 24 Mar 2000 14:13:14 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id OAA24569;
	Fri, 24 Mar 2000 14:13:14 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id OAA12600;
	Fri, 24 Mar 2000 14:12:53 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id OAA12532
	for packaging-list; Fri, 24 Mar 2000 14:12:47 -0500
Resent-Date: Fri, 24 Mar 2000 14:12:47 -0500
Resent-Message-Id: <200003241912.OAA12532@rpmfind.net>
Received: from soong.cistron.net (postfix@soong.cistron.net [195.64.68.35])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id OAA12489
	for <packaging@rufus.w3.org>; Fri, 24 Mar 2000 14:12:41 -0500
Received: from lightning.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by soong.cistron.net (Postfix) with ESMTP id 66B552102D
	for <packaging@rufus.w3.org>; Fri, 24 Mar 2000 20:12:30 +0100 (CET)
Received: (from wichert@localhost)
	by lightning.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id TAA13588
	for packaging@rufus.w3.org; Fri, 24 Mar 2000 19:59:50 +0100
Date: Fri, 24 Mar 2000 19:59:49 +0100
From: Wichert Akkerman <wichert@cistron.nl>
To: Packaging list <packaging@rufus.w3.org>
Subject: [packaging] Dependency specs
Message-ID: <20000324195949.A13563@mors.wiggy.net>
Mail-Followup-To: Packaging list <packaging@rufus.w3.org>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="J/dobhs11T7y2rNN"
User-Agent: Mutt/1.0.1i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1239
Lines: 40



--J/dobhs11T7y2rNN
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable


Jeff, did you write down somewhere what we decided on syntax for
relations? I kind of forgot to write that down somewhere and can't
remember what exactly we came up with :(.

I'm updating the text again this weekend btw, as well as writing
an article on it that is scheduled to be printed in Linux Magazine
in nobody objects. I'll post it here so you all can flame it to=20
pieces/comment on it.

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--J/dobhs11T7y2rNN
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjjbuyUACgkQPLiSUC+jvC27wQCeKSYW4OAd4z3w62kYWrPJXchJ
XykAmwdu08vVxXTJ5zhexlFbatsNGS9M
=xEz+
-----END PGP SIGNATURE-----

--J/dobhs11T7y2rNN--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri Mar 24 14:42:31 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id OAA30721;
	Fri, 24 Mar 2000 14:42:30 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id OAA32575;
	Fri, 24 Mar 2000 14:42:30 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id OAA26709;
	Fri, 24 Mar 2000 14:42:30 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id OAA22919;
	Fri, 24 Mar 2000 14:42:26 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id OAA22906
	for packaging-list; Fri, 24 Mar 2000 14:42:22 -0500
Resent-Date: Fri, 24 Mar 2000 14:42:22 -0500
Resent-Message-Id: <200003241942.OAA22906@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id OAA22899
	for <packaging@rufus.w3.org>; Fri, 24 Mar 2000 14:42:18 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id OAA30716
	for packaging@rufus.w3.org; Fri, 24 Mar 2000 14:42:18 -0500
Date: Fri, 24 Mar 2000 14:42:18 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000324144218.K24114@devserv.devel.redhat.com>
References: <20000324195949.A13563@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000324195949.A13563@mors.wiggy.net>; from wichert@cistron.nl on Fri, Mar 24, 2000 at 07:59:49PM +0100
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1039
Lines: 33


On Fri, Mar 24, 2000 at 07:59:49PM +0100, Wichert Akkerman wrote:
> 
> Jeff, did you write down somewhere what we decided on syntax for
> relations? I kind of forgot to write that down somewhere and can't
> remember what exactly we came up with :(.
> 

"Relations" are dependencies? Something like

    Requires: <name> [<logicalop> [<epoch>:]<version>[-<release>]] ...

with alternation '||' and parentheses in the usual way?
RPM will also have file dependencies in private data ...

> I'm updating the text again this weekend btw, as well as writing
> an article on it that is scheduled to be printed in Linux Magazine
> in nobody objects. I'll post it here so you all can flame it to 
> pieces/comment on it.
> 

OK. I'm in last stages of db1 -> db2 -> db3 conversions, and example XML header
will bubble to the top of the list soon.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat Mar 25 07:19:19 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id HAA02874;
	Sat, 25 Mar 2000 07:19:18 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id HAA05358;
	Sat, 25 Mar 2000 07:19:17 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id HAA11796;
	Sat, 25 Mar 2000 07:19:17 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id HAA15964;
	Sat, 25 Mar 2000 07:19:12 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id HAA15951
	for packaging-list; Sat, 25 Mar 2000 07:19:09 -0500
Resent-Date: Sat, 25 Mar 2000 07:19:09 -0500
Resent-Message-Id: <200003251219.HAA15951@rpmfind.net>
Received: from soong.cistron.net (postfix@soong.cistron.net [195.64.68.35])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id HAA15947
	for <packaging@rufus.w3.org>; Sat, 25 Mar 2000 07:19:04 -0500
Received: from lightning.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by soong.cistron.net (Postfix) with ESMTP id C139321014
	for <packaging@rufus.w3.org>; Sat, 25 Mar 2000 13:19:02 +0100 (CET)
Received: (from wichert@localhost)
	by lightning.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id MAA04536
	for packaging@rufus.w3.org; Sat, 25 Mar 2000 12:53:57 +0100
Date: Sat, 25 Mar 2000 12:53:57 +0100
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000325125357.C4449@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000324195949.A13563@mors.wiggy.net> <20000324144218.K24114@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="+nBD6E3TurpgldQp"
User-Agent: Mutt/1.0.1i
In-Reply-To: <20000324144218.K24114@devserv.devel.redhat.com>; from jbj@redhat.com on Fri, Mar 24, 2000 at 02:42:18PM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2234
Lines: 69



--+nBD6E3TurpgldQp
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> "Relations" are dependencies? Something like
>=20
>     Requires: <name> [<logicalop> [<epoch>:]<version>[-<release>]] ...

okay, to make it somewhat formal:

relation: name [logicalop fullversion]
name: [a-z][a-z0-9-]*
logicalop: <=3D | << | =3D=3D | >> | >=3D
fullversion: [epoch:]version[-version]
epoch: [0-9]+
version: [0-9A-Za-z.]+

> with alternation '||' and parentheses in the usual way?

Parentheses in `the usual way' differ for dpkg and rpm iirc, dpkg puts
the version-restriction in parentheses (so you get libc6 (>=3D 2.1-1) ).
Options are seperate by a single |. This should demonstrate it nicely:

Recommends: libaudiofile0, libesd0 (>=3D 0.2.16) | libesd-alsa0 (>=3D 0.2.1=
6), libgl1, libmikmod2

(taken from xmms)

> RPM will also have file dependencies in private data ...

I thought we decided to put those in the common section? I'ld like to
be able to support those as well without having to go into the RH
private data. Debian won't make packages that have those, but I don't
see why dpkg can't honour them.

> OK. I'm in last stages of db1 -> db2 -> db3 conversions, and example
> XML header will bubble to the top of the list soon.

Nice. I'm playing a bit with designs for a reimplemntation of dpkg and
figuring out how to do different things, as well as starting on a couple
of simple tools to build packages in the new format.
=20
Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--+nBD6E3TurpgldQp
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjjcqNUACgkQPLiSUC+jvC07ywCghBTuLYN5wHx2rnc/IM8kkH70
MHgAnifzpE4iQFadroKS5BWvsdD3kQbZ
=kvBp
-----END PGP SIGNATURE-----

--+nBD6E3TurpgldQp--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat Mar 25 09:07:44 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id JAA05239;
	Sat, 25 Mar 2000 09:07:43 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id JAA11854;
	Sat, 25 Mar 2000 09:07:43 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id JAA17725;
	Sat, 25 Mar 2000 09:07:42 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id JAA01688;
	Sat, 25 Mar 2000 09:07:39 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id JAA01679
	for packaging-list; Sat, 25 Mar 2000 09:07:35 -0500
Resent-Date: Sat, 25 Mar 2000 09:07:35 -0500
Resent-Message-Id: <200003251407.JAA01679@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id JAA01675
	for <packaging@rufus.w3.org>; Sat, 25 Mar 2000 09:07:32 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id JAA05224
	for packaging@rufus.w3.org; Sat, 25 Mar 2000 09:07:32 -0500
Date: Sat, 25 Mar 2000 09:07:32 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000325090732.N24114@devserv.devel.redhat.com>
References: <20000324195949.A13563@mors.wiggy.net> <20000324144218.K24114@devserv.devel.redhat.com> <20000325125357.C4449@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000325125357.C4449@mors.wiggy.net>; from wichert@cistron.nl on Sat, Mar 25, 2000 at 12:53:57PM +0100
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 3325
Lines: 106


On Sat, Mar 25, 2000 at 12:53:57PM +0100, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > "Relations" are dependencies? Something like
> > 
> >     Requires: <name> [<logicalop> [<epoch>:]<version>[-<release>]] ...
> 
> okay, to make it somewhat formal:
> 
> relation: name [logicalop fullversion]
> name: [a-z][a-z0-9-]*

RPM permits any character but NUL here.
There are packages like 9wm that start with [0-9].
I prefer an explicit set something like above, however, probably need '_'.

Need usual whitespace definition.  Commas as whitespace?

> logicalop: <= | << | == | >> | >=

Um, I suppose we're gonna need all of
	=<	<=
	<<	<
	=	==
	>>	>
	=>	>=
		!=
	|	||
	&	&&
I prefer the right hand variants, but don't really care, as all of the above
can be easily parsed with a look ahead.

> fullversion: [epoch:]version[-version]

Can we call the 2nd version a release to distinguish? Otherwise, can
we s/fullversion/???/ and focus on the '???' name of the epoch-version-release
tuple as a single entity (my jaw gets tired saying epoch-version-release :-)?
Possibly all of the above?

> epoch: [0-9]+

Is there ever going to be a need to generalize epoch to [0-9A-Za-z.]

> version: [0-9A-Za-z.]+
> 

Rpm uses [^-] here. I'd like that to be more explicit.

> > with alternation '||' and parentheses in the usual way?
> 

Sorry for imprecision.

> Parentheses in `the usual way' differ for dpkg and rpm iirc, dpkg puts
> the version-restriction in parentheses (so you get libc6 (>= 2.1-1) ).
> Options are seperate by a single |. This should demonstrate it nicely:
> 
> Recommends: libaudiofile0, libesd0 (>= 0.2.16) | libesd-alsa0 (>= 0.2.16), libgl1, libmikmod2
> 
> (taken from xmms)
> 

Can we use parens for expressions? Something like

Recommends: libaudiofile0 (libesd0 >= 0.2.16) | libesd-alsa0 >= 0.2.16), libgl1, libmikmod2

Or is that what the comma is demarcating?

> > RPM will also have file dependencies in private data ...
> 
> I thought we decided to put those in the common section? I'ld like to
> be able to support those as well without having to go into the RH
> private data. Debian won't make packages that have those, but I don't
> see why dpkg can't honour them.
> 

Sorry, I thought that you had serious reservations about the need
for file dependencies, so I was anticipating haveing to hide those
in rpm-private data. The more we have in common, the better AFAIAC.
(There's still going to be a need for rpm-private and dpkg-private
dependencies because of the different environments however).

> > OK. I'm in last stages of db1 -> db2 -> db3 conversions, and example
> > XML header will bubble to the top of the list soon.
> 
> Nice. I'm playing a bit with designs for a reimplemntation of dpkg and
> figuring out how to do different things, as well as starting on a couple
> of simple tools to build packages in the new format.
>  

Payloads are all combos of bzip2|gzip tar|cpio|ar[|xml for metadata]?

We probably need to explicitly include the OpenPGP encoding to detect
detached signature types as well.

It would be nice to have common C API's for package component handling.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat Mar 25 09:23:58 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id JAA05906;
	Sat, 25 Mar 2000 09:23:57 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id JAA13345;
	Sat, 25 Mar 2000 09:23:56 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id JAA18705;
	Sat, 25 Mar 2000 09:23:56 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id JAA02669;
	Sat, 25 Mar 2000 09:23:53 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id JAA02648
	for packaging-list; Sat, 25 Mar 2000 09:23:50 -0500
Resent-Date: Sat, 25 Mar 2000 09:23:50 -0500
Resent-Message-Id: <200003251423.JAA02648@rpmfind.net>
Received: from mercury.devel.redhat.com (ewt-1.dsl.speakeasy.net [216.254.21.144])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id JAA02645
	for <packaging@rufus.w3.org>; Sat, 25 Mar 2000 09:23:46 -0500
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id JAA11225
	for <packaging@rufus.w3.org>; Sat, 25 Mar 2000 09:22:40 -0500
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Sat, 25 Mar 2000 09:22:40 -0500 (EST)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
In-Reply-To: <20000325090732.N24114@devserv.devel.redhat.com>
Message-ID: <Pine.LNX.4.21.0003250921060.11220-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 863
Lines: 25


On Sat, 25 Mar 2000, Jeff Johnson wrote:

> > epoch: [0-9]+
> 
> Is there ever going to be a need to generalize epoch to [0-9A-Za-z.]

If you do that, you'll need to have Epoch of epoch to handle amibguities
(just like we needed epoch to handle odd release numbering).

> Payloads are all combos of bzip2|gzip tar|cpio|ar[|xml for metadata]?

Ick! Can't we narrow that down somewhat? Why do we need tar and cpio,
for instance?

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat Mar 25 09:44:24 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id JAA06635;
	Sat, 25 Mar 2000 09:44:23 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id JAA14848;
	Sat, 25 Mar 2000 09:44:23 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id JAA19880;
	Sat, 25 Mar 2000 09:44:22 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id JAA04052;
	Sat, 25 Mar 2000 09:44:19 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id JAA04043
	for packaging-list; Sat, 25 Mar 2000 09:44:16 -0500
Resent-Date: Sat, 25 Mar 2000 09:44:16 -0500
Resent-Message-Id: <200003251444.JAA04043@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id JAA04039
	for <packaging@rufus.w3.org>; Sat, 25 Mar 2000 09:44:14 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id JAA06626
	for packaging@rufus.w3.org; Sat, 25 Mar 2000 09:44:13 -0500
Date: Sat, 25 Mar 2000 09:44:13 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000325094413.P24114@devserv.devel.redhat.com>
References: <20000325090732.N24114@devserv.devel.redhat.com> <Pine.LNX.4.21.0003250921060.11220-100000@mercury.devel.redhat.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <Pine.LNX.4.21.0003250921060.11220-100000@mercury.devel.redhat.com>; from ewt@redhat.com on Sat, Mar 25, 2000 at 09:22:40AM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1617
Lines: 44


On Sat, Mar 25, 2000 at 09:22:40AM -0500, Erik Troan wrote:
> 
> On Sat, 25 Mar 2000, Jeff Johnson wrote:
> 
> > > epoch: [0-9]+
> > 
> > Is there ever going to be a need to generalize epoch to [0-9A-Za-z.]
> 
> If you do that, you'll need to have Epoch of epoch to handle amibguities
> (just like we needed epoch to handle odd release numbering).
> 

Maybe. But then epoch is just Version of version-release anyways :-)
I was just suggesting the format should be a string, with usual segmented
string compare, rather than an int, precedence and algorithm of compares
to remain as is.

> > Payloads are all combos of bzip2|gzip tar|cpio|ar[|xml for metadata]?
> 
> Ick! Can't we narrow that down somewhat? Why do we need tar and cpio,
> for instance?
> 

Presumably you mean both cpio and tar, as one or the other is needed IMHO to
explicitly clarify the difference between "wrapper" and "payload" by
rewrapping the payload. I believe that there will be benefits when we try
to invent packages with multiple headers/payloads, and I believe that
incremenatl packaging will be easier. But, yes, in principle, the payload
contents could be dumped into the ar (or tar, or cpio, or even xml) wrapper.

Supporting both bzip2|gzip cpio|tar avoids tedious non-substantial religious
wars, as the real design problems will be in the XML header and install state
machine. But, yes, only one of each is needed (and desirable).

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat Mar 25 15:45:25 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id PAA19789;
	Sat, 25 Mar 2000 15:45:24 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id PAA14242;
	Sat, 25 Mar 2000 15:45:24 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id PAA07981;
	Sat, 25 Mar 2000 15:45:23 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id PAA13526;
	Sat, 25 Mar 2000 15:45:16 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id PAA13468
	for packaging-list; Sat, 25 Mar 2000 15:45:02 -0500
Resent-Date: Sat, 25 Mar 2000 15:45:02 -0500
Resent-Message-Id: <200003252045.PAA13468@rpmfind.net>
Received: from voyager.cistron.net (root@voyager.cistron.net [195.64.68.34])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id PAA13441
	for <packaging@rufus.w3.org>; Sat, 25 Mar 2000 15:44:57 -0500
Received: from lightning.mors.wiggy.net (root@wichert.cistron.nl [195.64.66.141])
	by voyager.cistron.net (8.9.3/8.9.3/Debian/GNU) with ESMTP id VAA21687
	for <packaging@rufus.w3.org>; Sat, 25 Mar 2000 21:45:04 +0100
Received: (from wichert@localhost)
	by lightning.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id RAA07704
	for packaging@rufus.w3.org; Sat, 25 Mar 2000 17:26:59 +0100
Date: Sat, 25 Mar 2000 17:26:59 +0100
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000325172658.B7580@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000325090732.N24114@devserv.devel.redhat.com> <Pine.LNX.4.21.0003250921060.11220-100000@mercury.devel.redhat.com> <20000325094413.P24114@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="4SFOXa2GPu3tIq4H"
User-Agent: Mutt/1.0.1i
In-Reply-To: <20000325094413.P24114@devserv.devel.redhat.com>; from jbj@redhat.com on Sat, Mar 25, 2000 at 09:44:13AM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1316
Lines: 44



--4SFOXa2GPu3tIq4H
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> Presumably you mean both cpio and tar, as one or the other is needed IMHO=
 to
> explicitly clarify the difference between "wrapper" and "payload" by
> rewrapping the payload.

I don't follow that argument.

> I believe that there will be benefits when we try to invent packages
> with multiple headers/payloads, and I believe that incremenatl
> packaging will be easier.

I don't see at all how using both cpio and tar makes that simpler..

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--4SFOXa2GPu3tIq4H
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjjc6NIACgkQPLiSUC+jvC2XxQCeOC3x8xJcxf0fukwmTCMlEqdv
pi8An3+9iqrvbxIfFzw7B6iW9XxuQMQR
=YebS
-----END PGP SIGNATURE-----

--4SFOXa2GPu3tIq4H--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat Mar 25 15:46:29 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id PAA19943;
	Sat, 25 Mar 2000 15:46:28 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id PAA14536;
	Sat, 25 Mar 2000 15:46:28 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id PAA08225;
	Sat, 25 Mar 2000 15:46:28 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id PAA13543;
	Sat, 25 Mar 2000 15:45:23 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id PAA13503
	for packaging-list; Sat, 25 Mar 2000 15:45:11 -0500
Resent-Date: Sat, 25 Mar 2000 15:45:11 -0500
Resent-Message-Id: <200003252045.PAA13503@rpmfind.net>
Received: from voyager.cistron.net (root@voyager.cistron.net [195.64.68.34])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id PAA13447
	for <packaging@rufus.w3.org>; Sat, 25 Mar 2000 15:45:00 -0500
Received: from lightning.mors.wiggy.net (root@wichert.cistron.nl [195.64.66.141])
	by voyager.cistron.net (8.9.3/8.9.3/Debian/GNU) with ESMTP id VAA21737
	for <packaging@rufus.w3.org>; Sat, 25 Mar 2000 21:45:05 +0100
Received: (from wichert@localhost)
	by lightning.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id RAA07694
	for packaging@rufus.w3.org; Sat, 25 Mar 2000 17:25:52 +0100
Date: Sat, 25 Mar 2000 17:25:52 +0100
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000325172552.A7580@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000324195949.A13563@mors.wiggy.net> <20000324144218.K24114@devserv.devel.redhat.com> <20000325125357.C4449@mors.wiggy.net> <20000325090732.N24114@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="jRHKVT23PllUwdXP"
User-Agent: Mutt/1.0.1i
In-Reply-To: <20000325090732.N24114@devserv.devel.redhat.com>; from jbj@redhat.com on Sat, Mar 25, 2000 at 09:07:32AM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 4324
Lines: 126



--jRHKVT23PllUwdXP
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
>=20
> On Sat, Mar 25, 2000 at 12:53:57PM +0100, Wichert Akkerman wrote:
> > Previously Jeff Johnson wrote:
> > > "Relations" are dependencies? Something like
> > >=20
> > >     Requires: <name> [<logicalop> [<epoch>:]<version>[-<release>]] ...
> >=20
> > okay, to make it somewhat formal:
> >=20
> > relation: name [logicalop fullversion]
> > name: [a-z][a-z0-9-]*
>=20
> RPM permits any character but NUL here.
> There are packages like 9wm that start with [0-9].

I'm sure you don't allow space, tab or newline either :). I'ld prefer to
stick to [0-9a-z-]+ to keep things single, or people will start to do
weird things like put a ( or " in the name which might mess up a parser.

> Need usual whitespace definition.  Commas as whitespace?

dpkg does something like this:

   relation: rulelist
   rulelist: rulelist, rule | rule
   rule: optionlist
   optionlist: optionlist | optionlist \| option
   option: package | package (restriction)
   rescriction: logicalop version

Which means we seperate rules by commans and options by pipes, and
ignore whitespace. I'ld prefer to use this or a very similar scheme
and keep things as simple as possible.

> Um, I suppose we're gonna need all of
[.. snip snip ..]

Why? I'ld prefer to keep things simple and don't add silly complexities
as allowing multiple ways to write things.

> > fullversion: [epoch:]version[-version]
>=20
> Can we call the 2nd version a release to distinguish?

Sure, I just repeated the name since grammer-wise they are specified the
same. Lets call them epoch, version and releaseversion and the
combination of them the full version of package version.
=20
> Is there ever going to be a need to generalize epoch to [0-9A-Za-z.]

Perhaps, however epoch should be avoided as possible anyway so we might
as well restrict it to just numbers and keep things simple.

> > version: [0-9A-Za-z.]+
>=20
> Rpm uses [^-] here. I'd like that to be more explicit.

I'ld like to be able to use - in a versionnumber, people do that. And
it's not that difficult to handle, dpkg has always coped with that.

> Can we use parens for expressions? Something like

[.. snip snip ..]

> Or is that what the comma is demarcating?

Yes.

> Sorry, I thought that you had serious reservations about the need
> for file dependencies, so I was anticipating haveing to hide those
> in rpm-private data.

I'm not in favour of using them in Debian. The way I look at file
dependencies is that they are trick to make it possible to do a minimal
dependency check on systems that don't have everything in a package.=20

> Payloads are all combos of bzip2|gzip tar|cpio|ar[|xml for metadata]?

I'm sticking to tar+GNU longfilenames and gzip at the moment. I've been
thinking a bit about this and I think I'm not really happy with
supporting both tar and cpio in there. It makes converting packages to
the new format a bit simpler, but we have to convert things anyway so we
might as well be a bit stricter and make the endresult simpler and
cleaner.

> We probably need to explicitly include the OpenPGP encoding to detect
> detached signature types as well.

> It would be nice to have common C API's for package component handling.

I'm going for a loadable module that has functions for all operations,
that way it becomes trivial to support multiple formats at the cost of
a bit of extra complexity. Also makes it simpler to test the code
in pieces; I'ld like to have a bunch testsuite in the buildprocess.

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--jRHKVT23PllUwdXP
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjjc6JAACgkQPLiSUC+jvC0hvACdHF0GZCSw5K5JS2C7pYFIelCW
e3gAn1SwPaafw9DC9Hz2la9TfpC8hv9A
=/5C3
-----END PGP SIGNATURE-----

--jRHKVT23PllUwdXP--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Mar 26 11:51:20 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id LAA22323;
	Sun, 26 Mar 2000 11:51:19 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA12394;
	Sun, 26 Mar 2000 11:51:19 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA17168;
	Sun, 26 Mar 2000 11:51:18 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA17339;
	Sun, 26 Mar 2000 11:51:14 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA17327
	for packaging-list; Sun, 26 Mar 2000 11:51:11 -0500
Resent-Date: Sun, 26 Mar 2000 11:51:11 -0500
Resent-Message-Id: <200003261651.LAA17327@rpmfind.net>
Received: from mercury.devel.redhat.com (ewt-1.dsl.speakeasy.net [216.254.21.144])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA17320
	for <packaging@rufus.w3.org>; Sun, 26 Mar 2000 11:51:02 -0500
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id LAA17414
	for <packaging@rufus.w3.org>; Sun, 26 Mar 2000 11:49:42 -0500
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Sun, 26 Mar 2000 11:49:42 -0500 (EST)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
In-Reply-To: <20000325094413.P24114@devserv.devel.redhat.com>
Message-ID: <Pine.LNX.4.21.0003261147110.17411-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1372
Lines: 32


On Sat, 25 Mar 2000, Jeff Johnson wrote:

> Maybe. But then epoch is just Version of version-release anyways :-)
> I was just suggesting the format should be a string, with usual segmented
> string compare, rather than an int, precedence and algorithm of compares
> to remain as is.

My concern is that things like 6.1 vs 6.1a don't have a well-defined comparison
ordering. Why not let epoch stay well defined?

> Supporting both bzip2|gzip cpio|tar avoids tedious non-substantial religious
> wars, as the real design problems will be in the XML header and install state
> machine. But, yes, only one of each is needed (and desirable).

Avoid the religious wars by putting it up for a vote. As a great cpio advocate,
I don't care which is used. We only used cpio in RPM because /bin/tar has
some stupid features while /bin/cpio's stupid features were easier to work
around from perl.

Needless to say, time has passed that argument by.

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Mar 26 11:53:31 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id LAA22372;
	Sun, 26 Mar 2000 11:53:30 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA12614;
	Sun, 26 Mar 2000 11:53:29 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA17319;
	Sun, 26 Mar 2000 11:53:29 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA17510;
	Sun, 26 Mar 2000 11:53:26 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA17500
	for packaging-list; Sun, 26 Mar 2000 11:53:24 -0500
Resent-Date: Sun, 26 Mar 2000 11:53:24 -0500
Resent-Message-Id: <200003261653.LAA17500@rpmfind.net>
Received: from mercury.devel.redhat.com (ewt-1.dsl.speakeasy.net [216.254.21.144])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA17494
	for <packaging@rufus.w3.org>; Sun, 26 Mar 2000 11:53:14 -0500
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id LAA17421
	for <packaging@rufus.w3.org>; Sun, 26 Mar 2000 11:51:59 -0500
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Sun, 26 Mar 2000 11:51:59 -0500 (EST)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
In-Reply-To: <20000325172552.A7580@mors.wiggy.net>
Message-ID: <Pine.LNX.4.21.0003261150220.17411-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1124
Lines: 26


On Sat, 25 Mar 2000, Wichert Akkerman wrote:

> I'ld like to be able to use - in a versionnumber, people do that. And
> it's not that difficult to handle, dpkg has always coped with that.

How do you disambuate the version/release? I.e., is 1-2-3 version 1-2, release
3, or version 1, release 2-3. I'd prefer something totally unambiguous, and
I don't see how you can parse version's with - cleanly.

> I'm not in favour of using them in Debian. The way I look at file
> dependencies is that they are trick to make it possible to do a minimal
> dependency check on systems that don't have everything in a package. 

The only other advantage is they let binaries move more easily <shrug>.

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Mar 26 12:03:20 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA22755;
	Sun, 26 Mar 2000 12:03:19 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA14127;
	Sun, 26 Mar 2000 12:03:18 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA17998;
	Sun, 26 Mar 2000 12:03:18 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA18301;
	Sun, 26 Mar 2000 12:03:15 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA18288
	for packaging-list; Sun, 26 Mar 2000 12:03:11 -0500
Resent-Date: Sun, 26 Mar 2000 12:03:11 -0500
Resent-Message-Id: <200003261703.MAA18288@rpmfind.net>
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA18284
	for <packaging@rufus.w3.org>; Sun, 26 Mar 2000 12:03:06 -0500
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian 8.9.3-21) id TAA18390
	for packaging@rufus.w3.org; Sun, 26 Mar 2000 19:03:03 +0200
Date: Sun, 26 Mar 2000 19:03:03 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000326190303.A11878@liacs.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000325172552.A7580@mors.wiggy.net> <Pine.LNX.4.21.0003261150220.17411-100000@mercury.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-md5;
	protocol="application/pgp-signature"; boundary="J2SCkAp4GZ/dPZZf"
User-Agent: Mutt/1.0.1i
In-Reply-To: <Pine.LNX.4.21.0003261150220.17411-100000@mercury.devel.redhat.com>; from ewt@redhat.com on Sun, Mar 26, 2000 at 11:51:59AM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 7780
Lines: 176



--J2SCkAp4GZ/dPZZf
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Erik Troan wrote:
> How do you disambuate the version/release? I.e., is 1-2-3 version 1-2, re=
lease
> 3, or version 1, release 2-3. I'd prefer something totally unambiguous, a=
nd
> I don't see how you can parse version's with - cleanly.

release can't have a -, so everything after the last - is a release-number.
The way dpkg does version-comparison appears somewhat weird if you read its
description, but it works very well. I'll paste the description below.

Wichert.

5. Version numbering
--------------------

     Every package has a version number, in its `Version' control file
     field.

     `dpkg' imposes an ordering on version numbers, so that it can tell
     whether packages are being up- or downgraded and so that `dselect' can
     tell whether a package it finds available is newer than the one
     installed on the system.  The version number format has the most
     significant parts (as far as comparison is concerned) at the
     beginning.

     The version number format is:
     [<epoch/`:']<upstream-version>[`-/<debian-revision>].'>

     The three components here are:

     <epoch>
          This is a single unsigned integer, which should usually be small.
          It may be omitted, in which case zero is assumed.  If it is
          omitted then the <upstream-version> may not contain any colons.

          It is provided to allow mistakes in the version numbers of older
          versions of a package, and also a package's previous version
          numbering schemes, to be left behind.

          `dpkg' will not usually display the epoch unless it is essential
          (non-zero, or if the <upstream-version> contains a colon);
          `dselect' does not display epochs at all in the main part of the
          package selection display.

     <upstream-version>
          This is the main part of the version.  It is usually version
          number of the original (`upstream') package of which the `.deb'
          file has been made, if this is applicable.  Usually this will be
          in the same format as that specified by the upstream author(s);
          however, it may need to be reformatted to fit into `dpkg''s
          format and comparison scheme.

          The comparison behaviour of `dpkg' with respect to the
          <upstream-version> is described below.  The <upstream-version>
          portion of the version number is mandatory.

          The <upstream-version> may contain only alphanumerics and the
          characters `.'  `+' `-' `:' (full stop, plus, hyphen, colon) and
          should start with a digit.  If there is no <debian-revision> then
          hyphens are not allowed; if there is no <epoch> then colons are
          not allowed.

     <debian-revision>
          This part of the version represents the version of the
          modifications that were made to the package to make it a Debian
          binary package.  It is in the same format as the
          <upstream-version> and `dpkg' compares it in the same way.

          It is optional; if it isn't present then the <upstream-version>
          may not contain a hyphen.  This format represents the case where
          a piece of software was written specifically to be turned into a
          Debian binary package, and so there is only one `debianization'
          of it and therefore no revision indication is required.

          It is conventional to restart the <debian-revision> at `1' each
          time the <upstream-version> is increased.
          `dpkg' will break the <upstream-version> and <debian-revision>
          apart at the last hyphen in the string.  The absence of a
          <debian-revision> compares earlier than the presence of one (but
          note that the <debian-revision> is the least significant part of
          the version number).

          The <debian-revision> may contain only alphanumerics and the
          characters `+' and `.'  (plus and full stop).

     The <upstream-version> and <debian-revision> parts are compared by
     `dpkg' using the same algorithm:

     The strings are compared from left to right.

     First the initial part of each string consisting entirely of non-digit
     characters is determined.  These two parts (one of which may be empty)
     are compared lexically.  If a difference is found it is returned.  The
     lexical comparison is a comparison of ASCII values modified so that
     all the letters sort earlier than all the non-letters.

     Then the initial part of the remainder of each string which consists
     entirely of digit characters is determined.  The numerical values of
     these two parts are compared, and any difference found is returned as
     the result of the comparison.  For these purposes an empty string
     (which can only occur at the end of one or both version strings being
     compared) counts as zero.

     These two steps are repeated (chopping initial non-digit strings and
     initial digit strings off from the start) until a difference is found
     or both strings are exhausted.

     Note that the purpose of epochs is to allow us to leave behind
     mistakes in version numbering, and to cope with situations where the
     version numbering changes.  It is _not_ there to cope with version
     numbers containing strings of letters which `dpkg' cannot interpret
     (such as `ALPHA' or `pre-'), or with silly orderings (the author of
     this manual has heard of a package whose versions went `1.1', `1.2',
     `1.3', `1', `2.1', `2.2', `2' and so forth).

     If an upstream package has problematic version numbers they should be
     converted to a sane form for use in the `Version' field.

     If you need to compare version numbers in a script, you may use `dpkg
     --compare-versions ...'.  Type `dpkg --help' --> --for details on
     arguments.

5.1. Version numbers based on dates
-----------------------------------

     In general, Debian packages should use the same version numbers as the
     upstream sources.

     However, in some cases where the upstream version number is based on a
     date (e.g., a development `snapshot' release) dpkg cannot handle these
     version numbers currently, without epochs.  For example, dpkg will
     consider `96May01' to be greater than `96Dec24'.

     To prevent having to use epochs for every new upstream version, the
     version number should be changed to the following format in such
     cases: `19960501', `19961224'.  It is up to the maintainer whether
     he/she wants to bother the upstream maintainer to change the version
     numbers upstream, too.

     Note, that other version formats based on dates which are parsed
     correctly by dpkg should _not_ be changed.

     Native Debian packages (i.e., packages which have been written
     especially for Debian) whose version numbers include dates should
     always use the `YYYYMMDD' format.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |


--J2SCkAp4GZ/dPZZf
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBON5Cx6jZR/ntlUftAQEuOgL/RogyjZTihBN4HzyWc5xjvljSfDOcSPuK
U9aKOSxYJLGEI7I9dcFpFbK5YRYX7T1k+92H7Hq8sKgqov+DrJEdugOOIQdd4BQb
Da0H7yH3paS3cbZzTRyLpP1T6zyAAft8
=qr+v
-----END PGP SIGNATURE-----

--J2SCkAp4GZ/dPZZf--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Mar 26 16:03:44 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA29845;
	Sun, 26 Mar 2000 16:03:43 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA03004;
	Sun, 26 Mar 2000 16:03:43 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA31828;
	Sun, 26 Mar 2000 16:03:42 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA15404;
	Sun, 26 Mar 2000 16:03:34 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA15390
	for packaging-list; Sun, 26 Mar 2000 16:03:30 -0500
Resent-Date: Sun, 26 Mar 2000 16:03:30 -0500
Resent-Message-Id: <200003262103.QAA15390@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA15378
	for <packaging@rufus.w3.org>; Sun, 26 Mar 2000 16:03:25 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id QAA29837
	for packaging@rufus.w3.org; Sun, 26 Mar 2000 16:03:24 -0500
Date: Sun, 26 Mar 2000 16:03:24 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000326160324.U24114@devserv.devel.redhat.com>
References: <20000325172552.A7580@mors.wiggy.net> <Pine.LNX.4.21.0003261150220.17411-100000@mercury.devel.redhat.com> <20000326190303.A11878@liacs.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000326190303.A11878@liacs.nl>; from wichert@soil.nl on Sun, Mar 26, 2000 at 07:03:03PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1696
Lines: 41


On Sun, Mar 26, 2000 at 07:03:03PM +0200, Wichert Akkerman wrote:
> Previously Erik Troan wrote:
> > How do you disambuate the version/release? I.e., is 1-2-3 version 1-2, release
> > 3, or version 1, release 2-3. I'd prefer something totally unambiguous, and
> > I don't see how you can parse version's with - cleanly.
> 
> release can't have a -, so everything after the last - is a release-number.
> The way dpkg does version-comparison appears somewhat weird if you read its
> description, but it works very well. I'll paste the description below.
> 

And if release is optional in dependencies, the corollary is that version has
not '-' also, unless you add '/' sugar. I do not find '/' aesthetic, but
care only about parseability and legacy packaging.

Outside of packaging, version and release are used for file names. Permitting
'-' in version makes it impossible to guess the version without opening
the metadata, adding a '/' is obviously impossible. I might be convinced
to omit the release in the file name, but, if we are going that way, I'd say
it's time to leave the version and arch out as well, pushing the burden
of organizing packages onto the mirror and/or distro hierarchy. This is
probably a minority opinion of one person, me.

FWIW, the rule I tell rpm users is

	The last two '-' characters in the package file name are guaranteed
	to surround the version.

I say no '-' in either version or release, and an explicit set of charatcers
permitted in version and release.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Mar 26 16:34:26 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA30650;
	Sun, 26 Mar 2000 16:34:25 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA05646;
	Sun, 26 Mar 2000 16:34:25 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA01637;
	Sun, 26 Mar 2000 16:34:24 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA17878;
	Sun, 26 Mar 2000 16:34:19 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA17867
	for packaging-list; Sun, 26 Mar 2000 16:34:12 -0500
Resent-Date: Sun, 26 Mar 2000 16:34:12 -0500
Resent-Message-Id: <200003262134.QAA17867@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA17831
	for <packaging@rufus.w3.org>; Sun, 26 Mar 2000 16:33:58 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id QAA30628
	for packaging@rufus.w3.org; Sun, 26 Mar 2000 16:33:57 -0500
Date: Sun, 26 Mar 2000 16:33:57 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000326163357.V24114@devserv.devel.redhat.com>
References: <20000325094413.P24114@devserv.devel.redhat.com> <Pine.LNX.4.21.0003261147110.17411-100000@mercury.devel.redhat.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <Pine.LNX.4.21.0003261147110.17411-100000@mercury.devel.redhat.com>; from ewt@redhat.com on Sun, Mar 26, 2000 at 11:49:42AM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2323
Lines: 61


On Sun, Mar 26, 2000 at 11:49:42AM -0500, Erik Troan wrote:
> 
> On Sat, 25 Mar 2000, Jeff Johnson wrote:
> 
> > Maybe. But then epoch is just Version of version-release anyways :-)
> > I was just suggesting the format should be a string, with usual segmented
> > string compare, rather than an int, precedence and algorithm of compares
> > to remain as is.
> 
> My concern is that things like 6.1 vs 6.1a don't have a well-defined comparison
> ordering. Why not let epoch stay well defined?
> 

Fine by me. The only reason for suggesting was to have exactly the same
segmented string compare for each of epoch/version/release. If we're
ever going to have to generalize, now's the time, and the existing
numeric epoch fits quite nicely into segmented string compares.

> > Supporting both bzip2|gzip cpio|tar avoids tedious non-substantial religious
> > wars, as the real design problems will be in the XML header and install state
> > machine. But, yes, only one of each is needed (and desirable).
> 
> Avoid the religious wars by putting it up for a vote. As a great cpio advocate,
> I don't care which is used. We only used cpio in RPM because /bin/tar has
> some stupid features while /bin/cpio's stupid features were easier to work
> around from perl.
> 

As a great tar advocate, I'm disturbed that only cpio is able to reassemble
a payload preserving the original MD5 sum. Ar is a pure mystery, but if
it's good enough for libraries, it's good enough for wrappers and payloads.

I'd rather implement all of cpio/tar/ar in C than discuss the relative merits
of each ever again. In practice, I suspect that Debian will continue to use
tar, and RPM systems will continue to use cpio, and everone is going to ask
why we used ar. That eliminates the questions
	1) Dpkg users are not going to ask "Why tar?".
	2) RPM users are not going to ask "Why cpio?".
for a net gain of 2 fewer questions from the customer matrix

		dpkg	rpm
		----	---
	ar	???	???
	cpio	WHY?	ho-hum
	tar	ho-hum	WHY?

> Needless to say, time has passed that argument by.
> 

And those who forget their history are forced to relive it eternally :-).

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Mar 27 08:08:51 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id IAA31831;
	Mon, 27 Mar 2000 08:08:50 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id IAA01933;
	Mon, 27 Mar 2000 08:08:45 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id IAA27478;
	Mon, 27 Mar 2000 08:08:45 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id IAA30330;
	Mon, 27 Mar 2000 08:08:36 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id IAA30319
	for packaging-list; Mon, 27 Mar 2000 08:08:31 -0500
Resent-Date: Mon, 27 Mar 2000 08:08:31 -0500
Resent-Message-Id: <200003271308.IAA30319@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:root@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id IAA30313
	for <packaging@rufus.w3.org>; Mon, 27 Mar 2000 08:08:27 -0500
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id IAA18413
	for <packaging@rufus.w3.org>; Mon, 27 Mar 2000 08:07:49 -0500
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Mon, 27 Mar 2000 08:07:49 -0500 (EST)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
In-Reply-To: <20000326163357.V24114@devserv.devel.redhat.com>
Message-ID: <Pine.LNX.4.21.0003270807220.18410-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 924
Lines: 22


On Sun, 26 Mar 2000, Jeff Johnson wrote:

> I'd rather implement all of cpio/tar/ar in C than discuss the relative merits
> of each ever again. In practice, I suspect that Debian will continue to use
> tar, and RPM systems will continue to use cpio, and everone is going to ask
> why we used ar. That eliminates the questions
> 	1) Dpkg users are not going to ask "Why tar?".
> 	2) RPM users are not going to ask "Why cpio?".

I doubt many rpm users care what underlying payload it uses.

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Mar 27 08:11:59 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id IAA31946;
	Mon, 27 Mar 2000 08:11:58 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id IAA02285;
	Mon, 27 Mar 2000 08:11:58 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id IAA27630;
	Mon, 27 Mar 2000 08:11:57 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id IAA32261;
	Mon, 27 Mar 2000 08:11:52 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id IAA32199
	for packaging-list; Mon, 27 Mar 2000 08:11:48 -0500
Resent-Date: Mon, 27 Mar 2000 08:11:48 -0500
Resent-Message-Id: <200003271311.IAA32199@rpmfind.net>
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id IAA32140
	for <packaging@rufus.w3.org>; Mon, 27 Mar 2000 08:11:44 -0500
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian 8.9.3-21) id PAA24534
	for packaging@rufus.w3.org; Mon, 27 Mar 2000 15:11:42 +0200
Date: Mon, 27 Mar 2000 15:11:42 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000327151142.B24285@liacs.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000326163357.V24114@devserv.devel.redhat.com> <Pine.LNX.4.21.0003270807220.18410-100000@mercury.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-md5;
	protocol="application/pgp-signature"; boundary="PmA2V3Z32TCmWXqI"
User-Agent: Mutt/1.0.1i
In-Reply-To: <Pine.LNX.4.21.0003270807220.18410-100000@mercury.devel.redhat.com>; from ewt@redhat.com on Mon, Mar 27, 2000 at 08:07:49AM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1013
Lines: 37



--PmA2V3Z32TCmWXqI
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Erik Troan wrote:
> I doubt many rpm users care what underlying payload it uses.

I think we can safely assume we're the only ones who are going to
care.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |


--PmA2V3Z32TCmWXqI
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBON9eDqjZR/ntlUftAQE/NgMAngF0ltv/3pgybJEOopWzjCHvqpS+2Pl+
7dfcvPhOOapLA2gQD9iDt+o3w2kfERSJRFVxj+J1RjsmKdzoc9C8/fLNvRLz4IHA
LvcD3grL4boZpUGZ6uKz/+7rkloChC99
=7ePt
-----END PGP SIGNATURE-----

--PmA2V3Z32TCmWXqI--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Mar 27 10:43:02 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA08630;
	Mon, 27 Mar 2000 10:43:01 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA07002;
	Mon, 27 Mar 2000 10:43:00 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA08215;
	Mon, 27 Mar 2000 10:42:59 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA27886;
	Mon, 27 Mar 2000 10:42:00 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA27869
	for packaging-list; Mon, 27 Mar 2000 10:41:54 -0500
Resent-Date: Mon, 27 Mar 2000 10:41:54 -0500
Resent-Message-Id: <200003271541.KAA27869@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA27862
	for <packaging@rufus.w3.org>; Mon, 27 Mar 2000 10:41:47 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id KAA08561
	for packaging@rufus.w3.org; Mon, 27 Mar 2000 10:41:44 -0500
Date: Mon, 27 Mar 2000 10:41:44 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000327104144.B6771@devserv.devel.redhat.com>
References: <20000326163357.V24114@devserv.devel.redhat.com> <Pine.LNX.4.21.0003270807220.18410-100000@mercury.devel.redhat.com> <20000327151142.B24285@liacs.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000327151142.B24285@liacs.nl>; from wichert@soil.nl on Mon, Mar 27, 2000 at 03:11:42PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 874
Lines: 27


On Mon, Mar 27, 2000 at 03:11:42PM +0200, Wichert Akkerman wrote:
> Previously Erik Troan wrote:
> > I doubt many rpm users care what underlying payload it uses.
> 
> I think we can safely assume we're the only ones who are going to
> care.
> 

Not true. Rpm has a legacy use of cpio, and I will have to deal
with support for legacy cpio payloads for quite a while.

If we're going to reopen the cpio vs. tar issue, I'd still
like to be able to take a payload apart and reassemble without
having to update other information, like detached signatures or
MD5 sums. That can be achieved either by using cpio, or, I believe,
requiring an ordering for members in the tar ball.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Mar 27 10:46:21 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA08800;
	Mon, 27 Mar 2000 10:46:20 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA07849;
	Mon, 27 Mar 2000 10:46:16 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA08471;
	Mon, 27 Mar 2000 10:46:15 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA28353;
	Mon, 27 Mar 2000 10:46:01 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA28333
	for packaging-list; Mon, 27 Mar 2000 10:45:54 -0500
Resent-Date: Mon, 27 Mar 2000 10:45:54 -0500
Resent-Message-Id: <200003271545.KAA28333@rpmfind.net>
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA28323
	for <packaging@rufus.w3.org>; Mon, 27 Mar 2000 10:45:48 -0500
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian 8.9.3-21) id RAA25942
	for packaging@rufus.w3.org; Mon, 27 Mar 2000 17:45:44 +0200
Date: Mon, 27 Mar 2000 17:45:44 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000327174544.A25928@liacs.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000326163357.V24114@devserv.devel.redhat.com> <Pine.LNX.4.21.0003270807220.18410-100000@mercury.devel.redhat.com> <20000327151142.B24285@liacs.nl> <20000327104144.B6771@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-md5;
	protocol="application/pgp-signature"; boundary="1yeeQ81UyVL57Vl7"
User-Agent: Mutt/1.0.1i
In-Reply-To: <20000327104144.B6771@devserv.devel.redhat.com>; from jbj@redhat.com on Mon, Mar 27, 2000 at 10:41:44AM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1165
Lines: 39



--1yeeQ81UyVL57Vl7
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> Not true. Rpm has a legacy use of cpio, and I will have to deal
> with support for legacy cpio payloads for quite a while.

I've were changing formats, why do we have to care about the legacy
use of cpio, except for the fact that you can't remove the code to
handle that for a while?

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |


--1yeeQ81UyVL57Vl7
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBON+CKKjZR/ntlUftAQHuXwL+KHfyVcOVjvHtGmU9nCmhuxZT0u46yMkr
eNM+L1cb79crKsmJa7NYiS3m+kYLQND+s2A3HlgSWwTMJKoIpTRyXsYLEI0AIpCk
qY2RROqxEc75pz5wX2nnHDvCz/APoDpY
=qe2b
-----END PGP SIGNATURE-----

--1yeeQ81UyVL57Vl7--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Mar 27 10:47:11 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA08830;
	Mon, 27 Mar 2000 10:47:10 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA07985;
	Mon, 27 Mar 2000 10:47:10 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA08536;
	Mon, 27 Mar 2000 10:47:09 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA28444;
	Mon, 27 Mar 2000 10:46:34 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA27082
	for packaging-list; Mon, 27 Mar 2000 10:34:15 -0500
Resent-Date: Mon, 27 Mar 2000 10:34:15 -0500
Resent-Message-Id: <200003271534.KAA27082@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA27051
	for <packaging@rufus.w3.org>; Mon, 27 Mar 2000 10:34:01 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id KAA08112
	for packaging@rufus.w3.org; Mon, 27 Mar 2000 10:33:45 -0500
Date: Mon, 27 Mar 2000 10:33:45 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000327103345.A6771@devserv.devel.redhat.com>
References: <20000324195949.A13563@mors.wiggy.net> <20000324144218.K24114@devserv.devel.redhat.com> <20000325125357.C4449@mors.wiggy.net> <20000325090732.N24114@devserv.devel.redhat.com> <20000325172552.A7580@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000325172552.A7580@mors.wiggy.net>; from wichert@cistron.nl on Sat, Mar 25, 2000 at 05:25:52PM +0100
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1287
Lines: 43


On Sat, Mar 25, 2000 at 05:25:52PM +0100, Wichert Akkerman wrote:
> 
> Which means we seperate rules by commans and options by pipes, and
> ignore whitespace. I'ld prefer to use this or a very similar scheme
> and keep things as simple as possible.
> 
> > Um, I suppose we're gonna need all of
> [.. snip snip ..]
> 
> Why? I'ld prefer to keep things simple and don't add silly complexities
> as allowing multiple ways to write things.
> 

For better or worse, both dpkg and rpm have a legacy to deal with.
Personally, I'd like to deal with variants once in a parser, rather
than explain the changed (and reasons therof) syntax.

> 
> > Can we use parens for expressions? Something like
> 
> [.. snip snip ..]
> 
> > Or is that what the comma is demarcating?
> 
> Yes.
> 

Comma is white space for rpm. Personally, I find the dpkg relations
a little baroque and the use of comma a bit subtle. I would like to use
logical assertion-like syntax because that is easier for a packager (like me)
to grasp than commas separating a list of rules with implicit and/or
logic amongst the rules.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Mar 27 10:52:16 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA09119;
	Mon, 27 Mar 2000 10:52:14 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA09340;
	Mon, 27 Mar 2000 10:52:13 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA08898;
	Mon, 27 Mar 2000 10:52:12 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA29002;
	Mon, 27 Mar 2000 10:51:19 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA28991
	for packaging-list; Mon, 27 Mar 2000 10:51:15 -0500
Resent-Date: Mon, 27 Mar 2000 10:51:15 -0500
Resent-Message-Id: <200003271551.KAA28991@rpmfind.net>
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA28983
	for <packaging@rufus.w3.org>; Mon, 27 Mar 2000 10:51:09 -0500
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian 8.9.3-21) id RAA25995
	for packaging@rufus.w3.org; Mon, 27 Mar 2000 17:51:09 +0200
Date: Mon, 27 Mar 2000 17:51:09 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000327175109.C25928@liacs.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000324195949.A13563@mors.wiggy.net> <20000324144218.K24114@devserv.devel.redhat.com> <20000325125357.C4449@mors.wiggy.net> <20000325090732.N24114@devserv.devel.redhat.com> <20000325172552.A7580@mors.wiggy.net> <20000327103345.A6771@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-md5;
	protocol="application/pgp-signature"; boundary="DSayHWYpDlRfCAAQ"
User-Agent: Mutt/1.0.1i
In-Reply-To: <20000327103345.A6771@devserv.devel.redhat.com>; from jbj@redhat.com on Mon, Mar 27, 2000 at 10:33:45AM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1115
Lines: 38



--DSayHWYpDlRfCAAQ
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> For better or worse, both dpkg and rpm have a legacy to deal with.

No we don't, this is a different format so we can change the syntax.
The code that will parse this is different from the code that will parse
the deb-format in dpkg.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |


--DSayHWYpDlRfCAAQ
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia

iQB1AwUBON+DbajZR/ntlUftAQGv8AMAs8HZela4ZO37j0kt1NVUZSJDXMMAGnkj
9hzE0D0ZYAdYUJmexI4cViMgp1Mrv/2y0IRrb1FQBYd4sC4WoOh3On7+7Ye9526E
D8ISTH66ZhiBETIv1mwNGC/fQPz6uF/y
=v1EU
-----END PGP SIGNATURE-----

--DSayHWYpDlRfCAAQ--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Mar 27 13:47:11 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id NAA23271;
	Mon, 27 Mar 2000 13:47:11 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id NAA25470;
	Mon, 27 Mar 2000 13:47:10 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id NAA24493;
	Mon, 27 Mar 2000 13:47:04 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA21098;
	Mon, 27 Mar 2000 13:46:44 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA21081
	for packaging-list; Mon, 27 Mar 2000 13:46:37 -0500
Resent-Date: Mon, 27 Mar 2000 13:46:37 -0500
Resent-Message-Id: <200003271846.NAA21081@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA16977
	for <packaging@rufus.w3.org>; Mon, 27 Mar 2000 13:12:30 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id NAA20138
	for packaging@rufus.w3.org; Mon, 27 Mar 2000 13:12:26 -0500
Date: Mon, 27 Mar 2000 13:12:25 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000327131225.C6771@devserv.devel.redhat.com>
References: <20000326163357.V24114@devserv.devel.redhat.com> <Pine.LNX.4.21.0003270807220.18410-100000@mercury.devel.redhat.com> <20000327151142.B24285@liacs.nl> <20000327104144.B6771@devserv.devel.redhat.com> <20000327174544.A25928@liacs.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000327174544.A25928@liacs.nl>; from wichert@soil.nl on Mon, Mar 27, 2000 at 05:45:44PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 996
Lines: 30


On Mon, Mar 27, 2000 at 05:45:44PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > Not true. Rpm has a legacy use of cpio, and I will have to deal
> > with support for legacy cpio payloads for quite a while.
> 
> I've were changing formats, why do we have to care about the legacy
> use of cpio, except for the fact that you can't remove the code to
> handle that for a while?
> 

Because I have a logical disconnect in the circular argument:

	1) why do we need 2 wrapper formats?
	2) Ok, so let's just use tar, that's easy for dpkg and the new format.
	3) Ok, so rpm has to support 2 formats.

I also, for the reasons described previously, believe that a new
package format must support incremental assembly/disassembly, and
tar without constraints has not that property.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Mar 27 13:47:20 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id NAA23280;
	Mon, 27 Mar 2000 13:47:19 -0500
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id NAA25513;
	Mon, 27 Mar 2000 13:47:18 -0500
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id NAA24512;
	Mon, 27 Mar 2000 13:47:15 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA21092;
	Mon, 27 Mar 2000 13:46:39 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA21069
	for packaging-list; Mon, 27 Mar 2000 13:46:31 -0500
Resent-Date: Mon, 27 Mar 2000 13:46:31 -0500
Resent-Message-Id: <200003271846.NAA21069@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA17160
	for <packaging@rufus.w3.org>; Mon, 27 Mar 2000 13:14:10 -0500
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id NAA20293
	for packaging@rufus.w3.org; Mon, 27 Mar 2000 13:13:48 -0500
Date: Mon, 27 Mar 2000 13:13:48 -0500
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000327131348.D6771@devserv.devel.redhat.com>
References: <20000324195949.A13563@mors.wiggy.net> <20000324144218.K24114@devserv.devel.redhat.com> <20000325125357.C4449@mors.wiggy.net> <20000325090732.N24114@devserv.devel.redhat.com> <20000325172552.A7580@mors.wiggy.net> <20000327103345.A6771@devserv.devel.redhat.com> <20000327175109.C25928@liacs.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000327175109.C25928@liacs.nl>; from wichert@soil.nl on Mon, Mar 27, 2000 at 05:51:09PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 650
Lines: 22


On Mon, Mar 27, 2000 at 05:51:09PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > For better or worse, both dpkg and rpm have a legacy to deal with.
> 
> No we don't, this is a different format so we can change the syntax.
> The code that will parse this is different from the code that will parse
> the deb-format in dpkg.
> 

Red herring. The point was whether to use logical assertion-like
representations for dependencies.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Apr  2 12:08:23 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA32036;
	Sun, 2 Apr 2000 12:08:21 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA32391;
	Sun, 2 Apr 2000 12:08:20 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA13821;
	Sun, 2 Apr 2000 12:08:20 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA23653;
	Sun, 2 Apr 2000 12:07:56 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA23636
	for packaging-list; Sun, 2 Apr 2000 12:07:51 -0400
Resent-Date: Sun, 2 Apr 2000 12:07:51 -0400
Resent-Message-Id: <200004021607.MAA23636@rpmfind.net>
Received: from voyager.cistron.net (root@voyager.cistron.net [195.64.68.34])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA23623
	for <packaging@rufus.w3.org>; Sun, 2 Apr 2000 12:07:44 -0400
Received: from lightning.mors.wiggy.net (root@wichert.cistron.nl [195.64.66.141])
	by voyager.cistron.net (8.9.3/8.9.3/Debian/GNU) with ESMTP id SAA23264
	for <packaging@rufus.w3.org>; Sun, 2 Apr 2000 18:07:49 +0200
Received: (from wichert@localhost)
	by lightning.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id RAA13292
	for packaging@rufus.w3.org; Sun, 2 Apr 2000 17:53:43 +0200
Date: Sun, 2 Apr 2000 17:53:43 +0200
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000402175343.A13267@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000326163357.V24114@devserv.devel.redhat.com> <Pine.LNX.4.21.0003270807220.18410-100000@mercury.devel.redhat.com> <20000327151142.B24285@liacs.nl> <20000327104144.B6771@devserv.devel.redhat.com> <20000327174544.A25928@liacs.nl> <20000327131225.C6771@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="AqsLC8rIMeq19msA"
User-Agent: Mutt/1.0.1i
In-Reply-To: <20000327131225.C6771@devserv.devel.redhat.com>; from jbj@redhat.com on Mon, Mar 27, 2000 at 01:12:25PM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1908
Lines: 54



--AqsLC8rIMeq19msA
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> Because I have a logical disconnect in the circular argument:
>=20
> 	1) why do we need 2 wrapper formats?
> 	2) Ok, so let's just use tar, that's easy for dpkg and the new format.
> 	3) Ok, so rpm has to support 2 formats.

Okay, that's not true for me since the code to extract the new format is
different code and lives in a different executable; I expect to not have
to maintain that code a year or two from now and only worry about a
single format.

> I also, for the reasons described previously, believe that a new
> package format must support incremental assembly/disassembly, and
> tar without constraints has not that property.

Neither has cpio iirc (timestamps are the issue here), and I think we
already decided we wanted a format that supports a hierarchical
structure so we could use that at a later stage if decided.

I think we'll just need to decide now if we want to use only cpio or
only tar; personally I'm only familiar with tar so that has a slight
preference for me, but in the end if doesn't matter anyway.

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--AqsLC8rIMeq19msA
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjjnbQcACgkQPLiSUC+jvC1WBgCfWSeDglZHSo/ob24CAcu4xmvx
7TkAoJWFQYGWxMCil+n115ggqUDEoVfb
=ZW7v
-----END PGP SIGNATURE-----

--AqsLC8rIMeq19msA--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Apr  2 12:08:23 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA32038;
	Sun, 2 Apr 2000 12:08:21 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA32390;
	Sun, 2 Apr 2000 12:08:20 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA13822;
	Sun, 2 Apr 2000 12:08:20 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA23651;
	Sun, 2 Apr 2000 12:07:55 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA23630
	for packaging-list; Sun, 2 Apr 2000 12:07:49 -0400
Resent-Date: Sun, 2 Apr 2000 12:07:49 -0400
Resent-Message-Id: <200004021607.MAA23630@rpmfind.net>
Received: from soong.cistron.net (postfix@soong.cistron.net [195.64.68.35])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA23622
	for <packaging@rufus.w3.org>; Sun, 2 Apr 2000 12:07:44 -0400
Received: from lightning.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by soong.cistron.net (Postfix) with ESMTP id 129D121019
	for <packaging@rufus.w3.org>; Sun,  2 Apr 2000 18:07:41 +0200 (CEST)
Received: (from wichert@localhost)
	by lightning.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id RAA13308
	for packaging@rufus.w3.org; Sun, 2 Apr 2000 17:56:03 +0200
Date: Sun, 2 Apr 2000 17:56:03 +0200
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Dependency specs
Message-ID: <20000402175603.B13267@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000324195949.A13563@mors.wiggy.net> <20000324144218.K24114@devserv.devel.redhat.com> <20000325125357.C4449@mors.wiggy.net> <20000325090732.N24114@devserv.devel.redhat.com> <20000325172552.A7580@mors.wiggy.net> <20000327103345.A6771@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="VrqPEDrXMn8OVzN4"
User-Agent: Mutt/1.0.1i
In-Reply-To: <20000327103345.A6771@devserv.devel.redhat.com>; from jbj@redhat.com on Mon, Mar 27, 2000 at 10:33:45AM -0500
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1580
Lines: 47



--VrqPEDrXMn8OVzN4
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> For better or worse, both dpkg and rpm have a legacy to deal with.
> Personally, I'd like to deal with variants once in a parser, rather
> than explain the changed (and reasons therof) syntax.

You mean you want to have one parser to handle the different syntaxis?
>=20
> Comma is white space for rpm. Personally, I find the dpkg relations
> a little baroque and the use of comma a bit subtle. I would like to use
> logical assertion-like syntax because that is easier for a packager (like=
 me)
> to grasp than commas separating a list of rules with implicit and/or
> logic amongst the rules.

That's just because that is what we are used to, personally I find it
much more readable then the rpm syntax.

Wichert.

--=20
   ________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--VrqPEDrXMn8OVzN4
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjjnbZMACgkQPLiSUC+jvC2zbgCcDAqIxxbvVsz6XHSQgVwFxdZK
ihMAni8rngxpANCUITA/A7XMeMNky2zN
=+UqE
-----END PGP SIGNATURE-----

--VrqPEDrXMn8OVzN4--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat Apr 22 18:27:17 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id SAA05277;
	Sat, 22 Apr 2000 18:27:08 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA15893;
	Sat, 22 Apr 2000 18:27:04 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA02883;
	Sat, 22 Apr 2000 18:27:03 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA08112;
	Sat, 22 Apr 2000 18:26:43 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id SAA08101
	for packaging-list; Sat, 22 Apr 2000 18:26:39 -0400
Resent-Date: Sat, 22 Apr 2000 18:26:39 -0400
Resent-Message-Id: <200004222226.SAA08101@rpmfind.net>
Received: from fog.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id SAA08097
	for <packaging@rufus.w3.org>; Sat, 22 Apr 2000 18:26:35 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id WAA00538
	for packaging@rufus.w3.org; Sat, 22 Apr 2000 22:48:57 +0200
Date: Sat, 22 Apr 2000 22:48:57 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: [packaging] archive format
Message-ID: <20000422224856.A520@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="ikeVEW9yuYc//A+q"
User-Agent: Mutt/1.0.1i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1718
Lines: 52



--ikeVEW9yuYc//A+q
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable



             | tar       | GNU tar   | `new' cpio
-------------+-----------+-----------+-----------
[ug]id type  | char[8]   | char[8]   | ulong
[ug]id names | yes       | yes       | no
filesize     | 255       | unlimited | 2^11     =20
linksize     | 99        | unlimited | unlimited
sparse files | no        | yes       | no       =20
extensible   | yes       | yes       | no       =20
[cm]time     | no        | yes       | yes      =20

The fact that cpio can't handle user and group names is a major
problem imho: we can not assume that users and groups have the
same uid/gid on different systems. Another distinct advantage
of tar is that it can be extended without changing the format
in a way that older tools can't handle it; GNU tar is a nice
demonstration of that.

Looking at this I'm strongly in favour of using tar with the GNU
extensions instead of cpio.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--ikeVEW9yuYc//A+q
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkCEDgACgkQPLiSUC+jvC1NxACglvIeu/YYeOsOgqoDAeW2MCe7
WHEAoJdLHEVF/KlUW5UWCUlVow1MpziC
=99nL
-----END PGP SIGNATURE-----

--ikeVEW9yuYc//A+q--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat Apr 22 21:26:04 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id VAA10856;
	Sat, 22 Apr 2000 21:26:03 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id UAA20674;
	Sat, 22 Apr 2000 20:18:31 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id UAA14245;
	Sat, 22 Apr 2000 20:18:30 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id UAA27415;
	Sat, 22 Apr 2000 20:18:24 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id UAA27348
	for packaging-list; Sat, 22 Apr 2000 20:18:17 -0400
Resent-Date: Sat, 22 Apr 2000 20:18:17 -0400
Resent-Message-Id: <200004230018.UAA27348@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id UAA27307
	for <packaging@rufus.w3.org>; Sat, 22 Apr 2000 20:18:12 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id UAA09335
	for packaging@rufus.w3.org; Sat, 22 Apr 2000 20:18:11 -0400
Date: Sat, 22 Apr 2000 20:18:10 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000422201810.B7935@devserv.devel.redhat.com>
References: <20000422224856.A520@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000422224856.A520@mors.wiggy.net>; from wichert@mors.wiggy.net on Sat, Apr 22, 2000 at 10:48:57PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1339
Lines: 39


On Sat, Apr 22, 2000 at 10:48:57PM +0200, Wichert Akkerman wrote:
> 
> 
>              | tar       | GNU tar   | `new' cpio
> -------------+-----------+-----------+-----------
> [ug]id type  | char[8]   | char[8]   | ulong
> [ug]id names | yes       | yes       | no
> filesize     | 255       | unlimited | 2^11      
> linksize     | 99        | unlimited | unlimited
> sparse files | no        | yes       | no        
> extensible   | yes       | yes       | no        
> [cm]time     | no        | yes       | yes       
> 
> The fact that cpio can't handle user and group names is a major
> problem imho: we can not assume that users and groups have the
> same uid/gid on different systems. Another distinct advantage
> of tar is that it can be extended without changing the format
> in a way that older tools can't handle it; GNU tar is a nice
> demonstration of that.
> 
> Looking at this I'm strongly in favour of using tar with the GNU
> extensions instead of cpio.
> 

Presumably you are suggesting that *only* tar (and GNU tar at that) should
be used to create packaging.

FWIW, [ug]id names are trivially added to metadata.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Apr 23 11:05:50 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id LAA07627;
	Sun, 23 Apr 2000 11:05:49 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA19932;
	Sun, 23 Apr 2000 11:05:49 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA30273;
	Sun, 23 Apr 2000 11:05:49 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA03468;
	Sun, 23 Apr 2000 11:05:41 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA03460
	for packaging-list; Sun, 23 Apr 2000 11:05:38 -0400
Resent-Date: Sun, 23 Apr 2000 11:05:38 -0400
Resent-Message-Id: <200004231505.LAA03460@rpmfind.net>
Received: from fog.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA03455
	for <packaging@rufus.w3.org>; Sun, 23 Apr 2000 11:05:34 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id PAA01653
	for packaging@rufus.w3.org; Sun, 23 Apr 2000 15:13:21 +0200
Date: Sun, 23 Apr 2000 15:13:21 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000423151321.A604@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000422224856.A520@mors.wiggy.net> <20000422201810.B7935@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="ReaqsoxgOBHFXBhH"
User-Agent: Mutt/1.0.1i
In-Reply-To: <20000422201810.B7935@devserv.devel.redhat.com>; from jbj@redhat.com on Sat, Apr 22, 2000 at 08:18:10PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
X-Status: A
Content-Length: 1077
Lines: 37



--ReaqsoxgOBHFXBhH
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> FWIW, [ug]id names are trivially added to metadata.

Sure, but cluttering metadata to work around a flaw in the archive
format is not the way to go.. if we start doing things like that
we've lost imho.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--ReaqsoxgOBHFXBhH
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkC9vEACgkQPLiSUC+jvC25DgCfZqxOvWlgF2JoAVDQGOzSwHc+
F3wAoIicxn0wIayttbjxT/Quwj40KEzh
=A8P7
-----END PGP SIGNATURE-----

--ReaqsoxgOBHFXBhH--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Apr 23 15:27:56 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id PAA20023;
	Sun, 23 Apr 2000 15:27:56 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id PAA00316;
	Sun, 23 Apr 2000 15:27:55 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id PAA20843;
	Sun, 23 Apr 2000 15:27:55 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id PAA02667;
	Sun, 23 Apr 2000 15:27:52 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id PAA02655
	for packaging-list; Sun, 23 Apr 2000 15:27:47 -0400
Resent-Date: Sun, 23 Apr 2000 15:27:47 -0400
Resent-Message-Id: <200004231927.PAA02655@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id PAA02649
	for <packaging@rufus.w3.org>; Sun, 23 Apr 2000 15:27:44 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id PAA19988
	for packaging@rufus.w3.org; Sun, 23 Apr 2000 15:27:34 -0400
Date: Sun, 23 Apr 2000 15:27:34 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000423152734.C7935@devserv.devel.redhat.com>
References: <20000422224856.A520@mors.wiggy.net> <20000422201810.B7935@devserv.devel.redhat.com> <20000423151321.A604@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000423151321.A604@mors.wiggy.net>; from wichert@mors.wiggy.net on Sun, Apr 23, 2000 at 03:13:21PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1049
Lines: 35


On Sun, Apr 23, 2000 at 03:13:21PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > FWIW, [ug]id names are trivially added to metadata.
> 
> Sure, but cluttering metadata to work around a flaw in the archive
> format is not the way to go.. if we start doing things like that
> we've lost imho.
> 

Duplicating information from payload into metadata is *exactly* what
should be done because

1) it permits an on-disk packaging format independent of whatever
other formats (like tar/cpio) are used for other elements of packaging.

2) it leads to efficient access of information regarding the
package without having to read anything but metadata.

3) the metadata is sufficiently standalone that it can be used to
generate other applications such as rpmfind efficiently.

It's not exactly "clutter".

And yes, we're very lost :-(

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Apr 23 16:54:26 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA24193;
	Sun, 23 Apr 2000 16:54:25 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA05022;
	Sun, 23 Apr 2000 16:54:24 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA31845;
	Sun, 23 Apr 2000 16:54:24 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA09187;
	Sun, 23 Apr 2000 16:54:15 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA09179
	for packaging-list; Sun, 23 Apr 2000 16:54:12 -0400
Resent-Date: Sun, 23 Apr 2000 16:54:12 -0400
Resent-Message-Id: <200004232054.QAA09179@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA09175
	for <packaging@rufus.w3.org>; Sun, 23 Apr 2000 16:54:09 -0400
Received: (from msw@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id QAA24185
	for packaging@rufus.w3.org; Sun, 23 Apr 2000 16:54:05 -0400
Date: Sun, 23 Apr 2000 16:54:05 -0400
From: Matt Wilson <msw@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000423165405.A23053@devserv.devel.redhat.com>
References: <20000422224856.A520@mors.wiggy.net> <20000422201810.B7935@devserv.devel.redhat.com> <20000423151321.A604@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000423151321.A604@mors.wiggy.net>; from wichert@mors.wiggy.net on Sun, Apr 23, 2000 at 03:13:21PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 826
Lines: 21


On Sun, Apr 23, 2000 at 03:13:21PM +0200, Wichert Akkerman wrote:
> 
> Sure, but cluttering metadata to work around a flaw in the archive
> format is not the way to go.. if we start doing things like that
> we've lost imho.

Hypothetical situation (that _hopefully_ the LSB will solve): you call
the user that owns bind files 'bind', we name it 'named'.  We need a
rule anyway to reassign 'named' owned files to 'bind'.  We would need
detached uid/gid metadata for that, IMHO.

Of course, this is moot if we can just lay down some standards, but
having the flexibility to do things like adding to your rpmmacros file
a rewrite rule to reassign all files owned by user "foo" to user
"bar" would be nice.

Matt
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Apr 24 12:51:03 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA28717;
	Mon, 24 Apr 2000 12:51:02 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA07519;
	Mon, 24 Apr 2000 12:51:01 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA27280;
	Mon, 24 Apr 2000 12:51:01 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA07306;
	Mon, 24 Apr 2000 12:50:44 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA07295
	for packaging-list; Mon, 24 Apr 2000 12:50:40 -0400
Resent-Date: Mon, 24 Apr 2000 12:50:40 -0400
Resent-Message-Id: <200004241650.MAA07295@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:root@dhcpd4.meridian.redhat.com [207.175.43.132])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA07290
	for <packaging@rufus.w3.org>; Mon, 24 Apr 2000 12:50:37 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA01960
	for <packaging@rufus.w3.org>; Mon, 24 Apr 2000 12:48:42 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Mon, 24 Apr 2000 12:48:42 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <20000422224856.A520@mors.wiggy.net>
Message-ID: <Pine.LNX.4.21.0004241247030.1941-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1411
Lines: 36


On Sat, 22 Apr 2000, Wichert Akkerman wrote:

> -------------+-----------+-----------+-----------
> [ug]id type  | char[8]   | char[8]   | ulong
> [ug]id names | yes       | yes       | no
> filesize     | 255       | unlimited | 2^11      
> linksize     | 99        | unlimited | unlimited
> sparse files | no        | yes       | no        
> extensible   | yes       | yes       | no        
> [cm]time     | no        | yes       | yes       
> 
> The fact that cpio can't handle user and group names is a major
> problem imho: we can not assume that users and groups have the
> same uid/gid on different systems. Another distinct advantage

<shrug> We just set those via RPM, but whatever. Storing the user/group names
in the metadeta is essential, so you'll have redudancy no matter what.


> of tar is that it can be extended without changing the format
> in a way that older tools can't handle it; GNU tar is a nice
> demonstration of that.

That is a strong point.

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Apr 24 12:54:17 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA28858;
	Mon, 24 Apr 2000 12:54:16 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA08014;
	Mon, 24 Apr 2000 12:54:15 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA27538;
	Mon, 24 Apr 2000 12:54:14 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA07437;
	Mon, 24 Apr 2000 12:53:58 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA07428
	for packaging-list; Mon, 24 Apr 2000 12:53:54 -0400
Resent-Date: Mon, 24 Apr 2000 12:53:54 -0400
Resent-Message-Id: <200004241653.MAA07428@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:root@dhcpd4.meridian.redhat.com [207.175.43.132])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA07425
	for <packaging@rufus.w3.org>; Mon, 24 Apr 2000 12:53:52 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA01975
	for <packaging@rufus.w3.org>; Mon, 24 Apr 2000 12:52:00 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Mon, 24 Apr 2000 12:52:00 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <20000423151321.A604@mors.wiggy.net>
Message-ID: <Pine.LNX.4.21.0004241248520.1941-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1262
Lines: 30


On Sun, 23 Apr 2000, Wichert Akkerman wrote:

> Previously Jeff Johnson wrote:
> > FWIW, [ug]id names are trivially added to metadata.
> 
> Sure, but cluttering metadata to work around a flaw in the archive
> format is not the way to go.. if we start doing things like that
> we've lost imho.

Again, you *have* to have this in metadata to have usefull metadeta. If I
can't look at the metadata from a package and know who owns files, you're
already broken.

So, we must define a [ug]names in metadata, and then decide whether that
matches the names in the archive, or makes the archive names redundant. Which
it is doesn't matter to me, because we have to be able to override the names
in the archive anyway (to allow installs by non-root user, for example), so
the names stored in the archive is really quite useless afaic.

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Apr 25 17:11:21 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA22973;
	Tue, 25 Apr 2000 17:11:19 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id RAA11169;
	Tue, 25 Apr 2000 17:11:19 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id RAA25999;
	Tue, 25 Apr 2000 17:11:18 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id RAA24293;
	Tue, 25 Apr 2000 17:10:46 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id RAA24262
	for packaging-list; Tue, 25 Apr 2000 17:10:39 -0400
Resent-Date: Tue, 25 Apr 2000 17:10:39 -0400
Resent-Message-Id: <200004252110.RAA24262@rpmfind.net>
Received: from fog.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id RAA24256
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 17:10:35 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id XAA05033
	for packaging@rufus.w3.org; Tue, 25 Apr 2000 23:02:22 +0200
Date: Tue, 25 Apr 2000 23:02:22 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000425230222.A5022@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000423151321.A604@mors.wiggy.net> <Pine.LNX.4.21.0004241248520.1941-100000@mercury.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="2oS5YaxWCcQjTEyO"
User-Agent: Mutt/1.0.1i
In-Reply-To: <Pine.LNX.4.21.0004241248520.1941-100000@mercury.devel.redhat.com>; from ewt@redhat.com on Mon, Apr 24, 2000 at 12:52:00PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1388
Lines: 43



--2oS5YaxWCcQjTEyO
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Erik Troan wrote:
> Again, you *have* to have this in metadata to have usefull metadeta. If I
> can't look at the metadata from a package and know who owns files, you're
> already broken.

I wonder how we got away with not doing that for Debian for so long then..

> So, we must define a [ug]names in metadata, and then decide whether that
> matches the names in the archive, or makes the archive names redundant.

If we have to for some reason (I'm still not convinced btw) I'ld just
generate it from the data in the archive itself..

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--2oS5YaxWCcQjTEyO
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkGB94ACgkQPLiSUC+jvC0GIwCeM3upGq9MDNpTTB27w3UXDr9C
+J8An3CsiXAg3ozySXKvR+zV+bCLPM1A
=ZAgw
-----END PGP SIGNATURE-----

--2oS5YaxWCcQjTEyO--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Apr 25 17:11:21 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA22972;
	Tue, 25 Apr 2000 17:11:19 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id RAA11165;
	Tue, 25 Apr 2000 17:11:19 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id RAA25996;
	Tue, 25 Apr 2000 17:11:17 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id RAA24292;
	Tue, 25 Apr 2000 17:10:46 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id RAA24267
	for packaging-list; Tue, 25 Apr 2000 17:10:40 -0400
Resent-Date: Tue, 25 Apr 2000 17:10:40 -0400
Resent-Message-Id: <200004252110.RAA24267@rpmfind.net>
Received: from fog.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id RAA24250
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 17:10:33 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id XAA05039
	for packaging@rufus.w3.org; Tue, 25 Apr 2000 23:03:30 +0200
Date: Tue, 25 Apr 2000 23:03:30 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000425230330.B5022@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000422224856.A520@mors.wiggy.net> <Pine.LNX.4.21.0004241247030.1941-100000@mercury.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="LpQ9ahxlCli8rRTG"
User-Agent: Mutt/1.0.1i
In-Reply-To: <Pine.LNX.4.21.0004241247030.1941-100000@mercury.devel.redhat.com>; from ewt@redhat.com on Mon, Apr 24, 2000 at 12:48:42PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 936
Lines: 35



--LpQ9ahxlCli8rRTG
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Erik Troan wrote:
> That is a strong point.

So, can we decide to use tar then?=20

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--LpQ9ahxlCli8rRTG
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkGCCIACgkQPLiSUC+jvC280wCdEniUp4XcGaCetuP8tXdSkTG7
LHoAoIlAasExd0z8AzbSpRUr1pJbGxMb
=/hK4
-----END PGP SIGNATURE-----

--LpQ9ahxlCli8rRTG--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Apr 25 17:26:09 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA23751;
	Tue, 25 Apr 2000 17:26:06 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id RAA13988;
	Tue, 25 Apr 2000 17:26:06 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id RAA26881;
	Tue, 25 Apr 2000 17:26:05 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id RAA25789;
	Tue, 25 Apr 2000 17:25:46 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id RAA25777
	for packaging-list; Tue, 25 Apr 2000 17:25:42 -0400
Resent-Date: Tue, 25 Apr 2000 17:25:42 -0400
Resent-Message-Id: <200004252125.RAA25777@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:root@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id RAA25769
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 17:25:37 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA01729
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 17:23:40 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Tue, 25 Apr 2000 17:23:40 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <20000425230222.A5022@mors.wiggy.net>
Message-ID: <Pine.LNX.4.21.0004251721210.1711-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1859
Lines: 43


On Tue, 25 Apr 2000, Wichert Akkerman wrote:

> Previously Erik Troan wrote:
> > Again, you *have* to have this in metadata to have usefull metadeta. If I
> > can't look at the metadata from a package and know who owns files, you're
> > already broken.
> 
> I wonder how we got away with not doing that for Debian for so long then..

I can't imagine. Not being able to query a package to know who owns files
w/o unpacking the payload seems crazy to me. You also need to generate
that information to stick in your database rather then having consistent
metadata between the database and the packaging format.

> > So, we must define a [ug]names in metadata, and then decide whether that
> > matches the names in the archive, or makes the archive names redundant.
> 
> If we have to for some reason (I'm still not convinced btw) I'ld just
> generate it from the data in the archive itself..

You need to have to for metadaa consistency between the package format,
network transport (query through apt for instance; how do you check who 
owns files via apt over ftp right now?), and the database.

Whether the info in the archive is generated from the metadata, or vice
versa, is totally immaterial. Either way the package building software
needs to make it up once.

In dpkg, how do you deal with non-root users building packages that need
to have specific file owners? Manually package the files and override
during taring?

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Apr 25 17:26:54 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA23770;
	Tue, 25 Apr 2000 17:26:53 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id RAA14057;
	Tue, 25 Apr 2000 17:26:53 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id RAA26914;
	Tue, 25 Apr 2000 17:26:52 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id RAA25850;
	Tue, 25 Apr 2000 17:26:11 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id RAA25838
	for packaging-list; Tue, 25 Apr 2000 17:26:08 -0400
Resent-Date: Tue, 25 Apr 2000 17:26:08 -0400
Resent-Message-Id: <200004252126.RAA25838@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:root@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id RAA25834
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 17:26:06 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA01735
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 17:24:11 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Tue, 25 Apr 2000 17:24:11 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <20000425230330.B5022@mors.wiggy.net>
Message-ID: <Pine.LNX.4.21.0004251723470.1711-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 701
Lines: 23


On Tue, 25 Apr 2000, Wichert Akkerman wrote:

> Previously Erik Troan wrote:
> > That is a strong point.
> 
> So, can we decide to use tar then? 

<shrug>

I've never cared once we stopped exec'ing cpio. Jeff will do the 
implementation, so he gets Red Hat's vote.

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Apr 25 17:52:30 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA25353;
	Tue, 25 Apr 2000 17:52:28 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id RAA20590;
	Tue, 25 Apr 2000 17:52:28 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id RAA28509;
	Tue, 25 Apr 2000 17:52:27 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id RAA28345;
	Tue, 25 Apr 2000 17:52:04 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id RAA28320
	for packaging-list; Tue, 25 Apr 2000 17:51:57 -0400
Resent-Date: Tue, 25 Apr 2000 17:51:57 -0400
Resent-Message-Id: <200004252151.RAA28320@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id RAA28316
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 17:51:52 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id RAA25230
	for packaging@rufus.w3.org; Tue, 25 Apr 2000 17:51:40 -0400
Date: Tue, 25 Apr 2000 17:51:40 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000425175140.L7935@devserv.devel.redhat.com>
References: <20000425230330.B5022@mors.wiggy.net> <Pine.LNX.4.21.0004251723470.1711-100000@mercury.devel.redhat.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <Pine.LNX.4.21.0004251723470.1711-100000@mercury.devel.redhat.com>; from ewt@redhat.com on Tue, Apr 25, 2000 at 05:24:11PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 829
Lines: 34


On Tue, Apr 25, 2000 at 05:24:11PM -0400, Erik Troan wrote:
> 
> On Tue, 25 Apr 2000, Wichert Akkerman wrote:
> 
> > Previously Erik Troan wrote:
> > > That is a strong point.
> > 
> > So, can we decide to use tar then? 
> 
> <shrug>
> 
> I've never cared once we stopped exec'ing cpio. Jeff will do the 
> implementation, so he gets Red Hat's vote.
> 

My only concern is the difference between MUST and ONLY as in

	The next generation packaging format (MUST support|ONLY supports)
	(GNU?) tar.

as I will have to support cpio for the duration of the deployment.

For both tar/cpio objects, rpm will continue to not exec ...

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Apr 25 18:01:59 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id SAA25852;
	Tue, 25 Apr 2000 18:01:54 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA22353;
	Tue, 25 Apr 2000 18:01:54 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA29077;
	Tue, 25 Apr 2000 18:01:53 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA30416;
	Tue, 25 Apr 2000 18:01:21 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id SAA30378
	for packaging-list; Tue, 25 Apr 2000 18:01:07 -0400
Resent-Date: Tue, 25 Apr 2000 18:01:07 -0400
Resent-Message-Id: <200004252201.SAA30378@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id SAA30355
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 18:00:52 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12kDNl-0000Vy-00; Tue, 25 Apr 2000 15:00:37 -0700
Date: Tue, 25 Apr 2000 15:00:37 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <Pine.LNX.4.21.0004251721210.1711-100000@mercury.devel.redhat.com>
Message-ID: <Pine.LNX.4.10.10004251456540.1936-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1231
Lines: 27


On Tue, 25 Apr 2000, Erik Troan wrote:

> I can't imagine. Not being able to query a package to know who owns files
> w/o unpacking the payload seems crazy to me. You also need to generate
> that information to stick in your database rather then having consistent
> metadata between the database and the packaging format.

What exactly do you need the ownerships for? Most files are owned by root.
There are only some exceptions where you need special ownerships (suid
stuff etc). Debian has a "suidmanager" that allows sysadmins to customize
special permissions for files and override the package manager if needed.

> In dpkg, how do you deal with non-root users building packages that need
> to have specific file owners? Manually package the files and override
> during taring?

Non root users build packages in a fake root environment (fakeroot
package). Basically we do not support building packages as a non-root
user. The package builder needs to be able to set permissions and
ownerships at will. The fakeroot package simulated that ability in a user
environment and allows us to build stuff as a user.


----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Apr 25 18:21:55 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id SAA26728;
	Tue, 25 Apr 2000 18:21:54 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA25327;
	Tue, 25 Apr 2000 18:21:54 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA30214;
	Tue, 25 Apr 2000 18:21:53 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA32390;
	Tue, 25 Apr 2000 18:21:26 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id RAA28861
	for packaging-list; Tue, 25 Apr 2000 17:56:23 -0400
Resent-Date: Tue, 25 Apr 2000 17:56:23 -0400
Resent-Message-Id: <200004252156.RAA28861@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:root@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id RAA28816
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 17:56:13 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA01939
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 17:54:13 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Tue, 25 Apr 2000 17:54:13 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <20000425175140.L7935@devserv.devel.redhat.com>
Message-ID: <Pine.LNX.4.21.0004251753330.1929-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 962
Lines: 26


On Tue, 25 Apr 2000, Jeff Johnson wrote:

> My only concern is the difference between MUST and ONLY as in
> 
> 	The next generation packaging format (MUST support|ONLY supports)
> 	(GNU?) tar.
> 
> as I will have to support cpio for the duration of the deployment.
> 
> For both tar/cpio objects, rpm will continue to not exec ...

I'd suggest "ONLY". We can use the other for legacy package formats as
appropriate. It will make conversion a bit trickier, but I hereby volunteer
to write the cpio->tar or tar->cpio converter.

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Apr 25 18:27:21 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id SAA26992;
	Tue, 25 Apr 2000 18:27:20 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA26045;
	Tue, 25 Apr 2000 18:27:19 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA30694;
	Tue, 25 Apr 2000 18:27:19 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA30786;
	Tue, 25 Apr 2000 18:05:44 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id SAA30770
	for packaging-list; Tue, 25 Apr 2000 18:05:35 -0400
Resent-Date: Tue, 25 Apr 2000 18:05:35 -0400
Resent-Message-Id: <200004252205.SAA30770@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:root@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id SAA30753
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 18:05:21 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id SAA02015
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 18:03:21 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Tue, 25 Apr 2000 18:03:21 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <Pine.LNX.4.10.10004251456540.1936-100000@home.lameter.com>
Message-ID: <Pine.LNX.4.21.0004251801540.2006-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1011
Lines: 25


On Tue, 25 Apr 2000, Christoph Lameter wrote:

> What exactly do you need the ownerships for? Most files are owned by root.
> There are only some exceptions where you need special ownerships (suid
> stuff etc). Debian has a "suidmanager" that allows sysadmins to customize
> special permissions for files and override the package manager if needed.

What do you do for non-setuid files where the ownership has semantics?

> package). Basically we do not support building packages as a non-root
> user. The package builder needs to be able to set permissions and

Ah, silly. 

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Apr 25 18:30:50 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id SAA27146;
	Tue, 25 Apr 2000 18:30:49 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA26358;
	Tue, 25 Apr 2000 18:30:48 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA30827;
	Tue, 25 Apr 2000 18:30:48 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA00901;
	Tue, 25 Apr 2000 18:30:18 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id SAA00883
	for packaging-list; Tue, 25 Apr 2000 18:30:13 -0400
Resent-Date: Tue, 25 Apr 2000 18:30:13 -0400
Resent-Message-Id: <200004252230.SAA00883@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id SAA00874
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 18:30:08 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12kDq7-0000c8-00; Tue, 25 Apr 2000 15:29:55 -0700
Date: Tue, 25 Apr 2000 15:29:55 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <Pine.LNX.4.21.0004251801540.2006-100000@mercury.devel.redhat.com>
Message-ID: <Pine.LNX.4.10.10004251527470.2353-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1075
Lines: 29


On Tue, 25 Apr 2000, Erik Troan wrote:

> On Tue, 25 Apr 2000, Christoph Lameter wrote:
> 
> > What exactly do you need the ownerships for? Most files are owned by root.
> > There are only some exceptions where you need special ownerships (suid
> > stuff etc). Debian has a "suidmanager" that allows sysadmins to customize
> > special permissions for files and override the package manager if needed.
> 
> What do you do for non-setuid files where the ownership has semantics?

Those can be set through the archiver. Again what semantics are you
thinking about? This seems to be rather nebulous?

> 
> > package). Basically we do not support building packages as a non-root
> > user. The package builder needs to be able to set permissions and
> 
> Ah, silly. 

No that is the way I feel it needs to be done because you have full
flexibility in terms of permissions withou having to manage any special
meta data. fake root supports building from userland.


----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Apr 25 19:27:36 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id TAA29738;
	Tue, 25 Apr 2000 19:27:35 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id TAA01009;
	Tue, 25 Apr 2000 19:27:35 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id TAA01141;
	Tue, 25 Apr 2000 19:27:34 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA01444;
	Tue, 25 Apr 2000 18:36:33 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id SAA01427
	for packaging-list; Tue, 25 Apr 2000 18:36:24 -0400
Resent-Date: Tue, 25 Apr 2000 18:36:24 -0400
Resent-Message-Id: <200004252236.SAA01427@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:root@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id SAA01417
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 18:36:14 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id SAA02155
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 18:34:14 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Tue, 25 Apr 2000 18:34:14 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <Pine.LNX.4.10.10004251527470.2353-100000@home.lameter.com>
Message-ID: <Pine.LNX.4.21.0004251833220.2152-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1139
Lines: 28


On Tue, 25 Apr 2000, Christoph Lameter wrote:

> > What do you do for non-setuid files where the ownership has semantics?
> 
> Those can be set through the archiver. Again what semantics are you
> thinking about? This seems to be rather nebulous?

Oh, absoultely. You can set them through the archiver (I never said you
couldn't). In fact, I can't even remember how we argued this.

> No that is the way I feel it needs to be done because you have full
> flexibility in terms of permissions withou having to manage any special
> meta data. fake root supports building from userland.

You're still managing the metadata, you've just managed to hide it away
somewhere it's difficult (and slow) to get to.

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Apr 25 19:31:31 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id TAA29889;
	Tue, 25 Apr 2000 19:31:30 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id TAA01459;
	Tue, 25 Apr 2000 19:31:30 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id TAA01342;
	Tue, 25 Apr 2000 19:31:29 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id TAA07871;
	Tue, 25 Apr 2000 19:31:24 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id TAA07855
	for packaging-list; Tue, 25 Apr 2000 19:31:16 -0400
Resent-Date: Tue, 25 Apr 2000 19:31:16 -0400
Resent-Message-Id: <200004252331.TAA07855@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id TAA07848
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 19:31:10 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12kEn5-0000iV-00; Tue, 25 Apr 2000 16:30:51 -0700
Date: Tue, 25 Apr 2000 16:30:51 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <Pine.LNX.4.21.0004251833220.2152-100000@mercury.devel.redhat.com>
Message-ID: <Pine.LNX.4.10.10004251629560.2753-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 377
Lines: 12


On Tue, 25 Apr 2000, Erik Troan wrote:

> You're still managing the metadata, you've just managed to hide it away
> somewhere it's difficult (and slow) to get to.

I am still not clear on why do you have to get to it apart from having to 
unpack the archive?

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Apr 25 22:16:28 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id WAA02811;
	Tue, 25 Apr 2000 22:16:27 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id WAA17984;
	Tue, 25 Apr 2000 22:16:26 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id WAA08844;
	Tue, 25 Apr 2000 22:16:25 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id WAA23979;
	Tue, 25 Apr 2000 22:15:31 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id WAA23966
	for packaging-list; Tue, 25 Apr 2000 22:15:22 -0400
Resent-Date: Tue, 25 Apr 2000 22:15:22 -0400
Resent-Message-Id: <200004260215.WAA23966@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:root@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id WAA23951
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 22:15:14 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id WAA02471
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 22:13:15 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Tue, 25 Apr 2000 22:13:15 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <Pine.LNX.4.10.10004251629560.2753-100000@home.lameter.com>
Message-ID: <Pine.LNX.4.21.0004252211480.2467-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1115
Lines: 28


On Tue, 25 Apr 2000, Christoph Lameter wrote:

> On Tue, 25 Apr 2000, Erik Troan wrote:
> 
> > You're still managing the metadata, you've just managed to hide it away
> > somewhere it's difficult (and slow) to get to.
> 
> I am still not clear on why do you have to get to it apart from having to 
> unpack the archive?

So user's can query the package, if nothing else. Verifying the installed
package against a package info delivered over the net is handy too.

User and groups, just like permissions, are file metadate. We should store
all metadata ni the same place. It can be redundant if need be, but metadata
and archive payload are not logically connected for packaging.

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Apr 25 23:17:25 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id XAA04737;
	Tue, 25 Apr 2000 23:17:24 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id XAA22802;
	Tue, 25 Apr 2000 23:17:24 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id XAA10908;
	Tue, 25 Apr 2000 23:17:23 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id XAA29980;
	Tue, 25 Apr 2000 23:17:08 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id XAA29952
	for packaging-list; Tue, 25 Apr 2000 23:17:02 -0400
Resent-Date: Tue, 25 Apr 2000 23:17:02 -0400
Resent-Message-Id: <200004260317.XAA29952@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id XAA29937
	for <packaging@rufus.w3.org>; Tue, 25 Apr 2000 23:16:55 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12kIJh-00015G-00; Tue, 25 Apr 2000 20:16:45 -0700
Date: Tue, 25 Apr 2000 20:16:45 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <Pine.LNX.4.21.0004252211480.2467-100000@mercury.devel.redhat.com>
Message-ID: <Pine.LNX.4.10.10004252012530.4153-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
X-Status: A
Content-Length: 1107
Lines: 29


On Tue, 25 Apr 2000, Erik Troan wrote:

> 
> So user's can query the package, if nothing else. Verifying the installed
> package against a package info delivered over the net is handy too.

You can do that with a tarball using tar tzvf f.e. This reads the complete
tarball but I have not found a shortcoming there.

Verifying the package file integrity is done using md5sums in debian
(debsums). But this does not include permissions and ownership rights.
Those are not available after a package is installed.

> User and groups, just like permissions, are file metadate. We should store
> all metadata ni the same place. It can be redundant if need be, but metadata
> and archive payload are not logically connected for packaging.

The data about permissions and ownership could be extracted at install
time and then stored.

If there is separate metadata then you will have the additional problem of
keeping the integrity of the metadata and the permissions / ownership in
the tarball.


----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Apr 26 00:01:32 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id AAA06170;
	Wed, 26 Apr 2000 00:01:31 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id AAA26681;
	Wed, 26 Apr 2000 00:01:31 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id AAA12746;
	Wed, 26 Apr 2000 00:01:31 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id AAA02017;
	Wed, 26 Apr 2000 00:01:19 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id AAA01997
	for packaging-list; Wed, 26 Apr 2000 00:01:13 -0400
Resent-Date: Wed, 26 Apr 2000 00:01:13 -0400
Resent-Message-Id: <200004260401.AAA01997@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id AAA01976
	for <packaging@rufus.w3.org>; Wed, 26 Apr 2000 00:01:07 -0400
Received: (from msw@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id AAA06155
	for packaging@rufus.w3.org; Wed, 26 Apr 2000 00:00:54 -0400
Date: Wed, 26 Apr 2000 00:00:54 -0400
From: Matt Wilson <msw@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000426000054.A5800@devserv.devel.redhat.com>
References: <Pine.LNX.4.21.0004252211480.2467-100000@mercury.devel.redhat.com> <Pine.LNX.4.10.10004252012530.4153-100000@home.lameter.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <Pine.LNX.4.10.10004252012530.4153-100000@home.lameter.com>; from christoph@lameter.com on Tue, Apr 25, 2000 at 08:16:45PM -0700
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
X-Status: A
Content-Length: 1673
Lines: 38


On Tue, Apr 25, 2000 at 08:16:45PM -0700, Christoph Lameter wrote:
> Verifying the package file integrity is done using md5sums in debian
> (debsums). But this does not include permissions and ownership rights.
> Those are not available after a package is installed.

This is a flaw in dpkg, IMHO.  You must be able to verify all aspects
of files on the filesystem against the package database or original
binary package.  Ownerships are *very* important to verify.

> The data about permissions and ownership could be extracted at install
> time and then stored.

This only solves the "verify against database" problem.  If you wanted
to verify against just an on-disk binary package you would be forced
to walk the entire archive!  This data belongs in the metadata.

> If there is separate metadata then you will have the additional problem of
> keeping the integrity of the metadata and the permissions / ownership in
> the tarball.

No you don't.  Metadata wins overall.  The archive is just there as an
"envelope" to store many files in an archive.  Note that we have to
support arbitrary path relocation in RPM format as well, so even the
path information isn't necessarily used in the archive.  We still need
to store path rewrites in the database at package install-time, but
that's under way.

In RPM, the cpio cargo can have any ownerships.  This is extremely
useful because that means that I can build packages as non-root and
store the file ownerships in the filelist (which then go into the
metadata and are restored at install time).

Matt

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Apr 26 08:29:54 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id IAA22324;
	Wed, 26 Apr 2000 08:29:53 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id IAA05784;
	Wed, 26 Apr 2000 08:29:49 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id IAA05088;
	Wed, 26 Apr 2000 08:29:48 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id IAA19346;
	Wed, 26 Apr 2000 08:29:39 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id IAA19333
	for packaging-list; Wed, 26 Apr 2000 08:29:33 -0400
Resent-Date: Wed, 26 Apr 2000 08:29:33 -0400
Resent-Message-Id: <200004261229.IAA19333@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:root@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id IAA19327
	for <packaging@rufus.w3.org>; Wed, 26 Apr 2000 08:29:28 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id IAA03045
	for <packaging@rufus.w3.org>; Wed, 26 Apr 2000 08:27:23 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Wed, 26 Apr 2000 08:27:23 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <Pine.LNX.4.10.10004252012530.4153-100000@home.lameter.com>
Message-ID: <Pine.LNX.4.21.0004260824370.3041-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1781
Lines: 45


On Tue, 25 Apr 2000, Christoph Lameter wrote:

> You can do that with a tarball using tar tzvf f.e. This reads the complete
> tarball but I have not found a shortcoming there.

That's *significantly* slower.

> Verifying the package file integrity is done using md5sums in debian
> (debsums). But this does not include permissions and ownership rights.
> Those are not available after a package is installed.

See Matt's note. This simply doesn't make any sense.

> The data about permissions and ownership could be extracted at install
> time and then stored.

But they can't be accessed separately from the contents. You're forcing us
to split the metadata into two components.

> If there is separate metadata then you will have the additional problem of
> keeping the integrity of the metadata and the permissions / ownership in
> the tarball.

1) They don't have to be the same, you just have to say "the metadata is
   correct, the archive isn't" (hence, cpio not storing [ug]names doens't
   matter). This is the approach RPM takes.

2) When you build a package, it's straightforward to coordinate those bits
   of informatin. After installation, the archive doesn't exist so there is
   nothing to sync.

Is not storing this information in metadata your position Wichert? I think
doing this is absolutely essential for proper packaging.

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Apr 26 09:08:26 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id JAA24004;
	Wed, 26 Apr 2000 09:08:25 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id JAA12510;
	Wed, 26 Apr 2000 09:08:21 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id JAA08588;
	Wed, 26 Apr 2000 09:08:21 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id JAA22886;
	Wed, 26 Apr 2000 09:08:19 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id JAA22858
	for packaging-list; Wed, 26 Apr 2000 09:08:05 -0400
Resent-Date: Wed, 26 Apr 2000 09:08:05 -0400
Resent-Message-Id: <200004261308.JAA22858@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id JAA22848
	for <packaging@rufus.w3.org>; Wed, 26 Apr 2000 09:07:59 -0400
Received: (from msw@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id JAA23956
	for packaging@rufus.w3.org; Wed, 26 Apr 2000 09:07:48 -0400
Date: Wed, 26 Apr 2000 09:07:48 -0400
From: Matt Wilson <msw@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000426090748.C6680@devserv.devel.redhat.com>
References: <Pine.LNX.4.21.0004252211480.2467-100000@mercury.devel.redhat.com> <Pine.LNX.4.10.10004252012530.4153-100000@home.lameter.com> <20000426000054.A5800@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000426000054.A5800@devserv.devel.redhat.com>; from msw@redhat.com on Wed, Apr 26, 2000 at 12:00:54AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 880
Lines: 19


On Wed, Apr 26, 2000 at 12:00:54AM -0400, Matt Wilson wrote:
> No you don't.  Metadata wins overall.  The archive is just there as an
> "envelope" to store many files in an archive.  Note that we have to
> support arbitrary path relocation in RPM format as well, so even the
> path information isn't necessarily used in the archive.  We still need
> to store path rewrites in the database at package install-time, but
> that's under way.

Sorry, we *do* store the path relocations at install time, so RPM
package verification works when you install a package with a
--relocate.  I was thinking of other install-time options that aren't
currently saved in RPM such as "package installed with --excludedocs,
so don't verify the files that weren't installed."

Matt
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Apr 26 11:25:18 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id LAA31462;
	Wed, 26 Apr 2000 11:25:13 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id LAA05315;
	Wed, 26 Apr 2000 11:25:08 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id LAA20951;
	Wed, 26 Apr 2000 11:25:02 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id LAA03253;
	Wed, 26 Apr 2000 11:24:14 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id LAA03241
	for packaging-list; Wed, 26 Apr 2000 11:24:08 -0400
Resent-Date: Wed, 26 Apr 2000 11:24:08 -0400
Resent-Message-Id: <200004261524.LAA03241@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id LAA03226
	for <packaging@rufus.w3.org>; Wed, 26 Apr 2000 11:24:04 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12kTfI-000274-00; Wed, 26 Apr 2000 08:23:48 -0700
Date: Wed, 26 Apr 2000 08:23:48 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <Pine.LNX.4.21.0004260824370.3041-100000@mercury.devel.redhat.com>
Message-ID: <Pine.LNX.4.10.10004260819540.8083-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1787
Lines: 48


On Wed, 26 Apr 2000, Erik Troan wrote:

> 
> On Tue, 25 Apr 2000, Christoph Lameter wrote:
> 
> > You can do that with a tarball using tar tzvf f.e. This reads the complete
> > tarball but I have not found a shortcoming there.
> 
> That's *significantly* slower.
That speed never was a problem for us.

> > Verifying the package file integrity is done using md5sums in debian
> > (debsums). But this does not include permissions and ownership rights.
> > Those are not available after a package is installed.
> 
> See Matt's note. This simply doesn't make any sense.

It does make sense if you just want to make sure that binaries are not
corrupted.

> > The data about permissions and ownership could be extracted at install
> > time and then stored.
> 
> But they can't be accessed separately from the contents. You're forcing us
> to split the metadata into two components.

You already have two componets: The metadata and the file-tree. And the
permissions and ownerships belong naturally to the files.

> 1) They don't have to be the same, you just have to say "the metadata is
>    correct, the archive isn't" (hence, cpio not storing [ug]names doens't
>    matter). This is the approach RPM takes.

That makes much sense but is an entirely different philosophy than what
has been used by Debian so far.

> Is not storing this information in metadata your position Wichert? I think
> doing this is absolutely essential for proper packaging.

Storing permissions and ownership in metadata could make a lot of sense. I
agree. But I would like to have clarity on what the exact reasons for
doing so are. Some of the discussion in this thread has brought that out.


----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Apr 26 12:13:48 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA01802;
	Wed, 26 Apr 2000 12:13:46 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA14928;
	Wed, 26 Apr 2000 12:13:46 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA26154;
	Wed, 26 Apr 2000 12:13:44 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA09443;
	Wed, 26 Apr 2000 12:13:22 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA09423
	for packaging-list; Wed, 26 Apr 2000 12:13:15 -0400
Resent-Date: Wed, 26 Apr 2000 12:13:15 -0400
Resent-Message-Id: <200004261613.MAA09423@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:root@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA09415
	for <packaging@rufus.w3.org>; Wed, 26 Apr 2000 12:13:09 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA04606
	for <packaging@rufus.w3.org>; Wed, 26 Apr 2000 12:11:03 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Wed, 26 Apr 2000 12:11:03 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <Pine.LNX.4.10.10004260819540.8083-100000@home.lameter.com>
Message-ID: <Pine.LNX.4.21.0004261210290.4594-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 932
Lines: 25


On Wed, 26 Apr 2000, Christoph Lameter wrote:

> > > Verifying the package file integrity is done using md5sums in debian
> > > (debsums). But this does not include permissions and ownership rights.
> > > Those are not available after a package is installed.
> > 
> > See Matt's note. This simply doesn't make any sense.
> 
> It does make sense if you just want to make sure that binaries are not
> corrupted.

Checking md5 makes sense; not check permission and ownership as well makes
no sense.

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Apr 26 12:24:41 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA02447;
	Wed, 26 Apr 2000 12:24:40 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA17296;
	Wed, 26 Apr 2000 12:24:39 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA27427;
	Wed, 26 Apr 2000 12:24:36 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA10190;
	Wed, 26 Apr 2000 12:20:44 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA10158
	for packaging-list; Wed, 26 Apr 2000 12:20:37 -0400
Resent-Date: Wed, 26 Apr 2000 12:20:37 -0400
Resent-Message-Id: <200004261620.MAA10158@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA10144
	for <packaging@rufus.w3.org>; Wed, 26 Apr 2000 12:20:31 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12kUXz-0002CM-00; Wed, 26 Apr 2000 09:20:19 -0700
Date: Wed, 26 Apr 2000 09:20:19 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <Pine.LNX.4.21.0004261210290.4594-100000@mercury.devel.redhat.com>
Message-ID: <Pine.LNX.4.10.10004260915020.8345-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1148
Lines: 30


There are other facilities in debian that do checking of permissions
although they do not verify that the permissions are the same as
in the original package. That would certainly be something desirable.

We have had some flamewars regarding even providing only md5sums for files
in the dpkg header (metadata!) and checking the integrity using those. I
created that logic and I basically did not enhance it further because
even md5sums were already controversial.

On Wed, 26 Apr 2000, Erik Troan wrote:

> 
> On Wed, 26 Apr 2000, Christoph Lameter wrote:
> 
> > > > Verifying the package file integrity is done using md5sums in debian
> > > > (debsums). But this does not include permissions and ownership rights.
> > > > Those are not available after a package is installed.
> > > 
> > > See Matt's note. This simply doesn't make any sense.
> > 
> > It does make sense if you just want to make sure that binaries are not
> > corrupted.
> 
> Checking md5 makes sense; not check permission and ownership as well makes
> no sense.

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Apr 26 14:12:54 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id OAA08207;
	Wed, 26 Apr 2000 14:12:52 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id OAA05789;
	Wed, 26 Apr 2000 14:12:51 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id OAA06185;
	Wed, 26 Apr 2000 14:12:50 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id OAA25152;
	Wed, 26 Apr 2000 14:10:35 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id OAA25140
	for packaging-list; Wed, 26 Apr 2000 14:10:27 -0400
Resent-Date: Wed, 26 Apr 2000 14:10:27 -0400
Resent-Message-Id: <200004261810.OAA25140@rpmfind.net>
Received: from fog.mors.wiggy.net (root@bt-user188.interplanet.es [212.0.98.188])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id OAA25118
	for <packaging@rufus.w3.org>; Wed, 26 Apr 2000 14:10:21 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id HAA07325
	for packaging@rufus.w3.org; Wed, 26 Apr 2000 07:44:23 +0200
Date: Wed, 26 Apr 2000 07:44:23 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000426074423.H3862@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <Pine.LNX.4.21.0004251721210.1711-100000@mercury.devel.redhat.com> <Pine.LNX.4.10.10004251456540.1936-100000@home.lameter.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="7lMq7vMTJT4tNk0a"
User-Agent: Mutt/1.0.1i
In-Reply-To: <Pine.LNX.4.10.10004251456540.1936-100000@home.lameter.com>; from christoph@lameter.com on Tue, Apr 25, 2000 at 03:00:37PM -0700
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1337
Lines: 40



--7lMq7vMTJT4tNk0a
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Christoph Lameter wrote:
> What exactly do you need the ownerships for? Most files are owned by root.
> There are only some exceptions where you need special ownerships (suid
> stuff etc). Debian has a "suidmanager" that allows sysadmins to customize
> special permissions for files and override the package manager if needed.

Sorry Christoph, but you are missing some context here. suidmanager
serves a different purpose, it allows the sysadmin to override ownership
and filemodes.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--7lMq7vMTJT4tNk0a
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkGgjcACgkQPLiSUC+jvC3TdACgkEH+p9V1qXjAtPqIrEjOQic+
xlYAoJIp2HTuyQ17MP1GBMc00RzpXmoH
=7OJ0
-----END PGP SIGNATURE-----

--7lMq7vMTJT4tNk0a--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Apr 26 14:21:51 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id OAA08860;
	Wed, 26 Apr 2000 14:21:50 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id OAA07565;
	Wed, 26 Apr 2000 14:21:47 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id OAA07453;
	Wed, 26 Apr 2000 14:21:46 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA22645;
	Wed, 26 Apr 2000 13:56:48 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA22584
	for packaging-list; Wed, 26 Apr 2000 13:56:42 -0400
Resent-Date: Wed, 26 Apr 2000 13:56:42 -0400
Resent-Message-Id: <200004261756.NAA22584@rpmfind.net>
Received: from fog.mors.wiggy.net (root@bt-user151.interplanet.es [212.0.98.151])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA22509
	for <packaging@rufus.w3.org>; Wed, 26 Apr 2000 13:56:31 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id HAA07313
	for packaging@rufus.w3.org; Wed, 26 Apr 2000 07:40:36 +0200
Date: Wed, 26 Apr 2000 07:40:36 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000426074036.F3862@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000425175140.L7935@devserv.devel.redhat.com> <Pine.LNX.4.21.0004251753330.1929-100000@mercury.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="4Epv4kl9IRBfg3rk"
User-Agent: Mutt/1.0.1i
In-Reply-To: <Pine.LNX.4.21.0004251753330.1929-100000@mercury.devel.redhat.com>; from ewt@redhat.com on Tue, Apr 25, 2000 at 05:54:13PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1295
Lines: 41



--4Epv4kl9IRBfg3rk
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Erik Troan wrote:
> I'd suggest "ONLY". We can use the other for legacy package formats as
> appropriate. It will make conversion a bit trickier, but I hereby volunte=
er
> to write the cpio->tar or tar->cpio converter.

Thanks! FWIW, I'm planning on writing something general that you pass
a fd to an archive, and it will pass you a filename and a fd from which
you can read that file. That should make it transparent which format
you use..

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--4Epv4kl9IRBfg3rk
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkGgVQACgkQPLiSUC+jvC1M0wCeIKUYsutSJitdHL199zlwdUX2
FxIAoISnO/IFVTkTqzaPWAUSxVouoK3j
=W2KY
-----END PGP SIGNATURE-----

--4Epv4kl9IRBfg3rk--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Apr 26 14:21:55 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id OAA08867;
	Wed, 26 Apr 2000 14:21:54 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id OAA07595;
	Wed, 26 Apr 2000 14:21:52 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id OAA07479;
	Wed, 26 Apr 2000 14:21:52 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id OAA26235;
	Wed, 26 Apr 2000 14:21:29 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA22541
	for packaging-list; Wed, 26 Apr 2000 13:56:36 -0400
Resent-Date: Wed, 26 Apr 2000 13:56:36 -0400
Resent-Message-Id: <200004261756.NAA22541@rpmfind.net>
Received: from fog.mors.wiggy.net (root@bt-user151.interplanet.es [212.0.98.151])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA22410
	for <packaging@rufus.w3.org>; Wed, 26 Apr 2000 13:56:22 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id HAA07332
	for packaging@rufus.w3.org; Wed, 26 Apr 2000 07:45:32 +0200
Date: Wed, 26 Apr 2000 07:45:32 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000426074532.I3862@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <Pine.LNX.4.10.10004251456540.1936-100000@home.lameter.com> <Pine.LNX.4.21.0004251801540.2006-100000@mercury.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="9jHkwA2TBA/ec6v+"
User-Agent: Mutt/1.0.1i
In-Reply-To: <Pine.LNX.4.21.0004251801540.2006-100000@mercury.devel.redhat.com>; from ewt@redhat.com on Tue, Apr 25, 2000 at 06:03:21PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1083
Lines: 36



--9jHkwA2TBA/ec6v+
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Erik Troan wrote:
> What do you do for non-setuid files where the ownership has semantics?

Same thing, suidmanager is a bit misnamed I guess. (It's also a seperate
tool, I need to fold its functionality into dpkg at some point).

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--9jHkwA2TBA/ec6v+
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkGgnwACgkQPLiSUC+jvC04MACeOJP9kaOIh3UG2DyZA1q3hdmn
Vn0AnRi/FzAT8uXNEpkP6quGe303jWh3
=sn1T
-----END PGP SIGNATURE-----

--9jHkwA2TBA/ec6v+--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Apr 26 14:28:41 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id OAA09637;
	Wed, 26 Apr 2000 14:28:40 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id OAA09048;
	Wed, 26 Apr 2000 14:28:40 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id OAA08201;
	Wed, 26 Apr 2000 14:28:38 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA22954;
	Wed, 26 Apr 2000 13:57:21 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA22902
	for packaging-list; Wed, 26 Apr 2000 13:57:16 -0400
Resent-Date: Wed, 26 Apr 2000 13:57:16 -0400
Resent-Message-Id: <200004261757.NAA22902@rpmfind.net>
Received: from fog.mors.wiggy.net (root@bt-user151.interplanet.es [212.0.98.151])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA22673
	for <packaging@rufus.w3.org>; Wed, 26 Apr 2000 13:56:52 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id HAA07319
	for packaging@rufus.w3.org; Wed, 26 Apr 2000 07:43:29 +0200
Date: Wed, 26 Apr 2000 07:43:29 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000426074329.G3862@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000425230222.A5022@mors.wiggy.net> <Pine.LNX.4.21.0004251721210.1711-100000@mercury.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="7cm2iqirTL37Ot+N"
User-Agent: Mutt/1.0.1i
In-Reply-To: <Pine.LNX.4.21.0004251721210.1711-100000@mercury.devel.redhat.com>; from ewt@redhat.com on Tue, Apr 25, 2000 at 05:23:40PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1739
Lines: 52



--7cm2iqirTL37Ot+N
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Erik Troan wrote:
> I can't imagine. Not being able to query a package to know who owns files
> w/o unpacking the payload seems crazy to me.

We never needed that information.. the reason is probably that we don't
use file dependencies. I can see us needing it to be able so support
that properly. It will make our Packages-index a lot larger though
which will put a large burden on people updating by modem... :(

> Whether the info in the archive is generated from the metadata, or vice
> versa, is totally immaterial. Either way the package building software
> needs to make it up once.

Right.

> In dpkg, how do you deal with non-root users building packages that need
> to have specific file owners? Manually package the files and override
> during taring?

We use a seperate tool called `fakeroot', which works extremely well.
I guess its name pretty much explains what it does.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--7cm2iqirTL37Ot+N
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkGggEACgkQPLiSUC+jvC1SegCeNmsMUtJV7mqstt3qKUO9ThrP
gHQAn2SVAh0OIc/NTSzoVcrttJ2CyLIf
=nPtm
-----END PGP SIGNATURE-----

--7cm2iqirTL37Ot+N--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed Apr 26 15:22:46 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id PAA12663;
	Wed, 26 Apr 2000 15:22:45 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id PAA18540;
	Wed, 26 Apr 2000 15:22:42 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id PAA14668;
	Wed, 26 Apr 2000 15:22:41 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id PAA01380;
	Wed, 26 Apr 2000 15:21:25 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id OAA27286
	for packaging-list; Wed, 26 Apr 2000 14:30:52 -0400
Resent-Date: Wed, 26 Apr 2000 14:30:52 -0400
Resent-Message-Id: <200004261830.OAA27286@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id OAA27275
	for <packaging@rufus.w3.org>; Wed, 26 Apr 2000 14:30:42 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12kWZz-0002T3-00; Wed, 26 Apr 2000 11:30:31 -0700
Date: Wed, 26 Apr 2000 11:30:31 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <20000426074423.H3862@mors.wiggy.net>
Message-ID: <Pine.LNX.4.10.10004261127301.9463-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1045
Lines: 28


Suidmanager served two purposes (See the concept that I wrote at the time
I create it)

1. override ownerships/modes

2. track special permissions that might be vital for system security so
that the sysadmin could have a file that lists  files with special 
permissions.

suidmanager always provided functionality that would have been better
provided by dpkg itself.

On Wed, 26 Apr 2000, Wichert Akkerman wrote:

> Previously Christoph Lameter wrote:
> > What exactly do you need the ownerships for? Most files are owned by root.
> > There are only some exceptions where you need special ownerships (suid
> > stuff etc). Debian has a "suidmanager" that allows sysadmins to customize
> > special permissions for files and override the package manager if needed.
> 
> Sorry Christoph, but you are missing some context here. suidmanager
> serves a different purpose, it allows the sysadmin to override ownership
> and filemodes.

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Apr 30 17:48:04 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA17441;
	Sun, 30 Apr 2000 17:48:03 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id RAA09966;
	Sun, 30 Apr 2000 17:48:03 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id RAA04554;
	Sun, 30 Apr 2000 17:48:02 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id RAA29499;
	Sun, 30 Apr 2000 17:47:48 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id RAA29469
	for packaging-list; Sun, 30 Apr 2000 17:47:41 -0400
Resent-Date: Sun, 30 Apr 2000 17:47:41 -0400
Resent-Message-Id: <200004302147.RAA29469@rpmfind.net>
Received: from fog.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id RAA29458
	for <packaging@rufus.w3.org>; Sun, 30 Apr 2000 17:47:31 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id AAA02073
	for packaging@rufus.w3.org; Sat, 29 Apr 2000 00:36:53 +0200
Date: Sat, 29 Apr 2000 00:36:53 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000429003653.A2037@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <Pine.LNX.4.10.10004252012530.4153-100000@home.lameter.com> <Pine.LNX.4.21.0004260824370.3041-100000@mercury.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="bp/iNruPH9dso1Pn"
User-Agent: Mutt/1.0.1i
In-Reply-To: <Pine.LNX.4.21.0004260824370.3041-100000@mercury.devel.redhat.com>; from ewt@redhat.com on Wed, Apr 26, 2000 at 08:27:23AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2289
Lines: 64



--bp/iNruPH9dso1Pn
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable


Arh, I seemed to have picked the wrong couple of days to visit Spain :(

Previously Erik Troan wrote:
> > Verifying the package file integrity is done using md5sums in debian
> > (debsums). But this does not include permissions and ownership rights.
> > Those are not available after a package is installed.
>=20
> See Matt's note. This simply doesn't make any sense.

The md5sums Christoph mentions aren't really supported by dpkg at all,
they are a result of the fact that it is easy to add extra metadata
to a package which Christoph (I think he came up with this) used to
add a list of md5sums for each file.=20

We should indeed to this differently and store metadata per file more
flexibly. I'm thinking of:
* filetype flag (normal file/documentation(+language?)
* ownership + filetype
* md5sum for fast-check of system integrity (full check should probably
  verify the filesystem against signed packages)

> But they can't be accessed separately from the contents. You're forcing us
> to split the metadata into two components.

We don't have the verify-feature of rpm so we never needed that metadata.

> Is not storing this information in metadata your position Wichert? I think
> doing this is absolutely essential for proper packaging.

It's not my position. The only thing that worries me a bit about this is if
we should put that per-file metadata in our Packages-indices as well,
but that's not relevant to this discussion at all.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--bp/iNruPH9dso1Pn
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkKEoUACgkQPLiSUC+jvC1iGwCeKc1IOuIs/PXrYRQIiUI7VJO2
tKEAoKn/Ytag1olK1+49PdQKijpN2hzW
=rjEq
-----END PGP SIGNATURE-----

--bp/iNruPH9dso1Pn--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon May  1 10:29:36 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA12763;
	Mon, 1 May 2000 10:29:35 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA20754;
	Mon, 1 May 2000 10:29:35 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA02589;
	Mon, 1 May 2000 10:29:34 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA02895;
	Mon, 1 May 2000 10:29:36 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA02886
	for packaging-list; Mon, 1 May 2000 10:29:33 -0400
Resent-Date: Mon, 1 May 2000 10:29:33 -0400
Resent-Message-Id: <200005011429.KAA02886@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:root@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA02879
	for <packaging@rufus.w3.org>; Mon, 1 May 2000 10:29:31 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA13502
	for <packaging@rufus.w3.org>; Mon, 1 May 2000 10:26:52 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Mon, 1 May 2000 10:26:52 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <20000429003653.A2037@mors.wiggy.net>
Message-ID: <Pine.LNX.4.21.0005011026220.13497-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 896
Lines: 24


On Sat, 29 Apr 2000, Wichert Akkerman wrote:

> * md5sum for fast-check of system integrity (full check should probably
>   verify the filesystem against signed packages)

Fast check can be system check against signed metadata as well.

> It's not my position. The only thing that worries me a bit about this is if
> we should put that per-file metadata in our Packages-indices as well,
> but that's not relevant to this discussion at all.

Okay, progress :-)

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon May  1 15:32:02 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id PAA27238;
	Mon, 1 May 2000 15:32:01 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id PAA07967;
	Mon, 1 May 2000 15:32:00 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id PAA25517;
	Mon, 1 May 2000 15:31:56 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id PAA10863;
	Mon, 1 May 2000 15:31:34 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id PAA10845
	for packaging-list; Mon, 1 May 2000 15:31:30 -0400
Resent-Date: Mon, 1 May 2000 15:31:30 -0400
Resent-Message-Id: <200005011931.PAA10845@rpmfind.net>
Received: from fog.mors.wiggy.net (root@dustpuppy.soil.nl [132.229.135.150])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id PAA10839
	for <packaging@rufus.w3.org>; Mon, 1 May 2000 15:31:27 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id VAA02759
	for packaging@rufus.w3.org; Mon, 1 May 2000 21:27:38 +0200
Date: Mon, 1 May 2000 21:27:38 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000501212738.A2751@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000429003653.A2037@mors.wiggy.net> <Pine.LNX.4.21.0005011026220.13497-100000@mercury.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="6c2NcOVqGQ03X4Wi"
User-Agent: Mutt/1.0.1i
In-Reply-To: <Pine.LNX.4.21.0005011026220.13497-100000@mercury.devel.redhat.com>; from ewt@redhat.com on Mon, May 01, 2000 at 10:26:52AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1076
Lines: 43



--6c2NcOVqGQ03X4Wi
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Erik Troan wrote:
> Okay, progress :-)

Okay, lets spec this then. Currently needed metadata per file:
* ownership
* filemode
* md5sum for fast check?

Probably rpm-specific for now:
* filetype flag (doc/non-doc)

Correct?

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--6c2NcOVqGQ03X4Wi
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkN2qoACgkQPLiSUC+jvC3JSwCgnKlIah38fvWGzPvfZb/cnIRx
hN4AoIhjVaheWoJFs1ZfFYFOPhOAJoel
=d8au
-----END PGP SIGNATURE-----

--6c2NcOVqGQ03X4Wi--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon May  1 15:56:00 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id PAA28637;
	Mon, 1 May 2000 15:55:59 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id PAA12378;
	Mon, 1 May 2000 15:55:59 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id PAA27895;
	Mon, 1 May 2000 15:55:58 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id PAA13028;
	Mon, 1 May 2000 15:55:40 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id PAA12955
	for packaging-list; Mon, 1 May 2000 15:55:34 -0400
Resent-Date: Mon, 1 May 2000 15:55:34 -0400
Resent-Message-Id: <200005011955.PAA12955@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id PAA12886
	for <packaging@rufus.w3.org>; Mon, 1 May 2000 15:55:25 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id PAA28564
	for packaging@rufus.w3.org; Mon, 1 May 2000 15:54:39 -0400
Date: Mon, 1 May 2000 15:54:39 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000501155439.C5440@devserv.devel.redhat.com>
References: <20000429003653.A2037@mors.wiggy.net> <Pine.LNX.4.21.0005011026220.13497-100000@mercury.devel.redhat.com> <20000501212738.A2751@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000501212738.A2751@mors.wiggy.net>; from wichert@mors.wiggy.net on Mon, May 01, 2000 at 09:27:38PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1172
Lines: 42


On Mon, May 01, 2000 at 09:27:38PM +0200, Wichert Akkerman wrote:
> Previously Erik Troan wrote:
> > Okay, progress :-)
> 
> Okay, lets spec this then. Currently needed metadata per file:
> * ownership
> * filemode
> * md5sum for fast check?
> 

Rpm also has from stat(2)
	st_rdev
	st_ino
	st_mtime
	st_nlink
in metadata, although only the last two are meaningfully used IIRC.

The values are used by rpm, in addition to md5 sums, to identify changed
files during installation, and that modifies the disposition of, for example,
%config marked files during installation.

> Probably rpm-specific for now:
> * filetype flag (doc/non-doc)
> 

Yes, rpm currently has private per-file attributes. Leaving that
in rpm private metadata is best (unless dpkg wishes to use).

This will be generalized in rpm to file classes, basically the
output of file(1) applied to every file stored in a dictionary, with
a per-file token into the dictionary to minimize metadata redundancy.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon May  1 16:14:52 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA29456;
	Mon, 1 May 2000 16:14:52 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA14878;
	Mon, 1 May 2000 16:14:52 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA29157;
	Mon, 1 May 2000 16:14:50 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA15320;
	Mon, 1 May 2000 16:11:28 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA15306
	for packaging-list; Mon, 1 May 2000 16:11:20 -0400
Resent-Date: Mon, 1 May 2000 16:11:20 -0400
Resent-Message-Id: <200005012011.QAA15306@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:root@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA15287
	for <packaging@rufus.w3.org>; Mon, 1 May 2000 16:11:10 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA18276
	for <packaging@rufus.w3.org>; Mon, 1 May 2000 16:08:24 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Mon, 1 May 2000 16:08:24 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <20000501212738.A2751@mors.wiggy.net>
Message-ID: <Pine.LNX.4.21.0005011606390.18256-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 986
Lines: 32


On Mon, 1 May 2000, Wichert Akkerman wrote:

> Okay, lets spec this then. Currently needed metadata per file:
> * ownership

Symbolic name (i.e. not id numbers)

> * filemode
> * md5sum for fast check?

File type (symlink, rdev, etc), mtime, symlink contents, filesize. Most
of stat() contents really.

Link count is an interesting possibility. RPM hasn't used it, but I think
it should be included anyway.

> Probably rpm-specific for now:
> * filetype flag (doc/non-doc config/non-config)

Sure, but dpkg doesn't need to know what's a config file?

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon May  1 16:21:46 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA29761;
	Mon, 1 May 2000 16:21:46 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA15864;
	Mon, 1 May 2000 16:21:46 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA29549;
	Mon, 1 May 2000 16:21:45 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA16277;
	Mon, 1 May 2000 16:21:42 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA16240
	for packaging-list; Mon, 1 May 2000 16:21:35 -0400
Resent-Date: Mon, 1 May 2000 16:21:35 -0400
Resent-Message-Id: <200005012021.QAA16240@rpmfind.net>
Received: from fog.mors.wiggy.net (root@dustpuppy.soil.nl [132.229.135.150])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA16228
	for <packaging@rufus.w3.org>; Mon, 1 May 2000 16:21:28 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id WAA03065
	for packaging@rufus.w3.org; Mon, 1 May 2000 22:15:56 +0200
Date: Mon, 1 May 2000 22:15:56 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: [packaging] release time..
Message-ID: <20000501221556.E2751@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="WK3l2KTTmXPVedZ6"
User-Agent: Mutt/1.0.1i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1318
Lines: 41



--WK3l2KTTmXPVedZ6
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable


I have been getting more and more complaints about the fact that this
is all happening behind close doors, and I've had to promise that we
would release something this week. I don't have a problem with missing
that deadline a bit, but we really should release something that people
can comment on...

I think we need to decide upon the syntax for dependencies and clean
up the text a bit and we should be in a reasonable shape for a release..
or does anyone think otherwise?

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--WK3l2KTTmXPVedZ6
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkN5fwACgkQPLiSUC+jvC3Y4QCgiB+zsjbFbFrCS0ZIjcuK553Q
8NYAn3A0u1d3NbcWGblp8IWpowg4YtIO
=xPon
-----END PGP SIGNATURE-----

--WK3l2KTTmXPVedZ6--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon May  1 16:21:47 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA29769;
	Mon, 1 May 2000 16:21:47 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA15872;
	Mon, 1 May 2000 16:21:46 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA29550;
	Mon, 1 May 2000 16:21:45 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA16278;
	Mon, 1 May 2000 16:21:42 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA16245
	for packaging-list; Mon, 1 May 2000 16:21:36 -0400
Resent-Date: Mon, 1 May 2000 16:21:36 -0400
Resent-Message-Id: <200005012021.QAA16245@rpmfind.net>
Received: from fog.mors.wiggy.net (root@dustpuppy.soil.nl [132.229.135.150])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA16231
	for <packaging@rufus.w3.org>; Mon, 1 May 2000 16:21:30 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id WAA03058
	for packaging@rufus.w3.org; Mon, 1 May 2000 22:14:01 +0200
Date: Mon, 1 May 2000 22:14:01 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000501221401.D2751@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000429003653.A2037@mors.wiggy.net> <Pine.LNX.4.21.0005011026220.13497-100000@mercury.devel.redhat.com> <20000501212738.A2751@mors.wiggy.net> <20000501155439.C5440@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="n/aVsWSeQ4JHkrmm"
User-Agent: Mutt/1.0.1i
In-Reply-To: <20000501155439.C5440@devserv.devel.redhat.com>; from jbj@redhat.com on Mon, May 01, 2000 at 03:54:39PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1407
Lines: 48



--n/aVsWSeQ4JHkrmm
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> Rpm also has from stat(2)
> 	st_rdev
> 	st_ino
> 	st_mtime
> 	st_nlink
> in metadata, although only the last two are meaningfully used IIRC.

I'm curious, what do you use those for? st_rdev and st_ino strike me
as quite useless things to have in the package.=20
=20
> The values are used by rpm, in addition to md5 sums, to identify changed
> files during installation, and that modifies the disposition of, for exam=
ple,
> %config marked files during installation.

Okay, but that means they are generated at install-time, right?

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--n/aVsWSeQ4JHkrmm
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkN5YkACgkQPLiSUC+jvC0E+gCfdLNdAyn4t1TVeTStLu6JFSOV
Pd4AoKGre8oX28ua4EtJcQdVV+Ri9jnd
=aC7c
-----END PGP SIGNATURE-----

--n/aVsWSeQ4JHkrmm--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon May  1 16:22:04 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA29806;
	Mon, 1 May 2000 16:22:03 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA15970;
	Mon, 1 May 2000 16:22:02 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA29576;
	Mon, 1 May 2000 16:22:02 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA16276;
	Mon, 1 May 2000 16:21:42 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA16243
	for packaging-list; Mon, 1 May 2000 16:21:36 -0400
Resent-Date: Mon, 1 May 2000 16:21:36 -0400
Resent-Message-Id: <200005012021.QAA16243@rpmfind.net>
Received: from fog.mors.wiggy.net (root@dustpuppy.soil.nl [132.229.135.150])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA16225
	for <packaging@rufus.w3.org>; Mon, 1 May 2000 16:21:27 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id WAA03098
	for packaging@rufus.w3.org; Mon, 1 May 2000 22:20:00 +0200
Date: Mon, 1 May 2000 22:20:00 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
Message-ID: <20000501222000.G2751@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000501212738.A2751@mors.wiggy.net> <Pine.LNX.4.21.0005011606390.18256-100000@mercury.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="Zrag5V6pnZGjLKiw"
User-Agent: Mutt/1.0.1i
In-Reply-To: <Pine.LNX.4.21.0005011606390.18256-100000@mercury.devel.redhat.com>; from ewt@redhat.com on Mon, May 01, 2000 at 04:08:24PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1468
Lines: 49



--Zrag5V6pnZGjLKiw
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Erik Troan wrote:
> Symbolic name (i.e. not id numbers)

Right, that's what I meant.

> Link count is an interesting possibility. RPM hasn't used it, but I think
> it should be included anyway.

I'm not so sure about its useability, it's quite legal to create a link
to something without having that flagged is an illegal change or so.

> > Probably rpm-specific for now:
> > * filetype flag (doc/non-doc config/non-config)
>=20
> Sure, but dpkg doesn't need to know what's a config file?

Yes, but that's a seperate list for now. It will indeed fold neatly into
this though. Probably should make it common then :)

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--Zrag5V6pnZGjLKiw
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkN5vAACgkQPLiSUC+jvC25BgCcCJk2g7tN2hV8sO5r3/ZeSj4E
YGwAn3V0TTTfAkyYMymovL3wgB6jsw1/
=iZ9m
-----END PGP SIGNATURE-----

--Zrag5V6pnZGjLKiw--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon May  1 16:22:07 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA29814;
	Mon, 1 May 2000 16:22:06 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA15983;
	Mon, 1 May 2000 16:22:04 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA29579;
	Mon, 1 May 2000 16:22:04 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA16275;
	Mon, 1 May 2000 16:21:42 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA16236
	for packaging-list; Mon, 1 May 2000 16:21:34 -0400
Resent-Date: Mon, 1 May 2000 16:21:34 -0400
Resent-Message-Id: <200005012021.QAA16236@rpmfind.net>
Received: from fog.mors.wiggy.net (root@dustpuppy.soil.nl [132.229.135.150])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA16221
	for <packaging@rufus.w3.org>; Mon, 1 May 2000 16:21:26 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id WAA03090
	for packaging@rufus.w3.org; Mon, 1 May 2000 22:17:24 +0200
Date: Mon, 1 May 2000 22:17:24 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: [packaging] dependency syntax
Message-ID: <20000501221724.F2751@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="Zi0sgQQBxRFxMTsj"
User-Agent: Mutt/1.0.1i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1200
Lines: 39



--Zi0sgQQBxRFxMTsj
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable


I was thinking the other day, why would we think of a new syntax
for specifying dependencies, when XML can probably already do that?

We're talking about a pretty simple data structure here, it should
not be hard to model that into XML at all.. it will means it will be
a bit harder to read it manually, but it will make the tools and code
a bunch simpler.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--Zi0sgQQBxRFxMTsj
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkN5lQACgkQPLiSUC+jvC0lAACfY3VPppOv2oosjXO2RLqgdZ93
GHUAoJFE8NImUvRLxjBgJNoVoDf5VvNr
=Va+G
-----END PGP SIGNATURE-----

--Zi0sgQQBxRFxMTsj--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon May  1 16:24:51 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA29924;
	Mon, 1 May 2000 16:24:50 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA16378;
	Mon, 1 May 2000 16:24:46 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA29738;
	Mon, 1 May 2000 16:24:45 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA16507;
	Mon, 1 May 2000 16:24:15 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA16498
	for packaging-list; Mon, 1 May 2000 16:24:11 -0400
Resent-Date: Mon, 1 May 2000 16:24:11 -0400
Resent-Message-Id: <200005012024.QAA16498@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA16494
	for <packaging@rufus.w3.org>; Mon, 1 May 2000 16:24:08 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12mMjL-0002c6-00; Mon, 01 May 2000 13:23:47 -0700
Date: Mon, 1 May 2000 13:23:47 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <20000501212738.A2751@mors.wiggy.net>
Message-ID: <Pine.LNX.4.10.10005011322150.10026-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 595
Lines: 23


On Mon, 1 May 2000, Wichert Akkerman wrote:

> Previously Erik Troan wrote:
> > Okay, progress :-)
> 
> Okay, lets spec this then. Currently needed metadata per file:
> * ownership
> * filemode
> * md5sum for fast check?

md5sums also to be able to do debian style config file updates.

> Probably rpm-specific for now:
> * filetype flag (doc/non-doc)

Could we have a general file category? If we use XML for metadata then we
could attach any number of attributes to a file.


----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon May  1 16:36:53 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA30486;
	Mon, 1 May 2000 16:36:52 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA18952;
	Mon, 1 May 2000 16:36:52 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA30696;
	Mon, 1 May 2000 16:36:49 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA17477;
	Mon, 1 May 2000 16:36:30 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA17454
	for packaging-list; Mon, 1 May 2000 16:36:25 -0400
Resent-Date: Mon, 1 May 2000 16:36:25 -0400
Resent-Message-Id: <200005012036.QAA17454@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:root@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA17446
	for <packaging@rufus.w3.org>; Mon, 1 May 2000 16:36:22 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA19228
	for <packaging@rufus.w3.org>; Mon, 1 May 2000 16:33:39 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Mon, 1 May 2000 16:33:39 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <20000501222000.G2751@mors.wiggy.net>
Message-ID: <Pine.LNX.4.21.0005011632580.19204-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 997
Lines: 27


On Mon, 1 May 2000, Wichert Akkerman wrote:

> > Link count is an interesting possibility. RPM hasn't used it, but I think
> > it should be included anyway.
> 
> I'm not so sure about its useability, it's quite legal to create a link
> to something without having that flagged is an illegal change or so.

That's why we haven't used it yet (note that st_ino, st_rdev, and st_nlink
are all there for the same purpose).

> Yes, but that's a seperate list for now. It will indeed fold neatly into
> this though. Probably should make it common then :)

Definitely!

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon May  1 16:37:13 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA30503;
	Mon, 1 May 2000 16:37:13 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA19002;
	Mon, 1 May 2000 16:37:12 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA30732;
	Mon, 1 May 2000 16:37:11 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA17533;
	Mon, 1 May 2000 16:36:56 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA17524
	for packaging-list; Mon, 1 May 2000 16:36:53 -0400
Resent-Date: Mon, 1 May 2000 16:36:53 -0400
Resent-Message-Id: <200005012036.QAA17524@rpmfind.net>
Received: from mercury.devel.redhat.com (IDENT:root@mercury.devel.redhat.com [207.175.42.44])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA17516
	for <packaging@rufus.w3.org>; Mon, 1 May 2000 16:36:48 -0400
Received: from localhost (ewt@localhost)
	by mercury.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA19234
	for <packaging@rufus.w3.org>; Mon, 1 May 2000 16:33:58 -0400
X-Authentication-Warning: mercury.devel.redhat.com: ewt owned process doing -bs
Date: Mon, 1 May 2000 16:33:58 -0400 (EDT)
From: Erik Troan <ewt@redhat.com>
X-Sender: ewt@mercury.devel.redhat.com
To: packaging@rufus.w3.org
Subject: Re: [packaging] archive format
In-Reply-To: <Pine.LNX.4.10.10005011322150.10026-100000@home.lameter.com>
Message-ID: <Pine.LNX.4.21.0005011633500.19204-100000@mercury.devel.redhat.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 703
Lines: 22


On Mon, 1 May 2000, Christoph Lameter wrote:

> > Okay, lets spec this then. Currently needed metadata per file:
> > * ownership
> > * filemode
> > * md5sum for fast check?
> 
> md5sums also to be able to do debian style config file updates.

RPM needs this as well.

Erik

-------------------------------------------------------------------------------
|            "Who is John Galt?" - Atlas Shrugged by Ayn Rand		      |
|                                                                             |
|  Linux Application Development  --  http://people.redhat.com/johnsonm/lad   |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue May  2 02:47:58 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id CAA17613;
	Tue, 2 May 2000 02:47:54 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id CAA12562;
	Tue, 2 May 2000 02:47:46 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id CAA04281;
	Tue, 2 May 2000 02:47:46 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id CAA32082;
	Tue, 2 May 2000 02:47:44 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id CAA32070
	for packaging-list; Tue, 2 May 2000 02:47:40 -0400
Resent-Date: Tue, 2 May 2000 02:47:40 -0400
Resent-Message-Id: <200005020647.CAA32070@rpmfind.net>
Received: from tux.inrialpes.fr (IDENT:root@tux.inrialpes.fr [194.199.20.134])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id CAA32060
	for <packaging@rufus.w3.org>; Tue, 2 May 2000 02:47:36 -0400
Received: (from veillard@localhost)
	by tux.inrialpes.fr (8.9.3/8.9.3) id IAA21133
	for packaging@rufus.w3.org; Tue, 2 May 2000 08:47:05 +0200
Date: Tue, 2 May 2000 08:47:05 +0200
From: Daniel Veillard <Daniel.Veillard@w3.org>
To: packaging@rufus.w3.org
Subject: Re: [packaging] release time..
Message-ID: <20000502084705.C20704@w3.org>
References: <20000501221556.E2751@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000501221556.E2751@mors.wiggy.net>; from wichert@mors.wiggy.net on Mon, May 01, 2000 at 10:15:56PM +0200
Organization: World Wide Web Consortium (W3C http://www.w3.org/)
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1071
Lines: 26


On Mon, May 01, 2000 at 10:15:56PM +0200, Wichert Akkerman wrote:
> 
> I have been getting more and more complaints about the fact that this
> is all happening behind close doors, and I've had to promise that we
> would release something this week. I don't have a problem with missing
> that deadline a bit, but we really should release something that people
> can comment on...
> 
> I think we need to decide upon the syntax for dependencies and clean
> up the text a bit and we should be in a reasonable shape for a release..
> or does anyone think otherwise?

  Actually getting a pointer to the given text would help answering :-)
Is that on-line ?

Daniel

-- 
Daniel.Veillard@w3.org | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux XML libxml WWW
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | Gnome rpm2html rpmfind
 http://www.w3.org/People/all#veillard%40w3.org  | RPM badminton Kaffe
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue May  2 02:53:22 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id CAA17722;
	Tue, 2 May 2000 02:53:21 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id CAA12880;
	Tue, 2 May 2000 02:53:21 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id CAA04681;
	Tue, 2 May 2000 02:53:21 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id CAA32579;
	Tue, 2 May 2000 02:53:32 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id CAA32570
	for packaging-list; Tue, 2 May 2000 02:53:25 -0400
Resent-Date: Tue, 2 May 2000 02:53:25 -0400
Resent-Message-Id: <200005020653.CAA32570@rpmfind.net>
Received: from tux.inrialpes.fr (IDENT:root@tux.inrialpes.fr [194.199.20.134])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id CAA32567
	for <packaging@rufus.w3.org>; Tue, 2 May 2000 02:53:20 -0400
Received: (from veillard@localhost)
	by tux.inrialpes.fr (8.9.3/8.9.3) id IAA21221
	for packaging@rufus.w3.org; Tue, 2 May 2000 08:52:58 +0200
Date: Tue, 2 May 2000 08:52:58 +0200
From: Daniel Veillard <Daniel.Veillard@w3.org>
To: packaging@rufus.w3.org
Subject: Re: [packaging] dependency syntax
Message-ID: <20000502085258.D20704@w3.org>
References: <20000501221724.F2751@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000501221724.F2751@mors.wiggy.net>; from wichert@mors.wiggy.net on Mon, May 01, 2000 at 10:17:24PM +0200
Organization: World Wide Web Consortium (W3C http://www.w3.org/)
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1278
Lines: 28


On Mon, May 01, 2000 at 10:17:24PM +0200, Wichert Akkerman wrote:
> 
> I was thinking the other day, why would we think of a new syntax
> for specifying dependencies, when XML can probably already do that?
> 
> We're talking about a pretty simple data structure here, it should
> not be hard to model that into XML at all.. it will means it will be
> a bit harder to read it manually, but it will make the tools and code
> a bunch simpler.

  Just to note that I currently keep RPM dependancies (though not 
as extensive as RPM or Deb can express) in XML format. Fairly simple
for now, but the key point is that encoding it in XML properly would
allow the dependancies expression to be easilly upgradable. If the tools
don't have a specific syntax parser but use the more generic XML syntax
they won't choke as easilly if one extend the the dependancy syntax.

Daniel

-- 
Daniel.Veillard@w3.org | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux XML libxml WWW
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | Gnome rpm2html rpmfind
 http://www.w3.org/People/all#veillard%40w3.org  | RPM badminton Kaffe
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue May  2 17:05:51 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA17563;
	Tue, 2 May 2000 17:05:50 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id RAA31361;
	Tue, 2 May 2000 17:05:47 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id RAA00927;
	Tue, 2 May 2000 17:05:47 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id RAA08293;
	Tue, 2 May 2000 17:05:03 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id RAA08270
	for packaging-list; Tue, 2 May 2000 17:05:00 -0400
Resent-Date: Tue, 2 May 2000 17:05:00 -0400
Resent-Message-Id: <200005022105.RAA08270@rpmfind.net>
Received: from fog.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id RAA08249
	for <packaging@rufus.w3.org>; Tue, 2 May 2000 17:04:57 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id LAA01804
	for packaging@rufus.w3.org; Tue, 2 May 2000 11:24:52 +0200
Date: Tue, 2 May 2000 11:24:52 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] dependency syntax
Message-ID: <20000502112452.C809@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000501221724.F2751@mors.wiggy.net> <20000502085258.D20704@w3.org>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="kfjH4zxOES6UT95V"
User-Agent: Mutt/1.0.1i
In-Reply-To: <20000502085258.D20704@w3.org>; from Daniel.Veillard@w3.org on Tue, May 02, 2000 at 08:52:58AM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1245
Lines: 39



--kfjH4zxOES6UT95V
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Daniel Veillard wrote:
>   Just to note that I currently keep RPM dependancies (though not=20
> as extensive as RPM or Deb can express) in XML format. Fairly simple
> for now, but the key point is that encoding it in XML properly would
> allow the dependancies expression to be easilly upgradable.

Ah, good! Can you give us a short description of the syntax so we can
extend that if needed?

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--kfjH4zxOES6UT95V
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkOnuQACgkQPLiSUC+jvC2fagCggwGtnG1UKboATaQRjTN4QFwf
f+YAni3Xg//BjdJyzAgmFp3mCOkTMKll
=PULx
-----END PGP SIGNATURE-----

--kfjH4zxOES6UT95V--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue May  2 17:06:40 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA17607;
	Tue, 2 May 2000 17:06:40 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id RAA31631;
	Tue, 2 May 2000 17:06:40 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id RAA00999;
	Tue, 2 May 2000 17:06:39 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id RAA08273;
	Tue, 2 May 2000 17:05:01 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id RAA08250
	for packaging-list; Tue, 2 May 2000 17:04:58 -0400
Resent-Date: Tue, 2 May 2000 17:04:58 -0400
Resent-Message-Id: <200005022104.RAA08250@rpmfind.net>
Received: from fog.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id RAA08239
	for <packaging@rufus.w3.org>; Tue, 2 May 2000 17:04:46 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id LAA01810
	for packaging@rufus.w3.org; Tue, 2 May 2000 11:25:33 +0200
Date: Tue, 2 May 2000 11:25:33 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] release time..
Message-ID: <20000502112533.D809@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000501221556.E2751@mors.wiggy.net> <20000502084705.C20704@w3.org>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="jCrbxBqMcLqd4mOl"
User-Agent: Mutt/1.0.1i
In-Reply-To: <20000502084705.C20704@w3.org>; from Daniel.Veillard@w3.org on Tue, May 02, 2000 at 08:47:05AM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1123
Lines: 38



--jCrbxBqMcLqd4mOl
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Daniel Veillard wrote:
>   Actually getting a pointer to the given text would help answering :-)
> Is that on-line ?

Currently, no. I'll update it tonight and put it online somewhere.
Perhaps I should rewrite it into docbook or so as well so I can
convert it to html..

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--jCrbxBqMcLqd4mOl
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkOnw0ACgkQPLiSUC+jvC35YQCgq2B9GgBcW1y+0SPM8iSPFGvO
AOQAni5EFE6f7mojzS5d6V+KIhB5Ec8D
=RZrN
-----END PGP SIGNATURE-----

--jCrbxBqMcLqd4mOl--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed May  3 05:09:55 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id FAA11566;
	Wed, 3 May 2000 05:09:50 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id FAA09134;
	Wed, 3 May 2000 05:09:50 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id FAA00746;
	Wed, 3 May 2000 05:09:49 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id FAA09503;
	Wed, 3 May 2000 05:09:40 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id FAA09479
	for packaging-list; Wed, 3 May 2000 05:09:33 -0400
Resent-Date: Wed, 3 May 2000 05:09:33 -0400
Resent-Message-Id: <200005030909.FAA09479@rpmfind.net>
Received: from tux.inrialpes.fr (IDENT:root@tux.inrialpes.fr [194.199.20.134])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id FAA09461
	for <packaging@rufus.w3.org>; Wed, 3 May 2000 05:09:24 -0400
Received: (from veillard@localhost)
	by tux.inrialpes.fr (8.9.3/8.9.3) id LAA24315
	for packaging@rufus.w3.org; Wed, 3 May 2000 11:08:50 +0200
Date: Wed, 3 May 2000 11:08:50 +0200
From: Daniel Veillard <Daniel.Veillard@w3.org>
To: packaging@rufus.w3.org
Subject: Re: [packaging] dependency syntax
Message-ID: <20000503110850.I22958@w3.org>
References: <20000501221724.F2751@mors.wiggy.net> <20000502085258.D20704@w3.org> <20000502112452.C809@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000502112452.C809@mors.wiggy.net>; from wichert@mors.wiggy.net on Tue, May 02, 2000 at 11:24:52AM +0200
Organization: World Wide Web Consortium (W3C http://www.w3.org/)
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2707
Lines: 72


On Tue, May 02, 2000 at 11:24:52AM +0200, Wichert Akkerman wrote:
> Previously Daniel Veillard wrote:
> >   Just to note that I currently keep RPM dependancies (though not 
> > as extensive as RPM or Deb can express) in XML format. Fairly simple
> > for now, but the key point is that encoding it in XML properly would
> > allow the dependancies expression to be easilly upgradable.
> 
> Ah, good! Can you give us a short description of the syntax so we can
> extend that if needed?

  The one i currently use is a bit strange due to the mapping to the
RDF syntax, e.g.:
  http://rpmfind.net/linux/RDF/helix/distributions/Red_Hat_6gmc-4.5.42-6_helix_2.i386.rdf

  I would suggest something like the following
  <Provides>
    <Resource>gmc</Resource>
  </Provides>
  <Requires>
    <Resource>mc</Resource>
    <Resource>ld-linux.so.2</Resource>
    <Resource>libICE.so.6</Resource>
    [...]
  </Requires>

Where the resource can be either a package or a virtual resource (like
"webserver"), not having access to current stuff I lack the terminology.

Expressing complex conditions can be done in multiple ways:

  1/ express the condition within the resource
     a/ in the content
        <Resource>mc >= 2.12</Resource>
	but one loose the advantage of the parsing at the XML level
     b/ as an attribute
        <Resource ge="2.12">mc</Resource>
	very simple tools may just drop attributes and do a semi decent
	job at analyzing the information
  2/ express the constraints independantly:

     <Requires>
       <Resource>mc</Resource>
       [...]
     a/<Constraints>mc >= 2.12</Constraints>
       or
     b/<Constraints>mc<ge/>2.12</Constraints>
     </Requires>

     Having the constraints separated allows more powerful expressions
     (like mixing depends like mc >= 2.12 or libgnomesupport >= 1.0)

  I would opt for 2/ just for expressiveness
An XML expression structured approach like 2/ b/ makes writing a Dtd
a bit harder, and is not as directly mappable to the underlying 
package engine for such  syntax. I may explore more deeply 2/ b/ if
you feel it's the adequate way to handle expression constraints.

  In any case I suggest allowing an optional href="...." attribute on
the Resource tag to allow the packager specify the URL of a package
providing the resource.

Daniel

-- 
Daniel.Veillard@w3.org | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux XML libxml WWW
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | Gnome rpm2html rpmfind
 http://www.w3.org/People/all#veillard%40w3.org  | RPM badminton Kaffe
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May  5 12:59:30 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA32251;
	Fri, 5 May 2000 12:59:29 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA21303;
	Fri, 5 May 2000 12:59:25 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA05542;
	Fri, 5 May 2000 12:59:24 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA23419;
	Fri, 5 May 2000 12:58:26 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA23409
	for packaging-list; Fri, 5 May 2000 12:58:22 -0400
Resent-Date: Fri, 5 May 2000 12:58:22 -0400
Resent-Message-Id: <200005051658.MAA23409@rpmfind.net>
Received: from fog.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA23400
	for <packaging@rufus.w3.org>; Fri, 5 May 2000 12:58:15 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id SAA10778
	for packaging@rufus.w3.org; Fri, 5 May 2000 18:56:15 +0200
Date: Fri, 5 May 2000 18:56:15 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] dependency syntax
Message-ID: <20000505185615.A10769@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000501221724.F2751@mors.wiggy.net> <20000502085258.D20704@w3.org> <20000502112452.C809@mors.wiggy.net> <20000503110850.I22958@w3.org>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="W/nzBZO5zC0uMSeA"
User-Agent: Mutt/1.0.1i
In-Reply-To: <20000503110850.I22958@w3.org>; from Daniel.Veillard@w3.org on Wed, May 03, 2000 at 11:08:50AM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1614
Lines: 53



--W/nzBZO5zC0uMSeA
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable


Daniel and I had a very short discussion about this on irc yesterday
and he made a mapping from the dependency tree to XML syntax. This
makes things a bit harder to read for us humans, but means we will
no longer need a special parser since the XML parser we already need
will do everything for us.

This is what it looks like: (partial dependencies for the gs package)

<Depends><and>
     <ge><resource>freetype</resource><version>1.3.1</version></ge>
     <ge><resource>libc6</resource><version>2.2.12</version></ge>
     <or><resource>svgalib</resource><resource>svgalib-dummyg1</resource></=
or>
</and></Depends>

In dpkg syntax this was:

  Depends: freetype (>=3D1.3.1), libc6 (>=3D2.2.12), svgalib | svgalib-dumm=
yg1

resource can be either `package' or `file'.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--W/nzBZO5zC0uMSeA
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkS/S8ACgkQPLiSUC+jvC2WrACfYAJk+hk0PeOaR1Xlqtowe5OY
CqEAnRL2U/dgOAyXDWapDvHsxZYbgvBS
=pNLa
-----END PGP SIGNATURE-----

--W/nzBZO5zC0uMSeA--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May  5 13:00:21 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id NAA32327;
	Fri, 5 May 2000 13:00:20 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id NAA21537;
	Fri, 5 May 2000 13:00:20 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id NAA05604;
	Fri, 5 May 2000 13:00:19 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA23639;
	Fri, 5 May 2000 13:00:24 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA23628
	for packaging-list; Fri, 5 May 2000 13:00:21 -0400
Resent-Date: Fri, 5 May 2000 13:00:21 -0400
Resent-Message-Id: <200005051700.NAA23628@rpmfind.net>
Received: from fog.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA23612
	for <packaging@rufus.w3.org>; Fri, 5 May 2000 13:00:05 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id SAA10811
	for packaging@rufus.w3.org; Fri, 5 May 2000 18:58:47 +0200
Date: Fri, 5 May 2000 18:58:47 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: [packaging] [wichert@mors.wiggy.net: updated text]
Message-ID: <20000505185847.A10800@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="fdj2RfSjLxBAspz7"
User-Agent: Mutt/1.0.1i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 11406
Lines: 314



--fdj2RfSjLxBAspz7
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable


Lets try sending this to the correct address :(

Wichert.

----- Forwarded message from Wichert Akkerman <wichert@mors.wiggy.net> -----

Date: Fri, 5 May 2000 18:52:49 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3c.org
Cc: quinlan@transmeta.com
Subject: updated text


I updated the text a bit:
* it now lists multiple payloads as an option (but not very well, I'll
  fix that)
* describes all package relations, as well as put them in the example
  XML metadata
* added a couple more dpkg-specific tags and a couple of rpm-specific
  tags
* add example for signatures-file

Reading it again it probably could use a reasonably big rewrite, I'll
try and do that this weekend.

Wichert.

PS: and we really need a name for this beast!

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |


Introduction
------------
For a while now Linux has had two popular package formats: the rpm format
as made by Red Hat, and the deb format as created by Debian. This has been
a bit problematic since it means vendors have to support both formats.

As a result there has been a desire for a while now to create a common pack=
age
format that makes it possible to use package on all distributions. We belie=
ve
that will the help of a standard such as the LSB is developing this will he=
lp
make Linux more accessible and friendly.

Design goals
------------
Both the deb and the rpm-format have some unique features that the other
format does not have. Our main goal was creating a new format that would
be a good common ground.

Since all distributions take slightly different approaches in some areas
it should also be possible to have distribution-specific extensions.
We also wanted to add some new features that both formats were lacking
in, such as good verification systems and multi-language support.

We felt another important aspect of a good format is that it should be
extractable using only standard tools. That way even when a
packagemanager is not available software can still be installed.

Global overview
---------------
A package is an tar-archive that one or more payloads. Each payload
consists of two or more seperate files which contain the metadata and
data. Each file can be compressed using either gzip or bzip2 to save space.

tar allows for extensions to its format for extra features. For this
format only the format as described in POSIX 1003.1-1990, and the
GNU extensions for long filenames and sparse files are used.

The files per payload are:

* metadata-VERSION:
  this file serves two purposes: it encodes the version of the
  format used in its filename, and it contains the meta-information
  for the payload in XML format.
* scripts.tar: archive containing special scripts/programs that should
  be run at specific moments during package installation or removal
* data.tar: archive containing the actually files in the package
* signatures: XML-file with signatures for all the other files. This
  section is optional.

This is also the order in which sections must be stored in the archive:
metadata at the beginning so we can see what version of the format is
used and so we can easily extract and show it without having to read the
entire package a. Then scripts, since we can run a script before we
start the actual installation. Signatures are at the end so we can write
all the other sections first and then calculate the signature.

Metadata
--------
We choose to use the XML-format (see http://www.w3.org/TR/REC-xml) since
it as a very extensible and non-proprietary description format, well
suited for inter application exchanges. It also allows us to easily add
features such as translation and distribution-specific extensions.

The basic structure of the XML data is as follows:
  <package>
    common information
	distribution-specific information
  </package>

For the distribution-specific information we use XML namespaces (see
http://www.w3.org/TR/REC-xml-names).

Common metadata-information
---------------------------
(Note: in package relations I will use the term `resource': a resource
here can be either a package or a file).

Meta information per payload:

* name: packagename
* version: versionnumber of package, using the format
  (<epoch>:)?<upstream>-<distribution>
* summary: short description of the package (1-line, maximum 60
  characters?)
* description: comprehensive description of the package
* keywords: (optional) list of keywords that apply to this package
* author: author of this package, can also be a group or mailinglist=20
* home: (optional) upstream location of sources (URI)
* packager: person who created this package
* origin: distribution/project this package was made for (ie Debian,
  GNOME, Red Hat, etc.)
* license: (optional) copyright for the contents (ie GPL, LGPL, BSD,
  MIT, etc.)=20
* pre-depends: lists resources that must be available before we start
  install the package. (Useful if they are used by pre-installation
  scripts for example)
* depends: lists resources that must be available when we configure a
  package (ie the moment when the post-installation script is run before
  we declare a package as correctly installed)
* recommends: lists other packages that are strongly recommended to also
  be installed
* suggests: lists other packages that a user may also be interested in
* enhances: states that a package can enhance the functionality of other
  packages (think gpg-idea enhances gpg)
* conflicts: lists resources which may not be available when a package
  is installed (think sendmail & postfix)
* replaces: lists resources that we may overlap with
* obsoletes: lists packages that are be obsoleted by this package

Besides this information we also store information about files shipped
in the payload:
* user
* group
* permissions
* filetype
* md5sum
* conffile

Packagemanagers can use XML namespaces to hide information that is
specific for a distribution.=20

An example:
  <package xmlns:rpm=3D"http://www.rpm.org/v4.0"
           xmlns:deb=3D"http://www.debian.org/dpkg/v2.0">
    <name>hello</name>
    <version>1.2-1</version>
    <summary>The classic `hello world' program.</summary>
    <description>
      This package is an implementation of the classic `hello world'
      program. It shows the preferred coding style and also serves
      as an example of making packages.
    </description>
    <keywords>hello,packaging</keywords>
    <author>
       <name>Joe R. Hacker</name>
       <email>hacker@unknown.net</email>
       <nick>jrh</nick>
    </author>
    <packager>
       <name>A. Packages</name>
       <email>ap@debian.org</email>
    </packager>
    <Depends><and>
       <ge><resource>libc6</resource><version>2.2.12</version></ge>
       <or><resource>make</resource><resource>pmake</resource></or>
    </and></Depends>
    <home>ftp://sunsite.unc.edu:/pub/Linux/system/Misc/hello.tar.gz</home>
    <origin>Debian</origin>
    <license>GPL</license>
    XXXX this should list file locations here!
  </package>

Please note that for persons we have made tags for name, email and nick.
We felt that nick was necessary since these days some people are better
known by their (IRC-)nickname then their given name.

Distribution-specific metadata-information
------------------------------------------
Each distribution will have to create their own tags for features they
need that are not covered by the common tags. We propose however that
those tags are registered at a central point so we can keep track of
them and optionally consider making some tags common if multiple
distributions use them.

Currently known distribution-specific tags:
* Debian:
  + essential: (optional) marks a package as required so the
    package-manager refuses to uninstall it
  + maintainer: name and contact for person(s) who maintains this package
  + installed-size: size of package after installation
  + section: section package belongs to (base/libs/devel/etc.)
  + priority: used by package-frontends
  + build-depends,build-conflicts: build dependencies
  + build-indep-depends,build-indep-conflicts: build dependencies for
    building architecture indendepent parts of the package

* Red Hat:
  + buildhost
  + icon
  + changelogname

Scripts-section
---------------
When you install, ugrade or remove a package special programs can be
run. These can be used for example to (un)register documentation,=20
fix permissions, start/stop/restart daemons, etc. There are eight
programs:
  * prerm: used before a package is being removed or purged
  * postrm: used after a package is removed or purged
  * preinst: run before a package is installed/upgraded
  * postinst: run before a package is installed/upgraded
  * trigger-prerm: run before a resource we have a trigger for is removed
  * trigger-postrm: run after a resource we have a trigger for is removed
  * trigger-preinst: run before a resource we have a trigger for is install=
ed
  * trigger-postinst: run after a resource we have a trigger for is install=
ed

Data-section
------------
The file contains the data that is to be installed on the filesystem.


Signature-section
-----------------
This section contains signatures for the data in the other sections. The
exact data used is the contents of the metata.gz, scripts.tar.gz (if
present) and data.tar.gz files concatenated. The signatures are stored
in XML-format so it is easy to have multiple signatures and add new
signature types later. Current signature types are:
  * pgp2
  * OpenPGP (used by GnuPG and pgp5)
  * MD5

An example:
   <signatures>
     <md5 file=3D"metadata-1-1">db9557f3fdd690d07bc9f2682b7d0447</md5>
     <md5 file=3D"payload-1">732813edc871575e107dd8324ed417ce</md5>
     <OpenPGP file=3D"metadata-1-1">
   -----BEGIN PGP SIGNATURE-----
   Version: GnuPG v1.0.1 (GNU/Linux)
   Comment: For info see http://www.gnupg.org

   iD8DBQA4w1bAP4VifPYwQCsRApV7AJ9xporhmU11+nOYgHFSVQJ++UtHsgCgwawT
   ruLKGjuFPQnNmLamTU9OTEI=3D
   =3DWg9K
   -----END PGP SIGNATURE-----
     </OpenPGP>
     <OpenPGP file=3D"metadata-1-1">
   -----BEGIN PGP SIGNATURE-----
   Version: GnuPG v1.0.1 (GNU/Linux)
   Comment: For info see http://www.gnupg.org

   iD8DBQA4w1blP4VifPYwQCsRAp0ZAJ9zBMy75Og3RpoYceg2ULgNb1MynACfXk6u
   3mKwj/m750YKblxz4jjeq1k=3D
   =3DN9zL
   -----END PGP SIGNATURE-----
     </OpenPGP>
   </signatures>






----- End forwarded message -----

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--fdj2RfSjLxBAspz7
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkS/cYACgkQPLiSUC+jvC3oKACfQs+va2s+KYXlfdfhGJK61Hy8
BRsAoJ45e4hKIdJYzXumT8X2xgAW6eRZ
=T+1p
-----END PGP SIGNATURE-----

--fdj2RfSjLxBAspz7--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May  5 13:15:43 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id NAA01544;
	Fri, 5 May 2000 13:15:43 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id NAA06576;
	Fri, 5 May 2000 13:15:41 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id NAA06781;
	Fri, 5 May 2000 13:15:41 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA25177;
	Fri, 5 May 2000 13:15:51 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA25160
	for packaging-list; Fri, 5 May 2000 13:15:47 -0400
Resent-Date: Fri, 5 May 2000 13:15:47 -0400
Resent-Message-Id: <200005051715.NAA25160@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA25151
	for <packaging@rufus.w3.org>; Fri, 5 May 2000 13:15:40 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id NAA01516
	for packaging@rufus.w3.org; Fri, 5 May 2000 13:15:07 -0400
Date: Fri, 5 May 2000 13:15:07 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] dependency syntax
Message-ID: <20000505131507.U5440@devserv.devel.redhat.com>
References: <20000501221724.F2751@mors.wiggy.net> <20000502085258.D20704@w3.org> <20000502112452.C809@mors.wiggy.net> <20000503110850.I22958@w3.org> <20000505185615.A10769@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000505185615.A10769@mors.wiggy.net>; from wichert@mors.wiggy.net on Fri, May 05, 2000 at 06:56:15PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1902
Lines: 54


On Fri, May 05, 2000 at 06:56:15PM +0200, Wichert Akkerman wrote:
> 
> Daniel and I had a very short discussion about this on irc yesterday
> and he made a mapping from the dependency tree to XML syntax. This
> makes things a bit harder to read for us humans, but means we will
> no longer need a special parser since the XML parser we already need
> will do everything for us.
> 
> This is what it looks like: (partial dependencies for the gs package)
> 
> <Depends><and>
>      <ge><resource>freetype</resource><version>1.3.1</version></ge>
>      <ge><resource>libc6</resource><version>2.2.12</version></ge>
>      <or><resource>svgalib</resource><resource>svgalib-dummyg1</resource></or>
> </and></Depends>
> 
> In dpkg syntax this was:
> 
>   Depends: freetype (>=1.3.1), libc6 (>=2.2.12), svgalib | svgalib-dummyg1
> 
> resource can be either `package' or `file'.
> 

The above looks usable with the following reservations:

1) Rpm has file dependencies and these may (at some point) have versions.
Is the correct XML representation for that
	Requires: /bin/sh = 0:1.2-3
something like
    <eq><resource>/bin/sh</resource><version>0:1.2-3</version></eq>
or the more complicated
    <eq><resource>/bin/sh</resource><epoch>0</epoch><version>1.2</version><release>3</release></eq>

2) If rpm splits file paths into (dirname,basename) pairs, and then puts
dirnames into a dictionary to remove bloat, how can that be represented?
(I can guess, but I'd like an expert opinion).

3) Rpm will have dependencies that look like
	Requires: PATH(grep)
with which(1)-like semantics (e.g. satisfy if grep can be found in $PATH).
How can that be represented?

4) Ditto LD_LIBRARY_PATH(libfoo), similar to 3).

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May  5 13:33:11 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id NAA03474;
	Fri, 5 May 2000 13:33:11 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id NAA23517;
	Fri, 5 May 2000 13:33:07 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id NAA08368;
	Fri, 5 May 2000 13:33:06 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA26750;
	Fri, 5 May 2000 13:32:46 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA26730
	for packaging-list; Fri, 5 May 2000 13:32:42 -0400
Resent-Date: Fri, 5 May 2000 13:32:42 -0400
Resent-Message-Id: <200005051732.NAA26730@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA26726
	for <packaging@rufus.w3.org>; Fri, 5 May 2000 13:32:38 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id NAA03359
	for packaging@rufus.w3.org; Fri, 5 May 2000 13:32:07 -0400
Date: Fri, 5 May 2000 13:32:07 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: [packaging] There's a need for a "unique identifier tag" ...
Message-ID: <20000505133207.V5440@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 717
Lines: 21


As I get ready to start dealing with multiple rpm databases, possibly remote,
I find myself looking for a unique identifier for a package. For legacy rpm
purposes, the tuple (BuildHost,BuildTime) will serve, and for new rpm packaging
something like (md5(source rpm),md5(binary rpm)) avoids grotty problems
with managing IP/MAC address assignment and time skew.

I believe that there is a need for a tag in metadata that is unique independent
of name, version, release, arch, os, platform, etc values.

Suggestions?

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May  5 14:06:35 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id OAA06202;
	Fri, 5 May 2000 14:06:35 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id OAA06989;
	Fri, 5 May 2000 14:06:35 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id OAA10345;
	Fri, 5 May 2000 14:06:34 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id OAA31108;
	Fri, 5 May 2000 14:06:34 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id OAA31096
	for packaging-list; Fri, 5 May 2000 14:06:30 -0400
Resent-Date: Fri, 5 May 2000 14:06:30 -0400
Resent-Message-Id: <200005051806.OAA31096@rpmfind.net>
Received: from tux.inrialpes.fr (IDENT:root@tux.inrialpes.fr [194.199.20.134])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id OAA31089
	for <packaging@rufus.w3.org>; Fri, 5 May 2000 14:06:26 -0400
Received: (from veillard@localhost)
	by tux.inrialpes.fr (8.9.3/8.9.3) id UAA14706
	for packaging@rufus.w3.org; Fri, 5 May 2000 20:05:51 +0200
Date: Fri, 5 May 2000 20:05:51 +0200
From: Daniel Veillard <Daniel.Veillard@w3.org>
To: packaging@rufus.w3.org
Subject: Re: [packaging] dependency syntax
Message-ID: <20000505200551.V3804@w3.org>
References: <20000501221724.F2751@mors.wiggy.net> <20000502085258.D20704@w3.org> <20000502112452.C809@mors.wiggy.net> <20000503110850.I22958@w3.org> <20000505185615.A10769@mors.wiggy.net> <20000505131507.U5440@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000505131507.U5440@devserv.devel.redhat.com>; from jbj@redhat.com on Fri, May 05, 2000 at 01:15:07PM -0400
Organization: World Wide Web Consortium (W3C http://www.w3.org/)
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 3240
Lines: 88


On Fri, May 05, 2000 at 01:15:07PM -0400, Jeff Johnson wrote:
> 
> On Fri, May 05, 2000 at 06:56:15PM +0200, Wichert Akkerman wrote:
> > 
> > Daniel and I had a very short discussion about this on irc yesterday
> > and he made a mapping from the dependency tree to XML syntax. This
> > makes things a bit harder to read for us humans, but means we will
> > no longer need a special parser since the XML parser we already need
> > will do everything for us.
> > 
> > This is what it looks like: (partial dependencies for the gs package)
> > 
> > <Depends><and>
> >      <ge><resource>freetype</resource><version>1.3.1</version></ge>
> >      <ge><resource>libc6</resource><version>2.2.12</version></ge>
> >      <or><resource>svgalib</resource><resource>svgalib-dummyg1</resource></or>
> > </and></Depends>
> > 
> > In dpkg syntax this was:
> > 
> >   Depends: freetype (>=1.3.1), libc6 (>=2.2.12), svgalib | svgalib-dummyg1
> > 
> > resource can be either `package' or `file'.
> > 
> 
> The above looks usable with the following reservations:
> 
> 1) Rpm has file dependencies and these may (at some point) have versions.
> Is the correct XML representation for that
> 	Requires: /bin/sh = 0:1.2-3
> something like
>     <eq><resource>/bin/sh</resource><version>0:1.2-3</version></eq>

use the tag to express the dependancy extension:

<eq><file>/bin/sh</file><epoch>0:1.2-3</epoch>

depending on whether this is an rpm only feature this could also be
<eq><file>/bin/sh</file><rpm:epoch>0:1.2-3</rpm:epoch>

i.e. anchor the tags in the RPM related namespace.

> or the more complicated
>     <eq><resource>/bin/sh</resource><epoch>0</epoch><version>1.2</version><release>3</release></eq>

  well a lisp like version would be
  (= "/bin/sh" "0" "1.2" "3") which doesn't really make sense, you have
a logical "and" operation here actually
  (= "/bin/sh" (and (= epoch 0) (= version 1.2) (= release 3))

<eq><file>/bin/sh</file><and><epoch>0</epoch><version>1.2</version><rel>3</rel></and></eq>

  it IMHO all depends if the concepts and syntax of epoch:release-version 
is suitable for everybody, otherwise make it an rpm specific syntax, possibly
tighter

> 2) If rpm splits file paths into (dirname,basename) pairs, and then puts
> dirnames into a dictionary to remove bloat, how can that be represented?
> (I can guess, but I'd like an expert opinion).

  Don't know honnestly. Sounds like a BASE mechanism, but it's not yet
deployed in XML.

> 3) Rpm will have dependencies that look like
> 	Requires: PATH(grep)
> with which(1)-like semantics (e.g. satisfy if grep can be found in $PATH).
> How can that be represented?

   <Requires><rpm:PATH>grep</rpm:PATH></Requires>

  a packager not implementing rpm subset wouldnot bother continuing the
analysis.

> 4) Ditto LD_LIBRARY_PATH(libfoo), similar to 3).

  ditto :-)

Daniel

-- 
Daniel.Veillard@w3.org | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux XML libxml WWW
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | Gnome rpm2html rpmfind
 http://www.w3.org/People/all#veillard%40w3.org  | RPM badminton Kaffe
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May  5 15:25:42 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id PAA13992;
	Fri, 5 May 2000 15:25:41 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id PAA18267;
	Fri, 5 May 2000 15:25:41 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id PAA15682;
	Fri, 5 May 2000 15:25:40 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id PAA17243;
	Fri, 5 May 2000 15:25:24 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id PAA17233
	for packaging-list; Fri, 5 May 2000 15:25:20 -0400
Resent-Date: Fri, 5 May 2000 15:25:20 -0400
Resent-Message-Id: <200005051925.PAA17233@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id PAA17230
	for <packaging@rufus.w3.org>; Fri, 5 May 2000 15:25:17 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id PAA13825
	for packaging@rufus.w3.org; Fri, 5 May 2000 15:24:35 -0400
Date: Fri, 5 May 2000 15:24:35 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] dependency syntax
Message-ID: <20000505152435.W5440@devserv.devel.redhat.com>
References: <20000501221724.F2751@mors.wiggy.net> <20000502085258.D20704@w3.org> <20000502112452.C809@mors.wiggy.net> <20000503110850.I22958@w3.org> <20000505185615.A10769@mors.wiggy.net> <20000505131507.U5440@devserv.devel.redhat.com> <20000505200551.V3804@w3.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000505200551.V3804@w3.org>; from Daniel.Veillard@w3.org on Fri, May 05, 2000 at 08:05:51PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 355
Lines: 17


On Fri, May 05, 2000 at 08:05:51PM +0200, Daniel Veillard wrote:
> 
>   ditto :-)
> 

This nascent XML monkey needs examples. Thanks for providing them!

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May  5 17:28:24 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA25279;
	Fri, 5 May 2000 17:28:23 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id RAA32040;
	Fri, 5 May 2000 17:28:18 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id RAA23374;
	Fri, 5 May 2000 17:28:17 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id RAA29592;
	Fri, 5 May 2000 17:27:51 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id RAA29582
	for packaging-list; Fri, 5 May 2000 17:27:46 -0400
Resent-Date: Fri, 5 May 2000 17:27:46 -0400
Resent-Message-Id: <200005052127.RAA29582@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id RAA29575
	for <packaging@rufus.w3.org>; Fri, 5 May 2000 17:27:41 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id RAA25165
	for packaging@rufus.w3.org; Fri, 5 May 2000 17:27:07 -0400
Date: Fri, 5 May 2000 17:27:07 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] [wichert@mors.wiggy.net: updated text]
Message-ID: <20000505172707.X5440@devserv.devel.redhat.com>
References: <20000505185847.A10800@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000505185847.A10800@mors.wiggy.net>; from wichert@mors.wiggy.net on Fri, May 05, 2000 at 06:58:47PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 16357
Lines: 413


On Fri, May 05, 2000 at 06:58:47PM +0200, Wichert Akkerman wrote:
> 
> Lets try sending this to the correct address :(
> 
> Wichert.
> 
> ----- Forwarded message from Wichert Akkerman <wichert@mors.wiggy.net> -----
> 
> Date: Fri, 5 May 2000 18:52:49 +0200
> From: Wichert Akkerman <wichert@mors.wiggy.net>
> To: packaging@rufus.w3c.org
> Cc: quinlan@transmeta.com
> Subject: updated text
> 
> 
> I updated the text a bit:
> * it now lists multiple payloads as an option (but not very well, I'll
>   fix that)
> * describes all package relations, as well as put them in the example
>   XML metadata
> * added a couple more dpkg-specific tags and a couple of rpm-specific
>   tags
> * add example for signatures-file
> 
> Reading it again it probably could use a reasonably big rewrite, I'll
> try and do that this weekend.
> 

Thanks very much for writing the ideas down.

> Wichert.
> 
> PS: and we really need a name for this beast!
> 
> -- 
>   _________________________________________________________________
>  / Generally uninteresting signature - ignore at your convenience  \
> | wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
> | 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |
> 
> 
> Introduction
> ------------
> For a while now Linux has had two popular package formats: the rpm format
> as made by Red Hat, and the deb format as created by Debian. This has been
> a bit problematic since it means vendors have to support both formats.
> 
> As a result there has been a desire for a while now to create a common package
> format that makes it possible to use package on all distributions. We believe
> that will the help of a standard such as the LSB is developing this will help
> make Linux more accessible and friendly.
> 
> Design goals
> ------------
> Both the deb and the rpm-format have some unique features that the other
> format does not have. Our main goal was creating a new format that would
> be a good common ground.
> 
> Since all distributions take slightly different approaches in some areas
> it should also be possible to have distribution-specific extensions.
> We also wanted to add some new features that both formats were lacking
> in, such as good verification systems and multi-language support.
> 
> We felt another important aspect of a good format is that it should be
> extractable using only standard tools. That way even when a
> packagemanager is not available software can still be installed.
> 
> Global overview
> ---------------
> A package is an tar-archive that one or more payloads. Each payload
> consists of two or more seperate files which contain the metadata and
> data. Each file can be compressed using either gzip or bzip2 to save space.
> 
> tar allows for extensions to its format for extra features. For this
> format only the format as described in POSIX 1003.1-1990, and the
> GNU extensions for long filenames and sparse files are used.
> 
> The files per payload are:
> 
> * metadata-VERSION:
>   this file serves two purposes: it encodes the version of the
>   format used in its filename, and it contains the meta-information
>   for the payload in XML format.
> * scripts.tar: archive containing special scripts/programs that should
>   be run at specific moments during package installation or removal
> * data.tar: archive containing the actually files in the package
> * signatures: XML-file with signatures for all the other files. This
>   section is optional.
> 

Aside from possibly the empty "metadata-VERSION", the names in the wrapper
format must not be literally "scripts.tar", "data.tar", and "signatures",
or we have not a prayer of generalizing the format to multiple anything.

What was discussed in NYC had signatures immediately after each section
in the wrapper format rather than bundled at the end. Having detached
signatures adjacent to each component is a big win when unwrapping, as
the data and signature are more localized than if all signatrures are bundled
at the end.

Also discussed in NYC was the need to include helper scripts either by name
or value, as rpm will continue to treat helper scripts as part of metadata
and dispense with scripts.tar entirely.

> This is also the order in which sections must be stored in the archive:
> metadata at the beginning so we can see what version of the format is
> used and so we can easily extract and show it without having to read the
> entire package a. Then scripts, since we can run a script before we
> start the actual installation. Signatures are at the end so we can write
> all the other sections first and then calculate the signature.
> 
> Metadata
> --------
> We choose to use the XML-format (see http://www.w3.org/TR/REC-xml) since
> it as a very extensible and non-proprietary description format, well
> suited for inter application exchanges. It also allows us to easily add
> features such as translation and distribution-specific extensions.
> 
> The basic structure of the XML data is as follows:
>   <package>
>     common information
> 	distribution-specific information
>   </package>
> 
> For the distribution-specific information we use XML namespaces (see
> http://www.w3.org/TR/REC-xml-names).
> 
> Common metadata-information
> ---------------------------
> (Note: in package relations I will use the term `resource': a resource
> here can be either a package or a file).
> 
> Meta information per payload:
> 
> * name: packagename
> * version: versionnumber of package, using the format
>   (<epoch>:)?<upstream>-<distribution>

I (and other rpm users) are gonna get confused by the name "version".
Oh well, I'd rather have one tag for all of epoch:version-release, possibly
even simplifying further as
	Package: name epoch:version-release
(Note the embedded white space name/version separator). The rationale is
that name/version is arguably the information most likely to be extracted, so
let's keep it as simple as possible.

Speaking of which: I do not see a platform tag, which means that each
and every package handler is gonna have to sift through all of the
dependencies in order to find out the intended platform(s). I strongly
believe that the intended platform(s) needs to be a tag in metadata
even if that tag is not otherwise used by either rpm/dpkg.

> * summary: short description of the package (1-line, maximum 60
>   characters?)
> * description: comprehensive description of the package
> * keywords: (optional) list of keywords that apply to this package
> * author: author of this package, can also be a group or mailinglist 
> * home: (optional) upstream location of sources (URI)
> * packager: person who created this package
> * origin: distribution/project this package was made for (ie Debian,
>   GNOME, Red Hat, etc.)

We need to worry about packages that are intended for several distro's,
probably be permitting per-distro as well as per-packager private data.

> * license: (optional) copyright for the contents (ie GPL, LGPL, BSD,
>   MIT, etc.) 
> * pre-depends: lists resources that must be available before we start
>   install the package. (Useful if they are used by pre-installation
>   scripts for example)
> * depends: lists resources that must be available when we configure a
>   package (ie the moment when the post-installation script is run before
>   we declare a package as correctly installed)

I find the name depends (and dependencies) more appropriate for the class 
	(prereq,requires,provides,conflicts,obsoletes)
than the instance requires, and suggest that we change to the more
specific name "requires".

> * recommends: lists other packages that are strongly recommended to also
>   be installed
> * suggests: lists other packages that a user may also be interested in
> * enhances: states that a package can enhance the functionality of other
>   packages (think gpg-idea enhances gpg)

Again, as long as these tags are hints that can be ignored, as I have no
idea how rpm can use this information directly.

> * conflicts: lists resources which may not be available when a package
>   is installed (think sendmail & postfix)
> * replaces: lists resources that we may overlap with

Um, what does overlap mean?

> * obsoletes: lists packages that are be obsoleted by this package
> 
> Besides this information we also store information about files shipped
> in the payload:
> * user
> * group
> * permissions
> * filetype
> * md5sum
> * conffile
> 

How this information should be represented needs to be spelled out. In
particular, if we're not careful, we will end up with an incomplete
enumeration for filetype, even if only the boring stat(2) S_ISTYPE values
are intended, rather than the squishy morass of "binary", "library",
"executable", "script", etc ...

Is conffile intended as a simple boolean? I'd rather see a more general
(and more generally extensible) "key=value" mechanism than hard coding
virtual file attributes.

> Packagemanagers can use XML namespaces to hide information that is
> specific for a distribution. 
> 
> An example:
>   <package xmlns:rpm="http://www.rpm.org/v4.0"
>            xmlns:deb="http://www.debian.org/dpkg/v2.0">
>     <name>hello</name>
>     <version>1.2-1</version>
>     <summary>The classic `hello world' program.</summary>
>     <description>
>       This package is an implementation of the classic `hello world'
>       program. It shows the preferred coding style and also serves
>       as an example of making packages.
>     </description>
>     <keywords>hello,packaging</keywords>
>     <author>
>        <name>Joe R. Hacker</name>
>        <email>hacker@unknown.net</email>
>        <nick>jrh</nick>
>     </author>
>     <packager>
>        <name>A. Packages</name>
>        <email>ap@debian.org</email>
>     </packager>
>     <Depends><and>
>        <ge><resource>libc6</resource><version>2.2.12</version></ge>
>        <or><resource>make</resource><resource>pmake</resource></or>
>     </and></Depends>
>     <home>ftp://sunsite.unc.edu:/pub/Linux/system/Misc/hello.tar.gz</home>
>     <origin>Debian</origin>
>     <license>GPL</license>
>     XXXX this should list file locations here!
>   </package>
> 
> Please note that for persons we have made tags for name, email and nick.
> We felt that nick was necessary since these days some people are better
> known by their (IRC-)nickname then their given name.
> 
> Distribution-specific metadata-information
> ------------------------------------------
> Each distribution will have to create their own tags for features they
> need that are not covered by the common tags. We propose however that
> those tags are registered at a central point so we can keep track of
> them and optionally consider making some tags common if multiple
> distributions use them.
> 
> Currently known distribution-specific tags:

(Below are comments in the interest of promoting as much of this as possible
into common metadata).

> * Debian:
>   + essential: (optional) marks a package as required so the
>     package-manager refuses to uninstall it

Rather than mark each package as "essential", can we not somehow overload
dependency resolution to mark a set of packages immutable? By this I mean
insturmenting a barrier to the erasure dependency check, possibly by
assuming a progenitor of every package whose dependencies can be
augmented with additional requires by "normal" package upgrade, but
whose dependencies can be diminished only by external intervention. That has
the benefit of making the semantics of "essential" per-system or per-distro
rather than per-package, and might permit other useful generalizations as well.

>   + maintainer: name and contact for person(s) who maintains this package

Common metadata.

>   + installed-size: size of package after installation

I suspect that this value, since it cannot be known (only estimated) a priori,
belongs not in metadata at all. Otherwise, common metadata.

>   + section: section package belongs to (base/libs/devel/etc.)

If this is what rpm knows as RPMTAG_GROUP, common metadata, with provisions
to override in per-packager (or per-distro) private data.

>   + priority: used by package-frontends


>   + build-depends,build-conflicts: build dependencies
>   + build-indep-depends,build-indep-conflicts: build dependencies for
>     building architecture indendepent parts of the package
> 

These should be in common metadata, but the per-platform conditioning
will be painful.

> * Red Hat:
>   + buildhost

Paired with buildtime, the tuple  come close to making a "unique id" in
common metadata.

>   + icon

This wartlet can be most anywhere you want :-). The important issue was/is
providing an opaque binary blob that can be accessed by reading only metadata,
and that might be a real need for this format above and beyond the cuteness
of icons.

>   + changelogname

I believe that this should be (optionally) in common metadata if we
wish to support incremental packaging (e.g. correcting metadata
dependencies without repacking/rebuilding the payload).

> 
> Scripts-section
> ---------------
> When you install, ugrade or remove a package special programs can be
> run. These can be used for example to (un)register documentation, 
> fix permissions, start/stop/restart daemons, etc. There are eight
> programs:
>   * prerm: used before a package is being removed or purged
>   * postrm: used after a package is removed or purged
>   * preinst: run before a package is installed/upgraded
>   * postinst: run before a package is installed/upgraded
>   * trigger-prerm: run before a resource we have a trigger for is removed
>   * trigger-postrm: run after a resource we have a trigger for is removed
>   * trigger-preinst: run before a resource we have a trigger for is installed
>   * trigger-postinst: run after a resource we have a trigger for is installed
> 

Discussed in NYC was designing a new state machine for both dpkg/rpm so
that we (and other packagers) have a predictable environment in which
these scripts are run.

Also discussed in NYC was the need for more scriptlet hooks to handle
"before everything" preparation as well as "after everything" configuration
and/or clean up.

We really need to get the state machine design underway.

> Data-section
> ------------
> The file contains the data that is to be installed on the filesystem.
> 
> 
> Signature-section
> -----------------
> This section contains signatures for the data in the other sections. The
> exact data used is the contents of the metata.gz, scripts.tar.gz (if
> present) and data.tar.gz files concatenated. The signatures are stored
> in XML-format so it is easy to have multiple signatures and add new
> signature types later. Current signature types are:
>   * pgp2
>   * OpenPGP (used by GnuPG and pgp5)
>   * MD5
> 
> An example:
>    <signatures>
>      <md5 file="metadata-1-1">db9557f3fdd690d07bc9f2682b7d0447</md5>
>      <md5 file="payload-1">732813edc871575e107dd8324ed417ce</md5>
>      <OpenPGP file="metadata-1-1">
>    -----BEGIN PGP SIGNATURE-----
>    Version: GnuPG v1.0.1 (GNU/Linux)
>    Comment: For info see http://www.gnupg.org
> 
>    iD8DBQA4w1bAP4VifPYwQCsRApV7AJ9xporhmU11+nOYgHFSVQJ++UtHsgCgwawT
>    ruLKGjuFPQnNmLamTU9OTEI=
>    =Wg9K
>    -----END PGP SIGNATURE-----
>      </OpenPGP>
>      <OpenPGP file="metadata-1-1">
>    -----BEGIN PGP SIGNATURE-----
>    Version: GnuPG v1.0.1 (GNU/Linux)
>    Comment: For info see http://www.gnupg.org
> 
>    iD8DBQA4w1blP4VifPYwQCsRAp0ZAJ9zBMy75Og3RpoYceg2ULgNb1MynACfXk6u
>    3mKwj/m750YKblxz4jjeq1k=
>    =N9zL
>    -----END PGP SIGNATURE-----
>      </OpenPGP>
>    </signatures>
> 

I believe we should incorporate the openpgp standard for the binary strings
directly rather than taking the usual armored ascii approach, as packages
and installers live not in the same environment as, for example, mime mailers
with detached helper binaries, and may not, for example, be able to skip
signatures for which detached helper is not presently installed, as a mime
mailer can (and often does.) The metasignature information in the armored
ascii (e.g. "Version: GnuPG v1.0.1 (GNU/Linux)") should be reflected in
metadata dependencies as well.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May  5 17:47:42 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA27647;
	Fri, 5 May 2000 17:47:41 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id RAA01563;
	Fri, 5 May 2000 17:47:41 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id RAA24881;
	Fri, 5 May 2000 17:47:40 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id RAA31127;
	Fri, 5 May 2000 17:46:51 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id RAA31096
	for packaging-list; Fri, 5 May 2000 17:46:43 -0400
Resent-Date: Fri, 5 May 2000 17:46:43 -0400
Resent-Message-Id: <200005052146.RAA31096@rpmfind.net>
Received: from fog.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id RAA31073
	for <packaging@rufus.w3.org>; Fri, 5 May 2000 17:46:25 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id XAA01367
	for packaging@rufus.w3.org; Fri, 5 May 2000 23:44:59 +0200
Date: Fri, 5 May 2000 23:44:59 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] There's a need for a "unique identifier tag" ...
Message-ID: <20000505234459.A1357@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000505133207.V5440@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="bg08WKrSYDhXBjb5"
User-Agent: Mutt/1.0.1i
In-Reply-To: <20000505133207.V5440@devserv.devel.redhat.com>; from jbj@redhat.com on Fri, May 05, 2000 at 01:32:07PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1275
Lines: 40



--bg08WKrSYDhXBjb5
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> As I get ready to start dealing with multiple rpm databases, possibly
> remote, I find myself looking for a unique identifier for a package.
> For legacy rpm purposes, the tuple (BuildHost,BuildTime) will serve,
> and for new rpm packaging something like (md5(source rpm),md5(binary
> rpm)) avoids grotty problems with managing IP/MAC address assignment
> and time skew.

Why exactly do you need it?

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--bg08WKrSYDhXBjb5
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkTQNsACgkQPLiSUC+jvC1TYACfcPQYeXdHmn6zIYI4S+oGvUBV
nRAAoI2jQmUOhe8EOyNy2Kryta2unFUP
=BGXa
-----END PGP SIGNATURE-----

--bg08WKrSYDhXBjb5--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May  5 17:51:09 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA27882;
	Fri, 5 May 2000 17:51:08 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id RAA01807;
	Fri, 5 May 2000 17:51:08 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id RAA25292;
	Fri, 5 May 2000 17:51:06 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id RAA31523;
	Fri, 5 May 2000 17:51:01 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id RAA31509
	for packaging-list; Fri, 5 May 2000 17:50:58 -0400
Resent-Date: Fri, 5 May 2000 17:50:58 -0400
Resent-Message-Id: <200005052150.RAA31509@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id RAA31505
	for <packaging@rufus.w3.org>; Fri, 5 May 2000 17:50:54 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id RAA27835
	for packaging@rufus.w3.org; Fri, 5 May 2000 17:50:20 -0400
Date: Fri, 5 May 2000 17:50:20 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000505175020.Y5440@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 792
Lines: 24


I hesitate to reopen this issue yet again, but ...

Discussed in NYC was using ar for the wrapper format (and until now, that's
what I was assuming was still what we were doing).

AFAIK, an ar wrapper permits an index (built by ranlib IIRC) that would
permit lseek'ing to specific sections using offsets read from the index.
The ability to lseek w/o performing I/O is potentially a large perfomance
win, particularly when we start dealing with more complicated packaging
constructions.

I'm unaware of any other archive format that has this feature, and 
believe that both cpio/tar do not.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May  5 18:07:12 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id SAA29262;
	Fri, 5 May 2000 18:07:12 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA03758;
	Fri, 5 May 2000 18:07:11 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA27425;
	Fri, 5 May 2000 18:07:11 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA01498;
	Fri, 5 May 2000 18:07:27 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id SAA01486
	for packaging-list; Fri, 5 May 2000 18:07:23 -0400
Resent-Date: Fri, 5 May 2000 18:07:23 -0400
Resent-Message-Id: <200005052207.SAA01486@rpmfind.net>
Received: from fog.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id SAA01480
	for <packaging@rufus.w3.org>; Fri, 5 May 2000 18:07:17 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id AAA01386
	for packaging@rufus.w3.org; Sat, 6 May 2000 00:06:24 +0200
Date: Sat, 6 May 2000 00:06:23 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] [wichert@mors.wiggy.net: updated text]
Message-ID: <20000506000623.B1357@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000505185847.A10800@mors.wiggy.net> <20000505172707.X5440@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="RASg3xLB4tUQ4RcS"
User-Agent: Mutt/1.0.1i
In-Reply-To: <20000505172707.X5440@devserv.devel.redhat.com>; from jbj@redhat.com on Fri, May 05, 2000 at 05:27:07PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 5044
Lines: 133



--RASg3xLB4tUQ4RcS
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> Aside from possibly the empty "metadata-VERSION", the names in the wrapper
> format must not be literally "scripts.tar", "data.tar", and "signatures",
> or we have not a prayer of generalizing the format to multiple anything.

Right, that's why I said I needed to fix that :)

> What was discussed in NYC had signatures immediately after each section
> in the wrapper format rather than bundled at the end. Having detached
> signatures adjacent to each component is a big win when unwrapping, as
> the data and signature are more localized than if all signatrures are bun=
dled
> at the end.

Hmm, I can't remember discussing that :(. It makes things a lot harder,
since we sign at a much later state then we build the package. Especially
for autobuilders we build a large amount of packages in batch and then
sign them later after verifying them. Having to intersperse that in the
package would be a major pain. I also don't see why you would get such
a large win when unpacking.. I'm willing to bet it is actually a very
small gain if done right, if at all.

> Also discussed in NYC was the need to include helper scripts either by na=
me
> or value, as rpm will continue to treat helper scripts as part of metadata
> and dispense with scripts.tar entirely.

Yes, I needed to come up with a syntax for that but wanted to rush this
out first.

> I (and other rpm users) are gonna get confused by the name "version".
> Oh well, I'd rather have one tag for all of epoch:version-release,

Heh, that's what I meant actually. That was the third little item I
needed to write.

> possibly even simplifying further as
> 	Package: name epoch:version-release

I'ld rather not do that.

> Speaking of which: I do not see a platform tag, which means that each
> and every package handler is gonna have to sift through all of the
> dependencies in order to find out the intended platform(s). I strongly
> believe that the intended platform(s) needs to be a tag in metadata
> even if that tag is not otherwise used by either rpm/dpkg.

Allow me to think for a day about that, but it sounds like a valid
problem :)

> We need to worry about packages that are intended for several distro's,
> probably be permitting per-distro as well as per-packager private data.

What do you mean with per-package private data? Per-distro can be done
by having extra constraints or information in their own namespace.

> > * recommends: lists other packages that are strongly recommended to also
> >   be installed
> > * suggests: lists other packages that a user may also be interested in
> > * enhances: states that a package can enhance the functionality of other
> >   packages (think gpg-idea enhances gpg)
>=20
> Again, as long as these tags are hints that can be ignored, as I have no
> idea how rpm can use this information directly.

They are for frontends, not the packagemanager itself. You *really* want
them for frontends.

> > * conflicts: lists resources which may not be available when a package
> >   is installed (think sendmail & postfix)
> > * replaces: lists resources that we may overlap with
>=20
> Um, what does overlap mean?

File overlap. By default dpkg will complain and abort if a package tries
to overwrite a file from another package, with Replaces we can state that
that needs to be done (for example if a file moves from one package to
another)
=20
> How this information should be represented needs to be spelled out.

I know. See comment for scripts :)

> Is conffile intended as a simple boolean? I'd rather see a more general
> (and more generally extensible) "key=3Dvalue" mechanism than hard coding
> virtual file attributes.

We'll need to specify the keys then anyway..

> (Below are comments in the interest of promoting as much of this as possi=
ble
> into common metadata).
>=20
> > * Debian:
> >   + essential: (optional) marks a package as required so the
> >     package-manager refuses to uninstall it
>=20
> Rather than mark each package as "essential", can we not somehow overload
> dependency resolution to mark a set of packages immutable?

Okay, I think I need to be more awake in order to think this one through.
Will be continued tomorrow :)

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--RASg3xLB4tUQ4RcS
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkTRd8ACgkQPLiSUC+jvC3sigCeMljXErvpR0Vwddfb2NWsoIPA
GVwAnijo4+6aPfZhAsaKeCjocDLGqlEL
=uVjY
-----END PGP SIGNATURE-----

--RASg3xLB4tUQ4RcS--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May  5 19:03:23 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id TAA01659;
	Fri, 5 May 2000 19:03:19 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id TAA08493;
	Fri, 5 May 2000 19:03:18 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id TAA00603;
	Fri, 5 May 2000 19:03:18 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id TAA05951;
	Fri, 5 May 2000 19:02:48 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id TAA05942
	for packaging-list; Fri, 5 May 2000 19:02:42 -0400
Resent-Date: Fri, 5 May 2000 19:02:42 -0400
Resent-Message-Id: <200005052302.TAA05942@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id TAA05935
	for <packaging@rufus.w3.org>; Fri, 5 May 2000 19:02:37 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12nr6g-0002xF-00; Fri, 05 May 2000 16:02:02 -0700
Date: Fri, 5 May 2000 16:02:02 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] dependency syntax
In-Reply-To: <20000505131507.U5440@devserv.devel.redhat.com>
Message-ID: <Pine.LNX.4.10.10005051557590.11315-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1228
Lines: 31


On Fri, 5 May 2000, Jeff Johnson wrote:

> 1) Rpm has file dependencies and these may (at some point) have versions.
> Is the correct XML representation for that
> 	Requires: /bin/sh = 0:1.2-3
> something like
>     <eq><resource>/bin/sh</resource><version>0:1.2-3</version></eq>
> or the more complicated
>     <eq><resource>/bin/sh</resource><epoch>0</epoch><version>1.2</version><release>3</release></eq>
> 
> 3) Rpm will have dependencies that look like
> 	Requires: PATH(grep)
> with which(1)-like semantics (e.g. satisfy if grep can be found in $PATH).
> How can that be represented?
> 
> 4) Ditto LD_LIBRARY_PATH(libfoo), similar to 3).

Yuck. sophisticated dependency analyzers like apt wont like that. The
idea of a package database is to have a representation of the installed
software and use that information to control the interdependencies on the 
system.

What is going on here are inquiries into "actual" installed
files by passing that representation. The user could just put a empty file
into the $PATH named "grep".... Such an approach could throw all sorts of
crazy loops into development.

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May  5 19:16:48 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id TAA02336;
	Fri, 5 May 2000 19:16:48 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id TAA09153;
	Fri, 5 May 2000 19:16:48 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id TAA01024;
	Fri, 5 May 2000 19:16:47 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id TAA07004;
	Fri, 5 May 2000 19:16:41 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id TAA06982
	for packaging-list; Fri, 5 May 2000 19:16:32 -0400
Resent-Date: Fri, 5 May 2000 19:16:32 -0400
Resent-Message-Id: <200005052316.TAA06982@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id TAA06972
	for <packaging@rufus.w3.org>; Fri, 5 May 2000 19:16:23 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12nrK2-0002yi-00; Fri, 05 May 2000 16:15:50 -0700
Date: Fri, 5 May 2000 16:15:50 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
In-Reply-To: <20000505175020.Y5440@devserv.devel.redhat.com>
Message-ID: <Pine.LNX.4.10.10005051610420.11315-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 728
Lines: 19


On Fri, 5 May 2000, Jeff Johnson wrote:

> 
> AFAIK, an ar wrapper permits an index (built by ranlib IIRC) that would
> permit lseek'ing to specific sections using offsets read from the index.
> The ability to lseek w/o performing I/O is potentially a large perfomance
> win, particularly when we start dealing with more complicated packaging
> constructions.
> 
> I'm unaware of any other archive format that has this feature, and 
> believe that both cpio/tar do not.

I doubt that this is a real speed problem. The packages will not be
tens of megabytes big and the metadata section is usually quite small.

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May  5 19:22:59 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id TAA02622;
	Fri, 5 May 2000 19:22:58 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id TAA09522;
	Fri, 5 May 2000 19:22:58 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id TAA01227;
	Fri, 5 May 2000 19:22:57 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id TAA07547;
	Fri, 5 May 2000 19:23:18 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id TAA07527
	for packaging-list; Fri, 5 May 2000 19:23:11 -0400
Resent-Date: Fri, 5 May 2000 19:23:11 -0400
Resent-Message-Id: <200005052323.TAA07527@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id TAA07513
	for <packaging@rufus.w3.org>; Fri, 5 May 2000 19:23:06 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12nrQW-0002zM-00; Fri, 05 May 2000 16:22:32 -0700
Date: Fri, 5 May 2000 16:22:32 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] [wichert@mors.wiggy.net: updated text]
In-Reply-To: <20000505172707.X5440@devserv.devel.redhat.com>
Message-ID: <Pine.LNX.4.10.10005051605530.11315-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2369
Lines: 69


On Fri, 5 May 2000, Jeff Johnson wrote:

> I find the name depends (and dependencies) more appropriate for the class 
> 	(prereq,requires,provides,conflicts,obsoletes)
> than the instance requires, and suggest that we change to the more
> specific name "requires".

Just having a general depends tag with types of dependencies within
them, right?

> > * replaces: lists resources that we may overlap with
> 
> Um, what does overlap mean?

A new package is allowed and known to replace files from another package.
The other package "looses" files when the new one is installed.

> > * Debian:
> >   + essential: (optional) marks a package as required so the
> >     package-manager refuses to uninstall it
> 
> Rather than mark each package as "essential", can we not somehow overload
> dependency resolution to mark a set of packages immutable? By this I mean
> insturmenting a barrier to the erasure dependency check, possibly by
> assuming a progenitor of every package whose dependencies can be
> augmented with additional requires by "normal" package upgrade, but
> whose dependencies can be diminished only by external intervention. That has
> the benefit of making the semantics of "essential" per-system or per-distro
> rather than per-package, and might permit other useful generalizations as well.

I have a hard time understanding what this exactly is about. But if you
have sets of packages not using the dependency scheme then you are
introducing additional complexity into the package managers because you
need to cross check with the sets you have defined.

> >   + build-depends,build-conflicts: build dependencies
> >   + build-indep-depends,build-indep-conflicts: build dependencies for
> >     building architecture indendepent parts of the package
> > 
> 
> These should be in common metadata, but the per-platform conditioning
> will be painful.

We need per platform dependencies. Something like

build-<platform>-<depends/conflicts ...>

but then why not set up subsections for archs?

<depends>
<i386>
<requires>glibc</requires>
<conflicts>libc5</conflicts>
</i386>
<alpha>
<requires>glic2.1</requires>
</alpha>
<source>
<requires>glibc-dev<requires>
</source>
</depends>

maybe instead of i386 <arch>i386</arch> or something?


----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat May  6 08:09:56 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id IAA03316;
	Sat, 6 May 2000 08:09:55 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id IAA06619;
	Sat, 6 May 2000 08:09:54 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67] (may be forged))
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id IAA21722;
	Sat, 6 May 2000 08:08:31 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id IAA16359;
	Sat, 6 May 2000 08:07:31 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id IAA16351
	for packaging-list; Sat, 6 May 2000 08:07:27 -0400
Resent-Date: Sat, 6 May 2000 08:07:27 -0400
Resent-Message-Id: <200005061207.IAA16351@rpmfind.net>
Received: from fog.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id IAA16348
	for <packaging@rufus.w3.org>; Sat, 6 May 2000 08:07:22 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.9.3/8.9.3/Debian 8.9.3-21) id NAA11953
	for packaging@rufus.w3.org; Sat, 6 May 2000 13:52:57 +0200
Date: Sat, 6 May 2000 13:52:57 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000506135257.A761@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000505175020.Y5440@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="BXVAT5kNtrzKuDFl"
User-Agent: Mutt/1.0.1i
In-Reply-To: <20000505175020.Y5440@devserv.devel.redhat.com>; from jbj@redhat.com on Fri, May 05, 2000 at 05:50:20PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2047
Lines: 53



--BXVAT5kNtrzKuDFl
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> Discussed in NYC was using ar for the wrapper format (and until now, that=
's
> what I was assuming was still what we were doing).

Problems with ar:
* ar isn't as common on systems, esp. rescue disks, so it adds a barrier
  for people not having a package manager. (someone worked around in a
  rescue-disk my writing some awk-code to extract ar files even)
* we discussed future options such as a hierarchical structure in the
  packagefile, ar doesn't support that
* for tar and cpio you need at most 3 seek+header loads per payload, which =
is=20
  not a large penalty. For ar you would need a seek to find the index,
  read that, and seek again. That means that for 99% of the packages
  which have a single payload we only gain 1 seek and 2 small reads.
  I'm willing to bet the index for an ar-file is also at the end
  which means you no longer go through the files sequentially but
  need random accecss, which might negate any performance win.
* with tar if the archive is corrupt it's reasonably easy to still extract
  other files even if some of the headers are corrupt. I'm not sure
  of that is possible with ar as well, but I haven't looked at its format.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--BXVAT5kNtrzKuDFl
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkUB5kACgkQPLiSUC+jvC3tQQCeNFjbreYuDmxbrpb7c+7HpwJC
4kEAnjS898SZor9AFhNz3FJl6YKp6OpR
=PRF3
-----END PGP SIGNATURE-----

--BXVAT5kNtrzKuDFl--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat May  6 10:46:36 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA09719;
	Sat, 6 May 2000 10:46:35 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA13565;
	Sat, 6 May 2000 10:46:35 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67] (may be forged))
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA17581;
	Sat, 6 May 2000 10:45:14 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA07961;
	Sat, 6 May 2000 10:44:04 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA07942
	for packaging-list; Sat, 6 May 2000 10:44:01 -0400
Resent-Date: Sat, 6 May 2000 10:44:01 -0400
Resent-Message-Id: <200005061444.KAA07942@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA07926
	for <packaging@rufus.w3.org>; Sat, 6 May 2000 10:43:58 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id KAA09620
	for packaging@rufus.w3.org; Sat, 6 May 2000 10:43:25 -0400
Date: Sat, 6 May 2000 10:43:25 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] There's a need for a "unique identifier tag" ...
Message-ID: <20000506104325.Z5440@devserv.devel.redhat.com>
References: <20000505133207.V5440@devserv.devel.redhat.com> <20000505234459.A1357@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000505234459.A1357@mors.wiggy.net>; from wichert@mors.wiggy.net on Fri, May 05, 2000 at 11:44:59PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1248
Lines: 32


On Fri, May 05, 2000 at 11:44:59PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > As I get ready to start dealing with multiple rpm databases, possibly
> > remote, I find myself looking for a unique identifier for a package.
> > For legacy rpm purposes, the tuple (BuildHost,BuildTime) will serve,
> > and for new rpm packaging something like (md5(source rpm),md5(binary
> > rpm)) avoids grotty problems with managing IP/MAC address assignment
> > and time skew.
> 
> Why exactly do you need it?
> 

My immediate need is to track each and every package built by Red Hat.
Since packages are often built with the same name/version/release, I
(and almost certainly others) need the level of uniqueness that is
provided by, for example, (BuildHost,BuildTime).

For remote databases (and update protocols), I wish to have an
opaque identifier with as strong as possible a guarantee of uniqueness
so that I can send the id in place of the package (or package metadata)
when both client/server have access to backing package store.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat May  6 12:00:28 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA13507;
	Sat, 6 May 2000 12:00:28 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA16708;
	Sat, 6 May 2000 12:00:28 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA30905;
	Sat, 6 May 2000 12:00:27 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA16039;
	Sat, 6 May 2000 12:00:50 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA16030
	for packaging-list; Sat, 6 May 2000 12:00:46 -0400
Resent-Date: Sat, 6 May 2000 12:00:46 -0400
Resent-Message-Id: <200005061600.MAA16030@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA16025
	for <packaging@rufus.w3.org>; Sat, 6 May 2000 12:00:43 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id MAA13488
	for packaging@rufus.w3.org; Sat, 6 May 2000 12:00:09 -0400
Date: Sat, 6 May 2000 12:00:09 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] [wichert@mors.wiggy.net: updated text]
Message-ID: <20000506120009.A5440@devserv.devel.redhat.com>
References: <20000505185847.A10800@mors.wiggy.net> <20000505172707.X5440@devserv.devel.redhat.com> <20000506000623.B1357@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000506000623.B1357@mors.wiggy.net>; from wichert@mors.wiggy.net on Sat, May 06, 2000 at 12:06:23AM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 4978
Lines: 108


On Sat, May 06, 2000 at 12:06:23AM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > Aside from possibly the empty "metadata-VERSION", the names in the wrapper
> > format must not be literally "scripts.tar", "data.tar", and "signatures",
> > or we have not a prayer of generalizing the format to multiple anything.
> 
> Right, that's why I said I needed to fix that :)
> 
> > What was discussed in NYC had signatures immediately after each section
> > in the wrapper format rather than bundled at the end. Having detached
> > signatures adjacent to each component is a big win when unwrapping, as
> > the data and signature are more localized than if all signatrures are bundled
> > at the end.
> 
> Hmm, I can't remember discussing that :(. It makes things a lot harder,
> since we sign at a much later state then we build the package. Especially
> for autobuilders we build a large amount of packages in batch and then
> sign them later after verifying them. Having to intersperse that in the
> package would be a major pain. I also don't see why you would get such
> a large win when unpacking.. I'm willing to bet it is actually a very
> small gain if done right, if at all.
> 

Our build system works similarly. I don't understand why interspersing
is a pain at all. Choose the names right, and "interspersing names"
will be handled by sort order. If you wish to add signatures to an existing
package in place, space in the wrapper can be preallocated. The win that I see
is the ability to insert component signatures into a stream of bytes in
a single pass (signatures-at-the-end can do this too) as well as
to verify component signatures from a stream of bytes as early as possible
(signatures-at-the-end can not do this).

I'll take that bet, depending on your definition of "small", as ABOR is 
tiny compared to RETR, for FTP at least :-)

Aside: Here, and elsewhere, this discussion is being limited by preconceived
notions based on existing packaging and implementations. You argue that the
gain is small, and you are correct only in the narrow context of "small"
packages with few components. I believe that this package format discussion
should start thinking about what happens when, say, there are hundreds or
thousands of components in the wrapper, or when metadata is >1Mb.

> > Also discussed in NYC was the need to include helper scripts either by name
> > or value, as rpm will continue to treat helper scripts as part of metadata
> > and dispense with scripts.tar entirely.
> 
> Yes, I needed to come up with a syntax for that but wanted to rush this
> out first.
> 
> > I (and other rpm users) are gonna get confused by the name "version".
> > Oh well, I'd rather have one tag for all of epoch:version-release,
> 
> Heh, that's what I meant actually. That was the third little item I
> needed to write.
> 
> > possibly even simplifying further as
> > 	Package: name epoch:version-release
> 
> I'ld rather not do that.
> 

The syntax is goofy, but the idea is sound: The tags in metadata most accessed
by non-installer programs are almost certainly
	Package: (or any dialectical variant like name/epoch/version/release)
	Platform: (or any dialectical variant like arch/vendor/os)
and I strongly believe that we need to streamline access to that information.
Requiring all non-installer tools to incorporate an XML parser to discover
the package name and/or platform seems kinda dumb to me, and the alternative
hacks with grep et al (and metatdata can be compressed!) that will be used
to get this information seem to be at odds with the goal of making it easy
to handle packaging without packager software.

I'd probably be happy with exposing the package/platform information as
empty headers in the wrapper format, as I see no other way of not
requiring all non-installers to have an XML parser available in order to
discover package/platform tag values.

> > We need to worry about packages that are intended for several distro's,
> > probably be permitting per-distro as well as per-packager private data.
> 
> What do you mean with per-package private data? Per-distro can be done
> by having extra constraints or information in their own namespace.
> 

Per-packager, as in dpkg vs. rpm. So far we've only talked about having
packager private data (although we are succeeding in sharing almost
everything so far), we need to make explicit provisions for private
data for not only for packager, but also for distribution and platform
and ... namespaces, with explict guidance on the namespace mechanism
(I'm still fuzzy on this).

> 
> We'll need to specify the keys then anyway..
> 

True, and this standard should provide guidance on suggested key values,
and suggested behavior when both known and *unknown* keys are encountered.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat May  6 12:23:05 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA14479;
	Sat, 6 May 2000 12:23:05 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA17812;
	Sat, 6 May 2000 12:23:04 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA02081;
	Sat, 6 May 2000 12:23:03 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA18198;
	Sat, 6 May 2000 12:23:22 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA18185
	for packaging-list; Sat, 6 May 2000 12:23:18 -0400
Resent-Date: Sat, 6 May 2000 12:23:18 -0400
Resent-Message-Id: <200005061623.MAA18185@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA18180
	for <packaging@rufus.w3.org>; Sat, 6 May 2000 12:23:15 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id MAA14431
	for packaging@rufus.w3.org; Sat, 6 May 2000 12:22:42 -0400
Date: Sat, 6 May 2000 12:22:42 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] dependency syntax
Message-ID: <20000506122242.B5440@devserv.devel.redhat.com>
References: <20000505131507.U5440@devserv.devel.redhat.com> <Pine.LNX.4.10.10005051557590.11315-100000@home.lameter.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <Pine.LNX.4.10.10005051557590.11315-100000@home.lameter.com>; from christoph@lameter.com on Fri, May 05, 2000 at 04:02:02PM -0700
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2302
Lines: 56


On Fri, May 05, 2000 at 04:02:02PM -0700, Christoph Lameter wrote:
> 
> On Fri, 5 May 2000, Jeff Johnson wrote:
> 
> > 1) Rpm has file dependencies and these may (at some point) have versions.
> > Is the correct XML representation for that
> > 	Requires: /bin/sh = 0:1.2-3
> > something like
> >     <eq><resource>/bin/sh</resource><version>0:1.2-3</version></eq>
> > or the more complicated
> >     <eq><resource>/bin/sh</resource><epoch>0</epoch><version>1.2</version><release>3</release></eq>
> > 
> > 3) Rpm will have dependencies that look like
> > 	Requires: PATH(grep)
> > with which(1)-like semantics (e.g. satisfy if grep can be found in $PATH).
> > How can that be represented?
> > 
> > 4) Ditto LD_LIBRARY_PATH(libfoo), similar to 3).
> 
> Yuck. sophisticated dependency analyzers like apt wont like that. The
> idea of a package database is to have a representation of the installed
> software and use that information to control the interdependencies on the 
> system.
> 

The awesome power of apt is insufficient to resolve a dependency on
grep-the-package (when grep-the-executable is actually meant) when
faced with a single system that has both dpkg and rpm in active use and
grep is in the rpm database. Both rpm and apt fail miserably when
	1) grep is part of the native OS distro (e.g. solaris).
	2) several variants exist (e.g. /usr/bin/grep vs /usr/local/bin/grep)
	that can only be distinguished by looking at PATH.

> What is going on here are inquiries into "actual" installed
> files by passing that representation. The user could just put a empty file
> into the $PATH named "grep".... Such an approach could throw all sorts of
> crazy loops into development.
> 

Having a single linux system with both dpkg and rpm tool chains installed
seems like a desirable goal to me. The PATH(...) style dependency above
is the only mechanism that I've been able to devise that will permit
reasonably unbiased (e.g. rpm vs dpkg vs pkgadd vs ...) dependency resolution
for the simple case of "Package needs helper program". Ditto LD_LIBRARY_PATH
for "Executable needs shared library".

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat May  6 12:24:25 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA14558;
	Sat, 6 May 2000 12:24:25 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA17863;
	Sat, 6 May 2000 12:24:24 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA02390;
	Sat, 6 May 2000 12:24:24 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id MAA18341;
	Sat, 6 May 2000 12:24:40 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA18325
	for packaging-list; Sat, 6 May 2000 12:24:38 -0400
Resent-Date: Sat, 6 May 2000 12:24:38 -0400
Resent-Message-Id: <200005061624.MAA18325@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA18322
	for <packaging@rufus.w3.org>; Sat, 6 May 2000 12:24:37 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id MAA14536
	for packaging@rufus.w3.org; Sat, 6 May 2000 12:24:04 -0400
Date: Sat, 6 May 2000 12:24:04 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000506122404.C5440@devserv.devel.redhat.com>
References: <20000505175020.Y5440@devserv.devel.redhat.com> <Pine.LNX.4.10.10005051610420.11315-100000@home.lameter.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <Pine.LNX.4.10.10005051610420.11315-100000@home.lameter.com>; from christoph@lameter.com on Fri, May 05, 2000 at 04:15:50PM -0700
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 976
Lines: 30


On Fri, May 05, 2000 at 04:15:50PM -0700, Christoph Lameter wrote:
> 
> On Fri, 5 May 2000, Jeff Johnson wrote:
> 
> > 
> > AFAIK, an ar wrapper permits an index (built by ranlib IIRC) that would
> > permit lseek'ing to specific sections using offsets read from the index.
> > The ability to lseek w/o performing I/O is potentially a large perfomance
> > win, particularly when we start dealing with more complicated packaging
> > constructions.
> > 
> > I'm unaware of any other archive format that has this feature, and 
> > believe that both cpio/tar do not.
> 
> I doubt that this is a real speed problem. The packages will not be
> tens of megabytes big and the metadata section is usually quite small.
> 

Correct only with naive assumptions. Fix your assumptions :-)

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat May  6 13:41:15 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id NAA18585;
	Sat, 6 May 2000 13:41:15 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id NAA21615;
	Sat, 6 May 2000 13:41:15 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id NAA16356;
	Sat, 6 May 2000 13:41:14 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA26276;
	Sat, 6 May 2000 13:41:38 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA26265
	for packaging-list; Sat, 6 May 2000 13:41:34 -0400
Resent-Date: Sat, 6 May 2000 13:41:34 -0400
Resent-Message-Id: <200005061741.NAA26265@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA26259
	for <packaging@rufus.w3.org>; Sat, 6 May 2000 13:41:29 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id NAA18578
	for packaging@rufus.w3.org; Sat, 6 May 2000 13:40:48 -0400
Date: Sat, 6 May 2000 13:40:47 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] [wichert@mors.wiggy.net: updated text]
Message-ID: <20000506134047.D5440@devserv.devel.redhat.com>
References: <20000505172707.X5440@devserv.devel.redhat.com> <Pine.LNX.4.10.10005051605530.11315-100000@home.lameter.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <Pine.LNX.4.10.10005051605530.11315-100000@home.lameter.com>; from christoph@lameter.com on Fri, May 05, 2000 at 04:22:32PM -0700
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 3270
Lines: 93


On Fri, May 05, 2000 at 04:22:32PM -0700, Christoph Lameter wrote:
> 
> On Fri, 5 May 2000, Jeff Johnson wrote:
> 
> > I find the name depends (and dependencies) more appropriate for the class 
> > 	(prereq,requires,provides,conflicts,obsoletes)
> > than the instance requires, and suggest that we change to the more
> > specific name "requires".
> 
> Just having a general depends tag with types of dependencies within
> them, right?
> 

That's possible, but I was suggesting the much simpler
	s/depends/requires/
to avoid confusing language.

> > > * replaces: lists resources that we may overlap with
> > 
> > Um, what does overlap mean?
> 
> A new package is allowed and known to replace files from another package.
> The other package "looses" files when the new one is installed.
> 
> > > * Debian:
> > >   + essential: (optional) marks a package as required so the
> > >     package-manager refuses to uninstall it
> > 
> > Rather than mark each package as "essential", can we not somehow overload
> > dependency resolution to mark a set of packages immutable? By this I mean
> > insturmenting a barrier to the erasure dependency check, possibly by
> > assuming a progenitor of every package whose dependencies can be
> > augmented with additional requires by "normal" package upgrade, but
> > whose dependencies can be diminished only by external intervention. That has
> > the benefit of making the semantics of "essential" per-system or per-distro
> > rather than per-package, and might permit other useful generalizations as well.
> 
> I have a hard time understanding what this exactly is about. But if you
> have sets of packages not using the dependency scheme then you are
> introducing additional complexity into the package managers because you
> need to cross check with the sets you have defined.
> 

Sorry for the confusion. The semantics of "essential" are basically the
same as what is provided by dependency resolution (e.g you can't erase
a package A if package B requires it), and the rest was just some ravings
about a mechanism for diddling the requires dependencies of a special
"package B" that was guaranteed to always be already installed.

> > >   + build-depends,build-conflicts: build dependencies
> > >   + build-indep-depends,build-indep-conflicts: build dependencies for
> > >     building architecture indendepent parts of the package
> > > 
> > 
> > These should be in common metadata, but the per-platform conditioning
> > will be painful.
> 
> We need per platform dependencies. Something like
> 
> build-<platform>-<depends/conflicts ...>
> 
> but then why not set up subsections for archs?
> 
> <depends>
> <i386>
> <requires>glibc</requires>
> <conflicts>libc5</conflicts>
> </i386>
> <alpha>
> <requires>glic2.1</requires>
> </alpha>
> <source>
> <requires>glibc-dev<requires>
> </source>
> </depends>
> 
> maybe instead of i386 <arch>i386</arch> or something?
> 

Not arch, but platform (as in config.guess output), should be used to avoid
arch-then-os vs os-then-arch hierarchical problems in organizing the
dependncies.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat May  6 14:00:50 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id OAA20671;
	Sat, 6 May 2000 14:00:49 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id OAA22613;
	Sat, 6 May 2000 14:00:49 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id OAA20496;
	Sat, 6 May 2000 14:00:49 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id OAA28527;
	Sat, 6 May 2000 14:00:50 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id OAA28516
	for packaging-list; Sat, 6 May 2000 14:00:46 -0400
Resent-Date: Sat, 6 May 2000 14:00:46 -0400
Resent-Message-Id: <200005061800.OAA28516@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id OAA28511
	for <packaging@rufus.w3.org>; Sat, 6 May 2000 14:00:43 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id OAA20642
	for packaging@rufus.w3.org; Sat, 6 May 2000 14:00:10 -0400
Date: Sat, 6 May 2000 14:00:10 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000506140010.E5440@devserv.devel.redhat.com>
References: <20000505175020.Y5440@devserv.devel.redhat.com> <20000506135257.A761@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000506135257.A761@mors.wiggy.net>; from wichert@mors.wiggy.net on Sat, May 06, 2000 at 01:52:57PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2414
Lines: 57


On Sat, May 06, 2000 at 01:52:57PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > Discussed in NYC was using ar for the wrapper format (and until now, that's
> > what I was assuming was still what we were doing).
> 
> Problems with ar:
> * ar isn't as common on systems, esp. rescue disks, so it adds a barrier
>   for people not having a package manager. (someone worked around in a
>   rescue-disk my writing some awk-code to extract ar files even)

So because ar may not be present on rescue disks we shouldn't consider
ar for a wrapper format? <shrug>

> * we discussed future options such as a hierarchical structure in the
>   packagefile, ar doesn't support that

Neither tar or cpio supports a hierarchical format, but rather they
both permit file names to be specified with intervening '/'.

OTOH the current on-disk package format *does* support a true hierarchical
format, since we have tarballs as components of a tarball, but that's a
different problem altogether :-)

> * for tar and cpio you need at most 3 seek+header loads per payload, which is 
>   not a large penalty. For ar you would need a seek to find the index,
>   read that, and seek again. That means that for 99% of the packages
>   which have a single payload we only gain 1 seek and 2 small reads.
>   I'm willing to bet the index for an ar-file is also at the end
>   which means you no longer go through the files sequentially but
>   need random accecss, which might negate any performance win.

Wrong, it's at the beginning, as a quick check of
	od -c /usr/lib/libc.a
will show.

> * with tar if the archive is corrupt it's reasonably easy to still extract
>   other files even if some of the headers are corrupt. I'm not sure
>   of that is possible with ar as well, but I haven't looked at its format.
> 

With known offsets to components, skipping past bad spots is more robust
because the overall failure rate is a product of the bit error rate
for each component header eaxamined, and only 1 component, the index,
needs to be error free to find any other component. Furthermore, ranlib
wouldn't be necessary unless there were an alternative sequential search
at least as good as that of tar and cpio.

73 de Jeff.

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat May  6 14:52:07 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id OAA24272;
	Sat, 6 May 2000 14:52:07 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id OAA25385;
	Sat, 6 May 2000 14:52:06 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id OAA30932;
	Sat, 6 May 2000 14:52:06 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id OAA10926;
	Sat, 6 May 2000 14:52:16 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id OAA10917
	for packaging-list; Sat, 6 May 2000 14:52:12 -0400
Resent-Date: Sat, 6 May 2000 14:52:12 -0400
Resent-Message-Id: <200005061852.OAA10917@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id OAA10914
	for <packaging@rufus.w3.org>; Sat, 6 May 2000 14:52:09 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id OAA24266
	for packaging@rufus.w3.org; Sat, 6 May 2000 14:51:36 -0400
Date: Sat, 6 May 2000 14:51:36 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000506145136.F5440@devserv.devel.redhat.com>
References: <20000505175020.Y5440@devserv.devel.redhat.com> <20000506135257.A761@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000506135257.A761@mors.wiggy.net>; from wichert@mors.wiggy.net on Sat, May 06, 2000 at 01:52:57PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 4034
Lines: 83


On Sat, May 06, 2000 at 01:52:57PM +0200, Wichert Akkerman wrote:
> * for tar and cpio you need at most 3 seek+header loads per payload, which is 
>   not a large penalty. For ar you would need a seek to find the index,
>   read that, and seek again. That means that for 99% of the packages
>   which have a single payload we only gain 1 seek and 2 small reads.
>   I'm willing to bet the index for an ar-file is also at the end
>   which means you no longer go through the files sequentially but
>   need random accecss, which might negate any performance win.

(Red face: I should be more careful before shouting wrong, sorry).

Here's what "strace -o foo nm --print-armap /usr/lib/libc.a" has to say:

open("/usr/lib/libc.a", O_RDONLY)       = 4
SYS_63()                                = -1 ENOSYS (Function not implemented)
fstat(4, {st_mode=S_IFREG|0644, st_size=20062662, ...}) = 0
mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7001c000
_llseek(0x4, 0, 0, 0xeffff4d8, 0)       = 0
read(4, "!<arch>\n/               95186158"..., 8192) = 8192
_llseek(0x4, 0, 0x2000, 0xeffff3e0, 0)  = 0
brk(0x3e000)                            = 0x3e000
read(4, "\0\337e\356\0\337e\356\0\337\237\212\0\337\237\212\0\337"..., 8192) = 8192
read(4, "lush\0_IO_fflush\0fgetpos\0_IO_fget"..., 16384) = 16384
read(4, "s_short\0_option_is_end\0__option_"..., 8192) = 8192
_llseek(0x4, 0, 0xa000, 0xeffff370, 0)  = 0
read(4, "                  600       `\nrt"..., 8192) = 8192
_llseek(0x4, 0, 0x8000, 0xeffff3e0, 0)  = 0
read(4, "s_short\0_option_is_end\0__option_"..., 8192) = 8192
_llseek(0x4, 0, 0xa000, 0xeffff3e0, 0)  = 0
read(4, "                  600       `\nrt"..., 8192) = 8192
_llseek(0x4, 0, 0xc000, 0xeffff328, 0)  = 0
_llseek(0x4, 0, 0xc000, 0xeffff390, 0)  = 0
_llseek(0x4, 0, 0xe000, 0xeffff2a8, 0)  = 0
read(4, ":t(54,21)=(0,10)\0int16_t:t(54,22"..., 8192) = 8192
_llseek(0x4, 0, 0x10000, 0xeffff108, 0) = 0
fstat(1, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 2), ...}) = 0
mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7001e000
ioctl(1, TCGETS, {B9600 opost isig icanon echo ...}) = 0
write(1, "\n", 1)                       = 1
write(1, "Archive index:\n", 15)        = 15
write(1, "__libc_multiple_libcs in init-fi"..., 38) = 38
write(1, "__libc_argc in init-first.o\n", 28) = 28
write(1, "__libc_argv in init-first.o\n", 28) = 28
write(1, "__libc_init_first in init-first."..., 34) = 34
write(1, "_dl_start in init-first.o\n", 26) = 26
_llseek(0x4, 0, 0x10000, 0xeffff3f8, 0) = 0
write(1, "__libc_start_main in libc-start."..., 34) = 34
_llseek(0x4, 0, 0x16000, 0xeffff3f8, 0) = 0
read(4, "text\0.data\0.bss\0.note\0.stab\0.rel"..., 8192) = 8192
brk(0x40000)                            = 0x40000
write(1, "__libc_init in set-init.o\n", 26) = 26
_llseek(0x4, 0, 0x18000, 0xeffff3f8, 0) = 0
read(4, "3)\0__rlim64_t:t(20,30)=(20,6)\0__"..., 8192) = 8192
...

which looks more like sequential than random I/O to me.

Furthermore, the index is for .o symbols, not members (although member names
are usually embedded in symbol tables), so a ranlib-clone would have to be
written to add an index for the member offsets that I was assuming existed.

How about adding a manifest (element names and sizes would suffice if wrapper
headers have fixed length) to the very first component in the wrapper to
identify the offsets of each component.  Knowing the locations of all
components in the wrapper is a win no matter what archive format is used for
the reasons described, and isn't that hard to generate and add at the beginning.

FWIW judging by the relative sizes, ar is a much better candidate for inclusion
on rescue disks than tar is:

-rwxr-xr-x    1 root     root       188880 Feb  9 07:06 /bin/tar*
-rwxr-xr-x    1 root     root        40512 Feb  4 12:55 /usr/bin/ar*

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat May  6 20:07:18 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id UAA09789;
	Sat, 6 May 2000 20:07:14 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id TAA04923;
	Sat, 6 May 2000 19:13:34 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id TAA12960;
	Sat, 6 May 2000 19:13:33 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id TAA02802;
	Sat, 6 May 2000 19:13:52 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id TAA02793
	for packaging-list; Sat, 6 May 2000 19:13:49 -0400
Resent-Date: Sat, 6 May 2000 19:13:49 -0400
Resent-Message-Id: <200005062313.TAA02793@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id TAA02788
	for <packaging@rufus.w3.org>; Sat, 6 May 2000 19:13:47 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12oDl3-0004sN-00; Sat, 06 May 2000 16:13:13 -0700
Date: Sat, 6 May 2000 16:13:13 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
In-Reply-To: <20000506122404.C5440@devserv.devel.redhat.com>
Message-ID: <Pine.LNX.4.10.10005061612090.18693-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 506
Lines: 15


On Sat, 6 May 2000, Jeff Johnson wrote:

> > I doubt that this is a real speed problem. The packages will not be
> > tens of megabytes big and the metadata section is usually quite small.
> > 
> 
> Correct only with naive assumptions. Fix your assumptions :-)

Can you show me the validity of your point with concrete data or tests?
dpkg has not been using seeks and has been doing fine.

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat May  6 20:07:19 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id UAA09800;
	Sat, 6 May 2000 20:07:18 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id TAA04888;
	Sat, 6 May 2000 19:12:56 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id TAA12844;
	Sat, 6 May 2000 19:12:55 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id TAA02726;
	Sat, 6 May 2000 19:13:00 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id TAA02713
	for packaging-list; Sat, 6 May 2000 19:12:54 -0400
Resent-Date: Sat, 6 May 2000 19:12:54 -0400
Resent-Message-Id: <200005062312.TAA02713@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id TAA02710
	for <packaging@rufus.w3.org>; Sat, 6 May 2000 19:12:48 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12oDjs-0004sC-00; Sat, 06 May 2000 16:12:00 -0700
Date: Sat, 6 May 2000 16:12:00 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] dependency syntax
In-Reply-To: <20000506122242.B5440@devserv.devel.redhat.com>
Message-ID: <Pine.LNX.4.10.10005061604060.18693-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1514
Lines: 33


On Sat, 6 May 2000, Jeff Johnson wrote:

> Having a single linux system with both dpkg and rpm tool chains installed
> seems like a desirable goal to me. The PATH(...) style dependency above
> is the only mechanism that I've been able to devise that will permit
> reasonably unbiased (e.g. rpm vs dpkg vs pkgadd vs ...) dependency resolution
> for the simple case of "Package needs helper program". Ditto LD_LIBRARY_PATH
> for "Executable needs shared library".

Ok. So the final database is the real installed file? How about
dependencies on the file size? If grep is a certain size then you can
deduct that it is a certain release of grep. Maybe other attributes of the
real files should also be accessible? One criteria could be that the file
was created after a certain data for example. Then you can even 
distinguish between binaries of the same size.
(very evil grin>

Seriously we need a clean design with the least possible hacks.
Consistent schemes with minimal exceptions. Otherwise the package managers
will go south.

The goal of the integration with multiple foreign package managers is
pretty esoteric.

Do we have an agreement on the goals of our designs and some description
of the scope of things we are trying to accomplish? Otherwise the scope
of our solutions will increase and increase as we come up with more and
more new situations that the package managers must address.

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat May  6 20:45:42 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id UAA12126;
	Sat, 6 May 2000 20:45:41 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id UAA10341;
	Sat, 6 May 2000 20:45:41 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id UAA29508;
	Sat, 6 May 2000 20:45:41 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id UAA20987;
	Sat, 6 May 2000 20:46:02 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id UAA20962
	for packaging-list; Sat, 6 May 2000 20:45:58 -0400
Resent-Date: Sat, 6 May 2000 20:45:58 -0400
Resent-Message-Id: <200005070045.UAA20962@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id UAA20958
	for <packaging@rufus.w3.org>; Sat, 6 May 2000 20:45:54 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id UAA12099
	for packaging@rufus.w3.org; Sat, 6 May 2000 20:45:20 -0400
Date: Sat, 6 May 2000 20:45:20 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] dependency syntax
Message-ID: <20000506204520.J5440@devserv.devel.redhat.com>
References: <20000506122242.B5440@devserv.devel.redhat.com> <Pine.LNX.4.10.10005061604060.18693-100000@home.lameter.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <Pine.LNX.4.10.10005061604060.18693-100000@home.lameter.com>; from christoph@lameter.com on Sat, May 06, 2000 at 04:12:00PM -0700
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2997
Lines: 73


On Sat, May 06, 2000 at 04:12:00PM -0700, Christoph Lameter wrote:
> 
> On Sat, 6 May 2000, Jeff Johnson wrote:
> 
> > Having a single linux system with both dpkg and rpm tool chains installed
> > seems like a desirable goal to me. The PATH(...) style dependency above
> > is the only mechanism that I've been able to devise that will permit
> > reasonably unbiased (e.g. rpm vs dpkg vs pkgadd vs ...) dependency resolution
> > for the simple case of "Package needs helper program". Ditto LD_LIBRARY_PATH
> > for "Executable needs shared library".
> 
> Ok. So the final database is the real installed file? How about

There is no final database, only two databases and tool chains that use each.
But yes, I wish to use the file system as a kind of database for a kind
of dependency.

> dependencies on the file size? If grep is a certain size then you can
> deduct that it is a certain release of grep. Maybe other attributes of the

Better than size is the md5sum if you wish to identify either grep-the-package
or grep-the-executable. I'm just trying to match a dependency test as closely
as possible with a common type of scriptlet requirement, namely that there
is a grep that can be found in the scriptlet PATH, and I suspect that the
scriptlet cares not a wit for what package contains grep, etc.

> real files should also be accessible? One criteria could be that the file
> was created after a certain data for example. Then you can even 
> distinguish between binaries of the same size.
> (very evil grin>
> 

More than I need.

> Seriously we need a clean design with the least possible hacks.
> Consistent schemes with minimal exceptions. Otherwise the package managers
> will go south.
> 

Definitely. However, the scope of this list is only the on-disk format,
which unfortunately leaves many other areas of packaging outside the
scope of the discussion.

> The goal of the integration with multiple foreign package managers is
> pretty esoteric.
> 

Except that this is a very common problem right now for rpm systems,
particularly on non-linux OS's that are only partially managed by rpm.
The PATH(...) construct may be a hack, but it's better than the two other
hacks (provides as part of configuration and autogenerated virtual provides)
that are already in rpm.

> Do we have an agreement on the goals of our designs and some description
> of the scope of things we are trying to accomplish? Otherwise the scope
> of our solutions will increase and increase as we come up with more and
> more new situations that the package managers must address.
> 

I'm not sure that we're at the point of agreeing on goals at this point, as
I'm perfectly happy hiding PATH(...) in rpm private data as long as the XML
syntax permits this. That was the motivation for asking about PATH(...).

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat May  6 20:53:00 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id UAA12579;
	Sat, 6 May 2000 20:53:00 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id UAA10816;
	Sat, 6 May 2000 20:53:00 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id UAA31011;
	Sat, 6 May 2000 20:52:59 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id UAA21516;
	Sat, 6 May 2000 20:53:23 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id UAA21506
	for packaging-list; Sat, 6 May 2000 20:53:19 -0400
Resent-Date: Sat, 6 May 2000 20:53:19 -0400
Resent-Message-Id: <200005070053.UAA21506@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id UAA21502
	for <packaging@rufus.w3.org>; Sat, 6 May 2000 20:53:17 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id UAA12551
	for packaging@rufus.w3.org; Sat, 6 May 2000 20:52:43 -0400
Date: Sat, 6 May 2000 20:52:43 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000506205243.K5440@devserv.devel.redhat.com>
References: <20000506122404.C5440@devserv.devel.redhat.com> <Pine.LNX.4.10.10005061612090.18693-100000@home.lameter.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <Pine.LNX.4.10.10005061612090.18693-100000@home.lameter.com>; from christoph@lameter.com on Sat, May 06, 2000 at 04:13:13PM -0700
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1068
Lines: 33


On Sat, May 06, 2000 at 04:13:13PM -0700, Christoph Lameter wrote:
> 
> On Sat, 6 May 2000, Jeff Johnson wrote:
> 
> > > I doubt that this is a real speed problem. The packages will not be
> > > tens of megabytes big and the metadata section is usually quite small.
> > > 
> > 
> > Correct only with naive assumptions. Fix your assumptions :-)
> 
> Can you show me the validity of your point with concrete data or tests?
> dpkg has not been using seeks and has been doing fine.
> 

Sure. Here's an easy example:

	Red Hat wishes to bundle GNOME and/or KDE into a single meta package
	without rebuilding. AFAICT, that will require mapping metadata/payload
	from each package into components in the super-package wrapper,
	and I shudder when I contemplate 2 layers of unwrapping to retrieve
	components from a sequential (possibly remote, i.e. no lseek)
	byte stream.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat May  6 21:04:58 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id VAA13252;
	Sat, 6 May 2000 21:04:58 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id VAA11390;
	Sat, 6 May 2000 21:04:58 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id VAA00776;
	Sat, 6 May 2000 21:04:58 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id VAA23123;
	Sat, 6 May 2000 21:05:25 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id VAA23114
	for packaging-list; Sat, 6 May 2000 21:05:19 -0400
Resent-Date: Sat, 6 May 2000 21:05:19 -0400
Resent-Message-Id: <200005070105.VAA23114@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id VAA23110
	for <packaging@rufus.w3.org>; Sat, 6 May 2000 21:05:16 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12oFUu-00051J-00; Sat, 06 May 2000 18:04:40 -0700
Date: Sat, 6 May 2000 18:04:40 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] dependency syntax
In-Reply-To: <20000506204520.J5440@devserv.devel.redhat.com>
Message-ID: <Pine.LNX.4.10.10005061758360.19273-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 651
Lines: 17


On Sat, 6 May 2000, Jeff Johnson wrote:

> > Seriously we need a clean design with the least possible hacks.
> > Consistent schemes with minimal exceptions. Otherwise the package managers
> > will go south.
> Definitely. However, the scope of this list is only the on-disk format,
> which unfortunately leaves many other areas of packaging outside the
> scope of the discussion.

I have just seen new requirements (integration with foreign package
managers) and with that the scope of what the on-disk format has to
do has expanded.

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat May  6 21:06:27 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id VAA13357;
	Sat, 6 May 2000 21:06:27 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id VAA11433;
	Sat, 6 May 2000 21:06:26 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id VAA01090;
	Sat, 6 May 2000 21:06:26 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id VAA23325;
	Sat, 6 May 2000 21:06:54 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id VAA23316
	for packaging-list; Sat, 6 May 2000 21:06:52 -0400
Resent-Date: Sat, 6 May 2000 21:06:52 -0400
Resent-Message-Id: <200005070106.VAA23316@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id VAA23313
	for <packaging@rufus.w3.org>; Sat, 6 May 2000 21:06:49 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12oFWR-00051Y-00; Sat, 06 May 2000 18:06:15 -0700
Date: Sat, 6 May 2000 18:06:15 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
In-Reply-To: <20000506205243.K5440@devserv.devel.redhat.com>
Message-ID: <Pine.LNX.4.10.10005061804520.19273-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1125
Lines: 25


Umm. Where is the data? Measurements? These might just be another set of
"naive assumptions".

On Sat, 6 May 2000, Jeff Johnson wrote:

> On Sat, May 06, 2000 at 04:13:13PM -0700, Christoph Lameter wrote:
> > On Sat, 6 May 2000, Jeff Johnson wrote:
> > > > I doubt that this is a real speed problem. The packages will not be
> > > > tens of megabytes big and the metadata section is usually quite small.
> > > Correct only with naive assumptions. Fix your assumptions :-)
> > Can you show me the validity of your point with concrete data or tests?
> > dpkg has not been using seeks and has been doing fine.
> Sure. Here's an easy example:
> 
> 	Red Hat wishes to bundle GNOME and/or KDE into a single meta package
> 	without rebuilding. AFAICT, that will require mapping metadata/payload
> 	from each package into components in the super-package wrapper,
> 	and I shudder when I contemplate 2 layers of unwrapping to retrieve
> 	components from a sequential (possibly remote, i.e. no lseek)
> 	byte stream.

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun May  7 10:28:54 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA15598;
	Sun, 7 May 2000 10:28:53 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA10237;
	Sun, 7 May 2000 10:28:53 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA07350;
	Sun, 7 May 2000 10:28:53 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA12950;
	Sun, 7 May 2000 10:27:41 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA12940
	for packaging-list; Sun, 7 May 2000 10:27:37 -0400
Resent-Date: Sun, 7 May 2000 10:27:37 -0400
Resent-Message-Id: <200005071427.KAA12940@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA12937
	for <packaging@rufus.w3.org>; Sun, 7 May 2000 10:27:36 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id KAA15568
	for packaging@rufus.w3.org; Sun, 7 May 2000 10:26:57 -0400
Date: Sun, 7 May 2000 10:26:57 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] dependency syntax
Message-ID: <20000507102657.M5440@devserv.devel.redhat.com>
References: <20000506204520.J5440@devserv.devel.redhat.com> <Pine.LNX.4.10.10005061758360.19273-100000@home.lameter.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <Pine.LNX.4.10.10005061758360.19273-100000@home.lameter.com>; from christoph@lameter.com on Sat, May 06, 2000 at 06:04:40PM -0700
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1639
Lines: 39


On Sat, May 06, 2000 at 06:04:40PM -0700, Christoph Lameter wrote:
> 
> On Sat, 6 May 2000, Jeff Johnson wrote:
> 
> > > Seriously we need a clean design with the least possible hacks.
> > > Consistent schemes with minimal exceptions. Otherwise the package managers
> > > will go south.
> > Definitely. However, the scope of this list is only the on-disk format,
> > which unfortunately leaves many other areas of packaging outside the
> > scope of the discussion.
> 
> I have just seen new requirements (integration with foreign package
> managers) and with that the scope of what the on-disk format has to
> do has expanded.
> 

Whoa, that's not true at all. You're confusing dependency syntax (i.e.
how dependencies are represented in XML) with semantics (i.e how and why
packagers resolve dependencies), and so far, since we have (and will be using)
per-packager (and per-distro and per-platform and ...) private areas
there are not really any new requirements for on-disk package format.

However, rpm will be making increasing use of "foo(bar)" type constructs,
like PATH(grep), to develop new ways to generate and resolve dependencies.
Syntactically, as long as '(' and ')' are not explicitly forbidden and version
is optional, then "PATH(grep)" is really no different than, for example,
"libc.so.6", which is typically resolved without knowing anything about
underlying sonames, or archive formats, or ELF: "It's just a string".

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun May  7 10:35:32 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA15785;
	Sun, 7 May 2000 10:35:31 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA10593;
	Sun, 7 May 2000 10:35:31 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA08972;
	Sun, 7 May 2000 10:35:31 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA13579;
	Sun, 7 May 2000 10:34:07 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA13547
	for packaging-list; Sun, 7 May 2000 10:34:04 -0400
Resent-Date: Sun, 7 May 2000 10:34:04 -0400
Resent-Message-Id: <200005071434.KAA13547@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA13543
	for <packaging@rufus.w3.org>; Sun, 7 May 2000 10:34:03 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id KAA15719
	for packaging@rufus.w3.org; Sun, 7 May 2000 10:33:28 -0400
Date: Sun, 7 May 2000 10:33:28 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000507103328.N5440@devserv.devel.redhat.com>
References: <20000506205243.K5440@devserv.devel.redhat.com> <Pine.LNX.4.10.10005061804520.19273-100000@home.lameter.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <Pine.LNX.4.10.10005061804520.19273-100000@home.lameter.com>; from christoph@lameter.com on Sat, May 06, 2000 at 06:06:15PM -0700
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1666
Lines: 42


On Sat, May 06, 2000 at 06:06:15PM -0700, Christoph Lameter wrote:
> 
> Umm. Where is the data? Measurements? These might just be another set of
> "naive assumptions".
> 

True enough. Kinda hard to generate real data without a real specification
of format, and the current specification of the format limits tests to only
a single metadata/payload pair, basically a degenerate trivial case.

73 de Jeff

> On Sat, 6 May 2000, Jeff Johnson wrote:
> 
> > On Sat, May 06, 2000 at 04:13:13PM -0700, Christoph Lameter wrote:
> > > On Sat, 6 May 2000, Jeff Johnson wrote:
> > > > > I doubt that this is a real speed problem. The packages will not be
> > > > > tens of megabytes big and the metadata section is usually quite small.
> > > > Correct only with naive assumptions. Fix your assumptions :-)
> > > Can you show me the validity of your point with concrete data or tests?
> > > dpkg has not been using seeks and has been doing fine.
> > Sure. Here's an easy example:
> > 
> > 	Red Hat wishes to bundle GNOME and/or KDE into a single meta package
> > 	without rebuilding. AFAICT, that will require mapping metadata/payload
> > 	from each package into components in the super-package wrapper,
> > 	and I shudder when I contemplate 2 layers of unwrapping to retrieve
> > 	components from a sequential (possibly remote, i.e. no lseek)
> > 	byte stream.
> 
> ----
> message from packaging@rufus.w3.org
> to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed May 10 18:30:11 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id SAA12867;
	Wed, 10 May 2000 18:30:10 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA23907;
	Wed, 10 May 2000 18:30:09 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA32115;
	Wed, 10 May 2000 18:30:08 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA18517;
	Wed, 10 May 2000 18:30:11 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id SAA18491
	for packaging-list; Wed, 10 May 2000 18:30:06 -0400
Resent-Date: Wed, 10 May 2000 18:30:06 -0400
Resent-Message-Id: <200005102230.SAA18491@rpmfind.net>
Received: from fog.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id SAA18409
	for <packaging@rufus.w3.org>; Wed, 10 May 2000 18:29:26 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.10.1/8.10.1/Debian 8.10.1-1) id e4AMKXX00860
	for packaging@rufus.w3.org; Thu, 11 May 2000 00:20:33 +0200
Date: Thu, 11 May 2000 00:20:33 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] [wichert@mors.wiggy.net: updated text]
Message-ID: <20000511002033.A850@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000505185847.A10800@mors.wiggy.net> <20000505172707.X5440@devserv.devel.redhat.com> <20000506000623.B1357@mors.wiggy.net> <20000506120009.A5440@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="ZGiS0Q5IWpPtfppv"
Content-Disposition: inline
User-Agent: Mutt/1.1.12i
In-Reply-To: <20000506120009.A5440@devserv.devel.redhat.com>; from jbj@redhat.com on Sat, May 06, 2000 at 12:00:09PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 4070
Lines: 105



--ZGiS0Q5IWpPtfppv
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> Our build system works similarly. I don't understand why interspersing
> is a pain at all.

> Choose the names right, and "interspersing names"
> will be handled by sort order.

I don't see where this sort order is used?

> If you wish to add signatures to an existing
> package in place, space in the wrapper can be preallocated.

That's silly, you can never know how much space you will need. Someone
might decide to use 10 different ways to sign a package (OpenBSD uses
several for example), or not sign at all.

> The win that I see is the ability to insert component signatures into a
> stream of bytes in a single pass (signatures-at-the-end can do this too) =
as
> well as to verify component signatures from a stream of bytes as early as
> possible (signatures-at-the-end can not do this).

But you have to read the whole thing anyway, so you can create the signatur=
es
on the fly and compare them at the end. If someone uses a signature which we
don't precompute by default we need a second pass.

> I'll take that bet, depending on your definition of "small", as ABOR is=
=20
> tiny compared to RETR, for FTP at least :-)

Depending on the connection and so, ABOR might not be processed on a=20
congested line before the RETR completes anyway :)

> Aside: Here, and elsewhere, this discussion is being limited by preconcei=
ved
> notions based on existing packaging and implementations. You argue that t=
he
> gain is small, and you are correct only in the narrow context of "small"
> packages with few components. I believe that this package format discussi=
on
> should start thinking about what happens when, say, there are hundreds or
> thousands of components in the wrapper, or when metadata is >1Mb.

I'll see if I can do some benchmarks this weekend.

> The syntax is goofy, but the idea is sound: The tags in metadata most acc=
essed
> by non-installer programs are almost certainly
> 	Package: (or any dialectical variant like name/epoch/version/release)
> 	Platform: (or any dialectical variant like arch/vendor/os)
> and I strongly believe that we need to streamline access to that informat=
ion.
> Requiring all non-installer tools to incorporate an XML parser to discover
> the package name and/or platform seems kinda dumb to me, and the alternat=
ive
> hacks with grep et al (and metatdata can be compressed!) that will be used
> to get this information seem to be at odds with the goal of making it easy
> to handle packaging without packager software.

Look at sgrep, which is scheduled to be merged with grep at some point.
Anyway you always need something that can find the packagename in the
XML data, and I really don't want to put two completely different entities
(packagename and version) into a single field.

> I'd probably be happy with exposing the package/platform information as
> empty headers in the wrapper format, as I see no other way of not
> requiring all non-installers to have an XML parser available in order to
> discover package/platform tag values.

Since it's an obligatory tag not hidden in a namespace it's really
trivial to get to it without a XML parter. A one-liner in sh even!

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--ZGiS0Q5IWpPtfppv
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkZ4LEACgkQPLiSUC+jvC2rGgCfY+6sTfFUTRZoC+4X3317fSZl
0xoAnRT3mtcTAapbtX18nI/Xw/T1PI6E
=01Yh
-----END PGP SIGNATURE-----

--ZGiS0Q5IWpPtfppv--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed May 10 18:30:13 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id SAA12873;
	Wed, 10 May 2000 18:30:12 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA23916;
	Wed, 10 May 2000 18:30:12 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA32119;
	Wed, 10 May 2000 18:30:11 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA18557;
	Wed, 10 May 2000 18:30:45 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id SAA18548
	for packaging-list; Wed, 10 May 2000 18:30:43 -0400
Resent-Date: Wed, 10 May 2000 18:30:43 -0400
Resent-Message-Id: <200005102230.SAA18548@rpmfind.net>
Received: from fog.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id SAA18538
	for <packaging@rufus.w3.org>; Wed, 10 May 2000 18:30:26 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.10.1/8.10.1/Debian 8.10.1-1) id e4AEuBp07688
	for packaging@rufus.w3.org; Wed, 10 May 2000 16:56:11 +0200
Date: Wed, 10 May 2000 16:56:11 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] dependency syntax
Message-ID: <20000510165611.A7674@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000505131507.U5440@devserv.devel.redhat.com> <Pine.LNX.4.10.10005051557590.11315-100000@home.lameter.com> <20000506122242.B5440@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="W/nzBZO5zC0uMSeA"
Content-Disposition: inline
User-Agent: Mutt/1.1.12i
In-Reply-To: <20000506122242.B5440@devserv.devel.redhat.com>; from jbj@redhat.com on Sat, May 06, 2000 at 12:22:42PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2502
Lines: 66



--W/nzBZO5zC0uMSeA
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> The awesome power of apt is insufficient to resolve a dependency on
> grep-the-package (when grep-the-executable is actually meant) when
> faced with a single system that has both dpkg and rpm in active use and
> grep is in the rpm database.

Wrong. Apt might simply not care about file-dependencies if they
aren't fullfilled. At least that is what I would do right now
(since we don't have the full Contents-file available, and it
is way too big to download anyway).

The issue here is different: Debians tools like dpkg and apt are made
to work in a complete distribution, where everything is managed by our
tools. That is the only way we can make strong guarantees about system
integrity.

rpm and the policies RedHat uses in making rpm-packages are different:
they are made to be installed on as many systems as possible, including
those where only (possible small) parts of the system are managed by
the packagemanager. This means their packages are more portable across
systems, but that they can't make the guaranteers about system integrity
that we can.

As I've already said a couple of times in various places: the package
format does not define the distribution, or how packages can be used.
The policies that are used when making packages do that.

> Having a single linux system with both dpkg and rpm tool chains installed
> seems like a desirable goal to me.

Not to me. I fully intend to have a tool a year from now that will handle
different packageformats natively. Most of the design of that is ready
now, implementation should start in a month or so.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--W/nzBZO5zC0uMSeA
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkZeIsACgkQPLiSUC+jvC2qMACeNZiU+etNbfKTbXy0Cz6sm8jg
cnsAnixQmCRhZueM4N39WexZQNxD+z7W
=J/V3
-----END PGP SIGNATURE-----

--W/nzBZO5zC0uMSeA--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed May 10 18:59:40 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id SAA14325;
	Wed, 10 May 2000 18:59:39 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA28252;
	Wed, 10 May 2000 18:59:39 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA00879;
	Wed, 10 May 2000 18:59:39 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id TAA22245;
	Wed, 10 May 2000 19:00:13 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id TAA22231
	for packaging-list; Wed, 10 May 2000 19:00:09 -0400
Resent-Date: Wed, 10 May 2000 19:00:09 -0400
Resent-Message-Id: <200005102300.TAA22231@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id TAA22208
	for <packaging@rufus.w3.org>; Wed, 10 May 2000 19:00:04 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id SAA14313
	for packaging@rufus.w3.org; Wed, 10 May 2000 18:59:19 -0400
Date: Wed, 10 May 2000 18:59:19 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] [wichert@mors.wiggy.net: updated text]
Message-ID: <20000510185919.R29909@devserv.devel.redhat.com>
References: <20000505185847.A10800@mors.wiggy.net> <20000505172707.X5440@devserv.devel.redhat.com> <20000506000623.B1357@mors.wiggy.net> <20000506120009.A5440@devserv.devel.redhat.com> <20000511002033.A850@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000511002033.A850@mors.wiggy.net>; from wichert@mors.wiggy.net on Thu, May 11, 2000 at 12:20:33AM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 5064
Lines: 114


On Thu, May 11, 2000 at 12:20:33AM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > Our build system works similarly. I don't understand why interspersing
> > is a pain at all.
> 
> > Choose the names right, and "interspersing names"
> > will be handled by sort order.
> 
> I don't see where this sort order is used?
> 

I was envinsioning, for example, a component name "data.tar.gz" with
a convention append ".sig" for the detached signature. Interleaved signatures
are then achieved by unwrapping everything, computing detached signatures,
and rewrapping with names sorted. Otherwise, I don't understand your
"interspersing names" objection. Pong :-)

> > If you wish to add signatures to an existing
> > package in place, space in the wrapper can be preallocated.
> 
> That's silly, you can never know how much space you will need. Someone
> might decide to use 10 different ways to sign a package (OpenBSD uses
> several for example), or not sign at all.
> 

Then don't preallocate ...

> > The win that I see is the ability to insert component signatures into a
> > stream of bytes in a single pass (signatures-at-the-end can do this too) as
> > well as to verify component signatures from a stream of bytes as early as
> > possible (signatures-at-the-end can not do this).
> 
> But you have to read the whole thing anyway, so you can create the signatures
> on the fly and compare them at the end. If someone uses a signature which we
> don't precompute by default we need a second pass.
> 

You don't have to read the whole package to verify a metadata section
with attached signature following on the stream.

> > I'll take that bet, depending on your definition of "small", as ABOR is 
> > tiny compared to RETR, for FTP at least :-)
> 
> Depending on the connection and so, ABOR might not be processed on a 
> congested line before the RETR completes anyway :)
> 

That's an implementation specific FTP pathology that need not prevent other,
better implementations of FTP to succeed. There are other, far better
transports available, but if you insist on reading the whole package to
get to the signatures, then, voila, you will have to read the whole package
to verify the headers.

> > Aside: Here, and elsewhere, this discussion is being limited by preconceived
> > notions based on existing packaging and implementations. You argue that the
> > gain is small, and you are correct only in the narrow context of "small"
> > packages with few components. I believe that this package format discussion
> > should start thinking about what happens when, say, there are hundreds or
> > thousands of components in the wrapper, or when metadata is >1Mb.
> 
> I'll see if I can do some benchmarks this weekend.
> 

Good.

> > The syntax is goofy, but the idea is sound: The tags in metadata most accessed
> > by non-installer programs are almost certainly
> > 	Package: (or any dialectical variant like name/epoch/version/release)
> > 	Platform: (or any dialectical variant like arch/vendor/os)
> > and I strongly believe that we need to streamline access to that information.
> > Requiring all non-installer tools to incorporate an XML parser to discover
> > the package name and/or platform seems kinda dumb to me, and the alternative
> > hacks with grep et al (and metatdata can be compressed!) that will be used
> > to get this information seem to be at odds with the goal of making it easy
> > to handle packaging without packager software.
> 
> Look at sgrep, which is scheduled to be merged with grep at some point.
> Anyway you always need something that can find the packagename in the
> XML data, and I really don't want to put two completely different entities
> (packagename and version) into a single field.
> 

"sgrep" sounds like a "hacks with grep" solution to me ...

"find the packagename in the XML data" sure starts to sound like a requirement
that tools that need to retrieve the platform for which the package is intended,
or the package name-version (I don't care a whit whether it's one tag or ten,
just that it is *easy* to retrieve) will have to have an XML parser built in.
And, if metadata is compressed, you're gonna need zlib/bzip2/....

> > I'd probably be happy with exposing the package/platform information as
> > empty headers in the wrapper format, as I see no other way of not
> > requiring all non-installers to have an XML parser available in order to
> > discover package/platform tag values.
> 
> Since it's an obligatory tag not hidden in a namespace it's really
> trivial to get to it without a XML parter. A one-liner in sh even!
> 

I doubt that you can discover the platform for which a package is intended
(which, as currently conceived, will require reading dependencies) easily.
Of course the one line in shell may be using a tool with builtin  XML parser,
and so we come full circle :-(

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu May 11 07:07:07 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id HAA00873;
	Thu, 11 May 2000 07:07:07 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id HAA01312;
	Thu, 11 May 2000 07:07:06 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id HAA23742;
	Thu, 11 May 2000 07:07:05 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id HAA18476;
	Thu, 11 May 2000 07:07:44 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id HAA18446
	for packaging-list; Thu, 11 May 2000 07:07:39 -0400
Resent-Date: Thu, 11 May 2000 07:07:39 -0400
Resent-Message-Id: <200005111107.HAA18446@rpmfind.net>
Received: from fog.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id HAA18416
	for <packaging@rufus.w3.org>; Thu, 11 May 2000 07:07:32 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.10.1/8.10.1/Debian 8.10.1-1) id e4BAcQw05156
	for packaging@rufus.w3.org; Thu, 11 May 2000 12:38:26 +0200
Date: Thu, 11 May 2000 12:38:26 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] [wichert@mors.wiggy.net: updated text]
Message-ID: <20000511123826.A5111@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000505185847.A10800@mors.wiggy.net> <20000505172707.X5440@devserv.devel.redhat.com> <20000506000623.B1357@mors.wiggy.net> <20000506120009.A5440@devserv.devel.redhat.com> <20000511002033.A850@mors.wiggy.net> <20000510185919.R29909@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="qDbXVdCdHGoSgWSk"
Content-Disposition: inline
User-Agent: Mutt/1.1.12i
In-Reply-To: <20000510185919.R29909@devserv.devel.redhat.com>; from jbj@redhat.com on Wed, May 10, 2000 at 06:59:19PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 3594
Lines: 107



--qDbXVdCdHGoSgWSk
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> I was envinsioning, for example, a component name "data.tar.gz" with
> a convention append ".sig" for the detached signature. Interleaved signat=
ures
> are then achieved by unwrapping everything, computing detached signatures,
> and rewrapping with names sorted.

Ah, it's a partial ordering, I was fearing you wanted to sort data before
metadata as well which would be somewhat unoptimal :)

This is a new suggestion though: have multiple .sig files instead of
one signature file.

> That's an implementation specific FTP pathology that need not prevent oth=
er,
> better implementations of FTP to succeed.

I was more referring to the fact that circumstances can change the
benefits a protocol will have you. Even a good FTP implementation
can suck horrible on a bad link.

> "sgrep" sounds like a "hacks with grep" solution to me ...

Package: sgrep
Description: a tool to search a file for structured pattern
 Sgrep (structured grep) is a tool for searching text files and
 filtering text streams for structured criteria. Sgrep implements
 a query language based on so called region expressions.
 .
 Like grep, sgrep can be used for any kind of text files. However it
 is most useful for text files containing some kind of structured text.
 A file containing structured text could be defined as a file, which
 obeys some syntax. Examples of structured text files are SGML, HTML,
 C, Tex and mail files.

The grep maintainer expressed interested in adding this kind of
capabilities to grep as well. I think the following sh will also
do the trick:

getpackageheader() {
	pkg=3D$1=09
	payloadnr=3D$2
	header=3D$3
=09
	field=3D$(tar -xfO $1 metadata-1-$2 | gzip -cd | tr A-Z a-z | \
		sed -ne '<$3>\([^<]\+\)</$3>/\1/p' )
	return $field
}

name=3D`getpackageheader hello_1.1.pkg 1 name`
version=3D`getpackageheader hello_1.1.pkg 1 version`

Of course this isn't optimal since it means we extract and search the
metadata twice, but it does show that we don't need any special tools
to extract this information.


> "find the packagename in the XML data" sure starts to sound like a requir=
ement
> that tools that need to retrieve the platform for which the package is in=
tended,
> or the package name-version (I don't care a whit whether it's one tag or =
ten,
> just that it is *easy* to retrieve) will have to have an XML parser built=
 in.

For some fields like packagename you can use some assumptions that make
things easy:
* the value is not in a namespace
* the value is not language-specific
* the value is short and not line-wrapped
* we know the exact name of the tag used

Which allows you take shortcuts and do something like the sh snippet above.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--qDbXVdCdHGoSgWSk
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkajaIACgkQPLiSUC+jvC3jQwCfWYdxANJxox9IMkry3aMZ/GjK
J0YAoKMx7txy5+p4s8yziriMLtY4Qs8l
=sBFJ
-----END PGP SIGNATURE-----

--qDbXVdCdHGoSgWSk--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu May 11 07:07:07 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id HAA00874;
	Thu, 11 May 2000 07:07:07 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id HAA01316;
	Thu, 11 May 2000 07:07:06 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id HAA23745;
	Thu, 11 May 2000 07:07:06 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id HAA18451;
	Thu, 11 May 2000 07:07:39 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id HAA18417
	for packaging-list; Thu, 11 May 2000 07:07:33 -0400
Resent-Date: Thu, 11 May 2000 07:07:33 -0400
Resent-Message-Id: <200005111107.HAA18417@rpmfind.net>
Received: from fog.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id HAA18408
	for <packaging@rufus.w3.org>; Thu, 11 May 2000 07:07:28 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.10.1/8.10.1/Debian 8.10.1-1) id e4BAm9L05194
	for packaging@rufus.w3.org; Thu, 11 May 2000 12:48:09 +0200
Date: Thu, 11 May 2000 12:48:09 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000511124809.C5111@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000506122404.C5440@devserv.devel.redhat.com> <Pine.LNX.4.10.10005061612090.18693-100000@home.lameter.com> <20000506205243.K5440@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="4jXrM3lyYWu4nBt5"
Content-Disposition: inline
User-Agent: Mutt/1.1.12i
In-Reply-To: <20000506205243.K5440@devserv.devel.redhat.com>; from jbj@redhat.com on Sat, May 06, 2000 at 08:52:43PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1689
Lines: 51



--4jXrM3lyYWu4nBt5
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> Sure. Here's an easy example:
>=20
> 	Red Hat wishes to bundle GNOME and/or KDE into a single meta package
> 	without rebuilding. AFAICT, that will require mapping metadata/payload
> 	from each package into components in the super-package wrapper,
> 	and I shudder when I contemplate 2 layers of unwrapping to retrieve
> 	components from a sequential (possibly remote, i.e. no lseek)
> 	byte stream.

*sounds of someone fainting*

The thought of putting all of X in one package occured to me but I dismissed
it quickly as a really sick idea, but GNOME and KDE seem to be growing to
a point where they are even bigger, and already are awesomely complex
wrt dependencies/conflicts if you package them properly.

This would definitely be the Package From Hell.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--4jXrM3lyYWu4nBt5
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkaj+kACgkQPLiSUC+jvC2NNgCeIZo/el5hVSmRQ+mXhnup+dta
KOUAn2SK7mmJmpM6vWr8SjO+YXMUHbDx
=ry2R
-----END PGP SIGNATURE-----

--4jXrM3lyYWu4nBt5--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu May 11 07:07:07 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id HAA00875;
	Thu, 11 May 2000 07:07:07 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id HAA01319;
	Thu, 11 May 2000 07:07:06 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id HAA23746;
	Thu, 11 May 2000 07:07:06 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id HAA18457;
	Thu, 11 May 2000 07:07:40 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id HAA18426
	for packaging-list; Thu, 11 May 2000 07:07:34 -0400
Resent-Date: Thu, 11 May 2000 07:07:34 -0400
Resent-Message-Id: <200005111107.HAA18426@rpmfind.net>
Received: from fog.mors.wiggy.net (wichert.cistron.nl [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id HAA18412
	for <packaging@rufus.w3.org>; Thu, 11 May 2000 07:07:30 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.10.1/8.10.1/Debian 8.10.1-1) id e4BAip605184
	for packaging@rufus.w3.org; Thu, 11 May 2000 12:44:51 +0200
Date: Thu, 11 May 2000 12:44:51 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000511124451.B5111@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000505175020.Y5440@devserv.devel.redhat.com> <20000506135257.A761@mors.wiggy.net> <20000506145136.F5440@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="gj572EiMnwbLXET9"
Content-Disposition: inline
User-Agent: Mutt/1.1.12i
In-Reply-To: <20000506145136.F5440@devserv.devel.redhat.com>; from jbj@redhat.com on Sat, May 06, 2000 at 02:51:36PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1828
Lines: 58



--gj572EiMnwbLXET9
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> (Red face: I should be more careful before shouting wrong, sorry).

We all do that sometimes I guess..

> Here's what "strace -o foo nm --print-armap /usr/lib/libc.a" has to say:
>=20
> open("/usr/lib/libc.a", O_RDONLY)       =3D 4
> SYS_63()                                =3D -1 ENOSYS (Function not imple=
mented)

Completely off-topic but being strace maintainer I'm curious here:
what strace binary did you use? syscall 63 is dup2 (or fstat64 if you are
using a sparc), and strace has definitely supported that for ages as
far as I know.. and even if it wasn't supported it should still show
a couple of arguments.

[.. snip comments which need more though ..]

> FWIW judging by the relative sizes, ar is a much better candidate for
> inclusion on rescue disks than tar is:

Red herring, you need tar anyway. Besides, on boot-floppies you don't
use tar but star, which is lots smaller.

Wichert.
>=20

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--gj572EiMnwbLXET9
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkajyMACgkQPLiSUC+jvC0AswCdGqOKWvpKKJrx11eXQ+4hq9TQ
RV8AnjoZJDZGnu76BG+yzu5ZPiaPCfTA
=oEZ2
-----END PGP SIGNATURE-----

--gj572EiMnwbLXET9--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu May 11 07:57:32 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id HAA01945;
	Thu, 11 May 2000 07:57:32 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id HAA05246;
	Thu, 11 May 2000 07:57:30 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id HAA25123;
	Thu, 11 May 2000 07:57:29 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id HAA23260;
	Thu, 11 May 2000 07:58:08 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id HAA23252
	for packaging-list; Thu, 11 May 2000 07:58:04 -0400
Resent-Date: Thu, 11 May 2000 07:58:04 -0400
Resent-Message-Id: <200005111158.HAA23252@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id HAA23231
	for <packaging@rufus.w3.org>; Thu, 11 May 2000 07:57:59 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id HAA01938
	for packaging@rufus.w3.org; Thu, 11 May 2000 07:57:15 -0400
Date: Thu, 11 May 2000 07:57:15 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] [wichert@mors.wiggy.net: updated text]
Message-ID: <20000511075715.T29909@devserv.devel.redhat.com>
References: <20000505185847.A10800@mors.wiggy.net> <20000505172707.X5440@devserv.devel.redhat.com> <20000506000623.B1357@mors.wiggy.net> <20000506120009.A5440@devserv.devel.redhat.com> <20000511002033.A850@mors.wiggy.net> <20000510185919.R29909@devserv.devel.redhat.com> <20000511123826.A5111@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000511123826.A5111@mors.wiggy.net>; from wichert@mors.wiggy.net on Thu, May 11, 2000 at 12:38:26PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 4426
Lines: 113


On Thu, May 11, 2000 at 12:38:26PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > I was envinsioning, for example, a component name "data.tar.gz" with
> > a convention append ".sig" for the detached signature. Interleaved signatures
> > are then achieved by unwrapping everything, computing detached signatures,
> > and rewrapping with names sorted.
> 
> Ah, it's a partial ordering, I was fearing you wanted to sort data before
> metadata as well which would be somewhat unoptimal :)
> 
> This is a new suggestion though: have multiple .sig files instead of
> one signature file.
> 

My memory says that detached signatures adjacent to components in the wrapper
was specifically discussed (although for only a couple of minutes) in NYC.

> > That's an implementation specific FTP pathology that need not prevent other,
> > better implementations of FTP to succeed.
> 
> I was more referring to the fact that circumstances can change the
> benefits a protocol will have you. Even a good FTP implementation
> can suck horrible on a bad link.
> 

We're trying to come up with an ondisk packaging format, not a protocol.

Localizing components (e.g detached signatures adjacent to the data they sign)
and the ability to treat a package as a stream are usually wins
independent of choice of transport protocol.

> > "sgrep" sounds like a "hacks with grep" solution to me ...
> 
> Package: sgrep
> Description: a tool to search a file for structured pattern
>  Sgrep (structured grep) is a tool for searching text files and
>  filtering text streams for structured criteria. Sgrep implements
>  a query language based on so called region expressions.
>  .
>  Like grep, sgrep can be used for any kind of text files. However it
>  is most useful for text files containing some kind of structured text.
>  A file containing structured text could be defined as a file, which
>  obeys some syntax. Examples of structured text files are SGML, HTML,
>  C, Tex and mail files.
> 
> The grep maintainer expressed interested in adding this kind of
> capabilities to grep as well. I think the following sh will also
> do the trick:
> 
> getpackageheader() {
> 	pkg=$1	
> 	payloadnr=$2
> 	header=$3
> 	
> 	field=$(tar -xfO $1 metadata-1-$2 | gzip -cd | tr A-Z a-z | \
> 		sed -ne '<$3>\([^<]\+\)</$3>/\1/p' )
> 	return $field
> }
> 
> name=`getpackageheader hello_1.1.pkg 1 name`
> version=`getpackageheader hello_1.1.pkg 1 version`
> 
> Of course this isn't optimal since it means we extract and search the
> metadata twice, but it does show that we don't need any special tools
> to extract this information.
> 

Irrelevant.

My specific suggestion is to put platform/packagename information into the
wrapper so that the information can be easily accessed without any other
supporting tools than the unwrapper itself. It makes little sense to me to
depend on other tools, including shell, sgrep, whatever. You argue that we
can't use an ar wrapper format because of the burden that imposes on a
rescue disk, and now you wish gzip, tr, sed, sh, and sgrep as well as
the unwrapper to be present in order to simply extract the packagename.

> 
> > "find the packagename in the XML data" sure starts to sound like a requirement
> > that tools that need to retrieve the platform for which the package is intended,
> > or the package name-version (I don't care a whit whether it's one tag or ten,
> > just that it is *easy* to retrieve) will have to have an XML parser built in.
> 
> For some fields like packagename you can use some assumptions that make
> things easy:
> * the value is not in a namespace
> * the value is not language-specific
> * the value is short and not line-wrapped
> * we know the exact name of the tag used
> 
> Which allows you take shortcuts and do something like the sh snippet above.
> 

Naive.

You haven't even touched platform information retrieval (which you wish to
store in XML dependency tags), and I believe that you will find that you need
more than the aforementioned tools above to dig that out.

Remember, we have per-packager, per-platform, per-distro, private namespaces
and have not (and may not be able to) explicitly forbid locating platform
dependencies in those namespaces.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu May 11 08:01:37 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id IAA02037;
	Thu, 11 May 2000 08:01:37 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id IAA05911;
	Thu, 11 May 2000 08:01:34 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id IAA25233;
	Thu, 11 May 2000 08:01:34 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id IAA23576;
	Thu, 11 May 2000 08:02:13 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id IAA23567
	for packaging-list; Thu, 11 May 2000 08:02:08 -0400
Resent-Date: Thu, 11 May 2000 08:02:08 -0400
Resent-Message-Id: <200005111202.IAA23567@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id IAA23564
	for <packaging@rufus.w3.org>; Thu, 11 May 2000 08:02:04 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id IAA02031
	for packaging@rufus.w3.org; Thu, 11 May 2000 08:01:20 -0400
Date: Thu, 11 May 2000 08:01:20 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000511080120.U29909@devserv.devel.redhat.com>
References: <20000505175020.Y5440@devserv.devel.redhat.com> <20000506135257.A761@mors.wiggy.net> <20000506145136.F5440@devserv.devel.redhat.com> <20000511124451.B5111@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000511124451.B5111@mors.wiggy.net>; from wichert@mors.wiggy.net on Thu, May 11, 2000 at 12:44:51PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1374
Lines: 42


On Thu, May 11, 2000 at 12:44:51PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > (Red face: I should be more careful before shouting wrong, sorry).
> 
> We all do that sometimes I guess..
> 
> > Here's what "strace -o foo nm --print-armap /usr/lib/libc.a" has to say:
> > 
> > open("/usr/lib/libc.a", O_RDONLY)       = 4
> > SYS_63()                                = -1 ENOSYS (Function not implemented)
> 
> Completely off-topic but being strace maintainer I'm curious here:
> what strace binary did you use? syscall 63 is dup2 (or fstat64 if you are
> using a sparc), and strace has definitely supported that for ages as
> far as I know.. and even if it wasn't supported it should still show
> a couple of arguments.
> 

Probably fstat64, as I live on an ultrasparc 2.

> [.. snip comments which need more though ..]
> 
> > FWIW judging by the relative sizes, ar is a much better candidate for
> > inclusion on rescue disks than tar is:
> 
> Red herring, you need tar anyway. Besides, on boot-floppies you don't
> use tar but star, which is lots smaller.
> 

Not exactly. You only need tar to handle components that you've chosen to
wrap with tar.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu May 11 08:03:24 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id IAA02077;
	Thu, 11 May 2000 08:03:23 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id IAA06023;
	Thu, 11 May 2000 08:03:22 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id IAA25293;
	Thu, 11 May 2000 08:03:22 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id IAA23676;
	Thu, 11 May 2000 08:03:56 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id IAA23666
	for packaging-list; Thu, 11 May 2000 08:03:52 -0400
Resent-Date: Thu, 11 May 2000 08:03:52 -0400
Resent-Message-Id: <200005111203.IAA23666@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id IAA23663
	for <packaging@rufus.w3.org>; Thu, 11 May 2000 08:03:49 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id IAA02072
	for packaging@rufus.w3.org; Thu, 11 May 2000 08:03:05 -0400
Date: Thu, 11 May 2000 08:03:05 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000511080305.V29909@devserv.devel.redhat.com>
References: <20000506122404.C5440@devserv.devel.redhat.com> <Pine.LNX.4.10.10005061612090.18693-100000@home.lameter.com> <20000506205243.K5440@devserv.devel.redhat.com> <20000511124809.C5111@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000511124809.C5111@mors.wiggy.net>; from wichert@mors.wiggy.net on Thu, May 11, 2000 at 12:48:09PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1161
Lines: 33


On Thu, May 11, 2000 at 12:48:09PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > Sure. Here's an easy example:
> > 
> > 	Red Hat wishes to bundle GNOME and/or KDE into a single meta package
> > 	without rebuilding. AFAICT, that will require mapping metadata/payload
> > 	from each package into components in the super-package wrapper,
> > 	and I shudder when I contemplate 2 layers of unwrapping to retrieve
> > 	components from a sequential (possibly remote, i.e. no lseek)
> > 	byte stream.
> 
> *sounds of someone fainting*
> 
> The thought of putting all of X in one package occured to me but I dismissed
> it quickly as a really sick idea, but GNOME and KDE seem to be growing to
> a point where they are even bigger, and already are awesomely complex
> wrt dependencies/conflicts if you package them properly.
> 
> This would definitely be the Package From Hell.
> 

I have requests to do such things which I cannot easily ignore.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu May 11 09:14:49 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id JAA04511;
	Thu, 11 May 2000 09:14:48 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id JAA15318;
	Thu, 11 May 2000 09:14:46 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id JAA27830;
	Thu, 11 May 2000 09:14:46 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id JAA30322;
	Thu, 11 May 2000 09:15:17 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id JAA30312
	for packaging-list; Thu, 11 May 2000 09:15:13 -0400
Resent-Date: Thu, 11 May 2000 09:15:13 -0400
Resent-Message-Id: <200005111315.JAA30312@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id JAA30308
	for <packaging@rufus.w3.org>; Thu, 11 May 2000 09:15:09 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id JAA04501
	for packaging@rufus.w3.org; Thu, 11 May 2000 09:14:23 -0400
Date: Thu, 11 May 2000 09:14:23 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] dependency syntax
Message-ID: <20000511091423.X29909@devserv.devel.redhat.com>
References: <20000505131507.U5440@devserv.devel.redhat.com> <Pine.LNX.4.10.10005051557590.11315-100000@home.lameter.com> <20000506122242.B5440@devserv.devel.redhat.com> <20000510165611.A7674@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000510165611.A7674@mors.wiggy.net>; from wichert@mors.wiggy.net on Wed, May 10, 2000 at 04:56:11PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2615
Lines: 66


On Wed, May 10, 2000 at 04:56:11PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > The awesome power of apt is insufficient to resolve a dependency on
> > grep-the-package (when grep-the-executable is actually meant) when
> > faced with a single system that has both dpkg and rpm in active use and
> > grep is in the rpm database.
> 
> Wrong. Apt might simply not care about file-dependencies if they
> aren't fullfilled. At least that is what I would do right now
> (since we don't have the full Contents-file available, and it
> is way too big to download anyway).
> 

This isn't a file dependency, but rather a package dependency that
can't be satisfied because the necessary information is in a foreign
(to apt anyways) database.

> The issue here is different: Debians tools like dpkg and apt are made
> to work in a complete distribution, where everything is managed by our
> tools. That is the only way we can make strong guarantees about system
> integrity.
> 

Yes. However, rpm, Red Hat, and linux users in general have different needs
and uses, and there is no way to guarantee "completeness", only to strive
for "interoperability" to the greatest extent possible.

> rpm and the policies RedHat uses in making rpm-packages are different:
> they are made to be installed on as many systems as possible, including
> those where only (possible small) parts of the system are managed by
> the packagemanager. This means their packages are more portable across
> systems, but that they can't make the guaranteers about system integrity
> that we can.
> 

Every distro, not just Red Hat, not just Linux, has different policies, and,
for the ondisk package format to succeed, these policies will need to be
accomodated somehow in that format.

> As I've already said a couple of times in various places: the package
> format does not define the distribution, or how packages can be used.
> The policies that are used when making packages do that.
> 

Yes. I have never thought (or said) otherwise.

> > Having a single linux system with both dpkg and rpm tool chains installed
> > seems like a desirable goal to me.
> 
> Not to me. I fully intend to have a tool a year from now that will handle
> different packageformats natively. Most of the design of that is ready
> now, implementation should start in a month or so.
> 

Good (for you anyway). I can't afford to wait another year :-(

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu May 11 19:31:16 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id TAA01274;
	Thu, 11 May 2000 19:31:15 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id TAA06005;
	Thu, 11 May 2000 19:31:15 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id TAA28530;
	Thu, 11 May 2000 19:31:15 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id TAA27818;
	Thu, 11 May 2000 19:31:52 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id TAA27791
	for packaging-list; Thu, 11 May 2000 19:31:48 -0400
Resent-Date: Thu, 11 May 2000 19:31:48 -0400
Resent-Message-Id: <200005112331.TAA27791@rpmfind.net>
Received: from fog.mors.wiggy.net (cabal.wiggy.net [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id TAA27781
	for <packaging@rufus.w3.org>; Thu, 11 May 2000 19:31:43 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.10.1/8.10.1/Debian 8.10.1-1) id e4BIREG04209
	for packaging@rufus.w3.org; Thu, 11 May 2000 20:27:14 +0200
Date: Thu, 11 May 2000 20:27:14 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] dependency syntax
Message-ID: <20000511202714.A4162@cistron.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000505131507.U5440@devserv.devel.redhat.com> <Pine.LNX.4.10.10005051557590.11315-100000@home.lameter.com> <20000506122242.B5440@devserv.devel.redhat.com> <20000510165611.A7674@mors.wiggy.net> <20000511091423.X29909@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="9jxsPFA5p3P2qPhR"
Content-Disposition: inline
User-Agent: Mutt/1.1.12i
In-Reply-To: <20000511091423.X29909@devserv.devel.redhat.com>; from jbj@redhat.com on Thu, May 11, 2000 at 09:14:23AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1346
Lines: 46



--9jxsPFA5p3P2qPhR
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> This isn't a file dependency, but rather a package dependency that
> can't be satisfied because the necessary information is in a foreign
> (to apt anyways) database.

Which amounts to the same thing basically.

> Every distro, not just Red Hat, not just Linux, has different policies, a=
nd,
> for the ondisk package format to succeed, these policies will need to be
> accomodated somehow in that format.

Agreed.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--9jxsPFA5p3P2qPhR
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjka+4IACgkQPLiSUC+jvC3NxgCeMEtTOZbtbmR41UU1Q2vFGvye
bvYAoJZytWnhkEJSVwlFqY1fj+NM4sHB
=3Y+B
-----END PGP SIGNATURE-----

--9jxsPFA5p3P2qPhR--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu May 11 19:31:16 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id TAA01275;
	Thu, 11 May 2000 19:31:15 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id TAA06002;
	Thu, 11 May 2000 19:31:14 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id TAA28526;
	Thu, 11 May 2000 19:31:14 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id TAA27808;
	Thu, 11 May 2000 19:31:51 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id TAA27783
	for packaging-list; Thu, 11 May 2000 19:31:45 -0400
Resent-Date: Thu, 11 May 2000 19:31:45 -0400
Resent-Message-Id: <200005112331.TAA27783@rpmfind.net>
Received: from fog.mors.wiggy.net (cabal.wiggy.net [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id TAA27775
	for <packaging@rufus.w3.org>; Thu, 11 May 2000 19:31:36 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.10.1/8.10.1/Debian 8.10.1-1) id e4BISSc04217
	for packaging@rufus.w3.org; Thu, 11 May 2000 20:28:28 +0200
Date: Thu, 11 May 2000 20:28:28 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000511202828.B4162@cistron.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000505175020.Y5440@devserv.devel.redhat.com> <20000506135257.A761@mors.wiggy.net> <20000506145136.F5440@devserv.devel.redhat.com> <20000511124451.B5111@mors.wiggy.net> <20000511080120.U29909@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="SkvwRMAIpAhPCcCJ"
Content-Disposition: inline
User-Agent: Mutt/1.1.12i
In-Reply-To: <20000511080120.U29909@devserv.devel.redhat.com>; from jbj@redhat.com on Thu, May 11, 2000 at 08:01:20AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1265
Lines: 43



--SkvwRMAIpAhPCcCJ
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> Probably fstat64, as I live on an ultrasparc 2.

Ah, okay. In that case you might want to use the CVS version of strace :)

> Not exactly. You only need tar to handle components that you've chosen to
> wrap with tar.

Which includes the data-section which is would 99% of the times you=20
use a rescue disk is exactly what you want..

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--SkvwRMAIpAhPCcCJ
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjka+8wACgkQPLiSUC+jvC0MmwCfW6vdlkRBXT4ce7to23rlCg28
QiEAmgMHf+df98pO1uaRM8y2zRyP5vwf
=raoZ
-----END PGP SIGNATURE-----

--SkvwRMAIpAhPCcCJ--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May 12 10:13:07 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA28957;
	Fri, 12 May 2000 10:13:07 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA09422;
	Fri, 12 May 2000 10:13:05 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA20941;
	Fri, 12 May 2000 10:13:04 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA31337;
	Fri, 12 May 2000 10:13:37 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA31327
	for packaging-list; Fri, 12 May 2000 10:13:33 -0400
Resent-Date: Fri, 12 May 2000 10:13:33 -0400
Resent-Message-Id: <200005121413.KAA31327@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA31323
	for <packaging@rufus.w3.org>; Fri, 12 May 2000 10:13:30 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id KAA28939
	for packaging@rufus.w3.org; Fri, 12 May 2000 10:12:43 -0400
Date: Fri, 12 May 2000 10:12:42 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000512101242.N29909@devserv.devel.redhat.com>
References: <20000505175020.Y5440@devserv.devel.redhat.com> <20000506135257.A761@mors.wiggy.net> <20000506145136.F5440@devserv.devel.redhat.com> <20000511124451.B5111@mors.wiggy.net> <20000511080120.U29909@devserv.devel.redhat.com> <20000511202828.B4162@cistron.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000511202828.B4162@cistron.nl>; from wichert@mors.wiggy.net on Thu, May 11, 2000 at 08:28:28PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 863
Lines: 27


On Thu, May 11, 2000 at 08:28:28PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > Probably fstat64, as I live on an ultrasparc 2.
> 
> Ah, okay. In that case you might want to use the CVS version of strace :)
> 
> > Not exactly. You only need tar to handle components that you've chosen to
> > wrap with tar.
> 
> Which includes the data-section which is would 99% of the times you 
> use a rescue disk is exactly what you want..
> 

There's a slew of things that can be done with a package without opening the
payload, even on a rescue disk. For starters, you need to figger what
package to open so that you can find the right payload ...

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May 12 15:15:55 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id PAA13281;
	Fri, 12 May 2000 15:15:54 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id PAA21544;
	Fri, 12 May 2000 15:15:51 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id PAA04965;
	Fri, 12 May 2000 15:15:51 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id PAA31165;
	Fri, 12 May 2000 15:16:04 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id PAA31132
	for packaging-list; Fri, 12 May 2000 15:15:55 -0400
Resent-Date: Fri, 12 May 2000 15:15:55 -0400
Resent-Message-Id: <200005121915.PAA31132@rpmfind.net>
Received: from fog.mors.wiggy.net (cabal.wiggy.net [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id PAA31106
	for <packaging@rufus.w3.org>; Fri, 12 May 2000 15:15:41 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.10.1/8.10.1/Debian 8.10.1-1) id e4CIbhk00613
	for packaging@rufus.w3.org; Fri, 12 May 2000 20:37:43 +0200
Date: Fri, 12 May 2000 20:37:42 +0200
From: Wichert Akkerman <wichert@mors.wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000512203742.B576@cistron.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000505175020.Y5440@devserv.devel.redhat.com> <20000506135257.A761@mors.wiggy.net> <20000506145136.F5440@devserv.devel.redhat.com> <20000511124451.B5111@mors.wiggy.net> <20000511080120.U29909@devserv.devel.redhat.com> <20000511202828.B4162@cistron.nl> <20000512101242.N29909@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="ftEhullJWpWg/VHq"
Content-Disposition: inline
User-Agent: Mutt/1.1.12i
In-Reply-To: <20000512101242.N29909@devserv.devel.redhat.com>; from jbj@redhat.com on Fri, May 12, 2000 at 10:12:42AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1275
Lines: 41



--ftEhullJWpWg/VHq
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> There's a slew of things that can be done with a package without opening =
the
> payload, even on a rescue disk. For starters, you need to figger what
> package to open so that you can find the right payload ...

Okay, point taken. I fear we'll need rescue-disks with keyrings and
gpg on them soon as well so we can really verify everything...

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--ftEhullJWpWg/VHq
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkcT3YACgkQPLiSUC+jvC10qACdHrq0pUzpGz8jJrwS1NM5f0On
fFEAoJS8zM96lFk47ZwrBOpMBInkCsp6
=06MS
-----END PGP SIGNATURE-----

--ftEhullJWpWg/VHq--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May 12 16:22:37 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA16886;
	Fri, 12 May 2000 16:22:36 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA12914;
	Fri, 12 May 2000 16:22:35 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA12230;
	Fri, 12 May 2000 16:22:35 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA05375;
	Fri, 12 May 2000 16:23:00 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA05355
	for packaging-list; Fri, 12 May 2000 16:22:55 -0400
Resent-Date: Fri, 12 May 2000 16:22:55 -0400
Resent-Message-Id: <200005122022.QAA05355@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA05352
	for <packaging@rufus.w3.org>; Fri, 12 May 2000 16:22:53 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id QAA16834
	for packaging@rufus.w3.org; Fri, 12 May 2000 16:21:39 -0400
Date: Fri, 12 May 2000 16:21:39 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000512162139.T29909@devserv.devel.redhat.com>
References: <20000505175020.Y5440@devserv.devel.redhat.com> <20000506135257.A761@mors.wiggy.net> <20000506145136.F5440@devserv.devel.redhat.com> <20000511124451.B5111@mors.wiggy.net> <20000511080120.U29909@devserv.devel.redhat.com> <20000511202828.B4162@cistron.nl> <20000512101242.N29909@devserv.devel.redhat.com> <20000512203742.B576@cistron.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000512203742.B576@cistron.nl>; from wichert@mors.wiggy.net on Fri, May 12, 2000 at 08:37:42PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 869
Lines: 26


On Fri, May 12, 2000 at 08:37:42PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > There's a slew of things that can be done with a package without opening the
> > payload, even on a rescue disk. For starters, you need to figger what
> > package to open so that you can find the right payload ...
> 
> Okay, point taken. I fear we'll need rescue-disks with keyrings and
> gpg on them soon as well so we can really verify everything...
> 

I fear that as well, having just explained rpm's grotty (but functional!)
signature checking CLI all over again.

My take is that, if you need a rescue disk, you don't need/want no
stinkin' signatures. YMMV.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May 12 19:55:59 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id TAA25933;
	Fri, 12 May 2000 19:55:59 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id TAA22926;
	Fri, 12 May 2000 19:55:55 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id TAA04222;
	Fri, 12 May 2000 19:55:55 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id TAA27872;
	Fri, 12 May 2000 19:56:17 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id TAA27862
	for packaging-list; Fri, 12 May 2000 19:56:11 -0400
Resent-Date: Fri, 12 May 2000 19:56:11 -0400
Resent-Message-Id: <200005122356.TAA27862@rpmfind.net>
Received: from fog.mors.wiggy.net (cabal.wiggy.net [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id TAA27538
	for <packaging@rufus.w3.org>; Fri, 12 May 2000 19:55:45 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.10.1/8.10.1/Debian 8.10.1-1) id e4CNqeX16654
	for packaging@rufus.w3.org; Sat, 13 May 2000 01:52:40 +0200
Date: Sat, 13 May 2000 01:52:40 +0200
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000513015240.D16609@cistron.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000505175020.Y5440@devserv.devel.redhat.com> <20000506135257.A761@mors.wiggy.net> <20000506145136.F5440@devserv.devel.redhat.com> <20000511124451.B5111@mors.wiggy.net> <20000511080120.U29909@devserv.devel.redhat.com> <20000511202828.B4162@cistron.nl> <20000512101242.N29909@devserv.devel.redhat.com> <20000512203742.B576@cistron.nl> <20000512162139.T29909@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="mJm6k4Vb/yFcL9ZU"
Content-Disposition: inline
User-Agent: Mutt/1.1.12i
In-Reply-To: <20000512162139.T29909@devserv.devel.redhat.com>; from jbj@redhat.com on Fri, May 12, 2000 at 04:21:39PM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1071
Lines: 38



--mJm6k4Vb/yFcL9ZU
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> My take is that, if you need a rescue disk, you don't need/want no
> stinkin' signatures. YMMV.

You do, to verify you have a proper CD.=20

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--mJm6k4Vb/yFcL9ZU
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkcmUgACgkQPLiSUC+jvC1/UQCfQtQ6KtvPNobXU4T8RTcr52Cw
3jAAn1TM9Frr+lQ4OkmcsiDYd87sQRxQ
=sJME
-----END PGP SIGNATURE-----

--mJm6k4Vb/yFcL9ZU--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Fri May 12 20:48:46 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id UAA27692;
	Fri, 12 May 2000 20:48:38 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id UAA10143;
	Fri, 12 May 2000 20:48:38 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id UAA10393;
	Fri, 12 May 2000 20:48:38 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id UAA31986;
	Fri, 12 May 2000 20:49:06 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id UAA31955
	for packaging-list; Fri, 12 May 2000 20:49:00 -0400
Resent-Date: Fri, 12 May 2000 20:49:00 -0400
Resent-Message-Id: <200005130049.UAA31955@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id UAA31944
	for <packaging@rufus.w3.org>; Fri, 12 May 2000 20:48:55 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12qQ69-0000at-00; Fri, 12 May 2000 17:48:05 -0700
Date: Fri, 12 May 2000 17:48:05 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
In-Reply-To: <20000513015240.D16609@cistron.nl>
Message-ID: <Pine.LNX.4.10.10005121745230.2232-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 724
Lines: 23


But then you can also run the code off the CD (which could be corrupted as
well... maybe md5sum the code and check that from rescue disk).

I think tar is a good choice because

1. It is widely available and understood
2. there is a miniatur version star available
3. It allows nested packaging without having to support two
   archivers.
4. It is standardized somewhere right?

On Sat, 13 May 2000, Wichert Akkerman wrote:

> Previously Jeff Johnson wrote:
> > My take is that, if you need a rescue disk, you don't need/want no
> > stinkin' signatures. YMMV.
> 
> You do, to verify you have a proper CD. 

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat May 13 04:22:19 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id EAA05517;
	Sat, 13 May 2000 04:22:19 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id EAA06633;
	Sat, 13 May 2000 04:22:18 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id EAA20591;
	Sat, 13 May 2000 04:22:18 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id EAA13337;
	Sat, 13 May 2000 04:22:59 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id EAA13329
	for packaging-list; Sat, 13 May 2000 04:22:53 -0400
Resent-Date: Sat, 13 May 2000 04:22:53 -0400
Resent-Message-Id: <200005130822.EAA13329@rpmfind.net>
Received: from tux.inrialpes.fr (IDENT:root@tux.inrialpes.fr [194.199.20.134])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id EAA13326
	for <packaging@rufus.w3.org>; Sat, 13 May 2000 04:22:49 -0400
Received: (from veillard@localhost)
	by tux.inrialpes.fr (8.9.3/8.9.3) id KAA27023
	for packaging@rufus.w3.org; Sat, 13 May 2000 10:21:58 +0200
Date: Sat, 13 May 2000 10:21:58 +0200
From: Daniel Veillard <Daniel.Veillard@w3.org>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000513102158.B26701@w3.org>
References: <20000513015240.D16609@cistron.nl> <Pine.LNX.4.10.10005121745230.2232-100000@home.lameter.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <Pine.LNX.4.10.10005121745230.2232-100000@home.lameter.com>; from christoph@lameter.com on Fri, May 12, 2000 at 05:48:05PM -0700
Organization: World Wide Web Consortium (W3C http://www.w3.org/)
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 841
Lines: 27


On Fri, May 12, 2000 at 05:48:05PM -0700, Christoph Lameter wrote:
> I think tar is a good choice because
> 
> 3. It allows nested packaging without having to support two
>    archivers.

  that's a good point,

> 4. It is standardized somewhere right?

  yes POSIXised but the most probable implementation gnutar doesn't
  follow it !

Q: What are the related complexity of ar and star in term of code and
memory usage ? 

Daniel

-- 
Daniel.Veillard@w3.org | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux XML libxml WWW
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | Gnome rpm2html rpmfind
 http://www.w3.org/People/all#veillard%40w3.org  | RPM badminton Kaffe
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat May 13 14:45:53 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id OAA17166;
	Sat, 13 May 2000 14:45:48 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA26589;
	Sat, 13 May 2000 10:24:01 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA27295;
	Sat, 13 May 2000 10:24:01 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA20895;
	Sat, 13 May 2000 10:24:46 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA20884
	for packaging-list; Sat, 13 May 2000 10:24:42 -0400
Resent-Date: Sat, 13 May 2000 10:24:42 -0400
Resent-Message-Id: <200005131424.KAA20884@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA20880
	for <packaging@rufus.w3.org>; Sat, 13 May 2000 10:24:40 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id KAA10748
	for packaging@rufus.w3.org; Sat, 13 May 2000 10:23:49 -0400
Date: Sat, 13 May 2000 10:23:49 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Wrapper format should be ar, not tar, all over again
Message-ID: <20000513102349.Y29909@devserv.devel.redhat.com>
References: <20000513015240.D16609@cistron.nl> <Pine.LNX.4.10.10005121745230.2232-100000@home.lameter.com> <20000513102158.B26701@w3.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000513102158.B26701@w3.org>; from Daniel.Veillard@w3.org on Sat, May 13, 2000 at 10:21:58AM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2076
Lines: 53


On Sat, May 13, 2000 at 10:21:58AM +0200, Daniel Veillard wrote:
> 
> On Fri, May 12, 2000 at 05:48:05PM -0700, Christoph Lameter wrote:
> > I think tar is a good choice because
> > 
> > 3. It allows nested packaging without having to support two
> >    archivers.
> 
>   that's a good point,
> 

But moot, considering that the validity of
	I think (tar|ar|cpio|zip) is a good choice because it
	allows nested packaging without any other archiver.
has little to do with choice of archiver.

> 
> Q: What are the related complexity of ar and star in term of code and
> memory usage ? 
> 

Are you asking about the tool or the format? The formats of all these
archivers are so closely related that it *really* doesn't matter
which is used. The one exception is the ability of ar to have an
index, but that functionality can also be provided by a manifest at the
beginning of a package, a win no matter which archiver is used. Remember, much
of the stat(2) info that is encoded in the archiver header will be in package
metadata, so there is little reason to prefer one archiver to another based
on header format.

I'm not sure that "code and memory usage" metrics of existing tools can help
choose a format either, as (at least for rpm) there will be an internal
implementation for speed and robustness, avoiding the relatively costly exec
and plumbing of the helper tool, and minimizing the dependence on external
tool location, rather than incorporating existing code without change. Note
that the current implementation in rpm uses the same format as GNU cpio, but
handles link counts a little differently than GNU cpio, and standards often
provide less guidance than real world experience in these matters.

Meanwhile, I haven't looked seriously at ar since 1985, and didn't even know
a star implementation existed (but it's on my list of implementations to
peek at now).

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue May 16 07:13:33 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id HAA30031;
	Tue, 16 May 2000 07:13:32 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id HAA16813;
	Tue, 16 May 2000 07:13:32 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id HAA20136;
	Tue, 16 May 2000 07:13:32 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id HAA08252;
	Tue, 16 May 2000 07:14:17 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id HAA08242
	for packaging-list; Tue, 16 May 2000 07:14:12 -0400
Resent-Date: Tue, 16 May 2000 07:14:12 -0400
Resent-Message-Id: <200005161114.HAA08242@rpmfind.net>
Received: from tux.inrialpes.fr (IDENT:root@tux.inrialpes.fr [194.199.20.134])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id HAA08236
	for <packaging@rufus.w3.org>; Tue, 16 May 2000 07:14:07 -0400
Received: (from veillard@localhost)
	by tux.inrialpes.fr (8.9.3/8.9.3) id NAA26587
	for packaging@rufus.w3.org; Tue, 16 May 2000 13:12:23 +0200
Date: Tue, 16 May 2000 13:12:23 +0200
From: Daniel Veillard <Daniel.Veillard@w3.org>
To: packaging@rufus.w3.org
Subject: [packaging] Mime-type for packages ?
Message-ID: <20000516131223.C25352@w3.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
Organization: World Wide Web Consortium (W3C http://www.w3.org/)
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 798
Lines: 19


  We should officially register a mime type for the package format once
defined. I can try to enquire about the machanism for doing so. IIRC
one need to write an IETF draft about the format and associate the mime
type to it.
  This is probably something we should think about once the current version
is considered stable enough and a publicly available description is
available.

Daniel

-- 
Daniel.Veillard@w3.org | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux XML libxml WWW
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | Gnome rpm2html rpmfind
 http://www.w3.org/People/all#veillard%40w3.org  | RPM badminton Kaffe
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue May 16 15:55:30 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id PAA30192;
	Tue, 16 May 2000 15:55:29 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id PAA22256;
	Tue, 16 May 2000 15:55:27 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id PAA14779;
	Tue, 16 May 2000 15:55:26 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id PAA14259;
	Tue, 16 May 2000 15:55:35 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id PAA14133
	for packaging-list; Tue, 16 May 2000 15:55:25 -0400
Resent-Date: Tue, 16 May 2000 15:55:25 -0400
Resent-Message-Id: <200005161955.PAA14133@rpmfind.net>
Received: from fog.mors.wiggy.net (cabal.wiggy.net [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id PAA14045
	for <packaging@rufus.w3.org>; Tue, 16 May 2000 15:55:09 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.11.0.Beta1/8.10.1/Debian 8.10.1-1) id e4GGnBG09445
	for packaging@rufus.w3.org; Tue, 16 May 2000 18:49:11 +0200
Date: Tue, 16 May 2000 18:49:11 +0200
From: Wichert Akkerman <wichert@cistron.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Mime-type for packages ?
Message-ID: <20000516184911.B9407@cistron.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000516131223.C25352@w3.org>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="tsOsTdHNUZQcU9Ye"
Content-Disposition: inline
User-Agent: Mutt/1.2i
In-Reply-To: <20000516131223.C25352@w3.org>; from Daniel.Veillard@w3.org on Tue, May 16, 2000 at 01:12:23PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1061
Lines: 38



--tsOsTdHNUZQcU9Ye
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Previously Daniel Veillard wrote:
>   We should officially register a mime type for the package format once
> defined.

We would need a name and extension first..

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--tsOsTdHNUZQcU9Ye
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkhfAcACgkQPLiSUC+jvC35RACffA38RTuB8V1w2RxO4K8P8O0M
nigAnRBB3YgPREWXEPOE+taHYHGxeaKy
=dXX2
-----END PGP SIGNATURE-----

--tsOsTdHNUZQcU9Ye--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue May 16 16:08:09 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA30932;
	Tue, 16 May 2000 16:08:07 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA25041;
	Tue, 16 May 2000 16:08:07 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA15539;
	Tue, 16 May 2000 16:08:06 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA16340;
	Tue, 16 May 2000 16:08:53 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA16324
	for packaging-list; Tue, 16 May 2000 16:08:44 -0400
Resent-Date: Tue, 16 May 2000 16:08:44 -0400
Resent-Message-Id: <200005162008.QAA16324@rpmfind.net>
Received: from tux.inrialpes.fr (IDENT:root@tux.inrialpes.fr [194.199.20.134])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA16308
	for <packaging@rufus.w3.org>; Tue, 16 May 2000 16:08:36 -0400
Received: (from veillard@localhost)
	by tux.inrialpes.fr (8.9.3/8.9.3) id WAA02621
	for packaging@rufus.w3.org; Tue, 16 May 2000 22:07:36 +0200
Date: Tue, 16 May 2000 22:07:35 +0200
From: Daniel Veillard <Daniel.Veillard@w3.org>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Mime-type for packages ?
Message-ID: <20000516220735.L25352@w3.org>
References: <20000516131223.C25352@w3.org> <20000516184911.B9407@cistron.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000516184911.B9407@cistron.nl>; from wichert@cistron.nl on Tue, May 16, 2000 at 06:49:11PM +0200
Organization: World Wide Web Consortium (W3C http://www.w3.org/)
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 719
Lines: 20


On Tue, May 16, 2000 at 06:49:11PM +0200, Wichert Akkerman wrote:
> Previously Daniel Veillard wrote:
> >   We should officially register a mime type for the package format once
> > defined.
> 
> We would need a name and extension first..

  application/rpm   seems to me the "obvious" candidate ....

Daniel

-- 
Daniel.Veillard@w3.org | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux XML libxml WWW
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | Gnome rpm2html rpmfind
 http://www.w3.org/People/all#veillard%40w3.org  | RPM badminton Kaffe
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue May 16 16:12:20 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id QAA31161;
	Tue, 16 May 2000 16:12:19 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id QAA25842;
	Tue, 16 May 2000 16:12:19 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id QAA15724;
	Tue, 16 May 2000 16:12:18 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id QAA16823;
	Tue, 16 May 2000 16:13:01 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id QAA16807
	for packaging-list; Tue, 16 May 2000 16:12:53 -0400
Resent-Date: Tue, 16 May 2000 16:12:53 -0400
Resent-Message-Id: <200005162012.QAA16807@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id QAA16759
	for <packaging@rufus.w3.org>; Tue, 16 May 2000 16:12:44 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id QAA31136
	for packaging@rufus.w3.org; Tue, 16 May 2000 16:11:43 -0400
Date: Tue, 16 May 2000 16:11:43 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Mime-type for packages ?
Message-ID: <20000516161143.F29909@devserv.devel.redhat.com>
References: <20000516131223.C25352@w3.org> <20000516184911.B9407@cistron.nl> <20000516220735.L25352@w3.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000516220735.L25352@w3.org>; from Daniel.Veillard@w3.org on Tue, May 16, 2000 at 10:07:35PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 744
Lines: 27


On Tue, May 16, 2000 at 10:07:35PM +0200, Daniel Veillard wrote:
> 
> On Tue, May 16, 2000 at 06:49:11PM +0200, Wichert Akkerman wrote:
> > Previously Daniel Veillard wrote:
> > >   We should officially register a mime type for the package format once
> > > defined.
> > 
> > We would need a name and extension first..
> 
>   application/rpm   seems to me the "obvious" candidate ....
> 

Um, Real Audio may get involved with this. Sigh ...

How does one go about changing IANA, as I've had customers who fed
foo*.rpm to their sound card :-(

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue May 16 17:13:19 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA02660;
	Tue, 16 May 2000 17:13:19 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id RAA07429;
	Tue, 16 May 2000 17:13:18 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id RAA19231;
	Tue, 16 May 2000 17:13:18 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id RAA23384;
	Tue, 16 May 2000 17:14:07 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id RAA23365
	for packaging-list; Tue, 16 May 2000 17:14:02 -0400
Resent-Date: Tue, 16 May 2000 17:14:02 -0400
Resent-Message-Id: <200005162114.RAA23365@rpmfind.net>
Received: from tux.inrialpes.fr (IDENT:root@tux.inrialpes.fr [194.199.20.134])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id RAA23354
	for <packaging@rufus.w3.org>; Tue, 16 May 2000 17:13:58 -0400
Received: (from veillard@localhost)
	by tux.inrialpes.fr (8.9.3/8.9.3) id XAA03449
	for packaging@rufus.w3.org; Tue, 16 May 2000 23:12:53 +0200
Date: Tue, 16 May 2000 23:12:53 +0200
From: Daniel Veillard <Daniel.Veillard@w3.org>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Mime-type for packages ?
Message-ID: <20000516231253.M25352@w3.org>
References: <20000516131223.C25352@w3.org> <20000516184911.B9407@cistron.nl> <20000516220735.L25352@w3.org> <20000516161143.F29909@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000516161143.F29909@devserv.devel.redhat.com>; from jbj@redhat.com on Tue, May 16, 2000 at 04:11:43PM -0400
Organization: World Wide Web Consortium (W3C http://www.w3.org/)
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1269
Lines: 36


On Tue, May 16, 2000 at 04:11:43PM -0400, Jeff Johnson wrote:
> 
> On Tue, May 16, 2000 at 10:07:35PM +0200, Daniel Veillard wrote:
> > 
> > On Tue, May 16, 2000 at 06:49:11PM +0200, Wichert Akkerman wrote:
> > > Previously Daniel Veillard wrote:
> > > >   We should officially register a mime type for the package format once
> > > > defined.
> > > 
> > > We would need a name and extension first..
> > 
> >   application/rpm   seems to me the "obvious" candidate ....
> > 
> 
> Um, Real Audio may get involved with this. Sigh ...

  Hum for the mime-type I don't see how they can object ... But the association
to the rpm suffix, yes ... But this doesn't seem really tied to decalring
the mime-type

> How does one go about changing IANA, as I've had customers who fed
> foo*.rpm to their sound card :-(

  I assume they didn't like the sound .... 

Daniel

-- 
Daniel.Veillard@w3.org | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux XML libxml WWW
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | Gnome rpm2html rpmfind
 http://www.w3.org/People/all#veillard%40w3.org  | RPM badminton Kaffe
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue May 16 19:51:23 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id TAA10372;
	Tue, 16 May 2000 19:51:19 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id TAA06158;
	Tue, 16 May 2000 19:51:18 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id TAA27322;
	Tue, 16 May 2000 19:51:18 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id TAA06778;
	Tue, 16 May 2000 19:52:11 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id TAA06745
	for packaging-list; Tue, 16 May 2000 19:51:58 -0400
Resent-Date: Tue, 16 May 2000 19:51:58 -0400
Resent-Message-Id: <200005162351.TAA06745@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id TAA06741
	for <packaging@rufus.w3.org>; Tue, 16 May 2000 19:51:55 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12rr6w-0005Ou-00; Tue, 16 May 2000 16:50:50 -0700
Date: Tue, 16 May 2000 16:50:50 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Mime-type for packages ?
In-Reply-To: <20000516184911.B9407@cistron.nl>
Message-ID: <Pine.LNX.4.10.10005161650060.20734-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 688
Lines: 26


Unified Package Manager Format:

.upm


On Tue, 16 May 2000, Wichert Akkerman wrote:

> Previously Daniel Veillard wrote:
> >   We should officially register a mime type for the package format once
> > defined.
> 
> We would need a name and extension first..
> 
> Wichert.
> 
> -- 
>   _________________________________________________________________
>  / Generally uninteresting signature - ignore at your convenience  \
> | wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
> | 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |
> 

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed May 17 09:12:42 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id JAA02477;
	Wed, 17 May 2000 09:12:41 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id JAA18429;
	Wed, 17 May 2000 09:12:41 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id JAA18910;
	Wed, 17 May 2000 09:12:40 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id JAA04866;
	Wed, 17 May 2000 09:13:36 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id JAA04856
	for packaging-list; Wed, 17 May 2000 09:13:32 -0400
Resent-Date: Wed, 17 May 2000 09:13:32 -0400
Resent-Message-Id: <200005171313.JAA04856@rpmfind.net>
Received: from fog.mors.wiggy.net (cabal.wiggy.net [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id JAA04851
	for <packaging@rufus.w3.org>; Wed, 17 May 2000 09:13:27 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.11.0.Beta1/8.10.1/Debian 8.10.1-1) id e4HCw1302361
	for packaging@rufus.w3.org; Wed, 17 May 2000 14:58:01 +0200
Date: Wed, 17 May 2000 14:58:01 +0200
From: Wichert Akkerman <wichert@wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Mime-type for packages ?
Message-ID: <20000517145801.F508@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000516131223.C25352@w3.org> <20000516184911.B9407@cistron.nl> <20000516220735.L25352@w3.org>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="Km1U/tdNT/EmXiR1"
Content-Disposition: inline
User-Agent: Mutt/1.2i
In-Reply-To: <20000516220735.L25352@w3.org>; from Daniel.Veillard@w3.org on Tue, May 16, 2000 at 10:07:35PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1161
Lines: 39



--Km1U/tdNT/EmXiR1
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Previously Daniel Veillard wrote:
>   application/rpm   seems to me the "obvious" candidate ....

Bah, application/deb is just as `obvious'. Unified package manager (upm)
has already been done as well iirc. Perhaps something like `Single
Package Format' or spf ?

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--Km1U/tdNT/EmXiR1
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjkil1kACgkQPLiSUC+jvC3P+gCfVV3TZ89cdkPzdUMr6HL5uY5q
OgoAn1WypkTHp2O7MCxpODZv9e8Huyon
=MYe4
-----END PGP SIGNATURE-----

--Km1U/tdNT/EmXiR1--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed May 17 09:37:04 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id JAA03395;
	Wed, 17 May 2000 09:37:04 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id JAA23215;
	Wed, 17 May 2000 09:37:03 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id JAA20081;
	Wed, 17 May 2000 09:37:03 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id JAA07224;
	Wed, 17 May 2000 09:37:53 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id JAA07213
	for packaging-list; Wed, 17 May 2000 09:37:49 -0400
Resent-Date: Wed, 17 May 2000 09:37:49 -0400
Resent-Message-Id: <200005171337.JAA07213@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id JAA07207
	for <packaging@rufus.w3.org>; Wed, 17 May 2000 09:37:46 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id JAA03385
	for packaging@rufus.w3.org; Wed, 17 May 2000 09:36:43 -0400
Date: Wed, 17 May 2000 09:36:43 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Mime-type for packages ?
Message-ID: <20000517093643.N29909@devserv.devel.redhat.com>
References: <20000516131223.C25352@w3.org> <20000516184911.B9407@cistron.nl> <20000516220735.L25352@w3.org> <20000517145801.F508@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000517145801.F508@mors.wiggy.net>; from wichert@wiggy.net on Wed, May 17, 2000 at 02:58:01PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1020
Lines: 31


On Wed, May 17, 2000 at 02:58:01PM +0200, Wichert Akkerman wrote:
> Previously Daniel Veillard wrote:
> >   application/rpm   seems to me the "obvious" candidate ....
> 
> Bah, application/deb is just as `obvious'. Unified package manager (upm)
> has already been done as well iirc. Perhaps something like `Single
> Package Format' or spf ?
> 

We really need to avoid chauvinism here. Can we attempt to get all of
	application/rpm
	application/deb
	application/???
IANA registered? At least for rpm, there will be one program/frontend that
deals with both rpm and ??? transparently, and I'm not averse to attempting deb
sometime down the road as well.

BTW: We're transiting to glibc-2.2 during the next week or two, so you can
assume that, for me at least, no comment means that I have no problem with
the topic :-)

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed May 17 10:53:10 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA07969;
	Wed, 17 May 2000 10:53:05 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA10315;
	Wed, 17 May 2000 10:53:05 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA24458;
	Wed, 17 May 2000 10:53:04 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA15084;
	Wed, 17 May 2000 10:53:56 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA15071
	for packaging-list; Wed, 17 May 2000 10:53:53 -0400
Resent-Date: Wed, 17 May 2000 10:53:53 -0400
Resent-Message-Id: <200005171453.KAA15071@rpmfind.net>
Received: from home.lameter.com (mail@216-59-82-89.usa2.flashcom.net [216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA15064
	for <packaging@rufus.w3.org>; Wed, 17 May 2000 10:53:49 -0400
Received: from christoph by home.lameter.com with local-esmtp (Exim 3.12 #1 (Debian))
	id 12s5Bm-0000b6-00; Wed, 17 May 2000 07:52:46 -0700
Date: Wed, 17 May 2000 07:52:45 -0700 (PDT)
From: Christoph Lameter <christoph@lameter.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Mime-type for packages ?
In-Reply-To: <20000517145801.F508@mors.wiggy.net>
Message-ID: <Pine.LNX.4.10.10005170750400.2241-100000@home.lameter.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 893
Lines: 25


upm was done? I tried to do an upm project in 1997 but it died early on.
I cannot find anything on upm on the net. Should still be available.

On Wed, 17 May 2000, Wichert Akkerman wrote:

> Previously Daniel Veillard wrote:
> >   application/rpm   seems to me the "obvious" candidate ....
> 
> Bah, application/deb is just as `obvious'. Unified package manager (upm)
> has already been done as well iirc. Perhaps something like `Single
> Package Format' or spf ?
> 
> Wichert.
> 
> -- 
>   _________________________________________________________________
>  / Generally uninteresting signature - ignore at your convenience  \
> | wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
> | 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |
> 

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Wed May 17 10:54:55 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA08104;
	Wed, 17 May 2000 10:54:53 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA10661;
	Wed, 17 May 2000 10:54:49 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA24580;
	Wed, 17 May 2000 10:54:48 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA16220;
	Wed, 17 May 2000 10:55:42 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA16208
	for packaging-list; Wed, 17 May 2000 10:55:40 -0400
Resent-Date: Wed, 17 May 2000 10:55:40 -0400
Resent-Message-Id: <200005171455.KAA16208@rpmfind.net>
Received: from soil08.soil.nl (root@soil08.soil.nl [132.229.135.68])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA16202
	for <packaging@rufus.w3.org>; Wed, 17 May 2000 10:55:37 -0400
Received: (from wichert@localhost)
	by soil08.soil.nl (8.9.3/8.9.3/Debian 8.9.3-21) id QAA03402
	for packaging@rufus.w3.org; Wed, 17 May 2000 16:54:32 +0200
Date: Wed, 17 May 2000 16:54:32 +0200
From: Wichert Akkerman <wichert@soil.nl>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Mime-type for packages ?
Message-ID: <20000517165432.A3392@liacs.nl>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000517145801.F508@mors.wiggy.net> <Pine.LNX.4.10.10005170750400.2241-100000@home.lameter.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
User-Agent: Mutt/1.0.1i
In-Reply-To: <Pine.LNX.4.10.10005170750400.2241-100000@home.lameter.com>; from christoph@lameter.com on Wed, May 17, 2000 at 07:52:45AM -0700
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 728
Lines: 19


Previously Christoph Lameter wrote:
> upm was done? I tried to do an upm project in 1997 but it died early on.
> I cannot find anything on upm on the net. Should still be available.

I like spm better anyway, allows for lots of different interpretations of
the first letter which seems a trademark of popular TLA's :)

Wichert.

-- 
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu May 18 04:40:17 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id EAA02313;
	Thu, 18 May 2000 04:40:16 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id EAA31999;
	Thu, 18 May 2000 04:40:16 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id EAA14475;
	Thu, 18 May 2000 04:40:15 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id EAA06605;
	Thu, 18 May 2000 04:41:08 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id EAA06565
	for packaging-list; Thu, 18 May 2000 04:41:03 -0400
Resent-Date: Thu, 18 May 2000 04:41:03 -0400
Resent-Message-Id: <200005180841.EAA06565@rpmfind.net>
Received: from tux.inrialpes.fr (IDENT:root@tux.inrialpes.fr [194.199.20.134])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id EAA06547
	for <packaging@rufus.w3.org>; Thu, 18 May 2000 04:40:58 -0400
Received: (from veillard@localhost)
	by tux.inrialpes.fr (8.9.3/8.9.3) id KAA22309
	for packaging@rufus.w3.org; Thu, 18 May 2000 10:39:43 +0200
Date: Thu, 18 May 2000 10:39:43 +0200
From: Daniel Veillard <Daniel.Veillard@w3.org>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Mime-type for packages ?
Message-ID: <20000518103943.F21586@w3.org>
References: <20000516131223.C25352@w3.org> <20000516184911.B9407@cistron.nl> <20000516220735.L25352@w3.org> <20000517145801.F508@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000517145801.F508@mors.wiggy.net>; from wichert@wiggy.net on Wed, May 17, 2000 at 02:58:01PM +0200
Organization: World Wide Web Consortium (W3C http://www.w3.org/)
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 961
Lines: 25


On Wed, May 17, 2000 at 02:58:01PM +0200, Wichert Akkerman wrote:
> Previously Daniel Veillard wrote:
> >   application/rpm   seems to me the "obvious" candidate ....
> 
> Bah, application/deb is just as `obvious'. Unified package manager (upm)

  Hum, right, I didn't relalized ... not that I wanted to start a name war,
sorry ...
> has already been done as well iirc. Perhaps something like `Single
> Package Format' or spf ?

  xpf xml package format ? Honnestly the format could be reused for things
which are not at all software modules.

Daniel

-- 
Daniel.Veillard@w3.org | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux XML libxml WWW
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | Gnome rpm2html rpmfind
 http://www.w3.org/People/all#veillard%40w3.org  | RPM badminton Kaffe
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Thu May 18 12:59:10 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id MAA25653;
	Thu, 18 May 2000 12:59:09 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id MAA14412;
	Thu, 18 May 2000 12:59:07 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id MAA13216;
	Thu, 18 May 2000 12:59:06 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA22034;
	Thu, 18 May 2000 13:00:00 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id MAA22017
	for packaging-list; Thu, 18 May 2000 12:59:56 -0400
Resent-Date: Thu, 18 May 2000 12:59:56 -0400
Resent-Message-Id: <200005181659.MAA22017@rpmfind.net>
Received: from fog.mors.wiggy.net (root@dustpuppy.soil.nl [132.229.135.150])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id MAA22013
	for <packaging@rufus.w3.org>; Thu, 18 May 2000 12:59:52 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.11.0.Beta1/8.10.1/Debian 8.10.1-1) id e4ICXcB05354
	for packaging@rufus.w3.org; Thu, 18 May 2000 14:33:38 +0200
Date: Thu, 18 May 2000 14:33:38 +0200
From: Wichert Akkerman <wichert@wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] Mime-type for packages ?
Message-ID: <20000518143338.H1982@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000516131223.C25352@w3.org> <20000516184911.B9407@cistron.nl> <20000516220735.L25352@w3.org> <20000517145801.F508@mors.wiggy.net> <20000518103943.F21586@w3.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2i
In-Reply-To: <20000518103943.F21586@w3.org>; from Daniel.Veillard@w3.org on Thu, May 18, 2000 at 10:39:43AM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 633
Lines: 17


Previously Daniel Veillard wrote:
>   xpf xml package format ? Honnestly the format could be reused for things
> which are not at all software modules.

That would make it .xxp. Perhaps we should find an acronym for .xxx :)

Wichert.

-- 
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sat Jun  3 20:21:28 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id UAA09391;
	Sat, 3 Jun 2000 20:21:27 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id UAA07073;
	Sat, 3 Jun 2000 20:21:27 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id UAA13321;
	Sat, 3 Jun 2000 20:21:27 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id UAA31456;
	Sat, 3 Jun 2000 20:22:39 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id UAA31391
	for packaging-list; Sat, 3 Jun 2000 20:22:33 -0400
Resent-Date: Sat, 3 Jun 2000 20:22:33 -0400
Resent-Message-Id: <200006040022.UAA31391@rpmfind.net>
Received: from fog.mors.wiggy.net (cabal.wiggy.net [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id UAA31331
	for <packaging@rufus.w3.org>; Sat, 3 Jun 2000 20:22:24 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.11.0.Beta1/8.10.1/Debian 8.10.1-1) id e53MgBa01055
	for packaging@rufus.w3.org; Sun, 4 Jun 2000 00:42:11 +0200
Date: Sun, 4 Jun 2000 00:42:10 +0200
From: Wichert Akkerman <wichert@wiggy.net>
To: packaging@rufus.w3.org
Subject: [packaging] ar format
Message-ID: <20000604004210.A982@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="YiEDa0DAkWCtVeE4"
Content-Disposition: inline
User-Agent: Mutt/1.2i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2242
Lines: 62



--YiEDa0DAkWCtVeE4
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable


After having been sick last week I've started playing a bit with ar.
The only thing I can say about the format is `eeewwwwww'. Take a look
at the header it keeps for each member:

struct ar_hdr {
  char ar_name[16];             /* name of this member */
  char ar_date[12];             /* file mtime */
  char ar_uid[6];               /* owner uid; printed as decimal */
  char ar_gid[6];               /* owner gid; printed as decimal */
  char ar_mode[8];              /* file mode, printed as octal   */
  char ar_size[10];             /* file size, printed as decimal */
  char ar_fmag[2];              /* should contain ARFMAG */
};

There are apparently two tricks to using longer filenames, which uses
a fake member with the long name, using either a depreciated BSD
way or a more standardized SYSV method.

Ar doesn't have an index as we thought. What it does have is
a symbol table, which is nothing more then a list of all the symbols
in all its members.=20

As example I took libtiff.a and indexed it with ranlib and then asked
ar to extract tif_zip.o. To do this ar needed 43 seek calls and 35
reads. In other words, the ar format seems to offer no benefit
over tar at all. The other conclusion is that someone needs to
seriously look at how ar is implemented, looking at the strace output
it does some seriously suboptimal stuff.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--YiEDa0DAkWCtVeE4
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjk5icIACgkQPLiSUC+jvC3YoACcCo/QY285HAF4NLLJ4gpWxeLL
XKEAn1n7UXQXLd2vNqJo6ds190gHG7RZ
=xoNB
-----END PGP SIGNATURE-----

--YiEDa0DAkWCtVeE4--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Jun  4 07:52:28 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id HAA26358;
	Sun, 4 Jun 2000 07:52:27 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id HAA31446;
	Sun, 4 Jun 2000 07:52:27 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id HAA16812;
	Sun, 4 Jun 2000 07:52:26 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id HAA18357;
	Sun, 4 Jun 2000 07:54:11 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id HAA18326
	for packaging-list; Sun, 4 Jun 2000 07:54:05 -0400
Resent-Date: Sun, 4 Jun 2000 07:54:05 -0400
Resent-Message-Id: <200006041154.HAA18326@rpmfind.net>
Received: from devserv.devel.redhat.com (devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id HAA18314
	for <packaging@rufus.w3.org>; Sun, 4 Jun 2000 07:53:59 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id HAA26352
	for packaging@rufus.w3.org; Sun, 4 Jun 2000 07:52:08 -0400
Date: Sun, 4 Jun 2000 07:52:08 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] ar format
Message-ID: <20000604075208.X5228@devserv.devel.redhat.com>
References: <20000604004210.A982@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000604004210.A982@mors.wiggy.net>; from wichert@wiggy.net on Sun, Jun 04, 2000 at 12:42:10AM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1873
Lines: 48


On Sun, Jun 04, 2000 at 12:42:10AM +0200, Wichert Akkerman wrote:
> 
> After having been sick last week I've started playing a bit with ar.
> The only thing I can say about the format is `eeewwwwww'. Take a look
> at the header it keeps for each member:
> 
> struct ar_hdr {
>   char ar_name[16];             /* name of this member */
>   char ar_date[12];             /* file mtime */
>   char ar_uid[6];               /* owner uid; printed as decimal */
>   char ar_gid[6];               /* owner gid; printed as decimal */
>   char ar_mode[8];              /* file mode, printed as octal   */
>   char ar_size[10];             /* file size, printed as decimal */
>   char ar_fmag[2];              /* should contain ARFMAG */
> };
> 
> There are apparently two tricks to using longer filenames, which uses
> a fake member with the long name, using either a depreciated BSD
> way or a more standardized SYSV method.
> 
> Ar doesn't have an index as we thought. What it does have is
> a symbol table, which is nothing more then a list of all the symbols
> in all its members. 
> 
> As example I took libtiff.a and indexed it with ranlib and then asked
> ar to extract tif_zip.o. To do this ar needed 43 seek calls and 35
> reads. In other words, the ar format seems to offer no benefit
> over tar at all. The other conclusion is that someone needs to
> seriously look at how ar is implemented, looking at the strace output
> it does some seriously suboptimal stuff.
> 

Agreed wrto ar format.

We still need to add an index or manifest at the beginning of packaging,
as that will be a win independent of format. And, an index/manifest
can be added independent of format.

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Sun Jun  4 18:32:56 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id SAA11691;
	Sun, 4 Jun 2000 18:32:55 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA25461;
	Sun, 4 Jun 2000 18:32:55 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA15736;
	Sun, 4 Jun 2000 18:32:54 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA29061;
	Sun, 4 Jun 2000 18:34:34 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id SAA29047
	for packaging-list; Sun, 4 Jun 2000 18:34:27 -0400
Resent-Date: Sun, 4 Jun 2000 18:34:27 -0400
Resent-Message-Id: <200006042234.SAA29047@rpmfind.net>
Received: from fog.mors.wiggy.net (cabal.wiggy.net [195.64.66.141])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id SAA29039
	for <packaging@rufus.w3.org>; Sun, 4 Jun 2000 18:34:18 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.11.0.Beta1/8.10.1/Debian 8.10.1-1) id e54LptB01229
	for packaging@rufus.w3.org; Sun, 4 Jun 2000 23:51:55 +0200
Date: Sun, 4 Jun 2000 23:51:55 +0200
From: Wichert Akkerman <wichert@wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] ar format
Message-ID: <20000604235155.A1216@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000604004210.A982@mors.wiggy.net> <20000604075208.X5228@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="wac7ysb48OaltWcw"
Content-Disposition: inline
User-Agent: Mutt/1.2i
In-Reply-To: <20000604075208.X5228@devserv.devel.redhat.com>; from jbj@redhat.com on Sun, Jun 04, 2000 at 07:52:08AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1195
Lines: 40



--wac7ysb48OaltWcw
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> We still need to add an index or manifest at the beginning of packaging,
> as that will be a win independent of format. And, an index/manifest
> can be added independent of format.

I'll talk to the GNU tar maintainer to see if we can come up with
something nice.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--wac7ysb48OaltWcw
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjk6z3sACgkQPLiSUC+jvC2CgQCferwu1DvkGC9evCWfxF8h2GtJ
5zsAoKrXiOTffF5rRLCANgDbK4xraIN9
=RExP
-----END PGP SIGNATURE-----

--wac7ysb48OaltWcw--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Jun  5 08:05:10 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id IAA32657;
	Mon, 5 Jun 2000 08:05:10 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id IAA11518;
	Mon, 5 Jun 2000 08:05:09 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id IAA05957;
	Mon, 5 Jun 2000 08:05:08 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id IAA28977;
	Mon, 5 Jun 2000 08:06:51 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id IAA28952
	for packaging-list; Mon, 5 Jun 2000 08:06:45 -0400
Resent-Date: Mon, 5 Jun 2000 08:06:45 -0400
Resent-Message-Id: <200006051206.IAA28952@rpmfind.net>
Received: from devserv.devel.redhat.com (devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id IAA28939
	for <packaging@rufus.w3.org>; Mon, 5 Jun 2000 08:06:39 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id IAA32632
	for packaging@rufus.w3.org; Mon, 5 Jun 2000 08:04:45 -0400
Date: Mon, 5 Jun 2000 08:04:45 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] ar format
Message-ID: <20000605080445.H32315@devserv.devel.redhat.com>
References: <20000604004210.A982@mors.wiggy.net> <20000604075208.X5228@devserv.devel.redhat.com> <20000604235155.A1216@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000604235155.A1216@mors.wiggy.net>; from wichert@wiggy.net on Sun, Jun 04, 2000 at 11:51:55PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 803
Lines: 26


On Sun, Jun 04, 2000 at 11:51:55PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > We still need to add an index or manifest at the beginning of packaging,
> > as that will be a win independent of format. And, an index/manifest
> > can be added independent of format.
> 
> I'll talk to the GNU tar maintainer to see if we can come up with
> something nice.
> 

Changing the tar implementation to add an index may take a while ...

Why not just fill in the 1st file in the tar wrapper (with the packaging
version as file name if memory serves) with item-in-wrapper name
and offset?

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Jun  5 10:00:51 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA04509;
	Mon, 5 Jun 2000 10:00:50 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA32264;
	Mon, 5 Jun 2000 10:00:47 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA24176;
	Mon, 5 Jun 2000 10:00:47 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA06474;
	Mon, 5 Jun 2000 10:02:22 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA06454
	for packaging-list; Mon, 5 Jun 2000 10:02:12 -0400
Resent-Date: Mon, 5 Jun 2000 10:02:12 -0400
Resent-Message-Id: <200006051402.KAA06454@rpmfind.net>
Received: from fog.mors.wiggy.net (root@dustpuppy.soil.nl [132.229.135.150])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA06439
	for <packaging@rufus.w3.org>; Mon, 5 Jun 2000 10:02:04 -0400
Received: (from wichert@localhost)
	by fog.mors.wiggy.net (8.11.0.Beta1/8.10.1/Debian 8.10.1-1) id e55CIGP00839
	for packaging@rufus.w3.org; Mon, 5 Jun 2000 14:18:16 +0200
Date: Mon, 5 Jun 2000 14:18:16 +0200
From: Wichert Akkerman <wichert@wiggy.net>
To: packaging@rufus.w3.org
Subject: Re: [packaging] ar format
Message-ID: <20000605141816.A816@mors.wiggy.net>
Mail-Followup-To: packaging@rufus.w3.org
References: <20000604004210.A982@mors.wiggy.net> <20000604075208.X5228@devserv.devel.redhat.com> <20000604235155.A1216@mors.wiggy.net> <20000605080445.H32315@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="WIyZ46R2i8wDzkSu"
Content-Disposition: inline
User-Agent: Mutt/1.2i
In-Reply-To: <20000605080445.H32315@devserv.devel.redhat.com>; from jbj@redhat.com on Mon, Jun 05, 2000 at 08:04:45AM -0400
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1447
Lines: 46



--WIyZ46R2i8wDzkSu
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Previously Jeff Johnson wrote:
> Changing the tar implementation to add an index may take a while ...

I would like to agree witht the GNU people on the format though,
no sense in having two conflicting index formats at some point.

> Why not just fill in the 1st file in the tar wrapper (with the packaging
> version as file name if memory serves) with item-in-wrapper name
> and offset?

The packaging version is per payload in the filename of the metadata
actually, so we can have people versions if needed. If memory serves
me correctly anyway.

Wichert.

--=20
  _________________________________________________________________
 / Generally uninteresting signature - ignore at your convenience  \
| wichert@liacs.nl                    http://www.liacs.nl/~wichert/ |
| 1024D/2FA3BC2D 576E 100B 518D 2F16 36B0  2805 3CB8 9250 2FA3 BC2D |

--WIyZ46R2i8wDzkSu
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjk7mogACgkQPLiSUC+jvC0zcwCff70SOYn5GBxBqGUVlvVb8aQB
z1MAn1xI41jUb8Bc9o3ChG40U/YbN93w
=FTWJ
-----END PGP SIGNATURE-----

--WIyZ46R2i8wDzkSu--
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Jun  5 10:31:35 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id KAA06114;
	Mon, 5 Jun 2000 10:31:34 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id KAA07848;
	Mon, 5 Jun 2000 10:31:34 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id KAA29627;
	Mon, 5 Jun 2000 10:31:33 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id KAA09050;
	Mon, 5 Jun 2000 10:32:49 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id KAA09034
	for packaging-list; Mon, 5 Jun 2000 10:32:36 -0400
Resent-Date: Mon, 5 Jun 2000 10:32:36 -0400
Resent-Message-Id: <200006051432.KAA09034@rpmfind.net>
Received: from devserv.devel.redhat.com (devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id KAA09030
	for <packaging@rufus.w3.org>; Mon, 5 Jun 2000 10:32:26 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id KAA06031
	for packaging@rufus.w3.org; Mon, 5 Jun 2000 10:30:31 -0400
Date: Mon, 5 Jun 2000 10:30:31 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] ar forma
Message-ID: <20000605103031.D1230@devserv.devel.redhat.com>
References: <20000604004210.A982@mors.wiggy.net> <20000604075208.X5228@devserv.devel.redhat.com> <20000604235155.A1216@mors.wiggy.net> <20000605080445.H32315@devserv.devel.redhat.com> <20000605141816.A816@mors.wiggy.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000605141816.A816@mors.wiggy.net>; from wichert@wiggy.net on Mon, Jun 05, 2000 at 02:18:16PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1836
Lines: 52


On Mon, Jun 05, 2000 at 02:18:16PM +0200, Wichert Akkerman wrote:
> Previously Jeff Johnson wrote:
> > Changing the tar implementation to add an index may take a while ...
> 
> I would like to agree witht the GNU people on the format though,
> no sense in having two conflicting index formats at some point.
> 

So my suggestion is to have *one* index, defined as part of the on-disk
packaging format, rather than getting mired in (new!) tar format changes.

Here's what my mail archive shows:

=================================
> * metadata-VERSION:
>   this file serves two purposes: it encodes the version of the
>   format used in its filename, and it contains the meta-information
>   for the payload in XML format.

I was referring to this (presumably empty) section, suggestion was to put
index as contents of that file.

> * scripts.tar: archive containing special scripts/programs that should
>   be run at specific moments during package installation or removal
> * data.tar: archive containing the actually files in the package
> * signatures: XML-file with signatures for all the other files. This
>   section is optional.
>
=================================

> > Why not just fill in the 1st file in the tar wrapper (with the packaging
> > version as file name if memory serves) with item-in-wrapper name
> > and offset?
> 
> The packaging version is per payload in the filename of the metadata
> actually, so we can have people versions if needed. If memory serves
> me correctly anyway.
> 

Must we separately and equally distinguish both metadata and payload
format with versions? What's wrong with magic on payloads?

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Jul 24 17:39:23 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (IDENT:root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA11034;
	Mon, 24 Jul 2000 17:39:22 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id RAA27247;
	Mon, 24 Jul 2000 17:39:22 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id RAA32664;
	Mon, 24 Jul 2000 17:39:21 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id RAA16489;
	Mon, 24 Jul 2000 17:42:28 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id RAA16474
	for packaging-list; Mon, 24 Jul 2000 17:42:19 -0400
Resent-Date: Mon, 24 Jul 2000 17:42:19 -0400
Resent-Message-Id: <200007242142.RAA16474@rpmfind.net>
Received: from tux.inrialpes.fr (IDENT:root@tux.inrialpes.fr [194.199.20.134])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id RAA16467
	for <packaging@rufus.w3.org>; Mon, 24 Jul 2000 17:42:11 -0400
Received: (from veillard@localhost)
	by tux.inrialpes.fr (8.9.3/8.9.3) id XAA24842
	for packaging@rufus.w3.org; Mon, 24 Jul 2000 23:38:00 +0200
Date: Mon, 24 Jul 2000 23:38:00 +0200
From: Daniel Veillard <Daniel.Veillard@w3.org>
To: packaging@rufus.w3.org
Subject: [packaging] general format of a package archive
Message-ID: <20000724233800.G13932@w3.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
Organization: World Wide Web Consortium (W3C http://www.w3.org/)
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2339
Lines: 50


  Okay, during OLS I did chat with quite a few people on the
subsject of packaging. It actually happen to pop-up in similar
way for others purposes:
   - Gnome Bonobo component model needs a storage format which
     could handle multiple streams within a single storage unit
   - In the XML world, people are looking at packaging formats
     to embed and possibly sign a number of related files with
     a set of metadata giving description informations per file
   - and of course for Linux packaging format.
 
 I'm a bit biased in the sense that it would really solve many
of the targets I am chasing currently to have a single unified
specification suitable for all of this.
 I don't see why this would be a problem, the only strong suggestion
I received from the people working on the Bonobo serialization
is that they would prefer ZIP as the encapsulating format because
you can seek in a ZIP and position directly to the index where a
file starts in the archive without (like tar) scan the full
archive.
 I don't remember anyone suggesting ZIP as the potential format,
is there any massive argument against using it (like some intelectual
property crap applying to it) ? Is there strongs technical arguments
against it too ? It seems to have the following good properties:
   - allows seek
   - ZIP archive format is very widely deployed
   - there is existing code handling it (zip/unzip)
   - would be suitable for a larger user base
   - I bet any existing desktop file manager would be already able
     to show/access the content of such a format
   - it also probably doesn't exhibit the problem of tar where
     the available implementations don't follow completely the
     specification. Zip seems to be specified in RFC 1952
     and quickly looking at it, it doesn't seems braindead.
 
 I am completely off-track ? Would people on the list accept to
look at ZIP as the encapsulation format ?

  TIA,

Daniel

-- 
Daniel.Veillard@w3.org | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux XML libxml WWW
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | Gnome rpm2html rpmfind
 http://www.w3.org/People/all#veillard%40w3.org  | RPM badminton Kaffe
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Jul 24 17:48:48 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (IDENT:root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id RAA12043;
	Mon, 24 Jul 2000 17:48:46 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id RAA31297;
	Mon, 24 Jul 2000 17:48:45 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id RAA00484;
	Mon, 24 Jul 2000 17:48:45 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id RAA17240;
	Mon, 24 Jul 2000 17:52:34 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id RAA17229
	for packaging-list; Mon, 24 Jul 2000 17:52:27 -0400
Resent-Date: Mon, 24 Jul 2000 17:52:27 -0400
Resent-Message-Id: <200007242152.RAA17229@rpmfind.net>
Received: from devserv.devel.redhat.com (IDENT:root@devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id RAA17223
	for <packaging@rufus.w3.org>; Mon, 24 Jul 2000 17:52:22 -0400
Received: (from jbj@localhost)
	by devserv.devel.redhat.com (8.9.3/8.9.3) id RAA11939
	for packaging@rufus.w3.org; Mon, 24 Jul 2000 17:47:57 -0400
Date: Mon, 24 Jul 2000 17:47:57 -0400
From: Jeff Johnson <jbj@redhat.com>
To: packaging@rufus.w3.org
Subject: Re: [packaging] general format of a package archive
Message-ID: <20000724174757.T19813@devserv.devel.redhat.com>
References: <20000724233800.G13932@w3.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000724233800.G13932@w3.org>; from Daniel.Veillard@w3.org on Mon, Jul 24, 2000 at 11:38:00PM +0200
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 2682
Lines: 64


On Mon, Jul 24, 2000 at 11:38:00PM +0200, Daniel Veillard wrote:
> 
>   Okay, during OLS I did chat with quite a few people on the
> subsject of packaging. It actually happen to pop-up in similar
> way for others purposes:
>    - Gnome Bonobo component model needs a storage format which
>      could handle multiple streams within a single storage unit
>    - In the XML world, people are looking at packaging formats
>      to embed and possibly sign a number of related files with
>      a set of metadata giving description informations per file
>    - and of course for Linux packaging format.
>  

I'm glad to hear others are considering the same problem.

>  I'm a bit biased in the sense that it would really solve many
> of the targets I am chasing currently to have a single unified
> specification suitable for all of this.
>  I don't see why this would be a problem, the only strong suggestion
> I received from the people working on the Bonobo serialization
> is that they would prefer ZIP as the encapsulating format because
> you can seek in a ZIP and position directly to the index where a
> file starts in the archive without (like tar) scan the full
> archive.
>  I don't remember anyone suggesting ZIP as the potential format,
> is there any massive argument against using it (like some intelectual
> property crap applying to it) ? Is there strongs technical arguments
> against it too ? It seems to have the following good properties:
>    - allows seek
>    - ZIP archive format is very widely deployed
>    - there is existing code handling it (zip/unzip)
>    - would be suitable for a larger user base
>    - I bet any existing desktop file manager would be already able
>      to show/access the content of such a format
>    - it also probably doesn't exhibit the problem of tar where
>      the available implementations don't follow completely the
>      specification. Zip seems to be specified in RFC 1952
>      and quickly looking at it, it doesn't seems braindead.
>  

Um, compressing members rather than the whole archive, and putting a manifest
which included file sizes would permit direct seeking in all of
tar/cpio/ar, as well.

But, if ZIP is The Answer, then that's What Will Be Used. FWIW, FreeBSD
chose ZIP, possibly for similar reasons to above. Any chance that
there's something like zlib available for ZIP?

>  I am completely off-track ? Would people on the list accept to
> look at ZIP as the encapsulation format ?
> 
>   TIA,
> 

73 de Jeff

-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Jul 24 18:04:42 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (IDENT:root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id SAA13887;
	Mon, 24 Jul 2000 18:04:41 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA04559;
	Mon, 24 Jul 2000 18:04:41 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA01591;
	Mon, 24 Jul 2000 18:04:41 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA18650;
	Mon, 24 Jul 2000 18:08:29 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id SAA18638
	for packaging-list; Mon, 24 Jul 2000 18:08:24 -0400
Resent-Date: Mon, 24 Jul 2000 18:08:24 -0400
Resent-Message-Id: <200007242208.SAA18638@rpmfind.net>
Received: from tux.inrialpes.fr (IDENT:root@tux.inrialpes.fr [194.199.20.134])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id SAA18634
	for <packaging@rufus.w3.org>; Mon, 24 Jul 2000 18:08:19 -0400
Received: (from veillard@localhost)
	by tux.inrialpes.fr (8.9.3/8.9.3) id AAA25757
	for packaging@rufus.w3.org; Tue, 25 Jul 2000 00:04:09 +0200
Date: Tue, 25 Jul 2000 00:04:09 +0200
From: Daniel Veillard <Daniel.Veillard@w3.org>
To: packaging@rufus.w3.org
Subject: Re: [packaging] general format of a package archive
Message-ID: <20000725000409.H13932@w3.org>
References: <20000724233800.G13932@w3.org> <20000724174757.T19813@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <20000724174757.T19813@devserv.devel.redhat.com>; from jbj@redhat.com on Mon, Jul 24, 2000 at 05:47:57PM -0400
Organization: World Wide Web Consortium (W3C http://www.w3.org/)
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1276
Lines: 30


On Mon, Jul 24, 2000 at 05:47:57PM -0400, Jeff Johnson wrote:
> On Mon, Jul 24, 2000 at 11:38:00PM +0200, Daniel Veillard wrote:
> Um, compressing members rather than the whole archive, and putting a manifest
> which included file sizes would permit direct seeking in all of
> tar/cpio/ar, as well.

  Right, but it makes the format a bit less obvious.

> But, if ZIP is The Answer, then that's What Will Be Used. FWIW, FreeBSD
> chose ZIP, possibly for similar reasons to above. Any chance that
> there's something like zlib available for ZIP?

  Oops I was mislead, the RFC 1952 is about GZip compression format,
not ZIP, apologies. this removes at least one of the points in favor
of ZIP.
  Seems however that ZIP uses gzip for the compression and that there
is available code and a number of people maintaining it:
  http://www.info-zip.org/pub/infozip/

Daniel

-- 
Daniel.Veillard@w3.org | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux XML libxml WWW
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | Gnome rpm2html rpmfind
 http://www.w3.org/People/all#veillard%40w3.org  | RPM badminton Kaffe
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Jul 24 18:27:44 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (IDENT:root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id SAA15972;
	Mon, 24 Jul 2000 18:27:44 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id SAA10397;
	Mon, 24 Jul 2000 18:27:43 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id SAA02792;
	Mon, 24 Jul 2000 18:27:43 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id SAA20365;
	Mon, 24 Jul 2000 18:31:37 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id SAA20348
	for packaging-list; Mon, 24 Jul 2000 18:31:25 -0400
Resent-Date: Mon, 24 Jul 2000 18:31:25 -0400
Resent-Message-Id: <200007242231.SAA20348@rpmfind.net>
Received: from tux.inrialpes.fr (IDENT:root@tux.inrialpes.fr [194.199.20.134])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id SAA20330
	for <packaging@rufus.w3.org>; Mon, 24 Jul 2000 18:31:11 -0400
Received: (from veillard@localhost)
	by tux.inrialpes.fr (8.9.3/8.9.3) id AAA26568
	for packaging@rufus.w3.org; Tue, 25 Jul 2000 00:27:04 +0200
Date: Tue, 25 Jul 2000 00:27:04 +0200
From: Daniel Veillard <Daniel.Veillard@w3.org>
To: packaging@rufus.w3.org
Subject: [packaging] All the tags for Core
Message-ID: <20000725002704.I13932@w3.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
Organization: World Wide Web Consortium (W3C http://www.w3.org/)
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 697
Lines: 18


  I can't find anymore the list of all the core tags. I am trying
to allocate some time on packaging now and I feel a bit frustrated.
I have browsed my folder at least 2 times but could not find the list.
If someone still has it availble, could you please repost it ?

  thanks,

Daniel

-- 
Daniel.Veillard@w3.org | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux XML libxml WWW
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | Gnome rpm2html rpmfind
 http://www.w3.org/People/all#veillard%40w3.org  | RPM badminton Kaffe
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Jul 25 23:12:39 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (IDENT:root@lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.9.3/8.9.3) with ESMTP id XAA19478;
	Tue, 25 Jul 2000 23:12:31 -0400
Resent-From: packaging@rufus.w3.org
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id XAA06549;
	Tue, 25 Jul 2000 23:12:30 -0400
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.8.7/8.8.7) with ESMTP id XAA13997;
	Tue, 25 Jul 2000 23:12:30 -0400
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id XAA05270;
	Tue, 25 Jul 2000 23:16:29 -0400
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id XAA05254
	for packaging-list; Tue, 25 Jul 2000 23:16:17 -0400
Resent-Date: Tue, 25 Jul 2000 23:16:17 -0400
Resent-Message-Id: <200007260316.XAA05254@rpmfind.net>
Received: from home.lameter.com (mail@[216.59.82.89])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id XAA05240
	for <packaging@rufus.w3.org>; Tue, 25 Jul 2000 23:16:09 -0400
Received: from christoph by home.lameter.com with local (Exim 3.12 #1 (Debian))
	id 13HHbz-0006bp-00; Tue, 25 Jul 2000 20:11:59 -0700
Date: Tue, 25 Jul 2000 20:11:59 -0700
To: packaging@rufus.w3.org
Subject: Re: [packaging] general format of a package archive
Message-ID: <20000725201159.A23535@lameter.com>
References: <20000724233800.G13932@w3.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2i
In-Reply-To: <20000724233800.G13932@w3.org>; from Daniel.Veillard@w3.org on Mon, Jul 24, 2000 at 11:38:00PM +0200
From: Christoph Lameter <christoph@lameter.com>
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 650
Lines: 13


The KDE people had the same problem for their apps (Kword, Kspread etc). All
apps of KDE 2.x use XML but there is also the need to embed binary files for
pictures etc. I saw a presentation at the LinuxTag in Stuttgart on their
approach.

AFAIK They choose a tar.gz format with a particular layout for the
XML as well as attached binaries. It might be worth to have a look at their
experiences. Certainly the problem of seeking within the archive also exists
for them. Having a common library would simplify things for both projects.
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Mon Oct 30 20:01:53 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.11.0/8.11.0) with ESMTP id e9V11rP21064;
	Mon, 30 Oct 2000 20:01:53 -0500
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id UAA08288;
	Mon, 30 Oct 2000 20:01:52 -0500
Resent-From: packaging@rufus.w3.org
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.11.0/8.8.7) with ESMTP id e9V11qD10813;
	Mon, 30 Oct 2000 20:01:52 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id UAA29179;
	Mon, 30 Oct 2000 20:01:36 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id UAA29170
	for packaging-list; Mon, 30 Oct 2000 20:01:34 -0500
Resent-Date: Mon, 30 Oct 2000 20:01:34 -0500
Resent-Message-Id: <200010310101.UAA29170@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from devserv.devel.redhat.com (devserv.devel.redhat.com [207.175.42.156])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id UAA29166
	for <packaging@rufus.w3.org>; Mon, 30 Oct 2000 20:01:32 -0500
Received: (from msw@localhost)
	by devserv.devel.redhat.com (8.11.0/8.11.0) id e9V11VL21034
	for packaging@rufus.w3.org; Mon, 30 Oct 2000 20:01:31 -0500
Date: Mon, 30 Oct 2000 20:01:31 -0500
From: Matt Wilson <msw@redhat.com>
To: packaging@rufus.w3.org
Subject: [packaging] [jgg@debian.org: Packaging Stuff]
Message-ID: <20001030200131.D32707@devserv.devel.redhat.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 1045
Lines: 38


Thought the folks here may want to read up.

Matt

----- Forwarded message from Jason Gunthorpe <jgg@debian.org> -----

Date: Mon, 30 Oct 2000 17:47:53 -0700 (MST)
From: Jason Gunthorpe <jgg@debian.org>
To: msw@redhat.com
Subject: Packaging Stuff


Hey Matt,

If you recall we had a chat at OLS about the LSB packaging standard and I
suggested I might have time to put something together. I finally got
around to it - spurred by the recent discussions on lsb-discuss.

Alfredo Kengi Kojima (Conectiva) who wrote the APT module for RPM support
and I got together and defined a RPM subset that I think is sufficiently
compatible with DEB and featureful enough to serve for the LSB packaging
system. 

I'd really like your input on the idea,

http://auric.debian.org/~jgg/cps.txt

The approach I've taken is to describe a system in detail which ought to
be a proper subset of RPM.

Thanks,
Jason

----- End forwarded message -----
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Nov  7 13:59:07 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.11.0/8.11.0) with ESMTP id eA7Ix7025029;
	Tue, 7 Nov 2000 13:59:07 -0500
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id NAA22521;
	Tue, 7 Nov 2000 13:59:03 -0500
Resent-From: packaging@rufus.w3.org
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.11.0/8.8.7) with ESMTP id eA7Ix2D11633;
	Tue, 7 Nov 2000 13:59:02 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id NAA03111;
	Tue, 7 Nov 2000 13:58:42 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id NAA03094
	for packaging-list; Tue, 7 Nov 2000 13:58:39 -0500
Resent-Date: Tue, 7 Nov 2000 13:58:39 -0500
Resent-Message-Id: <200011071858.NAA03094@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from tux.inrialpes.fr (tux.inrialpes.fr [194.199.20.134])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id NAA03086
	for <packaging@rufus.w3.org>; Tue, 7 Nov 2000 13:58:36 -0500
Received: (from veillard@localhost)
	by tux.inrialpes.fr (8.9.3/8.9.3) id TAA32206;
	Tue, 7 Nov 2000 19:58:34 +0100
Date: Tue, 7 Nov 2000 19:58:34 +0100
From: Daniel Veillard <Daniel.Veillard@w3.org>
To: packaging@rufus.w3.org
Cc: George Kraft/Austin/IBM <gk4@us.ibm.com>
Subject: [packaging] Re: LSB Packaging/Install Taskforce(s)
Message-ID: <20001107195834.P14384@w3.org>
References: <OFEC7536C9.5E904D57-ON86256990.005D82A1@raleigh.ibm.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <OFEC7536C9.5E904D57-ON86256990.005D82A1@raleigh.ibm.com>; from gk4@us.ibm.com on Tue, Nov 07, 2000 at 11:13:52AM -0600
Organization: World Wide Web Consortium (W3C http://www.w3.org/)
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 6115
Lines: 142


[resending since it's w3.org not w3c.org :-)]

On Tue, Nov 07, 2000 at 11:13:52AM -0600, George Kraft/Austin/IBM wrote:
> I have the taskforce1 (LCD Packaging) and taskforce2 (Unified Packaging)
> email distribution lists setup.   The enclosed meeting notice will be
> mailed to these lists a few hours before the meeting.   This is the last
> time I will be directly addressing those on the CC line.
> https://sourceforge.net/mail/?group_id=1107
> 
> Date:                                  Wednesday 11/15, 11/29, 12/13,
> 12/27*, 1/10, 1/24
> Time:                                 5:00 PM UTC
>                                             12:00 PM EST (New York, NY)
>                                             11:00 AM CST (Dallas, Texas)
>                                             9:00 AM PST (San Jose,
> California)
> Agenda:                           To Be Announced
> Toll Free Number:        877-904-3118 (United States)
> Toll Number:                  212-287-1708 (International)
> Passcode:                      79490
> Conference Leader:    George Kraft @ IBM (512-838-2688)
> Timezones:
> http://www.smsu.edu/contrib/library/resource/time.html
> 
> George Kraft IV
> gk4@us.ibm.com
> 512-838-2688; t/l 678-2688
> IBM Linux Technology Center
> http://oss.software.ibm.com/developerworks/opensource/linux/
> FSG's Linux Standard Base
> http://sourceforge.net/projects/lsb/
> ---------------------- Forwarded by George Kraft/Austin/IBM on 11/07/2000
> 11:01 AM ---------------------------
> 
> George Kraft
> 11/06/2000 01:23 PM
> 
> To:   lsb-taskforce1@lists.sourceforge.net,
>       lsb-taskforce2@lists.sourceforge.net
> cc:   packaging@rufus.w3c.org, wichert@cistron.nl,
>       ian@chiark.greenend.org.uk, ewt@redhat.com, Jason Gunthorpe
>       <jgg@ualberta.ca>, Joey Hess <joey@valinux.com>,
>       rahul@reno.cis.upenn.edu, wol@thewolery.demon.co.uk,
>       bb@turbolinux.com, GuilhermeMarikegwm@conectiva.com.br,
>       jim@jimpick.com, marc@redhat.com, veillard@w3.org,
>       yeoh@users.sourceforge.net, jbj@redhat.com, nicholas@petreley.com
> From: George Kraft/Austin/IBM@IBMUS
> Subject:  LSB Packaging/Install Taskforce(s)
> 
> 
> Greetings,
> 
> There has been a revitalized and lively discussion regarding packaging and
> software installation being defined by the LSB.  You are addressed in this
> taskforce proposal, because of your work and/or interest with respect to
> this topic.    If you see any omissions in the CC line, then please feel
> free to forward this invitation.
> 
> I would like to propose the following:
> 
> 1) We individually review the work listed below and, by ourselves, briefly
> revisit the recent LSB discussions this past month
> http://lists.debian.org/lsb-discuss-0010/threads.html
> 
> I believe two things should happen from this input.   First, the LSB
> defines a common packaging and install methodology from an intersection of
> today's Linux distributions.   This is to go in LSB V1.0.   Secondly, we
> form another group to work on this unified packaging format with a
> meta-data database for the future. We need to remember, the LSB defines
> what already exists, then we write test cases for it.  The unified
> packaging format needs to be designed, then implemented and adopted by the
> majority of the Linux distributions.  The LSB cannot standardize on
> speculative technology.  Even though philosophically that is where we want
> to go as good citizens of the Linux community.
> 
> Please sign up to the LSB's new lsb-taskforce1 and/or lsb-taskforce2 email
> distribution lists.  https://sourceforge.net/mail/?group_id=1107    I would
> like us to all work offline from the main lsb-discuss and lsb-spec forums
> until we have a completed draft standard.
> 
> 2) I'll ask for a volunteer to lead taskforce1 for the package/install LCD,
> and I'll ask for a volunteer to lead taskforce2 for the unified packaging
> format.  I would like to ask for support and cooperation from everyone in
> one or both groups.
> 
> 3) Let's  telephone conference every other week for 60  minutes until
> LinuxWorld this coming February.  The first 30 minutes for taskforce1 and
> the second 30 minutes for taskforce2.  We'll start on Wednesday November
> 15th at 11:00 AM CST.  [11/15, 11/29, 12/13, 12/27, 1/10, 1/24]
> 
> 4) Let's meet in New York City Tuesday 1/30 during the week of the
> LinuxWorld Expo.  http://www.linuxworldexpo.com/   We can meet down the
> street at IBM on 590 Madison Ave from 8:30 AM to 5:00 PM.  During the
> morning we will finish off the pakage/install LCD for LSB 1.0, and in the
> afternoon we'll work on the unified packaging format.
> 
> Thanks,
> 
> George (gk4)
> 
> 
> LSB Packaging Workgroup: Erik Toan, Ian Jackson, Wickert Akkerman
> 
> W3C Packaging Workgroup: Wichert Akkerman, Matt Wilson, Daniel Veillard,
> Jeff Johnson
> 
> Rahul Dave, "LSB Package Metadata Format"
> http://reno.cis.upenn.edu/~rahul/standards/packrdf/packformat.html
> 
> Daniel Veillard, "Linux Packages Metadata Mirroring Proposal"
> http://rpmfind.net/linux/rpm2html/mirroring.html
> 
> Jason Gunthorpe, Alfredo Kengi Kojima, "A Compatible Subset of RPM"
> http://auric.debian.org/~jgg/cps.txt
> 
> Linux Standard Base, "LSB Package Format and Installation"
> http://www.linuxbase.org/spec/spec/p4910.html
> 
> Linux Standard Base, "LSB FAQ: Packaging"
> http://www.linuxbase.org/spec/faq.html#pckg
> 
> LSB Volunteers: Anthony Youngman, Boda Bauer, Guilherme Marike, Nick
> Petreley
> 
> George Kraft IV
> gk4@us.ibm.com
> 512-838-2688; t/l 678-2688
> IBM Linux Technology Center
> http://oss.software.ibm.com/developerworks/opensource/linux/
> FSG's Linux Standard Base
> http://sourceforge.net/projects/lsb/
> 

-- 
Daniel.Veillard@w3.org | W3C, INRIA Rhone-Alpes  | libxml Gnome XML toolkit
Tel : +33 476 615 257  | 655, avenue de l'Europe | http://xmlsoft.org/
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | Rpmfind search site
 http://www.w3.org/People/all#veillard%40w3.org  | http://rpmfind.net/
----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

From packaging@rufus.w3.org  Tue Nov  7 15:52:40 2000
Return-Path: <packaging@rufus.w3.org>
Received: from lacrosse.corp.redhat.com (lacrosse.corp.redhat.com [207.175.42.154])
	by devserv.devel.redhat.com (8.11.0/8.11.0) with ESMTP id eA7Kqd006159;
	Tue, 7 Nov 2000 15:52:39 -0500
Received: from mail.redhat.com (mail.redhat.com [199.183.24.239])
	by lacrosse.corp.redhat.com (8.9.3/8.9.3) with ESMTP id PAA08172;
	Tue, 7 Nov 2000 15:52:39 -0500
Resent-From: packaging@rufus.w3.org
Received: from rpmfind.net (rufus.w3.org [18.29.1.67])
	by mail.redhat.com (8.11.0/8.8.7) with ESMTP id eA7KqcD02782;
	Tue, 7 Nov 2000 15:52:38 -0500
Received: from rpmfind.w3.org (localhost [127.0.0.1])
	by rpmfind.net (8.9.3/8.9.3) with SMTP id PAA21994;
	Tue, 7 Nov 2000 15:52:15 -0500
Received: (from majordomo@localhost)
	by rpmfind.net (8.9.3/8.9.3) id PAA21980
	for packaging-list; Tue, 7 Nov 2000 15:52:13 -0500
Resent-Date: Tue, 7 Nov 2000 15:52:13 -0500
Resent-Message-Id: <200011072052.PAA21980@rpmfind.net>
X-Authentication-Warning: rpmfind.net: majordomo set sender to packaging-request@rufus.w3.org using -f
Received: from e23.nc.us.ibm.com (e23.nc.us.ibm.com [32.97.136.229])
	by rpmfind.net (8.9.3/8.9.3) with ESMTP id PAA21971
	for <packaging@rufus.w3.org>; Tue, 7 Nov 2000 15:52:11 -0500
Received: from southrelay02.raleigh.ibm.com (southrelay02.raleigh.ibm.com [9.37.3.209])
	by e23.nc.us.ibm.com (8.9.3/8.9.3) with ESMTP id PAA72582
	for <packaging@rufus.w3.org>; Tue, 7 Nov 2000 15:23:40 -0600
Received: from d04nms18.raleigh.ibm.com (d04nms17.raleigh.ibm.com [9.67.228.17])
	by southrelay02.raleigh.ibm.com (8.8.8m3/NCO v4.95) with ESMTP id PAA34518
	for <packaging@rufus.w3.org>; Tue, 7 Nov 2000 15:50:51 -0500
Importance: Normal
Subject: [packaging] LSB Packaging/Install Taskforce(s)
To: packaging@rufus.w3.org
X-Mailer: Lotus Notes Release 5.0.3 (Intl) 21 March 2000
Message-ID: <OF186C92E7.7B1E8F27-ON86256990.0071E760@raleigh.ibm.com>
From: "George Kraft/Austin/IBM" <gk4@us.ibm.com>
Date: Tue, 7 Nov 2000 14:44:30 -0600
X-MIMETrack: Serialize by Router on D04NMS18/04/M/IBM(Release 5.0.3 (Intl)|21 March 2000) at
 11/07/2000 03:50:51 PM
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii
Sender: packaging-request@rufus.w3.org
Precedence: list
Reply-To: packaging@rufus.w3.org
Errors-To: packaging-error@rufus.w3.org
X-loop: packaging@rufus.w3.org
X-mailing-list: packaging@rufus.w3.org
Status: RO
Content-Length: 5444
Lines: 134


I have the taskforce1 (LCD Packaging) and taskforce2 (Unified Packaging)
email distribution lists setup.   The enclosed meeting notice will be
mailed to these lists a few hours before the meeting.   This is the last
time I will be directly addressing those on the CC line.
https://sourceforge.net/mail/?group_id=1107

Date:                                  Wednesday 11/15, 11/29, 12/13,
12/27*, 1/10, 1/24
Time:                                 5:00 PM UTC
                                            12:00 PM EST (New York, NY)
                                            11:00 AM CST (Dallas, Texas)
                                            9:00 AM PST (San Jose,
California)
Agenda:                           To Be Announced
Toll Free Number:        877-904-3118 (United States)
Toll Number:                  212-287-1708 (International)
Passcode:                      79490
Conference Leader:    George Kraft @ IBM (512-838-2688)
Timezones:
http://www.smsu.edu/contrib/library/resource/time.html

George Kraft IV
gk4@us.ibm.com
512-838-2688; t/l 678-2688
IBM Linux Technology Center
http://oss.software.ibm.com/developerworks/opensource/linux/
FSG's Linux Standard Base
http://sourceforge.net/projects/lsb/
---------------------- Forwarded by George Kraft/Austin/IBM on 11/07/2000
11:01 AM ---------------------------

George Kraft
11/06/2000 01:23 PM

To:   lsb-taskforce1@lists.sourceforge.net,
      lsb-taskforce2@lists.sourceforge.net
cc:   packaging@rufus.w3c.org, wichert@cistron.nl,
      ian@chiark.greenend.org.uk, ewt@redhat.com, Jason Gunthorpe
      <jgg@ualberta.ca>, Joey Hess <joey@valinux.com>,
      rahul@reno.cis.upenn.edu, wol@thewolery.demon.co.uk,
      bb@turbolinux.com, GuilhermeMarikegwm@conectiva.com.br,
      jim@jimpick.com, marc@redhat.com, veillard@w3.org,
      yeoh@users.sourceforge.net, jbj@redhat.com, nicholas@petreley.com
From: George Kraft/Austin/IBM@IBMUS
Subject:  LSB Packaging/Install Taskforce(s)


Greetings,

There has been a revitalized and lively discussion regarding packaging and
software installation being defined by the LSB.  You are addressed in this
taskforce proposal, because of your work and/or interest with respect to
this topic.    If you see any omissions in the CC line, then please feel
free to forward this invitation.

I would like to propose the following:

1) We individually review the work listed below and, by ourselves, briefly
revisit the recent LSB discussions this past month
http://lists.debian.org/lsb-discuss-0010/threads.html

I believe two things should happen from this input.   First, the LSB
defines a common packaging and install methodology from an intersection of
today's Linux distributions.   This is to go in LSB V1.0.   Secondly, we
form another group to work on this unified packaging format with a
meta-data database for the future. We need to remember, the LSB defines
what already exists, then we write test cases for it.  The unified
packaging format needs to be designed, then implemented and adopted by the
majority of the Linux distributions.  The LSB cannot standardize on
speculative technology.  Even though philosophically that is where we want
to go as good citizens of the Linux community.

Please sign up to the LSB's new lsb-taskforce1 and/or lsb-taskforce2 email
distribution lists.  https://sourceforge.net/mail/?group_id=1107    I would
like us to all work offline from the main lsb-discuss and lsb-spec forums
until we have a completed draft standard.

2) I'll ask for a volunteer to lead taskforce1 for the package/install LCD,
and I'll ask for a volunteer to lead taskforce2 for the unified packaging
format.  I would like to ask for support and cooperation from everyone in
one or both groups.

3) Let's  telephone conference every other week for 60  minutes until
LinuxWorld this coming February.  The first 30 minutes for taskforce1 and
the second 30 minutes for taskforce2.  We'll start on Wednesday November
15th at 11:00 AM CST.  [11/15, 11/29, 12/13, 12/27, 1/10, 1/24]

4) Let's meet in New York City Tuesday 1/30 during the week of the
LinuxWorld Expo.  http://www.linuxworldexpo.com/   We can meet down the
street at IBM on 590 Madison Ave from 8:30 AM to 5:00 PM.  During the
morning we will finish off the pakage/install LCD for LSB 1.0, and in the
afternoon we'll work on the unified packaging format.

Thanks,

George (gk4)


LSB Packaging Workgroup: Erik Toan, Ian Jackson, Wickert Akkerman

W3C Packaging Workgroup: Wichert Akkerman, Matt Wilson, Daniel Veillard,
Jeff Johnson

Rahul Dave, "LSB Package Metadata Format"
http://reno.cis.upenn.edu/~rahul/standards/packrdf/packformat.html

Daniel Veillard, "Linux Packages Metadata Mirroring Proposal"
http://rpmfind.net/linux/rpm2html/mirroring.html

Jason Gunthorpe, Alfredo Kengi Kojima, "A Compatible Subset of RPM"
http://auric.debian.org/~jgg/cps.txt

Linux Standard Base, "LSB Package Format and Installation"
http://www.linuxbase.org/spec/spec/p4910.html

Linux Standard Base, "LSB FAQ: Packaging"
http://www.linuxbase.org/spec/faq.html#pckg

LSB Volunteers: Anthony Youngman, Boda Bauer, Guilherme Marike, Nick
Petreley

George Kraft IV
gk4@us.ibm.com
512-838-2688; t/l 678-2688
IBM Linux Technology Center
http://oss.software.ibm.com/developerworks/opensource/linux/
FSG's Linux Standard Base
http://sourceforge.net/projects/lsb/


----
message from packaging@rufus.w3.org
to unsubscribe : echo "unsubscribe packging" | mail majordomo@rufus.w3.org

